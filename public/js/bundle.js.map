{"version":3,"file":"js/bundle.js","mappings":"UAAIA,E,kBCAJ,IAAIC,EAAM,CACT,aAAc,KACd,aAAc,KACd,gBAAiB,KACjB,aAAc,KACd,qBAAsB,KACtB,cAAe,KACf,eAAgB,KAChB,aAAc,KACd,aAAc,KACd,aAAc,KACd,qBAAsB,KACtB,kBAAmB,KACnB,wBAAyB,KACzB,aAAc,KACd,aAAc,KACd,aAAc,KACd,YAAa,KACb,cAAe,KACf,qBAAsB,KACtB,cAAe,KAIhB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOP,EAAIE,EACZ,CACAD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,EACpB,EACAC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,I,iBCzCpB,IAAIH,EAAM,CACT,gBAAiB,KACjB,cAAe,IACf,aAAc,KACd,YAAa,KACb,cAAe,KAIhB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,EAC5B,CACA,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,CACP,CACA,OAAOP,EAAIE,EACZ,CACAD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,EACpB,EACAC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,I,uECvBL,MAAMY,EACN,iBACbC,EAAAA,EAAAA,QACAC,EAAAA,EAAAA,QACA,E,6DC8BF,WAAgBC,MAlChB,WACC,IAAKC,EAAAA,EAAAA,MAAAA,cACJ,OAGD,MAAMC,EAAuB,GAE7B,IAAK,MAAMC,KAAWF,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,SAA4C,CACjE,IAAIG,GAAU,EAEd,IAAK,MAAMC,KAAWF,EAAQG,SACzBD,EAAQE,QACXF,EAAQE,OAAQ,EAChBH,GAAU,GAIRA,GACHF,EAAWM,KAAKL,EAAQlB,GAEzB,CAWD,OARKwB,SAASC,KAAKC,UAAUC,SAAS,WAAaV,EAAWW,OAAS,GACtEC,EAAAA,EAAAA,KAAY,qBAAsB,CACjCC,OAAQd,EAAAA,EAAAA,MAAAA,eAA2Be,QAAQ/B,GAC3CiB,WAAYA,EACZK,OAAO,KAIF,CACP,E,4DCED,WAAgBP,MAlChB,WACC,IAAKC,EAAAA,EAAAA,MAAAA,cACJ,OAGD,MAAMC,EAAuB,GAE7B,IAAK,MAAMC,KAAWF,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,SAA4C,CACjE,IAAIG,GAAU,EAEd,IAAK,MAAMC,KAAWF,EAAQG,SACxBD,EAAQE,QACZF,EAAQE,OAAQ,EAChBH,GAAU,GAIRA,GACHF,EAAWM,KAAKL,EAAQlB,GAEzB,CAWD,OARKwB,SAASC,KAAKC,UAAUC,SAAS,WAAaV,EAAWW,OAAS,GACtEC,EAAAA,EAAAA,KAAY,qBAAsB,CACjCC,OAAQd,EAAAA,EAAAA,MAAAA,eAA2Be,QAAQ/B,GAC3CiB,WAAYA,EACZK,OAAO,KAIF,CACP,E,qCC7BD,MAAMU,EAAWC,EAAAA,MAEjB,UAAeD,EAASzB,OAAO2B,QAAgC,CAACC,EAAKC,KACpE,MAAMC,EAAUD,EAAKE,UAAU,EAAGF,EAAKR,OAAS,GAEhD,MAAgB,UAAZS,IAIJF,EAAIE,GAAWL,EAASI,GAAMG,SAHtBJ,CAKR,GACE,CAAC,E,uEC8BJ,WAAgBpB,MA5ChB,SAAeyB,GACd,GAAIA,EAAKZ,OAAS,EAAG,CACpB,IAAIa,EAAWD,EAAK,GAEpB,GAAIC,EAASb,OAAS,EAAG,CACxB,MAAMc,EAAY1B,EAAAA,EAAAA,MAAAA,eAA2B2B,QAAQC,cAAcC,UAC7DC,EAAcN,EAAK,GAAGO,MAAM,KAElC,GAAIL,GAAaA,EAAUd,OAAS,EACnC,IAAK,IAAIoB,EAAI,EAAGA,EAAIF,EAAYlB,OAAQoB,IAClCN,EAAUO,SAASH,EAAYE,GAAG,MACtCF,EAAYE,GAAKN,EAAU,GAAKI,EAAYE,IAK/CP,EAAWK,EAAYI,KAAK,KAE5B,MAAMC,EAAOnC,EAAAA,EAAAA,QAAAA,4BAA0CyB,GAEvD,IAAIU,EAUH,OAPInC,EAAAA,EAAAA,MAAAA,eACHa,EAAAA,EAAAA,KAAY,QAAS,CACpBuB,KAAO,SAAQX,KAAYD,EAAKZ,OAAS,EAAIY,EAAK,GAAK,KACvDV,OAAQd,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,MAIH,GATPqC,EAAAA,EAAAA,IAAgBF,EAWjB,CACD,MAAM,GAAgD,YAA5CnC,EAAAA,EAAAA,MAAAA,eAA2Be,QAAQuB,KAO7C,OALAzB,EAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQd,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,GACRoC,KAAO,SAAQpC,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,UAGT,CAER,E,4DCpBD,WAAgBD,MAvBhB,SAAeyB,GACd,QAAKxB,EAAAA,EAAAA,MAAAA,SAAAA,gBAILuC,EAAAA,GAAAA,KACO,CACLC,KAAM,gBACNC,OAAQ,CACPzD,GAAIgB,EAAAA,EAAAA,MAAAA,eAA2Be,QAAQ/B,IAExC0D,MAAO,CACNC,EAAGnB,EAAKU,KAAK,QAGdU,OAAOxD,IAEPyD,QAAQC,MAAO,uCAAsC1D,EAAEc,UAAvD,KAGK,EACP,E,4BCED,KACC6C,aA3BoB,CACpB,CAAC,KAAM,SACP,CAAC,KAAM,SACP,CAAC,KAAM,QACP,CAAC,KAAM,SACP,CAAC,KAAM,OACP,CAAC,KAAM,SACP,CAAC,KAAM,WACP,CAAC,KAAM,UACP,CAAC,KAAM,UACP,CAAC,KAAM,eACP,CAAC,KAAM,QACP,CAAC,KAAM,cACP,CAAC,KAAM,cACP,CAAC,KAAM,QACP,CAAC,KAAM,QACP,CAAC,KAAM,eAYP/B,SAAU,GACVgC,YAVmB,CACnBC,WAAY,QACZC,eAAgB,WAChBC,OAAQ,UACRC,kBAAmB,cAQnBC,qBAAsB,I,4BC/BvB,MAAMC,EAAS,IAAIC,IAkDnB,QAhDA,MAOCC,GAAGlB,EAAcmB,GACZH,EAAOI,IAAIpB,GACdgB,EAAOK,IAAIrB,GAAM/B,KAAKkD,GAEtBH,EAAOM,IAAItB,EAAM,CAACmB,GAEnB,CAQDI,IAAIvB,EAAcmB,GACbH,EAAOI,IAAIpB,IACdgB,EAAOM,IACNtB,EACAgB,EAAOK,IAAIrB,GAAMwB,QAAQC,GAAkCA,IAASN,IAGtE,CAQDO,KAAK1B,KAAiB2B,GACjBX,EAAOI,IAAIpB,IACdgB,EACEK,IAAIrB,GACJ4B,QACArF,KAAK4E,IACLA,KAAWQ,EAAX,GAGH,E,4BC3CF,IAJA,UAAmBE,EAAIC,IAAwBC,EAAIC,IAClD,OAAOC,KAAKC,MAAML,EAAKE,EAAID,EAAKE,EAChC,C,4BCFD,MAAMG,EAAQ,CAAC,QAAS,MAAO,MAAO,MAAO,MAAO,OAEpD,IAAgBC,IAEf,MAAMC,EAAID,EAAO,EAAIH,KAAKK,MAAML,KAAKM,IAAIH,GAAQH,KAAKM,IAAI,OAAS,EAEnE,MAAQ,GADUC,YAAYJ,EAAOH,KAAKQ,IAAI,KAAMJ,IAAIK,QAAQ,OACzCP,EAAME,IAJ9B,C,4CCAA,KAAgBhD,EAASZ,OACnBY,EAAQsD,aAAelE,EAAQmE,WAA8B,UAAjBnE,EAAQuB,MAIrDtC,EAAAA,EAAAA,MAAAA,eAA6Be,IAAYf,EAAAA,EAAAA,MAAAA,cAAAA,Q,4BCP9C,IAAgBmF,IAE4B,aAAzCA,EAAMrE,OAAuBsE,SACY,UAAzCD,EAAMrE,OAAuBsE,YAQrBD,EAAMrE,OAAeuE,K,qDCThC,IAAgBC,GAAwBC,IAAMD,GAAME,OAAO,wB,4BCQ3D,KACC5B,IAAI6B,EAAaJ,GAChB,IACCK,OAAOC,aAAaC,QAAQH,EAAKJ,EAGjC,CAFC,MAAOjG,GAER,CACD,EACDuE,IAAI8B,GACH,IACC,OAAOC,OAAOC,aAAaE,QAAQJ,EAInC,CAHC,MAAOrG,GAER,OAAO,IACP,CACD,EACD0G,OAAOL,GACN,IACCC,OAAOC,aAAaI,WAAWN,EAG/B,CAFC,MAAOrG,GAER,CACD,EACD4G,QACC,IACCN,OAAOC,aAAaK,OAGpB,CAFC,MAAO5G,GAER,CACD,E,4BCrCF,KACC6G,SACCP,OAAO5F,SAASmG,QAChB,E,gHCJIjH,GAAG,UAAUkH,MAAM,SAASC,KAAK,WAAW,aAAW,W,GAE1DC,EAAAA,EAAAA,GAME,OALDC,IAAI,uCACJH,MAAM,OACNI,IAAI,aACJC,MAAM,MACNC,OAAO,OALR,S,GAOAJ,EAAAA,EAAAA,GAME,OALDC,IAAI,gDACJH,MAAM,gBACNI,IAAI,aACJC,MAAM,MACNC,OAAO,OALR,S,GAQAJ,EAAAA,EAAAA,GAA6C,SAAtCK,IAAI,mBAAkB,YAAQ,G,eAehCP,MAAM,sB,GACVE,EAAAA,EAAAA,GAA6C,SAAtCK,IAAI,mBAAkB,YAAQ,G,oBAgBfP,MAAM,S,uGC7BhC,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,iBACNmE,QACC,MAAMC,GAAYC,EAAAA,EAAAA,KAAI,GAMtB,MAAO,CACND,YACAE,QANe,KACfF,EAAUvB,OAASuB,EAAUvB,KAA7B,EAOD,I,UC3BF,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,wCDJ1D0B,EAAAA,EAAAA,IAcM,aAbLC,EAAAA,EAAAA,IAAgCC,EAAAA,OAAA,WAAzBL,UAAYK,EAAAA,aACnBb,EAAAA,EAAAA,GAWO,QAVNS,IAAI,eACJvE,KAAK,SACJ4D,OAAK,wE,0BAAuGe,EAAAA,aAI5G,aAAYA,EAAAA,UAAS,gCACrBH,QAAK,Y,QAAEG,EAAAA,SAAAA,EAAAA,WAAAA,KART,EAUCb,EAAAA,EAAAA,GAAoE,QAA7D,aAAYa,EAAAA,UAAS,iCAA5B,WAVD,O,KD4DF,GAAeP,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,SACN0E,WAAY,CACXC,eAAcA,GAEfR,QACC,MAAMS,GAAWP,EAAAA,EAAAA,KAAI,GACfQ,GAAaR,EAAAA,EAAAA,KAAI,GAEjBS,GAAWT,EAAAA,EAAAA,IAA6B,MACxCU,GAAWV,EAAAA,EAAAA,IAA6B,MAExCW,EAAe,KACpBJ,EAAS/B,OAAQ,EACjBgC,EAAWhC,OAAQ,CAAnB,EAmCD,OARAoC,EAAAA,EAAAA,KAAU,KACT5G,EAAAA,EAAAA,GAAU,cAAe2G,EAAzB,KAGDE,EAAAA,EAAAA,KAAgB,KACf7G,EAAAA,EAAAA,IAAW,cAAe2G,EAA1B,IAGM,CACNJ,WACAC,aACAC,WACAC,WACAI,SArCiBxC,IAGjB,GAFAA,EAAMyC,kBAEDN,EAASjC,QAAUkC,EAASlC,MAChC,OAGD+B,EAAS/B,OAAQ,EACjBgC,EAAWhC,OAAQ,EAEnB,MAAMwC,EAAS,CACdC,KAAMR,EAASjC,OAAOA,MACtBkC,SAAUA,EAASlC,OAAOA,OAG3BxF,EAAAA,EAAAA,IAAY,OAAQgI,EAAOC,MAE3BjH,EAAAA,EAAAA,KAAY,eAAgBgH,EAA5B,EAqBAE,cAlBqB,IACdlI,EAAAA,EAAAA,IAAY,QAmBpB,IGjHF,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,2EHJ1DkH,EAAAA,EAAAA,IAqDM,MArDN,EAqDM,EApDLX,EAAAA,EAAAA,GAmDO,QAnDDF,MAAM,YAAY8B,OAAO,OAAOC,OAAO,GAAIN,SAAM,Y,QAAEV,EAAAA,UAAAA,EAAAA,YAAAA,KAAzD,CACCiB,EAOAC,EAQAC,GACAhC,EAAAA,EAAAA,GAYE,SAXDpH,GAAG,kBACH6H,IAAI,WACJX,MAAM,QACN5D,KAAK,OACLE,KAAK,WACL6F,eAAe,OACfC,YAAY,MACZC,aAAa,WACZlD,MAAO4B,EAAAA,gBACRuB,SAAA,GACAC,UAAA,IAXD,WAcArC,EAAAA,EAAAA,GAeM,MAfN,EAeM,CAdLsC,GACAC,EAAAA,EAAAA,IAYiBC,EAAA,MAZMrH,SAAO,SAAEsH,GAAS,EACxCzC,EAAAA,EAAAA,GAUE,SATDpH,GAAG,kBACH6H,IAAI,WACHvE,KAAMuG,EAAUjC,UAAS,kBAC1BpE,KAAK,WACL0D,MAAM,QACNmC,eAAe,OACfC,YAAY,MACZC,aAAa,mBACbC,SAAA,IATD,a,QAcSvB,EAAAA,aAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAAiE,MAAjE,EAAqC,4BAArC,gBAEAX,EAAAA,EAAAA,GAAuE,UAA9D0C,SAAU7B,EAAAA,SAAU3E,KAAK,SAAS4D,MAAM,OAAM,UAAO,EAAA6C,IAlD/D,K,kCIDI/J,GAAG,UAAUkH,MAAM,SAASC,KAAK,WAAW,aAAW,W,GACtDD,MAAM,U,GAINA,MAAM,S,WAKQ,a,GAUjBE,EAAAA,EAAAA,GAAyB,UAArB,oBAAgB,G,GACfF,MAAM,e,GACVE,EAAAA,EAAAA,GAAsC,SAA/BK,IAAI,gBAAe,QAAI,G,GAS1BP,MAAM,e,GACVE,EAAAA,EAAAA,GAAwC,SAAjCK,IAAI,gBAAe,UAAM,G,GAC3BP,MAAM,c,GAUVE,EAAAA,EAAAA,GAAyC,QAAnCpH,GAAG,yBAAwB,KAAC,G,GAa/BkH,MAAM,e,GACVE,EAAAA,EAAAA,GAA8C,SAAvCK,IAAI,oBAAmB,YAAQ,G,cAgBlCP,MAAM,e,GACVE,EAAAA,EAAAA,GAAe,sB,GACVF,MAAM,c,GACHA,MAAM,O,0BAMV,iC,SAIDA,MAAM,8CACN,aAAW,0F,GAINA,MAAM,O,WAKV,qC,GAMLE,EAAAA,EAAAA,GAAuB,UAAnB,kBAAc,G,GACbF,MAAM,e,IACVE,EAAAA,EAAAA,GAAe,sB,IACVF,MAAM,c,IACHO,IAAI,wB,YAMR,kB,IAMCP,MAAM,e,IACVE,EAAAA,EAAAA,GAAoD,SAA7CK,IAAI,qBAAoB,iBAAa,G,IACvCP,MAAM,c,IASVE,EAAAA,EAAAA,GAA8C,QAAxCpH,GAAG,8BAA6B,KAAC,G,IAcpCkH,MAAM,e,IACVE,EAAAA,EAAAA,GAAyD,SAAlDK,IAAI,yBAAwB,kBAAc,G,IAY7CP,MAAM,e,IACVE,EAAAA,EAAAA,GAAyD,SAAlDK,IAAI,yBAAwB,kBAAc,G,gBAoBnDL,EAAAA,EAAAA,GAAyB,UAArB,oBAAgB,G,IACfF,MAAM,e,IACVE,EAAAA,EAAAA,GAAsC,SAA/BK,IAAI,gBAAe,QAAI,G,IAS1BP,MAAM,e,IACVE,EAAAA,EAAAA,GAA8C,SAAvCK,IAAI,oBAAmB,YAAQ,G,gBAkBxCL,EAAAA,EAAAA,GAAyB,UAArB,oBAAgB,G,IACfF,MAAM,e,IACVE,EAAAA,EAAAA,GAAsC,SAA/BK,IAAI,gBAAe,QAAI,G,UAazBP,MAAM,e,IACVE,EAAAA,EAAAA,GAA8C,SAAvCK,IAAI,oBAAmB,YAAQ,G,IAWnCP,MAAM,e,IACVE,EAAAA,EAAAA,GAA+C,SAAxCK,IAAI,oBAAmB,aAAS,G,IASnCP,MAAM,e,IACVE,EAAAA,EAAAA,GAAuD,SAAhDK,IAAI,wBAAuB,iBAAa,G,UAW1CP,MAAM,e,IACVE,EAAAA,EAAAA,GAUQ,SAVDK,IAAI,oBAAkB,UAAC,eAE7BL,EAAAA,EAAAA,GAOO,QANNF,MAAM,+CACN,aAAW,8FAFZ,EAMCE,EAAAA,EAAAA,GAA6B,UAArBF,MAAM,mBARhB,G,uBAuBIA,MAAM,e,IACVE,EAAAA,EAAAA,GAA8C,SAAvCK,IAAI,oBAAmB,YAAQ,G,IAYjCP,MAAM,e,IACVE,EAAAA,EAAAA,GAAe,sB,IACVF,MAAM,c,IACHA,MAAM,O,YAC4C,uB,UAK1BA,MAAM,e,IACtCE,EAAAA,EAAAA,GAA8C,SAAvCK,IAAI,oBAAmB,YAAQ,G,gBAoBxCL,EAAAA,EAAAA,GAAuC,MAAnCpH,GAAG,cAAa,kBAAc,G,IAC7BkH,MAAM,2BAA2BC,KAAK,QAAQ,kBAAgB,c,IAC3DD,MAAM,O,2BAOV,uB,IAGIA,MAAM,O,2BAOV,sC,UAKFA,MAAM,O,2BAQJ,wC,IAMEA,MAAM,e,IACVE,EAAAA,EAAAA,GAA6C,SAAtCK,IAAI,oBAAmB,WAAO,G,IAUjCP,MAAM,e,IACVE,EAAAA,EAAAA,GAA8C,SAAvCK,IAAI,oBAAmB,YAAQ,G,sBAiBMP,MAAM,yB,KACnDE,EAAAA,EAAAA,GAA6E,SAA1E,0EAAsE,IACzEA,EAAAA,EAAAA,GAGI,SAHD,wIAGH,IACAA,EAAAA,EAAAA,GAA8C,aAAzCA,EAAAA,EAAAA,GAAmC,YAA7B,4BAAX,I,4BAM+B,gB,YACd,WC5YtB,QAAeM,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,gBACNmE,MAAK,KAGG,CACN3G,OAHagJ,EAAAA,EAAAA,UCJhB,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDJ1DjC,EAAAA,EAAAA,IAA6F,UAArFb,MAAM,KAAK,aAAW,sBAAuBY,QAAK,eAAEG,EAAAA,MAAMgC,OAAM,mB,KDiczE,IAAevC,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN0E,WAAY,CACXC,eADW,EAEX+B,cAAaA,IAEdC,MAAO,CACNC,aAAc,CACb9G,KAAM+G,SACNb,UAAU,GAEXc,SAAU,CACThH,KAAM9C,OACNgJ,UAAU,GAEXM,SAAUS,SAEX5C,MAAMwC,GACL,MAAMnJ,GAAQgJ,EAAAA,EAAAA,MACRQ,GAAS3C,EAAAA,EAAAA,IAAI7G,EAAMyJ,MAAMC,qBACzBC,GAAmB9C,EAAAA,EAAAA,IAAIsC,EAAMG,UAAUhC,UACvCsC,GAAuB/C,EAAAA,EAAAA,KAAI,GAE3BgD,GAAiBhD,EAAAA,EAAAA,IAA6B,OAEpDiD,EAAAA,EAAAA,IAAMF,GAAuBG,IACxBA,IACEC,EAAAA,EAAAA,KAAS,KACbH,EAAexE,OAAO4E,OAAtB,GAEF,IAGD,MAAMC,GAAgBrD,EAAAA,EAAAA,IAA6B,MAE7CsD,EAAsB,KACtBD,EAAc7E,QAKnB6E,EAAc7E,MAAM+E,MAAM5D,OAAS,GAGnC0D,EAAc7E,MAAM+E,MAAM5D,OAAU,GAAEjC,KAAK8F,KAC1CH,EAAc7E,MAAMiF,aAAe,OADpC,GAKDR,EAAAA,EAAAA,KACC,IAAMX,EAAMG,UAAUtI,WACtB,MACMgJ,EAAAA,EAAAA,KAAS,KACbG,GAAqB,GADtB,KAMFL,EAAAA,EAAAA,KACC,IAAMX,EAAMG,UAAUiB,MACrBC,IACA,MAAMC,EAAQ,CAAC,KAAM,MACfC,EAAUF,EAAkB,EAAI,EAIlCrB,EAAMG,UAAUqB,OAASF,EAAMC,KAClCvB,EAAMG,SAASqB,KAAOF,EAAM,EAAIC,GACjC,IAIF,MAMME,GAAgB/D,EAAAA,EAAAA,IAA6B,MA2BnD,MAAO,CACN7G,QACAwJ,SACAI,uBACAC,iBACAK,gBACAC,sBACAU,YAxCoBvI,IAChB6G,EAAMG,WACTH,EAAMG,SAASwB,KAAOxI,EACvB,EAsCAsI,gBACAG,cAlCsB5F,IACtB,IAAKyF,EAAcvF,MAClB,OAGD,MAAM2F,EAAcJ,EAAcvF,MAE7B2F,EAAY3F,OAAS2F,EAAY3F,QAAUsE,EAAiBtE,QAChE2F,EAAY3F,MAASF,EAAMrE,QAA6BuE,OAGzDsE,EAAiBtE,MAASF,EAAMrE,QAA6BuE,KAA7D,EAwBAsC,SArBiBxC,IACjB,MAAM8F,EAAW,IAAIC,SAAS/F,EAAMrE,QAC9BqK,EAA+B,CAAC,EAEtCF,EAASG,SAAQ,CAAC/F,EAAOI,KACxB0F,EAAK1F,GAAOJ,CAAZ,IAGD8D,EAAMC,aAAa+B,EAAnB,EAeD,IG9iBF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,uGHN1DpE,EAAAA,EAAAA,IAuZM,MAvZN,EAuZM,EAtZLX,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADLuC,EAAAA,EAAAA,IAAiB0C,MAElBjF,EAAAA,EAAAA,GAkZO,QAlZDF,MAAM,YAAY8B,OAAO,OAAOC,OAAO,GAAIN,SAAM,wB,QAAUV,EAAAA,UAAAA,EAAAA,YAAAA,IAAQ,eAAzE,EACCb,EAAAA,EAAAA,GAaK,KAbL,EAaK,CAZYa,EAAAA,SAASqE,OAAAA,EAAAA,EAAAA,OAAzBvE,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,WAFVW,EAAAA,EAAAA,GAA2D,S,qCAA3Ca,EAAAA,SAASqE,KAAIE,GAAElJ,KAAK,SAASE,KAAK,QAAlD,iBAAgByE,EAAAA,SAASqE,SAEf,QAFiD,UACtDG,EAAAA,EAAAA,IAAGxE,EAAAA,SAASzE,MAAI,IAFtB,kBAIAuE,EAAAA,EAAAA,IAOWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,GAJHwB,EAAAA,QAAQyE,aAAezE,EAAAA,OAAOwC,MAAMC,qBAAqBiC,SAAAA,EAAAA,EAAAA,OADhE5E,EAAAA,EAAAA,IAIWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,UAFV,QACGgG,EAAAA,EAAAA,IAAGxE,EAAAA,SAASzE,MAAI,IAHpB,sBAFD,OASgByE,EAAAA,QAAQyE,YA6JJzE,EAAAA,OAAOyE,cAAgBzE,EAAAA,MAAMwC,MAAMC,qBAAqBiC,SAAAA,EAAAA,EAAAA,OAA7E5E,EAAAA,EAAAA,IA6BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CA5BVmG,IACAxF,EAAAA,EAAAA,GASM,MATN,GASM,CARLyF,IAQK,SAPLzF,EAAAA,EAAAA,GAME,SALDpH,GAAG,e,uCACWiI,EAAAA,SAASzE,KAAIgJ,GAC3BtF,MAAM,QACN1D,KAAK,OACLsJ,UAAU,OALX,iBAEe7E,EAAAA,SAASzE,UAAAA,EAAAA,C,MAAvB,SAMF4D,EAAAA,EAAAA,GAgBM,MAhBN,GAgBM,CAfL2F,IACApD,EAAAA,EAAAA,IAaiBC,EAAA,CAXhB1C,MAAM,iCAA+B,CAD9B3E,SAAO,SAAEsH,GAAS,WAGzBzC,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,mB,uCACMiI,EAAAA,SAASM,SAAQiE,GAC1BtF,MAAM,QACL5D,KAAMuG,EAAUjC,UAAS,kBAC1BoF,YAAY,6BACZxJ,KAAK,WACLsJ,UAAU,OAPX,kBAEU7E,EAAAA,SAASM,e,SApBtB,uBA7JyBmE,EAAAA,EAAAA,OAAzB3E,EAAAA,EAAAA,IA4JWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CA3JVwG,GACA7F,EAAAA,EAAAA,GASM,MATN,EASM,CARLsC,GAQK,SAPLtC,EAAAA,EAAAA,GAME,SALDpH,GAAG,e,qCACWiI,EAAAA,SAASzE,KAAIgJ,GAC3BtF,MAAM,QACN1D,KAAK,OACLsJ,UAAU,OALX,iBAEe7E,EAAAA,SAASzE,UAAAA,EAAAA,C,MAAvB,SAMF4D,EAAAA,EAAAA,GAwBM,MAxBN,EAwBM,CAvBL8F,GACA9F,EAAAA,EAAAA,GAqBM,MArBN,EAqBM,WApBLA,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,e,qCACWiI,EAAAA,SAASkF,KAAIX,GAC3BtF,MAAM,QACN1D,KAAK,OACL,aAAW,iBACXsJ,UAAU,MACVtD,SAAA,IAPD,iBAEevB,EAAAA,SAASkF,UAAAA,EAAAA,C,MAAvB,MAODC,GAWK,SAVLhG,EAAAA,EAAAA,GASE,SARDpH,GAAG,e,qCACMiI,EAAAA,SAAS0D,KAAIa,GACtBtF,MAAM,QACN5D,KAAK,SACL+J,IAAI,IACJC,IAAI,QACJ9J,KAAK,OACL,aAAW,eARZ,iBAEUyE,EAAAA,SAAS0D,aAUrBvE,EAAAA,EAAAA,GAgBM,MAhBN,EAgBM,CAfLmG,GACA5D,EAAAA,EAAAA,IAaiBC,EAAA,CAXhB1C,MAAM,iCAA+B,CAD9B3E,SAAO,SAAEsH,GAAS,WAGzBzC,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,mB,qCACMiI,EAAAA,SAASM,SAAQiE,GAC1BtF,MAAM,QACL5D,KAAMuG,EAAUjC,UAAS,kBAC1BoF,YAAY,6BACZxJ,KAAK,WACLsJ,UAAU,OAPX,iBAEU7E,EAAAA,SAASM,e,SASrBnB,EAAAA,EAAAA,GA2BM,MA3BN,EA2BM,CA1BLoG,GACApG,EAAAA,EAAAA,GAwBM,MAxBN,EAwBM,EAvBLA,EAAAA,EAAAA,GAcQ,QAdR,EAcQ,WAbPA,EAAAA,EAAAA,GAKE,S,qCAJQa,EAAAA,SAASsD,IAAGiB,GACrBlJ,KAAK,WACLE,KAAK,MACJsG,SAAU7B,EAAAA,SAASwF,cAJrB,iBACUxF,EAAAA,SAASsD,OAYZ,EALAtD,EAAAA,SAASwF,eAAAA,EAAAA,EAAAA,OADhB1F,EAAAA,EAAAA,IAKC,OALD,EAIE,YAJF,kBAODX,EAAAA,EAAAA,GAOQ,QAPR,EAOQ,WANPA,EAAAA,EAAAA,GAIE,S,qCAHQa,EAAAA,SAASyF,mBAAkBlB,GACpClJ,KAAK,WACLE,KAAK,sBAHN,iBACUyE,EAAAA,SAASyF,sBAKZ,QAIVC,GACAvG,EAAAA,EAAAA,GAaM,MAbN,EAaM,CAZLwG,IACAxG,EAAAA,EAAAA,GAUM,MAVN,GAUM,EATLA,EAAAA,EAAAA,GAQQ,QARR,GAQQ,WAPPA,EAAAA,EAAAA,GAKE,SAJDpH,GAAG,uB,qCACMiI,EAAAA,SAAS4F,aAAYrB,GAC9BlJ,KAAK,WACLE,KAAK,gBAJN,iBAEUyE,EAAAA,SAAS4F,gBAKZ,SAGM5F,EAAAA,SAAS4F,eAAAA,EAAAA,EAAAA,OAAzB9F,EAAAA,EAAAA,IAyDWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EAxDVW,EAAAA,EAAAA,GAuBM,MAvBN,GAuBM,CAtBL0G,IACA1G,EAAAA,EAAAA,GAoBM,MApBN,GAoBM,WAnBLA,EAAAA,EAAAA,GAOE,SANDpH,GAAG,oB,qCACWiI,EAAAA,SAAS8F,UAASvB,GAChCtF,MAAM,QACN1D,KAAK,YACL,aAAW,aACXsJ,UAAU,OANX,iBAEe7E,EAAAA,SAAS8F,eAAAA,EAAAA,C,MAAvB,MAMDC,IAWK,SAVL5G,EAAAA,EAAAA,GASE,SARDpH,GAAG,oB,qCACMiI,EAAAA,SAASgG,UAASzB,GAC3BtF,MAAM,QACN5D,KAAK,SACL+J,IAAI,IACJC,IAAI,QACJ9J,KAAK,YACL,aAAW,cARZ,iBAEUyE,EAAAA,SAASgG,kBAWrB7G,EAAAA,EAAAA,GAWM,MAXN,GAWM,CAVL8G,IAUK,SATL9G,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,wBACH6H,IAAI,qB,uCACUI,EAAAA,SAASkG,cAAa3B,GACpCtF,MAAM,iBACN1D,KAAK,gBACLsJ,UAAU,MACVE,YAAY,kBAPb,iBAGe/E,EAAAA,SAASkG,mBAAAA,EAAAA,C,MAAvB,SAQF/G,EAAAA,EAAAA,GAiBM,MAjBN,GAiBM,CAhBLgH,IACAzE,EAAAA,EAAAA,IAciBC,EAAA,CAZhB1C,MAAM,iCAA+B,CAD9B3E,SAAO,SAAEsH,GAAS,WAGzBzC,EAAAA,EAAAA,GASE,SARDpH,GAAG,wBACH6H,IAAI,gB,uCACKI,EAAAA,SAASoG,cAAa7B,GAC/BtF,MAAM,QACL5D,KAAMuG,EAAUjC,UAAS,kBAC1BoF,YAAY,iBACZxJ,KAAK,gBACLsJ,UAAU,OARX,kBAGU7E,EAAAA,SAASoG,oB,SAhDtB,sBAlGD,KA4LAC,IACAlH,EAAAA,EAAAA,GAYM,MAZN,GAYM,CAXLmH,IAWK,SAVLnH,EAAAA,EAAAA,GASE,SARDpH,GAAG,e,uCACMiI,EAAAA,SAASuG,KAAIhC,GACtBtF,MAAM,aACN1D,KAAK,OACLiL,QAAQ,aACR3B,UAAU,MACVtD,SAAA,GACCkF,QAAK,c,QAAEzG,EAAAA,eAAAA,EAAAA,iBAAAA,KART,iBAEUA,EAAAA,SAASuG,UASHvG,EAAAA,QAAQ0G,UACxB,iBADwBA,EAAAA,EAAAA,OACxB5G,EAAAA,EAAAA,IAUM,MAVN,GAUM,CATL6G,IASK,SARLxH,EAAAA,EAAAA,GAOE,SANDpH,GAAG,mBACH6H,IAAI,gB,uCACUI,EAAAA,SAASK,SAAQkE,GAC/BtF,MAAM,iBACN1D,KAAK,WACLsJ,UAAU,OANX,iBAGe7E,EAAAA,SAASK,cAAAA,EAAAA,C,MAAvB,UAOHlB,EAAAA,EAAAA,GASM,MATN,GASM,CARLyH,IAQK,SAPLzH,EAAAA,EAAAA,GAME,SALDpH,GAAG,mB,uCACWiI,EAAAA,SAAS6G,SAAQtC,GAC/BtF,MAAM,QACN1D,KAAK,WACLsJ,UAAU,OALX,iBAEe7E,EAAAA,SAAS6G,cAAAA,EAAAA,C,MAAvB,SAMF1H,EAAAA,EAAAA,GAUM,MAVN,GAUM,CATL2H,IASK,SARL3H,EAAAA,EAAAA,GAOE,SANDpH,GAAG,uB,uCACWiI,EAAAA,SAAS+G,aAAYxC,GACnCjD,aAAa,MACbrC,MAAM,QACN1D,KAAK,eACLwJ,YAAY,uCANb,iBAEe/E,EAAAA,SAAS+G,kBAAAA,EAAAA,C,MAAvB,QAOc/G,EAAAA,SAASqE,OAASrE,EAAAA,MAAMwC,MAAMC,qBAAqBiC,SAAAA,EAAAA,EAAAA,OAClE5E,EAAAA,EAAAA,IAqBM,MArBN,GAqBM,CApBLkH,IAWA7H,EAAAA,EAAAA,GAQE,YAPDpH,GAAG,mBACH6H,IAAI,gBACJ0B,aAAa,MACZlD,MAAO4B,EAAAA,SAASjG,SAAWiG,EAAAA,SAASjG,SAASkB,KAAI,SAClDgE,MAAM,QACN1D,KAAK,WACJkL,QAAK,c,QAAEzG,EAAAA,qBAAAA,EAAAA,uBAAAA,KAPT,eAWoBA,EAAAA,SAASqE,MAC9B,iBAD8BA,EAAAA,EAAAA,OAC9BvE,EAAAA,EAAAA,IAQM,MARN,GAQM,CAPLmH,IAOK,SANL9H,EAAAA,EAAAA,GAKE,SAJDpH,GAAG,mB,uCACWiI,EAAAA,SAAS/E,KAAIsJ,GAC3BtF,MAAM,QACN1D,KAAK,QAJN,iBAEeyE,EAAAA,SAAS/E,UAAAA,EAAAA,C,MAAvB,SAOa+E,EAAAA,MAAMwC,MAAMC,qBAAqBiC,SAAAA,EAAAA,EAAAA,OAAjD5E,EAAAA,EAAAA,IA8BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CA7BMwB,EAAAA,QAAQyE,cAAAA,EAAAA,EAAAA,OAAxB3E,EAAAA,EAAAA,IA4BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EA3BVW,EAAAA,EAAAA,GAQM,MARN,GAQM,CAPL+H,IACA/H,EAAAA,EAAAA,GAKM,MALN,GAKM,EAJLA,EAAAA,EAAAA,GAGQ,QAHR,GAGQ,WAFPA,EAAAA,EAAAA,GAAwD,S,uCAAxCa,EAAAA,qBAAoBuE,GAAElJ,KAAK,YAA3C,iBAAgB2E,EAAAA,wBAET,SAGCA,EAAAA,uBAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAiBM,MAjBN,GAiBM,CAhBLqH,IACAzF,EAAAA,EAAAA,IAciBC,EAAA,CAZhB1C,MAAM,iCAA+B,CAD9B3E,SAAO,SAAEsH,GAAS,WAGzBzC,EAAAA,EAAAA,GASE,SARDpH,GAAG,mBACH6H,IAAI,iB,uCACKI,EAAAA,SAASM,SAAQiE,GAC1BtF,MAAM,QACL5D,KAAMuG,EAAUjC,UAAS,kBAC1BoF,YAAY,6BACZxJ,KAAK,WACLsJ,UAAU,OARX,kBAGU7E,EAAAA,SAASM,e,UATrB,gBAVD,sBADD,kBA+BAR,EAAAA,EAAAA,IA4EWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CA3EV4I,IACAjI,EAAAA,EAAAA,GAkCM,MAlCN,GAkCM,EAjCLA,EAAAA,EAAAA,GASQ,QATR,GASQ,EARPA,EAAAA,EAAAA,GAME,SALAkI,SAAUrH,EAAAA,SAAS6D,KACpBxI,KAAK,QACLE,KAAK,OACL6C,MAAM,GACLkJ,SAAM,iBAAEtH,EAAAA,YAAW,MALrB,YAQO,MACRb,EAAAA,EAAAA,GASQ,QATR,GASQ,EARPA,EAAAA,EAAAA,GAME,SALAkI,QAAsB,UAAbrH,EAAAA,SAAS6D,KACnBxI,KAAK,QACLE,KAAK,OACL6C,MAAM,QACLkJ,SAAM,iBAAEtH,EAAAA,YAAW,WALrB,YAQO,MAEAA,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAAU1E,EAAAA,SAASsD,MAAAA,EAAAA,EAAAA,OAD5DxD,EAAAA,EAAAA,IAYQ,QAZR,GAYQ,EARPX,EAAAA,EAAAA,GAME,SALAkI,QAAsB,aAAbrH,EAAAA,SAAS6D,KACnBxI,KAAK,QACLE,KAAK,OACL6C,MAAM,WACLkJ,SAAM,iBAAEtH,EAAAA,YAAW,cALrB,YAQO,OAZR,iBAe4B,UAAbA,EAAAA,SAAS6D,OAAI,WAA7B/D,EAAAA,EAAAA,IA6BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EA5BVW,EAAAA,EAAAA,GAUM,MAVN,GAUM,CATLoI,IASK,SARLpI,EAAAA,EAAAA,GAOE,SANDpH,GAAG,sB,uCACWiI,EAAAA,SAASwH,YAAWjD,GAClCtF,MAAM,QACN1D,KAAK,cACLsJ,UAAU,MACVtD,SAAA,IAND,iBAEevB,EAAAA,SAASwH,iBAAAA,EAAAA,C,MAAvB,SAOFrI,EAAAA,EAAAA,GAgBM,MAhBN,GAgBM,CAfLsI,IACA/F,EAAAA,EAAAA,IAaiBC,EAAA,CAXhB1C,MAAM,iCAA+B,CAD9B3E,SAAO,SAAEsH,GAAS,WAGzBzC,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,uB,uCACMiI,EAAAA,SAAS0H,aAAYnD,GAC9BtF,MAAM,QACL5D,KAAMuG,EAAUjC,UAAS,kBAC1BpE,KAAK,eACLsJ,UAAU,MACVtD,SAAA,IAPD,kBAEUvB,EAAAA,SAAS0H,mB,SApBtB,KA8B6B,aAAb1H,EAAAA,SAAS6D,OAAI,WAA7B/D,EAAAA,EAAAA,IAOM,MAPN,GAOM6H,MAPN,gBApED,MA8EAxI,EAAAA,EAAAA,GAKM,aAJLA,EAAAA,EAAAA,GAGS,UAHD9D,KAAK,SAAS4D,MAAM,MAAO4C,WAAU7B,EAAAA,UAA7C,CACiBA,EAAAA,SAASqE,OAAAA,EAAAA,EAAAA,OAAzBvE,EAAAA,EAAAA,IAAsDwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAAtD,kBACAsB,EAAAA,EAAAA,IAAmCwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAAnC,MAFD,SA7YF,K,KIMF,IAAeiB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,UACN0E,WAAY,CACX2H,YAAWA,IAEZ1F,MAAO,CACN2F,YAAatP,QAEdmH,MAAMwC,GACL,MAAMnJ,GAAQgJ,EAAAA,EAAAA,MAERF,GAAWjC,EAAAA,EAAAA,KAAI,GAuFrB,MAAO,CACNyC,UATgBzC,EAAAA,EAAAA,IAChBrH,OAAOuP,OACN,CAAC,EACD/O,EAAMyJ,MAAMC,qBAAqBJ,SA3EN7G,KAC5B,IAAKA,EACJ,MAAO,CAAC,EAGT,MAAMuM,EAAoC,CAAC,EAE3C,IAAK,IAAIvJ,KAAOjG,OAAOD,KAAKkD,GAAS,CACpC,IAAI4C,EAAQ5C,EAAOgD,GAYnB,GATIwJ,MAAMC,QAAQ7J,KACjBA,EAAQA,EAAM,IAIH,aAARI,IACHA,EAAM,QAILjG,OAAO2P,UAAUC,eAAeC,KAChCrP,EAAMyJ,MAAMC,qBAAqBJ,SACjC7D,MAQDzF,EAAMyJ,MAAMC,qBAAqBgC,cACjC,CAAC,OAAQ,OAAQ,OAAQ,MAAO,sBAAsBzJ,SAASwD,IAmBhE,OAdY,SAARA,IACHJ,EAAQA,EACNtD,MAAM,KACNlD,KAAKsD,GACAA,EAAKmN,MAAM,WAITnN,EAHE,IAAGA,MAKZD,KAAK,cAIOlC,EAAMyJ,MAAMC,qBAAqBJ,SAAS7D,IACxD,IAAK,UAEHuJ,EAAavJ,GADA,MAAVJ,GAA2B,UAAVA,KAGEA,EAGvB,MACD,IAAK,SACJ2J,EAAavJ,GAAO8J,OAAOlK,GAC3B,MACD,IAAK,SACJ2J,EAAavJ,GAAO+J,OAAOnK,GAG9B,CAEA,OAAO2J,CAAP,EAOCS,CAAoBtG,EAAM2F,eAM3BhG,WACAM,aAxFqB+B,IACrBrC,EAASzD,OAAQ,EACjBxE,EAAAA,EAAAA,KAAY,cAAesK,EAA3B,EAwFD,IC3GF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wEDJ1DuE,EAAAA,EAAAA,IAAuFC,EAAA,CAAzE,gBAAe1I,EAAAA,aAAeqC,SAAUrC,EAAAA,SAAW6B,SAAU7B,EAAAA,UAA3E,+C,eEAKjI,GAAG,WAAWkH,MAAM,SAASC,KAAK,WAAW,aAAW,Y,IACvDD,MAAM,U,IAKNA,MAAM,a,ICLLA,MAAM,iB,IACZE,EAAAA,EAAAA,GAAiB,UAAb,YAAQ,G,IACRD,KAAK,aAAa,aAAW,iB,8DCcnC,QAAeO,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,qBACN2G,MAAO,CACN3G,KAAM,CACLF,KAAMkN,OACNhH,UAAU,GAEXoH,UAAW,CACVtN,KAAMkN,OACNhH,UAAU,GAEXqH,GAAI,CACHvN,KAAMkN,OACNhH,UAAU,IAGZ7B,MAAK,KAGG,CACNmJ,OAHaC,EAAAA,EAAAA,UC5BhB,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wEDJ1DhJ,EAAAA,EAAAA,IAUK,MAVA,aAAYE,EAAAA,KAAMd,KAAK,MAAO,gBAAec,EAAAA,MAAMzE,OAASyE,EAAAA,KAAM,gBAAc,YAArF,EACC0B,EAAAA,EAAAA,IAQcqH,EAAA,CAR2CH,GAAE,aAAiB5I,EAAAA,GAAIgJ,OAAA,IAAhF,CAAoB1O,SAAO,SAC1B,EAD6B2O,WAAUC,mBAAa,EACpD/J,EAAAA,EAAAA,GAMS,UALPF,OAAK,gBAAWe,EAAAA,UAAS,CAAAmJ,OAAWD,KACpCrJ,QAAOoJ,EACPG,YAAQ,QAAQH,EAAQ,aAH1B,QAKIjJ,EAAAA,MAAI,GAAAiB,O,KANT,WADD,K,KD+FD,IAAexB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,eACN0E,WAAY,CACXoJ,eAAcA,MG1FhB,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,2EHL1DvJ,EAAAA,EAAAA,IAQQ,QARR,GAQQ,CAPPmB,IACA9B,EAAAA,EAAAA,GAKK,KALL,GAKK,EAJJuC,EAAAA,EAAAA,IAA4D4H,EAAA,CAA5C/N,KAAK,UAAU,aAAW,UAAUqN,GAAG,MACvDlH,EAAAA,EAAAA,IAA4E4H,EAAA,CAA5D/N,KAAK,aAAa,aAAW,aAAaqN,GAAG,gBAC7DlH,EAAAA,EAAAA,IAAqF4H,EAAA,CAArE/N,KAAK,gBAAgB,aAAW,gBAAgBqN,GAAG,mBACnElH,EAAAA,EAAAA,IAAmE4H,EAAA,CAAnD/N,KAAK,UAAU,aAAW,UAAUqN,GAAG,e,KDa1D,IAAenJ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,WACN0E,WAAY,CACXgC,cADW,GAEXsH,WAAUA,IAEX7J,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MAsBd,MAAO,CACNuF,SArBiBpJ,IACjB,MAEM3C,EAAQ2C,EAAMrE,OAA4B0B,KAEhD,GAJe,CAAC,eAAgB,eAAgB,mBAIrCP,SAASO,GACnB,OAGD,IAAI6C,EAGHA,EAD+C,aAA3CF,EAAMrE,OAA4BwB,KAC7B6C,EAAMrE,OAA4BwN,QAElCnJ,EAAMrE,OAA4BuE,MAGvCrF,EAAMyQ,SAAS,kBAAmB,CAACjO,OAAM6C,QAAOqL,MAAM,GAA3D,EAMD,IK9CF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,6HLJ1D3J,EAAAA,EAAAA,IAWM,MAXN,GAWM,EAVLX,EAAAA,EAAAA,GAEM,MAFN,GAEM,EADLuC,EAAAA,EAAAA,IAAiB0C,MAElB1C,EAAAA,EAAAA,IAAcgI,IAEdvK,EAAAA,EAAAA,GAIM,MAJN,GAIM,EAHLA,EAAAA,EAAAA,GAEO,QAFDS,IAAI,eAAe0B,aAAa,MAAOgG,SAAM,Y,QAAEtH,EAAAA,UAAAA,EAAAA,YAAAA,IAAWU,SAAM,sBAAP,QAAe,eAA9E,EACCgB,EAAAA,EAAAA,IAA2BiI,IAD5B,Q,eMPG5R,GAAG,OAAOkH,MAAM,SAASC,KAAK,WAAW,aAAW,Q,IACnDD,MAAM,U,IAGNA,MAAM,a,IACVE,EAAAA,EAAAA,GAA2B,MAAvBF,MAAM,SAAQ,QAAI,G,IAElBA,MAAM,sB,IACTE,EAAAA,EAAAA,GAA6B,YAAvB,oBAAgB,G,YAKnB,iB,YACD,M,IAIEF,MAAM,S,YAIN,wC,wBAKA,W,YACD,O,YAIG,a,wBAMD,Y,YAC4D,S,IAC7DE,EAAAA,EAAAA,GAAmB,YAAb,UAAM,G,YACZ,iC,YAGE,a,wBAMD,Y,YAC0D,S,YAE3D,+B,IAMJA,EAAAA,EAAAA,GAQI,WAPHA,EAAAA,EAAAA,GAMC,KALAyK,KAAK,0BACL/P,OAAO,SACPgQ,IAAI,WACJ5K,MAAM,gBACL,aANH,G,IASAE,EAAAA,EAAAA,GAQI,WAPHA,EAAAA,EAAAA,GAMC,KALAyK,KAAK,+BACL/P,OAAO,SACPgQ,IAAI,WACJ5K,MAAM,sBACL,mBANH,G,IASAE,EAAAA,EAAAA,GAQI,WAPHA,EAAAA,EAAAA,GAMC,KALAyK,KAAK,oDACL/P,OAAO,SACPgQ,IAAI,WACJ5K,MAAM,qBACL,sBANH,G,qBAamBA,MAAM,a,IACzBE,EAAAA,EAAAA,GAA2D,OAAtDF,MAAM,mBAAkB,4BAAwB,G,IACrDE,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAoB,SAAjB,mBADJ,G,IADA2K,GACAjE,I,UAKmB5G,MAAM,a,IACzBE,EAAAA,EAAAA,GAA4D,OAAvDF,MAAM,mBAAkB,6BAAyB,G,IACtDE,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAoB,SAAjB,mBADJ,G,IADA4K,GACA9D,I,UAKmBhH,MAAM,a,KACzBE,EAAAA,EAAAA,GAAwD,OAAnDF,MAAM,mBAAkB,yBAAqB,IAClDE,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAqD,SAAlD,oDADJ,I,UAKmBF,MAAM,a,KACzBE,EAAAA,EAAAA,GAAyD,OAApDF,MAAM,mBAAkB,0BAAsB,IACnDE,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAyD,SAAtD,wDADJ,I,IAKDA,EAAAA,EAAAA,GAA2B,UAAvB,sBAAkB,G,IAEjBF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAgB,WAAX,SAAK,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/CA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAE9CA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAoD,SAAjD,mDADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAgB,WAAX,SAAK,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/CA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAE9CA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAwD,SAArD,uDADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAgB,WAAX,SAAK,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/CA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAE9CA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAgC,SAA7B,+BADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAgB,WAAX,SAAK,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/CA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAE9CA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAA8B,SAA3B,6BADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAqD,SAAlD,oDADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAyD,SAAtD,wDADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAuD,SAApD,sDADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAsB,SAAnB,qBADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAgC,SAA7B,+BADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAuC,SAApC,sCADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAoC,SAAjC,mCADJ,G,IAKIF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAc,WAAT,OAAG,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC9BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAA+B,SAA5B,8BADJ,G,IAKDA,EAAAA,EAAAA,GAUM,OAVDF,MAAM,aAAW,EACrBE,EAAAA,EAAAA,GAEM,OAFDF,MAAM,WAAS,EACnBE,EAAAA,EAAAA,GAA2B,cAArBA,EAAAA,EAAAA,GAAc,WAAT,YAEZA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,SAHD,oHALL,G,IAYAA,EAAAA,EAAAA,GAA6B,UAAzB,wBAAoB,G,IAEnBF,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAqBM,OArBDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAKI,mBALD,wHAGFA,EAAAA,EAAAA,GAAiB,YAAX,SAEH,QAFc,wGAGlBA,EAAAA,EAAAA,GAII,mBAJD,4FAEQA,EAAAA,EAAAA,GAAiB,YAAX,SAEb,QAFwB,sEAG5BA,EAAAA,EAAAA,GAQI,mBARD,qCAEFA,EAAAA,EAAAA,GAKC,KAJAyK,KAAK,sDACL/P,OAAO,SACPgQ,IAAI,YACH,SAEC,QADF,UAnBH,G,IAwBI5K,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,mBAHD,iDAEFA,EAAAA,EAAAA,GAAkC,QAA5BF,MAAM,YAAW,SACpB,QAD+B,UAHpC,G,IAQIA,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,mBAHD,iDAEFA,EAAAA,EAAAA,GAA6C,QAAvCF,MAAM,iBAAgB,eACzB,QAD0C,UAH/C,G,IAQIA,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,mBAHD,iDAEFA,EAAAA,EAAAA,GAAuC,QAAjCF,MAAM,cAAa,YACtB,QADoC,UAHzC,G,IAQIA,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,mBAHD,iDAEFA,EAAAA,EAAAA,GAAqD,QAA/CF,MAAM,qBAAoB,mBAC7B,QADkD,UAHvD,G,IAQIA,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,mBAHD,iDAEFA,EAAAA,EAAAA,GAA6C,QAAvCF,MAAM,iBAAgB,eACzB,QAD0C,UAH/C,G,IAQIA,MAAM,a,IACLA,MAAM,W,gBACYE,EAAAA,EAAAA,GAAe,WAAV,QAAI,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,gBAC/BA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,WAAOA,EAAAA,EAAAA,GAAY,WAAP,KAAC,I,IAEjCA,EAAAA,EAAAA,GAKM,OALDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAGI,SAHD,uFADJ,G,mpPAgZ8CF,MAAM,a,KACpDE,EAAAA,EAAAA,GAEM,OAFDF,MAAM,WAAS,EACnBE,EAAAA,EAAAA,GAA0B,YAApB,mBADP,IAGAA,EAAAA,EAAAA,GAEM,OAFDF,MAAM,eAAa,EACvBE,EAAAA,EAAAA,GAAwD,SAArD,uDADJ,I,81CCnvBoD,gB,YAEO,mB,YAA0B,uB,IAEtFA,EAAAA,EAAAA,GAAM,mB,oCAMgD,uEAEtDA,EAAAA,EAAAA,GAA8B,YAAxB,qBAAiB,I,QAAO,yC,IAG9BA,EAAAA,EAAAA,GAAgC,SAA7B,6BAAyB,G,IAY5BA,EAAAA,EAAAA,GAA+D,SAA5D,4DAAwD,GAY9D,QAAeM,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,iBACNmE,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MAERiI,EAAW,KAChBjR,EAAMiJ,OAAO,cAAe,MAC5BjJ,EAAMiJ,OAAO,gBAAiB,WAC9BpI,EAAAA,EAAAA,KAAY,YAAZ,EASD,OANA4G,EAAAA,EAAAA,KAAU,KACJzH,EAAMyJ,MAAMyH,aAChBD,GACD,IAGM,CACNjR,QACAiR,WAED,ICxDF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDJ1DlK,EAAAA,EAAAA,IAiCM,OAjCD/H,GAAG,kBAAmBkH,OAAK,SAAGe,EAAAA,MAAMwC,MAAM0H,iBAA/C,CACmC,YAAzBlK,EAAAA,MAAMwC,MAAM0H,gBAAa,WAAlCpK,EAAAA,EAAAA,IAA2E,IAAAqK,GAAzB,2BAAlD,eACkC,gBAAzBnK,EAAAA,MAAMwC,MAAM0H,gBAAa,WAAlCpK,EAAAA,EAAAA,IASI,IAAAmB,GAAA,KARQ9B,EAAAA,EAAAA,GAAoD,UAAAqF,EAAAA,EAAAA,IAA9CxE,EAAAA,MAAMwC,MAAMyH,aAAaG,OAAOC,SAAO,GACxCrK,EAAAA,MAAMwC,MAAMyH,aAAaG,OAAOE,aAAAA,EAAAA,EAAAA,OAAhDxK,EAAAA,EAAAA,IAAsFwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAAtF,qBAOG,GALH+L,IAEApL,EAAAA,EAAAA,GAEI,KAFAyK,KAAM5J,EAAAA,MAAMwC,MAAMyH,aAAaG,OAAOI,IAAK3Q,OAAO,SAASgQ,IAAI,YAAW,wBAE9E,EAAApI,QARD,eAUkC,iBAAzBzB,EAAAA,MAAMwC,MAAM0H,gBAAa,WAAlCpK,EAAAA,EAAAA,IAGI,IAAA2K,GAAAC,MAHJ,eAIyC,eAAzB1K,EAAAA,MAAMwC,MAAM0H,gBAAa,WAAzCpK,EAAAA,EAAAA,IAWWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAVV8G,GAGOtF,EAAAA,MAAMwC,MAAMmI,qBAAAA,EAAAA,EAAAA,OADnB7K,EAAAA,EAAAA,IAOS,U,MALR/H,GAAG,YACHkH,MAAM,gBACLY,QAAK,Y,QAAEG,EAAAA,UAAAA,EAAAA,YAAAA,KACR,iBALD,gBAHD,qBAYyC,UAAzBA,EAAAA,MAAMwC,MAAM0H,gBAAa,WAAzCpK,EAAAA,EAAAA,IAIWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAHVoM,IAEAzL,EAAAA,EAAAA,GAAiF,UAAzEpH,GAAG,YAAYkH,MAAM,gBAAiBY,QAAK,Y,QAAEG,EAAAA,UAAAA,EAAAA,YAAAA,KAAU,cAHhE,sBA5BD,E,KDu0BD,IAAeP,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,OACN0E,WAAY,CACXgC,cADW,GAEX4I,eAAcA,IAEfnL,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MAId,MAAO,CACN+I,QAJeC,UAAUC,SAAS3C,MAAM,6BAA8B,EAKtE4C,QAJeF,UAAUG,eAAiB,EAK1CnS,QAED,IGj1BF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,iIHJ1D+G,EAAAA,EAAAA,IA8zBM,MA9zBN,GA8zBM,EA7zBLX,EAAAA,EAAAA,GAEM,MAFN,GAEM,EADLuC,EAAAA,EAAAA,IAAiB0C,MAElBjF,EAAAA,EAAAA,GAyzBM,MAzzBN,GAyzBM,CAxzBLgC,IAEAhC,EAAAA,EAAAA,GASK,KATL,GASK,CARJoL,IACApL,EAAAA,EAAAA,GAMQ,uBAND,MACLqF,EAAAA,EAAAA,IAAGxE,EAAAA,MAAMwC,MAAMC,qBAAqB4H,SAAU,KAAE,IAAA3I,EAAAA,EAAAA,IAIhDqH,EAAA,CAHAhR,GAAG,iBACH6Q,GAAG,cAF6C,C,kBAG/C,IAAa,O,MAER,QAGTzJ,EAAAA,EAAAA,GAoEM,MApEN,GAoEM,EAnELuC,EAAAA,EAAAA,IAAkByJ,GAEFnL,EAAAA,MAAMwC,MAAMC,qBAAqB2I,YAAAA,EAAAA,EAAAA,OAAjDtL,EAAAA,EAAAA,IAoCWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EAnCVW,EAAAA,EAAAA,GAOI,cANgCA,EAAAA,EAAAA,GAKlC,KAJCyK,KAAI,+CAAiD5J,EAAAA,MAAMwC,MAAMC,qBAAqB2I,YACvFvR,OAAO,SACPgQ,IAAI,YAH8B,KAI1B1K,EAAAA,EAAAA,GAA6D,aAAAqF,EAAAA,EAAAA,IAApDxE,EAAAA,MAAMwC,MAAMC,qBAAqB2I,WAAS,IAJzB,MAMhC,MAEJjM,EAAAA,EAAAA,GAyBK,YAxBJA,EAAAA,EAAAA,GAWK,eATJA,EAAAA,EAAAA,GAOC,KANCyK,KAAI,kDAAoD5J,EAAAA,MAAMwC,MAAMC,qBAAqB2I,qBAC1FvR,OAAO,SACPgQ,IAAI,YAHL,KAKC1K,EAAAA,EAAAA,GAA6D,aAAAqF,EAAAA,EAAAA,IAApDxE,EAAAA,MAAMwC,MAAMC,qBAAqB2I,WAAS,GAAnD,GACAC,IAND,MASI,MACLlM,EAAAA,EAAAA,GAWK,eATJA,EAAAA,EAAAA,GAOC,KANCyK,KAAI,kDAAoD5J,EAAAA,MAAMwC,MAAMC,qBAAqB4H,aAAarK,EAAAA,MAAMwC,MAAMC,qBAAqB2I,YACxIvR,OAAO,SACPgQ,IAAI,YAHL,KAKC1K,EAAAA,EAAAA,GAA2D,aAAAqF,EAAAA,EAAAA,IAAlDxE,EAAAA,MAAMwC,MAAMC,qBAAqB4H,SAAO,GAAjD,IACAlL,EAAAA,EAAAA,GAA6D,aAAAqF,EAAAA,EAAAA,IAApDxE,EAAAA,MAAMwC,MAAMC,qBAAqB2I,WAAS,IANpD,MASI,QAlCP,qBAsCAE,GASA3F,GASA4F,KAWSvL,EAAAA,UAAAA,EAAAA,EAAAA,OAAVF,EAAAA,EAAAA,IAAgC,KAAA0L,GAAb,cAAnB,eAEWxL,EAAAA,UAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAKM,MALN,GAKM2L,MALN,eAOWzL,EAAAA,UAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAKM,MALN,GAKM4L,MALN,eAOW1L,EAAAA,UAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAKM,MALN,GAKM6L,MALN,eAOW3L,EAAAA,UAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAKM,MALN,GAKM8L,MALN,eAOAvF,IAEAlH,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA0D,OAAAkH,GAAA6E,OAD7C7L,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyE,OAAAgM,GAAAC,OAG1EC,MAKD7M,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA0D,OAAAmM,GAAAC,OAD7ClM,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyE,OAAAqH,GAAAgF,OAG1E5E,MAKDpI,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA0D,OAAAsM,GAAAC,OAD7CrM,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyE,OAAAwM,GAAAC,OAG1EC,MAKDrN,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA0D,OAAA2M,GAAAC,OAD7C1M,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyE,OAAA6M,GAAAC,OAG1EC,MAKD1N,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAgN,GAAAC,OADhC/M,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAAkN,GAAAC,OAGzDC,MAKD/N,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAqN,GAAAC,OADhCpN,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAAuN,GAAAC,OAGzDC,MAKDpO,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAA0N,GAAAC,OADhCzN,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAA4N,GAAAC,OAGzDC,MAKDzO,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAA+N,GAAAC,OADhC9N,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAAiO,GAAAC,OAGzDC,MAKD9O,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAoO,GAAAC,OADhCnO,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAAsO,GAAAC,OAGzDC,MAKDnP,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAyO,GAAAC,OADhCxO,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAA2O,GAAAC,OAGzDC,MAKDxP,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAA8O,GAAAC,OADhC7O,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAAgP,GAAAC,OAGzDC,MAKD7P,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAmP,GAAAC,OADhClP,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAwD,OAAAqP,GAAAC,OAGzDC,KAKDC,GAYAC,IAEApQ,EAAAA,EAAAA,GA2BM,MA3BN,GA2BM,EA1BLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAA0P,GAAAC,OADhCzP,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAA4P,GAAAC,OAG1DC,MAwBDzQ,EAAAA,EAAAA,GAWM,MAXN,GAWM,EAVLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAA+P,GAAAC,OADhC9P,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAAiQ,GAAAC,OAG1DC,MAQD9Q,EAAAA,EAAAA,GAWM,MAXN,GAWM,EAVLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAoQ,GAAAC,OADhCnQ,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAAsQ,GAAAC,OAG1DC,MAQDnR,EAAAA,EAAAA,GAWM,MAXN,GAWM,EAVLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAyQ,GAAAC,OADhCxQ,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAA2Q,GAAAC,OAG1DC,MAQDxR,EAAAA,EAAAA,GAWM,MAXN,GAWM,EAVLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAA8Q,GAAAC,OADhC7Q,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAAgR,GAAAC,OAG1DC,MAQD7R,EAAAA,EAAAA,GAWM,MAXN,GAWM,EAVLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAmR,GAAAC,OADhClR,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAAqR,GAAAC,OAG1DC,MAQDlS,EAAAA,EAAAA,GAWM,MAXN,GAWM,EAVLA,EAAAA,EAAAA,GAGM,MAHN,GAGM,CAFQa,EAAAA,UAAb,WACAF,EAAAA,EAAAA,IAA6C,OAAAwR,GAAAC,OADhCvR,EAAAA,EAAAA,OAAbF,EAAAA,EAAAA,IAAyD,OAAA0R,GAAAC,OAG1DC,KAQDC,GAwYW3R,EAAAA,MAAMwC,MAAMoP,SAASC,gBAAAA,EAAAA,EAAAA,OAAhC/R,EAAAA,EAAAA,IAOM,MAPN,GAOMgS,MAPN,eASAC,M,eI1vBGha,GAAG,YAAYkH,MAAM,SAAS,aAAW,a,IACxCA,MAAM,U,IAGNA,MAAM,a,YACgC,U,IAKrCA,MAAM,S,IAKTE,EAAAA,EAAAA,GAAqB,UAAjB,gBAAY,G,qBAQhBA,EAAAA,EAAAA,GAAoE,SAAjE,iEAA6D,G,uBAuBrE,QAAeM,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,YACN0E,WAAY,CACXgC,cAAaA,IAEdvC,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACRiQ,GAAYpS,EAAAA,EAAAA,IAA2B,MAEvCqS,EAAiB,KACjBD,EAAU5T,OAID4T,EAAU5T,MAAM8T,iBAAiB,KAEzC/N,SAASgO,IAEdA,EAAKC,aAAa,SAAU,UAC5BD,EAAKC,aAAa,MAAO,YAErBD,EAAKE,cAAc,QAEtBF,EAAK1Y,UAAU6Y,IAAI,mBACpB,GARD,EAwBD,OAZA9R,EAAAA,EAAAA,KAAU,KACJzH,EAAMyJ,MAAMyH,aAChBrQ,EAAAA,EAAAA,KAAY,aAGbqY,GAAgB,KAGjBM,EAAAA,EAAAA,KAAU,KACTN,GAAgB,IAGV,CACNlZ,QAED,ICnFF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,oGDJ1D+G,EAAAA,EAAAA,IAqCM,MArCN,GAqCM,EApCLX,EAAAA,EAAAA,GAEM,MAFN,GAEM,EADLuC,EAAAA,EAAAA,IAAiB0C,MAElBjF,EAAAA,EAAAA,GAgCM,MAhCN,GAgCM,EA/BLuC,EAAAA,EAAAA,IAA8DqH,EAAA,CAAjDhR,GAAG,eAAe6Q,GAAG,SAAlC,C,kBAA0C,IAAM,O,MAGzC5I,EAAAA,MAAMwC,MAAMyH,aAAauI,SAAWxS,EAAAA,MAAMwC,MAAMyH,aAAauI,QAAQnI,UAAAA,EAAAA,EAAAA,OAD5EvK,EAAAA,EAAAA,IA2BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EAxBVW,EAAAA,EAAAA,GAEK,KAFL,GAAkB,uBACCqF,EAAAA,EAAAA,IAAGxE,EAAAA,MAAMwC,MAAMyH,YAAYuI,QAAQnI,SAAO,GAG7CrK,EAAAA,MAAMwC,MAAMyH,YAAYuI,QAAQR,YAAAA,EAAAA,EAAAA,OAAhDlS,EAAAA,EAAAA,IAOWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CANV+L,IACApL,EAAAA,EAAAA,GAIO,OAHNS,IAAI,YACJX,MAAM,iBACNwT,UAAQzS,EAAAA,MAAMwC,MAAMyH,YAAYuI,QAAQR,WAHzC,YAFD,kBAQAlS,EAAAA,EAAAA,IAWWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAVViM,IACAtL,EAAAA,EAAAA,GAQI,UANIa,EAAAA,MAAMwC,MAAMC,qBAAqB4H,UAAAA,EAAAA,EAAAA,OADxCvK,EAAAA,EAAAA,IAMC,K,MAJC8J,KAAI,wDAA0D5J,EAAAA,MAAMwC,MAAMC,qBAAqB4H,UAChGxQ,OAAO,SACPgQ,IAAI,YACH,gDAA6C,EAAA5E,MAL/C,kBAHF,MAfD,kBA4BAnF,EAAAA,EAAAA,IAAgC,IAAAgC,GAAtB,0B,KEnBb,IAAerC,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN0E,WAAY,CACX2H,YAAWA,IAEZlI,QACC,MAAMmJ,GAAQC,EAAAA,EAAAA,MACR/P,GAAQgJ,EAAAA,EAAAA,MAERF,GAAWjC,EAAAA,EAAAA,KAAI,GACf8S,GAAc9S,EAAAA,EAAAA,IAAgC,MAE9C+S,EAAiB,KACtB/Y,EAAAA,EAAAA,KAAY,cAAe2O,OAAOM,EAAMrN,OAAO6I,MAAQ,KACvDqO,EAAYtU,MAAQrF,EAAM6Z,QAAQC,YAAYtK,OAAOM,EAAMrN,OAAO6I,MAAQ,IAA1E,EA4BD,OAXAxB,EAAAA,EAAAA,KACC,IAAMgG,EAAMrN,OAAO6I,OAClBvB,IACA6P,GAAgB,KAIlBnS,EAAAA,EAAAA,KAAU,KACTmS,GAAgB,IAGV,CACN9Q,WACA6Q,cACAvQ,aA5BqB+B,IACrBrC,EAASzD,OAAQ,EACjBxE,EAAAA,EAAAA,KAAY,eAAgBsK,GAG5B,MAAMxJ,EAAU3B,EAAM6Z,QAAQC,YAAY3O,EAAKG,MAE3C3J,IACHA,EAAQa,KAAOb,EAAQF,SAAS,GAAGe,KAAO2I,EAAK3I,KAE/CH,GAAgBV,EAAQF,SAAS,IAClC,EAmBD,ICzDF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,6DDHnDwF,EAAAA,cAAAA,EAAAA,EAAAA,OADPyI,EAAAA,EAAAA,IAKEC,EAAA,C,MAHA,gBAAe1I,EAAAA,aACfqC,SAAUrC,EAAAA,YACV6B,SAAU7B,EAAAA,UAJZ,gE,eEAKjI,GAAG,iBAAiBkH,MAAM,U,IAS5BA,MAAM,YACN,YAAU,iBACV,aAAW,iBACXC,KAAK,Y,UAE0BD,MAAM,U,IAE9BA,MAAM,S,YACV,iB,IAAmBA,MAAM,gB,YAAwC,Q,IAE7DA,MAAM,S,UASkBA,MAAM,gB,IAC/BW,IAAI,OAAOX,MAAM,OAAO6T,SAAS,M,IACF7T,MAAM,a,gDAiBxCA,MAAM,iB,UAIsCA,MAAM,iB,IAIlDA,MAAM,WACNC,KAAK,MACL,YAAU,SACV,gBAAc,a,2GCrCZD,MAAM,Q,IACNA,MAAM,W,IAOZE,EAAAA,EAAAA,GAAkE,QAA5DF,MAAM,QAAM,EAACE,EAAAA,EAAAA,GAAwC,QAAlCF,MAAM,aAAY,UAA3C,G,IAIAE,EAAAA,EAAAA,GAAgE,QAA1DF,MAAM,QAAM,EAACE,EAAAA,EAAAA,GAAsC,QAAhCF,MAAM,aAAY,QAA3C,G,IACMA,MAAM,UAAU8T,IAAI,Q,wBAiBc9T,MAAM,Q,IAE5CE,EAAAA,EAAAA,GAAsD,QAAhDF,MAAM,YAAY,cAAY,QAAO,KAAI,G,IAE/CE,EAAAA,EAAAA,GAA4D,QAAtDF,MAAM,YAAY,cAAY,QAAO,MAAU,G,UAGXA,MAAM,Q,IAEhDE,EAAAA,EAAAA,GAAmD,QAA7CF,MAAM,YAAY,cAAY,QAAO,KAAC,G,IAE5CE,EAAAA,EAAAA,GAAyD,QAAnDF,MAAM,YAAY,cAAY,QAAO,MAAO,G,UAGvCA,MAAM,Q,IAEjBE,EAAAA,EAAAA,GAAmD,QAA7CF,MAAM,YAAY,cAAY,QAAO,KAAC,G,IAE5CE,EAAAA,EAAAA,GAAyD,QAAnDF,MAAM,YAAY,cAAY,QAAO,MAAO,G,IAG9CA,MAAM,UAAU8T,IAAI,Q,UAGxB,aAAW,gDACX9T,MAAM,+C,KACLE,EAAAA,EAAAA,GACD,sB,kFC3EHS,IAAI,YACJX,MAAM,UACN8T,IAAI,O,2BA0BG9T,MAAM,cAAc8T,IAAI,Q,IACvB9T,MAAM,Q,IACLA,MAAM,gB,2DAkBVE,EAAAA,EAAAA,GAA2B,QAArBF,MAAM,cAAY,U,IAIrBA,MAAM,qB,kHA+CuD,iC,YAK7D,oC,wBAE+D,iC,IAGnEE,EAAAA,EAAAA,GAAM,mB,IACDF,MAAM,kB,uCASXE,EAAAA,EAAAA,GAA2B,QAArBF,MAAM,cAAY,U,0BA4B9B,IAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN2G,MAAO,CACNiQ,KAAM,CACL9W,KAAM9C,OACNgJ,UAAU,GAEXyR,mBAAoB,CACnB3X,KAAM+G,SACNb,UAAU,GAEXzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAMwC,GACL,MAAMnJ,GAAQgJ,EAAAA,EAAAA,MAERkR,GAAiBrT,EAAAA,EAAAA,KAAI,GACrBsT,GAAiBtT,EAAAA,EAAAA,KAAI,GACrBuT,GAAcC,EAAAA,EAAAA,IAAOC,GAAAA,IAE3BC,EAAAA,EAAAA,KAAoB,CAAC1K,EAAI2K,EAAMC,KAE9B,GAAIL,GAAa/U,OAAO+T,KAEvB,OADAgB,EAAY/U,MAAMqV,cACXD,GAAK,GAGbA,GAAM,IAGP,MAAME,GAAU9T,EAAAA,EAAAA,IAA2B,MACrC+T,GAAY/T,EAAAA,EAAAA,IAA2B,MAEvCgU,GAAkBC,EAAAA,EAAAA,KAAS,IACzBX,EAAe9U,MAAQ,OAAS,SAGlC0V,GAAeD,EAAAA,EAAAA,KAAS,KAC7B,GAAK3R,EAAMiQ,KAAK4B,QAIhB,OAAOC,EAAAA,GAAAA,GAAa9R,EAAMiQ,KAAK4B,QAA/B,IAGKE,EAAe,MACpBlR,EAAAA,EAAAA,KAAS,KACH2Q,EAAQtV,OAAUuV,EAAUvV,QAIjC6U,EAAe7U,MAAQsV,EAAQtV,MAAM8V,aAAeP,EAAUvV,MAAM8V,YAApE,IACEvY,OAAOxD,IAETyD,QAAQC,MAAM,oCAAqC1D,EAAnD,GARD,EAYKgc,EAAiB,KACtBjS,EAAMiQ,KAAKiC,cAAe,EAE1BlS,EAAM8Q,qBAEkB,SAApB9Q,EAAMiQ,KAAK9W,MACd4Y,GACD,EAGKI,EAAkB,KAEC,YAApBnS,EAAMiQ,KAAK9W,OAKS,UAApB6G,EAAMiQ,KAAK9W,MACd8Y,IAIuB,SAApBjS,EAAMiQ,KAAK9W,OACd4Y,IACA/R,EAAM8Q,sBACP,EAyBKsB,EAAmB,KAExB,GAAyB,OAArBpS,EAAMiQ,KAAK9Y,MACd,OAGD,IAAIkb,GAAe,EAEnB,OAAQrS,EAAMiQ,KAAK9W,MAClB,IAAK,QAEqB,kBAArB6G,EAAMiQ,KAAKtW,QACd0Y,EAAexb,EAAMyJ,MAAMoP,SAAS4C,OAGrC,MAED,IAAK,OACJD,EAAexb,EAAMyJ,MAAMoP,SAAS6C,MACpC,MAED,QACCF,EAAexb,EAAMyJ,MAAMoP,SAAS4C,MAGtCtS,EAAMiQ,KAAK9Y,MAAQkb,CAAnB,EA6BD,OA1BAD,KAEAzR,EAAAA,EAAAA,KACC,IAAMX,EAAMiQ,KAAK9W,OACjB,KACCiZ,IACAD,GAAiB,KAInB7T,EAAAA,EAAAA,KAAU,KACTkU,GAAAA,EAAAA,GAAY,SAAUT,GAEtBI,GAAiB,KAGlB5T,EAAAA,EAAAA,KAAgB,KACfiU,GAAAA,EAAAA,IAAa,SAAUT,EAAvB,KAGDU,EAAAA,EAAAA,KAAY,KAGXzS,EAAMiQ,KAAKiC,cAAe,CAA1B,IAGM,CACNR,kBACAE,eACAc,iBAzEyBzc,IACzBA,EAAEwI,iBAEGwS,GAAa/U,QAIlB+U,EAAY/U,MAAMtE,QAAUoI,EAAMpI,QAClCqZ,EAAY/U,MAAM+T,KAAOjQ,EAAMiQ,KAA/B,EAkEA0C,iBAhFwB,KAExB3S,EAAMiQ,KAAK2C,MAAQ,GACnBX,GAAgB,EA8EhBY,YAhEmB,KACnB7B,EAAe9U,OAAS8U,EAAe9U,MACvC8D,EAAM8Q,oBAAN,EA+DAmB,iBACAE,kBACApB,iBACAC,iBACAQ,UACAC,YAED,IC/TF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,6BDHnD3T,EAAAA,KAAK3G,OAAAA,EAAAA,EAAAA,MAAAA,EAAAA,EAAAA,OADZyG,EAAAA,EAAAA,IA+HM,MA/HN,GA+HM,EAxHLX,EAAAA,EAAAA,GAuHM,OAtHLS,IAAI,UACHX,OAAK,yCAAsCe,EAAAA,KAAK3E,KAAI,CAAA2Z,OAAWhV,EAAAA,mBAFjE,CAI0B,SAATA,EAAAA,KAAK3E,OAAI,WAAzByE,EAAAA,EAAAA,IAkDWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAhDHwB,EAAAA,KAAK8U,OAAAA,EAAAA,EAAAA,MAAAA,EAAAA,EAAAA,OADZhV,EAAAA,EAAAA,IAkBI,K,MAfF8J,KAAM5J,EAAAA,KAAKmS,KACZlT,MAAM,mBACNpF,OAAO,SACPgQ,IAAI,WACHhK,QAAK,Y,QAAEG,EAAAA,kBAAAA,EAAAA,oBAAAA,KAPT,EASCb,EAAAA,EAAAA,GAQE,OAPAC,IAAKY,EAAAA,KAAK8U,MACXG,SAAS,QACT5V,IAAI,GACJJ,MAAM,QACLiW,QAAK,Y,QAAElV,EAAAA,kBAAAA,EAAAA,oBAAAA,IACPmV,QAAK,Y,QAAEnV,EAAAA,kBAAAA,EAAAA,oBAAAA,IACPoV,OAAI,Y,QAAEpV,EAAAA,gBAAAA,EAAAA,kBAAAA,KAPR,aATD,cAESA,EAAAA,KAAKoU,iBAAAA,EAAAA,EAAAA,IAAAA,IAAAA,IAiBdjV,EAAAA,EAAAA,GA6BM,MA7BN,GA6BM,EA5BLA,EAAAA,EAAAA,GAqBM,MArBN,GAqBM,EApBLA,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAMC,KALCyK,KAAM5J,EAAAA,KAAKmS,KACXkD,MAAOrV,EAAAA,KAAKsV,KACbzb,OAAO,SACPgQ,IAAI,aAJL,QAKK7J,EAAAA,KAAKsV,MAAI,EAAA7T,MAKRzB,EAAAA,iBAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IASS,U,MAPP,gBAAeE,EAAAA,eACf,aAAYA,EAAAA,gBACb+S,IAAI,OACJ9T,MAAM,OACLY,QAAK,Y,QAAEG,EAAAA,aAAAA,EAAAA,eAAAA,KANT,6BAYDb,EAAAA,EAAAA,GAIM,MAJN,GAIM,EAHLA,EAAAA,EAAAA,GAEM,KAFFyK,KAAM5J,EAAAA,KAAKmS,KAAOkD,MAAOrV,EAAAA,KAAKxG,KAAMK,OAAO,SAASgQ,IAAI,aAA5D,QACC7J,EAAAA,KAAKxG,MAAI,EAAAkR,SA9Cb,KAmD8B,UAAT1K,EAAAA,KAAK3E,OAAI,WAC7ByE,EAAAA,EAAAA,IAcI,K,MAbF8J,KAAM5J,EAAAA,KAAKmS,KACZlT,MAAM,mBACNpF,OAAO,SACPgQ,IAAI,WACHhK,QAAK,Y,QAAEG,EAAAA,kBAAAA,EAAAA,oBAAAA,KALT,WAOCb,EAAAA,EAAAA,GAME,OAJAC,IAAKY,EAAAA,KAAK8U,MACXG,SAAS,QACT5V,IAAI,GACH+V,OAAI,Y,QAAEpV,EAAAA,gBAAAA,EAAAA,kBAAAA,KALR,mBACSA,EAAAA,KAAKoU,iBARf,OAgB6B,UAATpU,EAAAA,KAAK3E,MAAI,qBAC7ByE,EAAAA,EAAAA,IAOQ,S,MALPyV,QAAQ,WACRC,SAAA,GACCC,UAAO,Y,QAAEzV,EAAAA,gBAAAA,EAAAA,kBAAAA,KAJX,EAMCb,EAAAA,EAAAA,GAAmD,UAA1CC,IAAKY,EAAAA,KAAKwU,MAAQnZ,KAAM2E,EAAAA,KAAK0V,WAAtC,YAND,aACS1V,EAAAA,KAAKoU,gBAQe,UAATpU,EAAAA,KAAK3E,MAAI,qBAC7ByE,EAAAA,EAAAA,IAOQ,S,MALP0V,SAAA,GACAD,QAAQ,WACPE,UAAO,Y,QAAEzV,EAAAA,gBAAAA,EAAAA,kBAAAA,KAJX,EAMCb,EAAAA,EAAAA,GAAmD,UAA1CC,IAAKY,EAAAA,KAAKwU,MAAQnZ,KAAM2E,EAAAA,KAAK0V,WAAtC,YAND,aACS1V,EAAAA,KAAKoU,gBAQe,UAATpU,EAAAA,KAAK3E,OAAI,WAA9ByE,EAAAA,EAAAA,IA0BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAzBU,kBAAVwB,EAAAA,KAAKnE,QAAK,WAApBiE,EAAAA,EAAAA,IAIK,KAAA6V,GAAA,UAJqC,+BACfnR,EAAAA,EAAAA,IAAGxE,EAAAA,cAAe,6BAC5C,IAAAb,EAAAA,EAAAA,GAAkE,KAA9DyK,KAAM5J,EAAAA,KAAKmS,KAAMtY,OAAO,SAASgQ,IAAI,YAAW,aAAU,EAAAwB,IAE1D,MAC0B,YAAVrL,EAAAA,KAAKnE,QAAK,WAA/BiE,EAAAA,EAAAA,IAmBWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EAlBVW,EAAAA,EAAAA,GAQM,aAPLA,EAAAA,EAAAA,GAIK,eAFJA,EAAAA,EAAAA,GAAkE,KAA9DyK,KAAM5J,EAAAA,KAAKmS,KAAMtY,OAAO,SAASgQ,IAAI,YAAW,aAAU,EAAA+L,IAE1D,KACLC,IACA1W,EAAAA,EAAAA,GAAoD,MAApD,IAAoDqF,EAAAA,EAAAA,IAArBxE,EAAAA,KAAK/G,SAAO,MAG5CkG,EAAAA,EAAAA,GAOS,UANP,gBAAea,EAAAA,eACf,aAAYA,EAAAA,gBACbf,MAAM,OACLY,QAAK,Y,QAAEG,EAAAA,aAAAA,EAAAA,eAAAA,KAJT,UAXD,sBAND,sBA5FD,IAPD,aAESA,EAAAA,KAAKoU,cAAyB,SAATpU,EAAAA,KAAK3E,SAAI,c,gBECxC,MAAMya,GAAe9b,EAAAA,MAErB,OAAe8b,GAAaxd,OAAO2B,QAAO,CAACC,EAA0BC,KACpED,EAAI,WAAaC,EAAKE,UAAU,EAAGF,EAAKR,OAAS,IAAMmc,GAAa3b,GAAMG,QAEnEJ,IACL,CAAC,GHuGJ6b,GAAaC,cAAgBA,GAAAA,EAC7BD,GAAaE,YAAcA,GAC3BF,GAAaG,SAAWA,GAAAA,EAExB,QAAezW,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,UACN0E,WAAY8V,GACZ7T,MAAO,CACNjJ,QAAS,CAACoC,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,GAC1D7G,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DyR,mBAAoB5Q,SACpB+T,iBAAkB7T,QAClB8T,QAAS9T,SAEV5C,MAAMwC,GACL,MAAMnJ,GAAQgJ,EAAAA,EAAAA,MAERsU,GAAaxC,EAAAA,EAAAA,KAAS,KAC3B,IAAItV,EAQJ,OALCA,EADGxF,EAAMyJ,MAAMoP,SAAS0E,YACfvd,EAAMyJ,MAAMoP,SAAS2E,YAAc,oBAAsB,SAEzDxd,EAAMyJ,MAAMoP,SAAS2E,YAAc,iBAAmB,aAGzDC,EAAAA,EAAAA,YAAsBjY,EAA7B,IAGKkY,GAAc5C,EAAAA,EAAAA,KAAS,IACrBvV,KAAM4D,EAAMjJ,QAAQoF,MAAME,OAAO8X,EAAWjY,SAG9CsY,GAAoB7C,EAAAA,EAAAA,KAAS,KAC3B8C,EAAAA,GAAAA,GAAWzU,EAAMjJ,QAAQoF,QAG3BuY,GAAmB/C,EAAAA,EAAAA,KAAS,IAC1B,WAAa3R,EAAMjJ,QAAQoC,OAOnC,MAAO,CACNgb,aACAI,cACAC,oBACAE,mBACAC,SATgB,SACgD,IAAlDd,GAAa,WAAa7T,EAAMjJ,QAAQoC,MAUvD,II/JF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,2HJJ1DyE,EAAAA,EAAAA,IA+FM,OA9FJ/H,GAAE,OAAWiI,EAAAA,QAAQjI,GACrBkH,OAAK,gB,KAA6Be,EAAAA,QAAQ8W,K,UAAqB9W,EAAAA,QAAQ/B,WAAa+B,EAAAA,Q,kBAAgCA,EAAAA,oBAQpH,YAAWA,EAAAA,QAAQ3E,KACnB,eAAc2E,EAAAA,QAAQ5F,QACtB,YAAW4F,EAAAA,QAAQuT,MAAQvT,EAAAA,QAAQuT,KAAKhN,MAZ1C,EAcCpH,EAAAA,EAAAA,GAKO,QAJN,cAAY,OACX,aAAYa,EAAAA,kBACbf,MAAM,iCAHP,WAIQe,EAAAA,gBAAW,EAAAiB,IAES,cAAZjB,EAAAA,QAAQ3E,OAAI,WAA5ByE,EAAAA,EAAAA,IAOWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EANVW,EAAAA,EAAAA,GAAiD,OAAjD,GAAmB,KAACqF,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQ5F,SAAU,IAAC,IAC1C+E,EAAAA,EAAAA,GAIO,OAJP,GAIO,gBAHNW,EAAAA,EAAAA,IAESwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAFmB/W,EAAAA,QAAQxE,QAAM,CAA5Bwb,EAAOjf,M,WAArB+H,EAAAA,EAAAA,IAES,QAFoCtB,IAAKzG,IAAEyM,EAAAA,EAAAA,IAAAA,IAC/CwS,MAAK,MADV,SAHF,KAQqBhX,EAAAA,aAAAA,EAAAA,EAAAA,OAArBF,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFVwG,KAEU,WADVyD,EAAAA,EAAAA,KAA0EwO,EAAAA,EAAAA,IAA1DjX,EAAAA,kBAAgB,CAAGtF,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA/D,gCAFD,KAIiC,WAAZA,EAAAA,QAAQ3E,OAAI,WAAjCyE,EAAAA,EAAAA,IAiBWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAhBV+L,IACApL,EAAAA,EAAAA,GAcO,OAdP,GAcO,EAbNuC,EAAAA,EAAAA,IAKEwV,EAAA,CAJArW,KAAMb,EAAAA,QAAQuT,KACd7Y,QAASsF,EAAAA,QACTlG,QAASkG,EAAAA,QACV+S,IAAI,QAJL,qCAaM,IARCrR,EAAAA,EAAAA,IAAoCyV,EAAA,CAApBle,QAAS+G,EAAAA,SAAO,sBAQjC,aAPNF,EAAAA,EAAAA,IAMEwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IALiB/W,EAAAA,QAAQ5G,UAAnBD,K,WADRsP,EAAAA,EAAAA,IAME2O,EAAA,CAJA5Y,IAAKrF,EAAQgZ,KACb,uBAAsBnS,EAAAA,mBACtBmS,KAAMhZ,EACNW,QAASkG,EAAAA,SALX,8DATF,kBAkBAF,EAAAA,EAAAA,IA4CWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CA3Cc,YAAZwB,EAAAA,QAAQ3E,OAAI,WAAxByE,EAAAA,EAAAA,IAMO,OANP,GAMO,CALUE,EAAAA,QAAQuT,MAAQvT,EAAAA,QAAQuT,KAAKhN,OAAAA,EAAAA,EAAAA,OAA7CzG,EAAAA,EAAAA,IAIWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAHVsD,IACAJ,EAAAA,EAAAA,IAAuEwV,EAAA,CAA5DrW,KAAMb,EAAAA,QAAQuT,KAAO7Y,QAASsF,EAAAA,QAAUlG,QAASkG,EAAAA,SAA5D,qCACAmF,IAHD,wBAM4B,WAAZnF,EAAAA,QAAQ3E,OAAI,WAA7ByE,EAAAA,EAAAA,IAMO,OANP,GAMO,CALUE,EAAAA,QAAQuT,MAAQvT,EAAAA,QAAQuT,KAAKhN,OAAAA,EAAAA,EAAAA,OAA7CzG,EAAAA,EAAAA,IAIWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAHV8G,IAGU,QAHyC,KACnDd,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQuT,KAAKhN,MAAO,IACvB,GAAAqE,IAHD,0BADD,WAOA9K,EAAAA,EAAAA,IAMO,OANP,GAMO,CALUE,EAAAA,QAAQuT,MAAQvT,EAAAA,QAAQuT,KAAKhN,OAAAA,EAAAA,EAAAA,OAA7CzG,EAAAA,EAAAA,IAIWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAHV+G,IACA7D,EAAAA,EAAAA,IAAuEwV,EAAA,CAA5DrW,KAAMb,EAAAA,QAAQuT,KAAO7Y,QAASsF,EAAAA,QAAUlG,QAASkG,EAAAA,SAA5D,qCACA2V,IAHD,yBAMDxW,EAAAA,EAAAA,GAqBO,OArBP,GAqBO,CAnBCa,EAAAA,QAAQqX,eAAAA,EAAAA,EAAAA,OADfvX,EAAAA,EAAAA,IAKQ,OALR,GAKQ8V,MALR,eAOO5V,EAAAA,QAAQsX,iBAAAA,EAAAA,EAAAA,OADfxX,EAAAA,EAAAA,IAKC,Q,MAHC,aAAU,6CAA+CE,EAAAA,QAAQsX,sBAClErY,MAAM,yCAHP,EAIEE,EAAAA,EAAAA,GAAyC,aAAAqF,EAAAA,EAAAA,IAAhCxE,EAAAA,QAAQsX,gBAAc,IAJjC,wBAMA5V,EAAAA,EAAAA,IAAuDyV,EAAA,CAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA5C,gCAQM,aAPNF,EAAAA,EAAAA,IAMEwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IALiB/W,EAAAA,QAAQ5G,UAAnBD,K,WADRsP,EAAAA,EAAAA,IAME2O,EAAA,CAJA5Y,IAAKrF,EAAQgZ,KACb,uBAAsBnS,EAAAA,mBACtBmS,KAAMhZ,EACNW,QAASkG,EAAAA,SALX,8DApCF,MAlDD,M,eKCMf,MAAM,iBAsFb,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,oBACN2G,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAMwC,GACL,MAAMqV,GAAe3X,EAAAA,EAAAA,KAAI,GACnB4X,GAAc5X,EAAAA,EAAAA,IAAI,IAClBtE,GAASmc,EAAAA,EAAAA,MACT5O,GAAQC,EAAAA,EAAAA,MAER4O,GAAmB9X,EAAAA,EAAAA,IAA6B,MAEhD+X,GAAe9D,EAAAA,EAAAA,KAAS,IACP,kBAAfhL,EAAMtN,OA4Dd,OAzDAsH,EAAAA,EAAAA,IAAMgG,GAAQ/F,IACTA,EAASrH,MAAMC,IAClB8b,EAAYpZ,MAAQmK,OAAOzF,EAASrH,MAAMC,GAC3C,KAGD8E,EAAAA,EAAAA,KAAU,KACTgX,EAAYpZ,MAAQmK,OAAOM,EAAMpN,MAAMC,GAAK,IAC5C6b,EAAanZ,MAAQuZ,EAAavZ,MAE9BsZ,EAAiBtZ,QAAUoZ,EAAYpZ,OAASmZ,EAAanZ,OAChEsZ,EAAiBtZ,MAAM4E,OACxB,IA6CM,CACNuU,eACAC,cACAE,mBACAE,YA9CmB,KACdD,EAAavZ,QACjBoZ,EAAYpZ,MAAQ,GACpBmZ,EAAanZ,OAAQ,EACtB,EA2CAyZ,aAxCoB,KAChBN,EAAanZ,MAChBsZ,EAAiBtZ,OAAO0Z,QAIzBP,EAAanZ,OAAQ,EACrBsZ,EAAiBtZ,OAAO4E,QAAxB,EAkCA+U,eA/BuB7Z,IACvBA,EAAMyC,iBAED6W,EAAYpZ,OAIjB9C,EACEhC,KAAK,CACLiC,KAAM,gBACNC,OAAQ,CACPzD,GAAImK,EAAMpI,QAAQ/B,IAEnB0D,MAAO,CACNC,EAAG8b,EAAYpZ,SAGhBzC,OAAOqc,IACU,yBAAbA,EAAIzc,MAEPmZ,GAAAA,EAAAA,KAAc,YACf,GAdF,EAyBAiD,eAED,ICnKF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDN1D7X,EAAAA,EAAAA,IAoBO,QApBAb,OAAK,2BAAA+V,OAA8BhV,EAAAA,gBAAiBU,SAAM,sB,QAAUV,EAAAA,gBAAAA,EAAAA,kBAAAA,IAAc,eAAzF,EACCb,EAAAA,EAAAA,GAWM,MAXN,GAWM,WAVLA,EAAAA,EAAAA,GASE,SARDS,IAAI,mB,qCACKI,EAAAA,YAAWuE,GACpBlJ,KAAK,SACLE,KAAK,SACL0D,MAAM,QACN8F,YAAY,mBACXkT,OAAI,Y,QAAEjY,EAAAA,aAAAA,EAAAA,eAAAA,IACNkY,QAAK,sB,QAAMlY,EAAAA,aAAAA,EAAAA,eAAAA,IAAW,WARxB,iBAEUA,EAAAA,iBAUHA,EAAAA,cADR,iBACQA,EAAAA,EAAAA,OADRF,EAAAA,EAAAA,IAME,U,MAJDb,MAAM,SACN5D,KAAK,SACL,aAAW,kCACV8c,YAAS,sB,QAAUnY,EAAAA,cAAAA,EAAAA,gBAAAA,IAAY,eALjC,WAbD,G,iCECMf,MAAM,e,4CAabX,KAAAA,OAAa8Z,MAEb,QAAe3Y,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,aACN2G,MAAO,CACNjJ,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,GAEX6U,QAAS9T,SAEV5C,MAAMwC,GACL,MAAMmW,GAAaxE,EAAAA,EAAAA,KAAS,IAAMvV,KAAM4D,EAAMjJ,QAAQoF,MAAME,OAAO,iBAE7D+Z,EAAc,KACXC,KAAKC,MAAQD,KAAKE,MAAMvW,EAAMjJ,QAAQoF,KAAKqa,aAAe,KAG7DC,EAAY,KACbL,KAAiB,IACpB5D,GAAAA,EAAAA,IAAa,YAAaiE,EAC3B,EAuBD,OAVAnY,EAAAA,EAAAA,KAAU,KACL8X,IAAgB,IACnB5D,GAAAA,EAAAA,GAAY,YAAaiE,EAC1B,KAGDlY,EAAAA,EAAAA,KAAgB,KACfiU,GAAAA,EAAAA,IAAa,YAAaiE,EAA1B,IAGM,CACNN,aACAO,aAtBoB,IAEbta,KAAM4D,EAAMjJ,QAAQoF,MAAM+Z,SAAS,KAAM,CAC/CS,QAAS,UACTC,QAAS,cACTC,SAAU,cACVC,SAAU,gBAkBZ,ICxDF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDJ1DlZ,EAAAA,EAAAA,IAIM,OAJA,aAAYE,EAAAA,WAAYf,MAAM,iDAApC,EACCE,EAAAA,EAAAA,GAEM,MAFN,GAEM,EADLA,EAAAA,EAAAA,GAA8D,QAAvD,aAAYa,EAAAA,eAAgBf,MAAM,oBAAzC,cAFF,K,KR6GD,IAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,gBACN0E,WAAY,CACXgC,cADW,GAEXgX,QAFW,GAGXC,WAHW,GAIXC,kBAAiBA,IAElBzZ,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACR8G,GAAQC,EAAAA,EAAAA,MAGRsQ,IAFS3B,EAAAA,EAAAA,OAEF7X,EAAAA,EAAAA,OAEPyZ,GAAiBzZ,EAAAA,EAAAA,MAEjB0Z,GAAS1Z,EAAAA,EAAAA,IAAI,GACb2Z,GAAuB3Z,EAAAA,EAAAA,KAAI,GAC3B4Z,GAAe5Z,EAAAA,EAAAA,IAAI,GACnB6Z,GAAgB7Z,EAAAA,EAAAA,IAAI,GAEpB8Z,GAAW7F,EAAAA,EAAAA,KAAS,KACzB,MAAM8F,EAAU5gB,EAAMyJ,MAAMoX,sBAAsBD,QAElD,OAAKA,GACG,EAGR,IAGKze,GAAO2Y,EAAAA,EAAAA,KAAS,KACrB,MAAMgG,EAASC,SAASvR,OAAOM,EAAMrN,OAAOzD,IAAM,IAAK,IACvD,OAAOgB,EAAM6Z,QAAQmH,YAAYF,EAAjC,IAGKnf,GAAUmZ,EAAAA,EAAAA,KAAS,IACnB3Y,EAAKkD,MAIHlD,EAAKkD,MAAM1D,QAHV,OAMHZ,GAAU+Z,EAAAA,EAAAA,KAAS,IACnB3Y,EAAKkD,MAIHlD,EAAKkD,MAAMtE,QAHV,OAMHkgB,EAAmB,KACnB9e,EAAKkD,OAIVrF,EAAMiJ,OAAO,gBAAiB9G,EAAKkD,MAAnC,EAGKwZ,EAAc,KACd9d,EAAQsE,OAIbhD,GAAgBtB,EAAQsE,MAAxB,EAaK6b,EAAmB,KACxBX,EAAOlb,MAAQ,EACfrF,EAAMiJ,OAAO,uBAAwB,MACrCjJ,EAAMiJ,OAAO,4BAA6B,KAA1C,EAGKkY,EAAW,KAChB,IAAKxf,EAAQ0D,QAAUtE,EAAQsE,MAC9B,OAGD6b,IACA,MAAMxe,EAAqB,CAC1B0e,YAAazf,EAAQ0D,MAAMiG,KAC3B+V,YAAatgB,EAAQsE,MAAM7C,KAC3B8e,WAAY9R,OAAOM,EAAMpN,MAAMC,GAAK,IACpC4d,OAAQA,EAAOlb,OAEhBrF,EAAMiJ,OAAO,4BAA6BvG,GAC1C7B,EAAAA,EAAAA,KAAY,SAAU6B,EAAtB,EAuBK6e,EAAeC,gBACdxX,EAAAA,EAAAA,MAEN,MAAMyX,EAAKpB,EAAKhb,MAEXoc,IAILA,EAAGC,UAAYD,EAAGnX,aAAlB,EA4DD,OAnDAR,EAAAA,EAAAA,KACC,IAAMgG,EAAMrN,OAAOzD,KACnB,KACCmiB,IACAF,GAAkB,KAIpBnX,EAAAA,EAAAA,KACC,IAAMgG,EAAMpN,QACZ,KACCye,IACAF,GAAkB,KAIpBnX,EAAAA,EAAAA,IAAM6W,GAAUa,UAKf,GAJAhB,EAAqBnb,SACpBsb,EAAStb,MAAMzE,QAAY+f,EAAStb,MAAMzE,OAAS,KAG/C2f,EAAOlb,MAEL,OACA2E,EAAAA,EAAAA,MAEN,MAAMyX,EAAKpB,EAAKhb,MAEhB,IAAKoc,EACJ,OAGD,MAAME,EAAoBF,EAAGnX,aAC7BmX,EAAGC,UAAYjB,EAAapb,MAAQsc,EAAoBjB,EAAcrb,KACvE,YAZOkc,GAYP,KAGD9Z,EAAAA,EAAAA,KAAU,KACTwZ,IACAE,IAEAxF,GAAAA,EAAAA,GAAY,YAAakD,GACzBlD,GAAAA,EAAAA,GAAY,YAAawF,EAAzB,KAGDvF,EAAAA,EAAAA,KAAY,KACXD,GAAAA,EAAAA,IAAa,YAAakD,GAC1BlD,GAAAA,EAAAA,IAAa,YAAawF,GAC1BD,GAAkB,IAGZ,CACNb,OACAC,iBACAK,WACAH,uBACA7e,UACAZ,UACA+O,QACAyQ,SACAvgB,QACAihB,mBACApC,cACA+C,wBArI+B,CAAC1hB,EAAwBlB,KACxD,MAAM6iB,EAAkBlB,EAAStb,MAAMrG,EAAK,GAE5C,OAAK6iB,GAIE,IAAIrC,KAAKqC,EAAgBvc,MAAMwc,WAAa,IAAItC,KAAKtf,EAAQoF,MAAMwc,QAA1E,EA+HAX,WACAY,gBAvGuB,KACvB,IAAK1B,EAAKhb,QAAU1D,EAAQ0D,QAAUtE,EAAQsE,MAC7C,OAGDkb,EAAOlb,OAAS,IAEhBob,EAAapb,MAAQgb,EAAKhb,MAAMqc,UAChChB,EAAcrb,MAAQgb,EAAKhb,MAAMiF,aAEjC,MAAM5H,EAAqB,CAC1B0e,YAAazf,EAAQ0D,MAAMiG,KAC3B+V,YAAatgB,EAAQsE,MAAM7C,KAC3B8e,WAAY9R,OAAOM,EAAMpN,MAAMC,GAAK,IACpC4d,OAAQA,EAAOlb,OAEhBrF,EAAMiJ,OAAO,4BAA6BvG,GAC1C7B,EAAAA,EAAAA,KAAY,SAAU6B,EAAtB,EAuFA6e,eACAS,KAzEY,CAAC9hB,EAAwBlB,KAAzB,EA2Eb,IUrTF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,yJVN1D+H,EAAAA,EAAAA,IAoFM,MApFN,GAoFM,EAnFLX,EAAAA,EAAAA,GAkFM,OAjFLpH,GAAG,OACFkH,OAAK,S,eAAwBe,EAAAA,MAAMwC,MAAMoP,SAAS2E,Y,WAA6BvW,EAAAA,MAAMwC,MAAMoP,SAAS0E,eAFtG,EAOCnX,EAAAA,EAAAA,GA0EM,MA1EN,GA0EM,CApEMa,EAAAA,SAAWA,EAAAA,UAAAA,EAAAA,EAAAA,OAAtBF,EAAAA,EAAAA,IAaM,MAbN,GAaM,EAZL4B,EAAAA,EAAAA,IAAiB0C,IACjBjF,EAAAA,EAAAA,GAEC,OAFD,GAEC,KADcA,EAAAA,EAAAA,GAAoD,OAApD,IAAoDqF,EAAAA,EAAAA,IAAtBxE,EAAAA,QAAQzE,MAAI,GACxD,MACD4D,EAAAA,EAAAA,GAA8C,OAA9C,IAA8CqF,EAAAA,EAAAA,IAAvBxE,EAAAA,MAAMvE,MAAMC,GAAC,IACpCgG,EAAAA,EAAAA,IAA2DsZ,EAAA,CAAvCtgB,QAASsF,EAAAA,QAAUlG,QAASkG,EAAAA,SAAhD,+BACAb,EAAAA,EAAAA,GAKE,UAJDF,MAAM,QACN,aAAW,sBACXoW,MAAM,sBACLxV,QAAK,Y,QAAEG,EAAAA,aAAAA,EAAAA,eAAAA,UAXV,eAcWA,EAAAA,SAAWA,EAAAA,UAAAA,EAAAA,EAAAA,OAAtBF,EAAAA,EAAAA,IAqDM,MArDN,GAqDM,EApDLX,EAAAA,EAAAA,GAmDM,MAnDN,GAmDM,WAlDLA,EAAAA,EAAAA,GAaM,MAbN,GAaM,EAZLA,EAAAA,EAAAA,GAWS,UAVRS,IAAI,iBACHiC,WAAsB7B,EAAAA,MAAMwC,MAAMyY,4BAAuCjb,EAAAA,MAAMwC,MAAM0Y,YAItFjc,MAAM,MACLY,QAAK,Y,QAAEG,EAAAA,iBAAAA,EAAAA,mBAAAA,KAPT,CASaA,EAAAA,MAAMwC,MAAMyY,4BAAAA,EAAAA,EAAAA,OAAxBnb,EAAAA,EAAAA,IAAkE,OAAAwF,GAAf,eAAnD,WACAxF,EAAAA,EAAAA,IAAuC,OAAA8K,GAA1B,yBAVd,OADD,YAAa5K,EAAAA,wBAgBNA,EAAAA,MAAMwC,MAAMyY,4BAA8Bjb,EAAAA,SAAAA,EAAAA,EAAAA,OADjDF,EAAAA,EAAAA,IAKM,MALN,GAGC,iBAGgBE,EAAAA,SAASrG,QAAWqG,EAAAA,QAArC,iBAAqCA,EAAAA,EAAAA,OAArCF,EAAAA,EAAAA,IAEM,MAFN,GAAmE,yBAGnEX,EAAAA,EAAAA,GAyBM,MAzBN,GAyBM,gBAnBLW,EAAAA,EAAAA,IAkBMwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAjBmB/W,EAAAA,UAAQ,CAAxB/G,EAASlB,M,WADlB+H,EAAAA,EAAAA,IAkBM,OAhBJtB,IAAKvF,EAAQlB,GACdkH,MAAM,SACLY,QAAK,GAAEG,EAAAA,KAAK/G,EAASlB,IAJvB,CAOQiI,EAAAA,wBAAwB/G,EAASlB,KAAjC,WADP0Q,EAAAA,EAAAA,IAIE0S,EAAA,CAFA3c,IAAKvF,EAAQlB,GAAE,QACfkB,QAASA,GAHX,kDAKAwP,EAAAA,EAAAA,IAME2S,EAAA,CALA5c,IAAKvF,EAAQlB,GACb+B,QAASkG,EAAAA,QACTtF,QAASsF,EAAAA,QACT/G,QAASA,EACT,UAASA,EAAQlB,IALnB,oDAXD,kBA/BF,SADD,kBA3BF,I,8EWgBOkH,MAAM,U,4BAK6BA,MAAM,mB,kBAW3CE,EAAAA,EAAAA,GAAmD,QAA7C9D,KAAK,SAAS,aAAW,cAA/B,U,uBAiCD4D,MAAM,qCACN,aAAW,oB,UAS0BA,MAAM,gB,IACvCA,MAAM,Q,IACLA,MAAM,Y,IACLA,MAAM,O,UAUFA,MAAM,gB,KAShBE,EAAAA,EAAAA,GAAiC,OAA5BF,MAAM,qBAAmB,U,IClG9BW,IAAI,OAAOX,MAAM,OAAO6T,SAAS,M,IACM7T,MAAM,a,2CA8B9CE,EAAAA,EAAAA,GAAmC,QAA7BF,MAAM,sBAAoB,U,yBC9B9BA,MAAM,qB,IACVE,EAAAA,EAAAA,GAAqB,QAAfF,MAAM,QAAM,S,IAClBE,EAAAA,EAAAA,GAAqB,QAAfF,MAAM,QAAM,S,IAGfE,EAAAA,EAAAA,GACD,UADSF,MAAM,gBAAgB,aAAW,0BAAzC,SAkBN,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,mBACN0E,WAAY,CACXgZ,QAAOA,IAER/W,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DmY,SAAU,CACTre,KAAM2M,MACNzG,UAAU,GAEXyR,mBAAoB,CACnB3X,KAAM+G,SACNb,UAAU,GAEX6U,QAAS9T,SAEV5C,MAAMwC,GACL,MAAMlE,GAAc4B,EAAAA,EAAAA,KAAI,GAOlByb,GAAgBxH,EAAAA,EAAAA,KAAS,KAC9B,MAAMyH,EAA8B,CAAC,EAErCC,GAAAA,EAAAA,SAAwBlgB,IACvBigB,EAAIjgB,GAAQ,CAAZ,IAGD,IAAK,MAAMpC,KAAWiJ,EAAMwX,SAE3B,GAAqB,SAAjBzgB,EAAQoC,KAAiB,CAI5B,MAAMmgB,EAAmBviB,EAAQkC,KAC/BL,MAAM,KAAK,GACXA,MAAM,IACN+B,QAAQ4e,GAAkB,MAATA,GAAyB,MAATA,IAAc9hB,OACjD2hB,EAAIriB,EAAQoC,OAASmgB,CACtB,MACCF,EAAIriB,EAAQoC,QAKdigB,EAAII,MAAQJ,EAAIK,KAEhB,MAAMC,EAAoB,GA4D1B,GA3DAL,GAAAA,EAAAA,SAAwBlgB,IACvB,GAAIigB,EAAIjgB,GACP,OAAQA,GACP,IAAK,UACJugB,EAAQtiB,KACPiP,OAAO+S,EAAIjgB,KACTigB,EAAIjgB,GAAQ,EACV,+BACA,+BAEL,MACD,IAAK,OACJugB,EAAQtiB,KACPiP,OAAO+S,EAAIjgB,KACTigB,EAAIjgB,GAAQ,EAAI,qBAAuB,qBAE1C,MACD,IAAK,OACJugB,EAAQtiB,KACPiP,OAAO+S,EAAIjgB,KACTigB,EAAIjgB,GAAQ,EAAI,mBAAqB,mBAExC,MACD,IAAK,OACJugB,EAAQtiB,KACPiP,OAAO+S,EAAIjgB,KACTigB,EAAIjgB,GAAQ,EACV,2BACA,2BAEL,MACD,IAAK,OACJugB,EAAQtiB,KACPiP,OAAO+S,EAAIjgB,KACTigB,EAAIjgB,GAAQ,EAAI,qBAAuB,qBAE1C,MACD,IAAK,OACJugB,EAAQtiB,KACPiP,OAAO+S,EAAIjgB,KACTigB,EAAIjgB,GAAQ,EAAI,kBAAoB,kBAEvC,MACD,IAAK,OACJugB,EAAQtiB,KACP,gBACEgiB,EAAIjgB,GAAQ,EAAIkN,OAAO+S,EAAIjgB,IAAS,SAAW,SAElD,MACD,IAAK,OACJugB,EAAQtiB,KACP,gBACEgiB,EAAIjgB,GAAQ,EAAIkN,OAAO+S,EAAIjgB,IAAS,SAAW,SAIrD,IAGGugB,EAAQjiB,OAAQ,CACnB,IAAIwB,EAAOygB,EAAQC,MAMnB,OAJID,EAAQjiB,SACXwB,EAAOygB,EAAQ3gB,KAAK,MAAQ,SAAWE,GAGjCA,CACR,CAEA,MAAO,EAAP,IAGD,MAAO,CACN6C,cACAqd,gBACAS,gBA3GuB,KACvB9d,EAAYI,OAASJ,EAAYI,MACjC8D,EAAM8Q,oBAAN,EA2GD,ICnJF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,oEDJ1DlT,EAAAA,EAAAA,IAeM,OAfAb,OAAK,gBAAA8c,OAAmB/b,EAAAA,eAAe,YAAU,aAAvD,EACCb,EAAAA,EAAAA,GAOM,MAPN,GAOM,CANL8B,GACAC,IACA/B,EAAAA,EAAAA,GAGS,QAHHF,MAAM,UAAWY,QAAK,Y,QAAEG,EAAAA,iBAAAA,EAAAA,mBAAAA,KAA9B,mBACKA,EAAAA,eAAa,GACfmB,SALJ,aAQArB,EAAAA,EAAAA,IAKEwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAJiB/W,EAAAA,UAAX/G,K,WADRwP,EAAAA,EAAAA,IAKE2S,EAAA,CAHA5c,IAAKvF,EAAQlB,GACb2C,QAASsF,EAAAA,QACT/G,QAASA,GAJX,wCATD,E,KD0FD,IAAI+iB,IAAoB,EAExB,QAAevc,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN0E,WAAY,CACXgZ,QADW,GAEXgD,iBAFW,GAGX/C,WAAUA,IAEXhX,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,GAC1D6U,QAAS9N,QAEV5I,MAAMwC,GAAO,KAACnF,IACb,MAAMhE,GAAQgJ,EAAAA,EAAAA,MAERqX,GAAOxZ,EAAAA,EAAAA,IAA2B,MAClCyZ,GAAiBzZ,EAAAA,EAAAA,IAA8B,MAC/Csc,GAAkBtc,EAAAA,EAAAA,IAAiC,MACnDuc,GAAsBvc,EAAAA,EAAAA,KAAI,GAE1Bwc,GAAuBxc,EAAAA,EAAAA,KAAI,GAE3B0a,EAAe,KACpB6B,EAAoB/d,OAAQ,EAC5B8D,EAAMpI,QAAQuiB,kBAAmB,EAEjC,MAAM7B,EAAKpB,EAAKhb,MAEZoc,IACHA,EAAGC,UAAYD,EAAGnX,aACnB,EAGKyX,EAAkB,KACvB,IAAK/hB,EAAMyJ,MAAM0Y,YAChB,OAGD,IAAIoB,GAAe,EAInB,IAAK,MAAMrjB,KAAWiJ,EAAMpI,QAAQ4f,SACnC,IAAKzgB,EAAQoe,aAAc,CAC1BiF,EAAcrjB,EAAQlB,GACtB,KACD,CAGDmK,EAAMpI,QAAQyiB,gBAAiB,EAE/B3iB,EAAAA,EAAAA,KAAY,OAAQ,CACnBC,OAAQqI,EAAMpI,QAAQ/B,GACtBykB,OAAQF,EACRG,UAAmD,UAAxC1jB,EAAMyJ,MAAMoP,SAAS8K,gBAHjC,EAOKC,EAAwBC,IAC7BA,EAAQzY,SAAS0Y,IACXA,EAAMC,gBAIXhC,GAAiB,GALlB,GASD/X,EAAAA,EAAAA,KAAS,KACHqW,EAAKhb,QAINK,OAAOse,uBACVb,EAAgB9d,MAAQ,IAAIK,OAAOse,qBAAqBJ,EAAsB,CAC7EK,KAAM5D,EAAKhb,SAIbkc,IAAc,IACZ3e,OAAOxD,IAETyD,QAAQC,MAAM,oCAAqC1D,EAAnD,IAGD,MAAM8kB,GAAoBpJ,EAAAA,EAAAA,KAAS,KAClC,GAA2B,YAAvB3R,EAAMpI,QAAQuB,MAA6C,UAAvB6G,EAAMpI,QAAQuB,KACrD,OAAO6G,EAAMpI,QAAQ4f,SAItB,GAA4C,WAAxC3gB,EAAMyJ,MAAMoP,SAAS8K,eACxB,OAAOxa,EAAMpI,QAAQ4f,SAAS7c,QAC5B5D,IAAasiB,GAAAA,EAAAA,IAAmBtiB,EAAQoC,QAK3C,GAA4C,cAAxCtC,EAAMyJ,MAAMoP,SAAS8K,eACxB,OAAOxa,EAAMpI,QAAQ4f,SAGtB,IAAIwD,EAA2D,KAE/D,MAAMT,EAA2D,GAEjE,IAAK,MAAMxjB,KAAWiJ,EAAMpI,QAAQ4f,SAG/BzgB,EAAQ6d,MAAQ7d,EAAQgF,YAAcsd,GAAAA,EAAAA,IAAmBtiB,EAAQoC,OACpE6hB,EAAyB,KAEzBT,EAAUnjB,KAAKL,KAKXikB,IACJA,EAAyB,CACxB7e,KAAMpF,EAAQoF,KACdhD,KAAM,YACNqe,SAAU,IAGX+C,EAAUnjB,KAAK4jB,IAGhBA,EAAwBxD,SAASpgB,KAAKL,GAItCikB,EAAwBnlB,GAAKkB,EAAQlB,GAGjCkB,EAAQlB,KAAOmK,EAAMpI,QAAQqjB,cAChCD,EAAyB,OAI3B,OAAOT,EAAU7kB,KAAKqB,GAGA,cAAjBA,EAAQoC,MAAoD,IAA5BpC,EAAQygB,SAAS/f,OAC7CV,EAAQygB,SAAS,GAGlBzgB,GAPR,IAyDK+Z,EAAqBuH,UAG1B,GAAI6B,EAAqBhe,MACxB,OAGD,MAAMoc,EAAKpB,EAAKhb,MAEhB,GAAKoc,EAIL,GAAKtY,EAAMpI,QAAQuiB,iBAiBnBD,EAAqBhe,OAAQ,QACvB2E,EAAAA,EAAAA,MACNqZ,EAAqBhe,OAAQ,EAE7Bkc,SApBC,GAAIpY,EAAMpI,QAAQyiB,eAAgB,CACjC,MAAMa,EAAY5C,EAAGnX,aAAemX,EAAGC,UAEvC2B,EAAqBhe,OAAQ,QAEvB2E,EAAAA,EAAAA,MAENqZ,EAAqBhe,OAAQ,EAC7B+d,EAAoB/d,OAAQ,EAE5Boc,EAAGC,UAAYD,EAAGnX,aAAe+Z,CAClC,CASa,EAeTC,EAAe,KAGpB,GAAIlB,EAAoB/d,MAEvB,YADA+d,EAAoB/d,OAAQ,GAI7B,MAAMoc,EAAKpB,EAAKhb,MAEXoc,IAILtY,EAAMpI,QAAQuiB,iBAAmB7B,EAAGnX,aAAemX,EAAGC,UAAYD,EAAG8C,cAAgB,GAArF,EAGKrJ,EAAe,KAEhB/R,EAAMpI,QAAQuiB,kBACjB/B,GACD,EA8DD,OA3DA9Z,EAAAA,EAAAA,KAAU,KACT4Y,EAAKhb,OAAOmf,iBAAiB,SAAUF,EAAc,CAACG,SAAS,IAE/D9I,GAAAA,EAAAA,GAAY,SAAUT,IAEjBlR,EAAAA,EAAAA,KAAS,KACTmZ,EAAgB9d,OAASib,EAAejb,OAC3C8d,EAAgB9d,MAAMqf,QAAQpE,EAAejb,MAC9C,GAHD,KAODyE,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,QAAQ/B,KACpB,KACCmK,EAAMpI,QAAQuiB,kBAAmB,EAI7BH,EAAgB9d,OAASib,EAAejb,QAC3C8d,EAAgB9d,MAAMsf,UAAUrE,EAAejb,OAC/C8d,EAAgB9d,MAAMqf,QAAQpE,EAAejb,OAC9C,KAIFyE,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,QAAQ4f,WACpBa,gBACOvH,GAAN,GAED,CACC2K,MAAM,KAIR9a,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,QAAQ8jB,iBACpBrD,gBAEOvH,GAAN,KAIF6K,EAAAA,EAAAA,KAAe,KACd7B,IAAoB,CAApB,KAGDvb,EAAAA,EAAAA,KAAgB,KACfiU,GAAAA,EAAAA,IAAa,SAAUT,GACvBmF,EAAKhb,OAAO0f,oBAAoB,SAAUT,EAA1C,KAGD1I,EAAAA,EAAAA,KAAY,KACPuH,EAAgB9d,OACnB8d,EAAgB9d,MAAM2f,YACvB,IAGM,CACN3E,OACArgB,QACA+hB,kBACAzB,iBACA2E,OA/Ic,KACV5E,EAAKhb,OG5RG,SAAUgb,GAGxB,QAAqC,IAA1B3a,OAAOwf,eACjB,OAGD,MAAMC,EAAYzf,OAAO0f,eAEzB,IAAKD,EACJ,OAID,GAAIA,EAAUE,aAAeF,EAAUG,UACtC,OAGD,MAAMC,EAAQJ,EAAUK,WAAW,GAC7BC,EAAmBF,EAAMG,gBACzBC,EAAMnlB,SAASolB,cAAc,OAEnCD,EAAI3mB,GAAK,eACT2mB,EAAIE,YAAYJ,GAChBpF,EAAKwF,YAAYF,GAEjBR,EAAUW,kBAAkBH,GAE5BjgB,OAAOqgB,YAAW,KACjB1F,EAAK2F,YAAYL,GACjBR,EAAUc,kBACVd,EAAUe,SAASX,EAAnB,GACE,EACH,CH4PGY,CAAU9F,EAAKhb,MAChB,EA6IA6e,oBACAtC,wBAzL+B,CAC/B1hB,EACAlB,KAEA,MAAM6iB,EAAkBqC,EAAkB7e,MAAMrG,EAAK,GAErD,IAAK6iB,EACJ,OAAO,EAGR,MAAMuE,EAAU,IAAI5G,KAAKqC,EAAgBvc,MACnC+gB,EAAU,IAAI7G,KAAKtf,EAAQoF,MAEjC,OACC8gB,EAAQE,YAAcD,EAAQC,WAC9BF,EAAQG,aAAeF,EAAQE,YAC/BH,EAAQI,gBAAkBH,EAAQG,aAHnC,EA6KAC,0BAtKkCznB,IAC7BikB,IAAqBjkB,EAAKmK,EAAMpI,QAAQqjB,cAC5CnB,IAAoB,GACb,GAoKRhJ,qBACAmD,iBA/JwB,CAACsJ,EAAqC1nB,KAC9D,MAAM6iB,EAAkBqC,EAAkB7e,MAAMrG,EAAK,GACrD,SACC6iB,GACwB,YAAxB6E,EAAepkB,MACU,YAAzBuf,EAAgBvf,OAChBuf,EAAgBrH,MAChBkM,EAAelM,KAAKhN,OAASqU,EAAgBrH,KAAKhN,KALnD,EA8JA+T,eACAoF,oBA3G2BnF,MAAOphB,EAA4BF,WACxD+Z,IAGNpZ,EAAAA,EAAAA,KAAY,qBAAsB,CACjCC,OAAQqI,EAAMpI,QAAQ/B,GACtB4nB,MAAO1mB,EAAQlB,GACfoa,KAAMhZ,EAAQgZ,KACd9Y,MAAOF,EAAQE,OAJhB,EAyGD,II5aF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,4HJJ1DyG,EAAAA,EAAAA,IAuDM,MAvDN,GAuDM,WAtDLX,EAAAA,EAAAA,GAUM,MAVN,GAUM,EATLA,EAAAA,EAAAA,GAQS,UAPRS,IAAI,iBACHiC,SAAU7B,EAAAA,QAAQuc,iBAAmBvc,EAAAA,MAAMwC,MAAM0Y,YAClDjc,MAAM,MACLY,QAAK,Y,QAAEG,EAAAA,iBAAAA,EAAAA,mBAAAA,KAJT,CAMaA,EAAAA,QAAQuc,iBAAAA,EAAAA,EAAAA,OAApBzc,EAAAA,EAAAA,IAAmD,OAAAqB,GAAf,eAApC,WACArB,EAAAA,EAAAA,IAAuC,OAAAkF,GAA1B,yBAPd,OADD,YAAahF,EAAAA,QAAQ4f,yBAWrBzgB,EAAAA,EAAAA,GA0CM,OAzCLF,MAAM,WACNC,KAAK,MACL,YAAU,SACV,gBAAc,YACb8e,OAAI,Y,QAAEhe,EAAAA,QAAAA,EAAAA,UAAAA,KALR,gBAOCF,EAAAA,EAAAA,IAkCWwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAlCuB/W,EAAAA,mBAAiB,CAAjC/G,EAASlB,M,8BAEnBiI,EAAAA,wBAAwB/G,EAASlB,KAAjC,WADP0Q,EAAAA,EAAAA,IAKE0S,EAAA,CAHA3c,IAAKvF,EAAQlB,GAAE,QACfkB,QAASA,EACTmd,QAASnd,EAAQlB,KAAOiI,EAAAA,SAJ1B,+CAOOA,EAAAA,0BAA0BsI,OAAOrP,EAAQlB,OAAzC,WADP+H,EAAAA,EAAAA,IAMM,OAJJtB,IAAKvF,EAAQlB,GAAE,UAChBkH,MAAM,iBAHP,qBASmB,cAAZhG,EAAQoC,OAAI,WADnBoN,EAAAA,EAAAA,IAOEoX,EAAA,CALArhB,IAAKvF,EAAQygB,SAAQ,GAAI3hB,GACzB2C,QAASsF,EAAAA,QACT,uBAAsBA,EAAAA,mBACtB0Z,SAAUzgB,EAAQygB,SAClBtD,QAASnd,EAAQlB,KAAOiI,EAAAA,SAN1B,8EAQAyI,EAAAA,EAAAA,IAUE2S,EAAA,CARA5c,IAAKvF,EAAQlB,GACb+B,QAASkG,EAAAA,QACTtF,QAASsF,EAAAA,QACT/G,QAASA,EACT,uBAAsB+G,EAAAA,mBACtB,qBAAoBA,EAAAA,iBAAiB/G,EAASlB,GAC9Cqe,QAASnd,EAAQlB,KAAOiI,EAAAA,QACxB8f,oBAAqB9f,EAAAA,qBATvB,6HAvBD,OAPD,KAZD,I,eKCCb,EAAAA,EAAAA,GAAgC,QAA1BpH,GAAG,sBAAoB,S,IACvBA,GAAG,Q,4DAqCRA,GAAG,iBACHkH,MAAM,8CACN,aAAW,gB,4rkCC7Bd,MAAM8gB,GAAmBxnB,OAAOD,KAAK0nB,IAC/BC,GAA+B,CACpCloB,GAAI,QACJsQ,MAAO,2BACP6X,OAAOC,EAAcC,GAIpBA,EAASC,GADTF,EAAOA,EAAKG,QAAQ,KAAM,IACDP,IACzB,EACDQ,SAAQ,EAAEC,EAAQC,KACT,uBAAsBlY,OAAOyX,GAASS,cAAqBD,IAEpEF,QAAO,EAAE,CAAEG,KACH,KAAOlY,OAAOyX,GAASS,IAE/BC,MAAO,GAGFC,GAA+B,CACpC5oB,GAAI,QACJsQ,MAAO,4DACP6X,OAAOC,EAAcC,GAGJ,OAFhBD,EAAOA,EAAKljB,MAAM,IAET,GAGRmjB,EAASQ,GAAcT,EAAKljB,MAAM,IAAI,GAAMrF,KAAKipB,GAAQ,CAAC,IAAMA,EAAI,GAAI,IAAMA,EAAI,OAElFT,EAASQ,GAAcT,GAAM,GAE9B,EACDI,SAAQ,EAAEC,KACFA,EAERF,QAAO,EAAE,CAAEG,KACH,KAAOK,GAAYL,GAE3BC,MAAO,GAGFK,GAA8B,CACnChpB,GAAI,QACJsQ,MAAO,8CACP6X,OAAOC,EAAcC,GACpBA,EA6QF,SAAuBY,GACtB,MAAMC,EAAkB,GAExB,GAAIloB,EAAAA,EAAAA,MAAAA,cACH,IAAK,MAAMe,KAAWf,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,SAEA,YAAjBe,EAAQuB,MAAsBvB,EAAQyB,KAAK,KAAOylB,EAAK,IAC1DC,EAAM3nB,KAAKQ,EAAQyB,MAKtB,OAAO8kB,GAAUW,EAAMC,EACvB,CA1RUC,CAAcf,GACvB,EACDI,SAAQ,EAAEC,KACFA,EAERF,QAAO,EAAE,CAAEG,KACH,KAAOA,EAEfC,MAAO,GAGFS,GAAiC,CACtCppB,GAAI,WACJsQ,MAAO,YACP6X,OAAOC,EAAcC,GACpBA,EA2PMC,GA3PoB,IAAMF,EA+OlC,WACC,IAAIiB,EAAO5K,EAAAA,EAAAA,SAAAA,QAMX,OAJKzd,EAAAA,EAAAA,MAAAA,SAAAA,gBACJqoB,EAAOA,EAAKvkB,QAAQ9B,GAAY,YAANA,KAGpBqmB,CACP,CAGiBC,IAzPhB,EACDd,SAAQ,EAAEC,KACFA,EAERF,QAAO,EAAE,CAAEG,KACHA,EAERC,MAAO,GAGFY,GAAyC,CAC9CvpB,GAAI,oBACJsQ,MAAO,iCACP6X,OAAOC,EAAcC,GACpBD,EAAOA,EAAKoB,cAkBZnB,EAhB2B5J,EAAAA,EAAAA,aAAAA,QACjB9Y,GAAM8jB,KAAAA,KAAWrB,EAAMziB,EAAE,KAAO8jB,KAAAA,KAAWrB,EAAMziB,EAAE,MAC3D9F,KAAK8F,GACD8jB,KAAAA,KAAWrB,EAAMziB,EAAE,IACf,CACNA,EAAE,GACF8jB,KAAAA,MAAYrB,EAAMziB,EAAE,GAAI,CACvB+jB,IAAK,MACLC,KAAM,SACJC,UAIEjkB,IAIT,EACD6iB,SAASniB,GACA,sBAAqB0b,SAAS1b,EAAM,GAAI,QAAQA,EAAM,YAE/DkiB,QAAQliB,GACA,IAASA,EAAM,GAEvBsiB,MAAO,GAGFkB,GAAyC,CAC9C7pB,GAAI,oBACJsQ,MAAO,yCACP6X,OAAOC,EAAcC,EAAoD/X,GACxE8X,EAAOA,EAAKoB,cAkBZnB,EAjB2B5J,EAAAA,EAAAA,aAAAA,QACjB9Y,GAAM8jB,KAAAA,KAAWrB,EAAMziB,EAAE,KAAO8jB,KAAAA,KAAWrB,EAAMziB,EAAE,MAC3D9F,KAAKiqB,GACDL,KAAAA,KAAWrB,EAAM0B,EAAK,IAClB,CACNA,EAAK,GACLL,KAAAA,MAAYrB,EAAM0B,EAAK,GAAI,CAC1BJ,IAAK,MACLC,KAAM,SACJC,UAIEE,IAEPjqB,KAAKiqB,GAASA,EAAKC,OAAOzZ,EAAM,MAGlC,EACDkY,SAASniB,GACA,sBAAqB0b,SAAS1b,EAAM,GAAI,oBAAoB0b,SACnE1b,EAAM,GACN,QACKA,EAAM,YAEbkiB,QAAQliB,GACA,OAAYA,EAAM,GAE1BsiB,MAAO,GAyGR,SAASI,GAAYL,EAAkBsB,EAAW,GAEjD,OAAKhpB,EAAAA,EAAAA,MAAAA,SAAAA,YAKDgpB,EAAW,GAAK,KAAKC,KAAKjpB,EAAAA,EAAAA,MAAAA,eAA2Be,QAAQ8jB,gBAAkB,IAC3E6C,EAAW,IAIZA,EAAW1nB,EAAAA,EAAAA,MAAAA,SAAAA,YATV0nB,CAUR,CAED,SAASJ,GAAaF,EAAc8B,GAKnC,OAJgBT,KAAAA,OAAarB,EAAM8B,EAAO,CACzCR,IAAK,MACLC,KAAM,SAEQ9pB,KAAK4iB,GAAO,CAACA,EAAGgG,OAAQhG,EAAGiG,WAC1C,CAyBD,SAASG,GAAcI,EAAckB,GACpC,MAAMC,EAxBP,WACC,IAAKppB,EAAAA,EAAAA,MAAAA,cACJ,MAAO,GAGR,GAAIA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,MAAAA,OAAiD,EAGpD,OAFcA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,MAAAA,QAEDqpB,MAAK,CAACC,EAAGC,IAAMA,EAAEhG,YAAc+F,EAAE/F,cAAa1kB,KAAK2qB,GAAMA,EAAEhc,OAGzE,MAAMic,EAAKzpB,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,KACL0pB,EAAY1pB,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,KAGlB,OAAIypB,IAAOC,GAAwD,UAA3C1pB,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,KAChB,CAAC0pB,EAAWD,GAIb,CAACA,EACR,CAGcE,GAGd,OAFA1B,EAAOA,EAAKO,cAERW,EACI7B,GAAUW,EAAMmB,GAGjBA,EAAMtlB,QAAQ8lB,IAAOA,EAAEpB,cAAcqB,QAAQ5B,IACpD,C,0BDrPD,MAAM6B,GAAoB,CACzB,QAAS,IACT,QAAS,IACT,QAAS,IACT,QAAS,IACT,QAAS,IACT,QAAS,IACT,QAAS,KAKJC,GAAe,CACpB,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACLC,EAAG,KAGJ,QAAetjB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,YACN2G,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAMwC,GACL,MAAMnJ,GAAQgJ,EAAAA,EAAAA,MACRjJ,GAAQ8G,EAAAA,EAAAA,MACRojB,GAAcpjB,EAAAA,EAAAA,MACdqjB,GAAoBrjB,EAAAA,EAAAA,MAEpBsjB,EAAe,MACfngB,EAAAA,EAAAA,KAAS,KACb,IAAKjK,EAAMsF,MACV,OAGD,MAAM+E,EAAQ1E,OAAO0kB,iBAAiBrqB,EAAMsF,OACtCglB,EAAavlB,WAAWsF,EAAMigB,aAAe,EAInDtqB,EAAMsF,MAAM+E,MAAM5D,OAAS,GAK3BzG,EAAMsF,MAAM+E,MAAM5D,OACjBjC,KAAK8F,KAAKtK,EAAMsF,MAAMiF,aAAe+f,GAAcA,EADxB,IAA5B,GAfD,EA4GKC,EAAY,KACjBvqB,EAAMsF,OAAO0Z,MAAb,EAkID,OAzHAjV,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,QAAQ/B,KACpB,KACKkrB,EAAkB7kB,OACrB6kB,EAAkB7kB,MAAMklB,MACzB,KAIFzgB,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,QAAQ8jB,iBACpB,KACCsF,GAAc,KAIhB1iB,EAAAA,EAAAA,KAAU,KAGT,GAFAkU,GAAAA,EAAAA,GAAY,YAAa2O,GAErBtqB,EAAMyJ,MAAMoP,SAAStQ,aAAc,CACtC,IAAKxI,EAAMsF,MACV,MAAM,IAAIhG,MAAM,0DAGjB6qB,EAAkB7kB,MC5FtB,SAA4BtF,GAC3B,IAAIyqB,EAAW,EACXC,EAAY,GACZC,EAAwC,GAE5C3qB,EAAMykB,iBAAiB,SAAUplB,IACE,iBAA7BA,EAAkBurB,SAIvBH,EAAW,EACXE,EAAiB,GACjBD,EAAY,GAAZ,IAGDG,KAAU7qB,GAAO8qB,KAChB,OACCzrB,IACA,GAAIY,EAAAA,EAAAA,MAAAA,iBACH,OAGDZ,EAAEwI,iBAEF,MAAMxF,EAAOrC,EAAMsF,MAEnB,GAAiB,IAAbmlB,EAAgB,CAGnB,GAFAC,EAAYroB,EAAKd,UAAU,EAAGvB,EAAM+qB,gBAAgB/oB,MAAM,MAAM+gB,OAAS,GAEhD,IAArB2H,EAAU7pB,OACb,OAKD,GAFA8pB,EAAiB7C,GAAc4C,GAAW,GAEZ,IAA1BC,EAAe9pB,OAClB,MAED,CAED,MAAMooB,EAAWjpB,EAAM+qB,eAAiBL,EAAU7pB,OAC5CmqB,EAAWhD,GAEhBvY,OAAOkb,EAAeF,EAAWE,EAAe9pB,SAChDooB,GAEKgC,EAAY5oB,EAAKd,UAAUvB,EAAM+qB,gBAEvC/qB,EAAMsF,MAAQjD,EAAK6oB,OAAO,EAAGjC,GAAY+B,EAAWC,EAEpDjrB,EAAM+qB,gBAAkBE,EAAUpqB,OAClCb,EAAMmrB,aAAenrB,EAAM+qB,eAG3B/qB,EAAMorB,cACL,IAAIC,YAAY,QAAS,CACxBT,OAAQ,kBAIVF,EAAYM,EACZP,GAAU,GAEX,WAGD,MAAMa,EAAa,CAClBnE,GACAU,GACAI,GACAI,GACAG,GACAM,IAGKyC,EAAS,IAAIC,GAAAA,EAAexrB,GAC5ByrB,EAAe,IAAIC,GAAAA,aAAaH,EAAQD,EAAY,CACzDK,SAAU,CACT9b,UAAW,oBACX+b,UAAW,SAYb,OARAH,EAAahoB,GAAG,QAAQ,KACvBxD,EAAAA,EAAAA,OAAa,oBAAoB,EAAjC,IAGDwrB,EAAahoB,GAAG,UAAU,KACzBxD,EAAAA,EAAAA,OAAa,oBAAoB,EAAjC,IAGM,CACNuqB,OACCiB,EAAajB,MACb,EACDqB,UACCJ,EAAaI,UACb5rB,EAAAA,EAAAA,OAAa,oBAAoB,EACjC,EAEF,CDR6B6rB,CAAe9rB,EAAMsF,MAChD,CAEA,MAAMymB,EAAYlB,KAAU7qB,EAAMsF,OAElCymB,EAAUjB,KAAKrrB,OAAOD,KAAKuqB,KAAoB,SAAU1qB,EAAGqG,GAC3D,MAAMsmB,EAAWjC,GAAkBrkB,GAEnC,GAAKrG,EAAE0B,OAaP,OATAkrB,EAAAA,GAAAA,YACC5sB,EAAE0B,OACFirB,EACC3sB,EAAE0B,OAA+BgqB,iBAChC1rB,EAAE0B,OAA+BoqB,aAChC,GACAa,IAGG,CACP,IAEDD,EAAUjB,KAAKrrB,OAAOD,KAAKwqB,KAAe,SAAU3qB,EAAGqG,GACtD,GACErG,EAAE0B,QAAgCgqB,iBAClC1rB,EAAE0B,OAA+BoqB,aAIlC,OAFAc,EAAAA,GAAAA,YAAW5sB,EAAE0B,OAA+B2E,EAAKskB,GAAatkB,KAEvD,CAER,IAEDqmB,EAAUjB,KAAK,CAAC,KAAM,SAAS,CAACzrB,EAAGqG,KAClC,GACCzF,EAAMyJ,MAAMwiB,kBACX7sB,EAAE0B,OAA+BgqB,iBAChC1rB,EAAE0B,OAA+BoqB,eAClCnrB,EAAMsF,MAEP,OAGD,MAAM6mB,GACLnsB,EAAMsF,MAAMA,MAAMnB,WAAMioB,EAAWpsB,EAAMsF,MAAMylB,gBAAgBxb,MAAM,QACrE,IACC1O,OACIwrB,GAAarsB,EAAMsF,MAAMA,MAAMiK,MAAM,QAAU,IAAI1O,QAEnD,QAACG,GAAWoI,EAMlB,GAJqC,IAAjCpI,EAAQsrB,uBACXtrB,EAAQurB,aAAavrB,EAAQsrB,sBAAwBtrB,EAAQ8jB,gBAGlD,OAARpf,GAA0B,IAAVymB,EAAa,CAChC,KAAInrB,EAAQsrB,qBAAuBtrB,EAAQurB,aAAa1rB,OAAS,GAGhE,OAFAG,EAAQsrB,sBAIV,KAAO,MACE,SAAR5mB,GACA1E,EAAQsrB,qBAAuB,GAC/BH,IAAUE,GAIV,OAFArrB,EAAQsrB,sBAGT,CAMA,OAJAtrB,EAAQ8jB,eAAiB9jB,EAAQurB,aAAavrB,EAAQsrB,sBACtDtsB,EAAMsF,MAAMA,MAAQtE,EAAQ8jB,eAC5BsF,KAEO,CAAP,IAGGnqB,EAAMyJ,MAAMC,qBAAqB6iB,YACpCC,GAAAA,EAAAA,SACD,KAGD5Q,EAAAA,EAAAA,KAAY,KACXD,GAAAA,EAAAA,IAAa,YAAa2O,GAEtBJ,EAAkB7kB,QACrB6kB,EAAkB7kB,MAAMumB,UACxB1B,EAAkB7kB,WAAQ8mB,GAG3BK,GAAAA,EAAAA,YACAA,GAAAA,EAAAA,OAAA,IAGM,CACNxsB,QACAD,QACAkqB,cACAwC,oBArJ2B,KAC3B,IAAKxC,EAAY5kB,QAAU4kB,EAAY5kB,MAAMqnB,MAC5C,OAGD,MAAMA,EAAQzd,MAAMuL,KAAKyP,EAAY5kB,MAAMqnB,OAC3CF,GAAAA,EAAAA,cAAqBE,GACrBzC,EAAY5kB,MAAMA,MAAQ,EAA1B,EA+IAsnB,eA5IsB,KACtB1C,EAAY5kB,OAAOunB,OAAnB,EA4IAtC,YACApL,OAtIc,KACVgL,EAAkB7kB,OACrB6kB,EAAkB7kB,MAAMklB,MACzB,EAoIAJ,eACAqC,OATM,KAUNK,oBA9N4B9rB,GACP,YAAjBA,EAAQuB,MAAuC,UAAjBvB,EAAQuB,KACjC,YAAWvB,EAAQyB,OAGrB,GA0NPmF,SAvNgB,KAChB,IAAK5H,EAAMsF,MACV,OAQD,GAHAtF,EAAMsF,MAAMunB,QACZ7sB,EAAMsF,MAAM4E,SAEPjK,EAAMyJ,MAAM0Y,YAChB,OAAO,EAGR,MAAMrhB,EAASqI,EAAMpI,QAAQ/B,GACvBoD,EAAO+G,EAAMpI,QAAQ8jB,eAE3B,GAAoB,IAAhBziB,EAAKxB,OACR,OAAO,EAsBR,GAnBIspB,EAAkB7kB,OACrB6kB,EAAkB7kB,MAAMklB,OAGzBphB,EAAMpI,QAAQsrB,qBAAuB,EACrCljB,EAAMpI,QAAQ8jB,eAAiB,GAC/B9kB,EAAMsF,MAAMA,MAAQ,GACpB8kB,IAGIhhB,EAAMpI,QAAQurB,aAAa,KAAOlqB,GACrC+G,EAAMpI,QAAQurB,aAAaQ,OAAO,EAAG,EAAG1qB,GAIrC+G,EAAMpI,QAAQurB,aAAa1rB,OAAS,KACvCuI,EAAMpI,QAAQurB,aAAaxJ,MAGZ,MAAZ1gB,EAAK,GAAY,CACpB,MAAMZ,EAAOY,EAAKd,UAAU,GAAGS,MAAM,KAC/BgrB,EAAMvrB,EAAKwrB,SAASxE,cAE1B,IAAKuE,EACJ,OAAO,EAGR,GACCvtB,OAAO2P,UAAUC,eAAeC,KAAKrO,GAAAA,QAAU+rB,IAC/C/rB,GAAAA,QAAS+rB,GAAKhtB,MAAMyB,GAEpB,OAAO,CAET,CAEAX,EAAAA,EAAAA,KAAY,QAAS,CAACC,SAAQsB,QAA9B,EAgKA6qB,kBAtO0B7tB,IAC1B+J,EAAMpI,QAAQ8jB,eAAkBzlB,EAAE0B,OAA4BuE,MAC9D8D,EAAMpI,QAAQsrB,qBAAuB,EACrClC,GAAc,EAqOf,IE9VF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCFJ1DpjB,EAAAA,EAAAA,IAkDO,QAlDD/H,GAAG,OAAOgJ,OAAO,OAAOC,OAAO,GAAIN,SAAM,sB,QAAUV,EAAAA,UAAAA,EAAAA,YAAAA,IAAQ,eAAjE,CACCmK,IACAhL,EAAAA,EAAAA,GAAyC,OAAzC,IAAyCqF,EAAAA,EAAAA,IAAtBxE,EAAAA,QAAQuG,MAAI,IAC/BpH,EAAAA,EAAAA,GAYE,YAXDpH,GAAG,QACH6H,IAAI,QACJmT,IAAI,OACJ9T,MAAM,YACNgnB,aAAa,OACZ7nB,MAAO4B,EAAAA,QAAQ4d,eACf7Y,YAAa/E,EAAAA,oBAAoBA,EAAAA,SACjC,aAAYA,EAAAA,oBAAoBA,EAAAA,SAChCyG,QAAK,Y,QAAEzG,EAAAA,mBAAAA,EAAAA,qBAAAA,IACPoJ,WAAQ,+B,QAAsBpJ,EAAAA,UAAAA,EAAAA,YAAAA,IAAQ,iCACtCiY,OAAI,Y,QAAEjY,EAAAA,QAAAA,EAAAA,UAAAA,KAXR,YAcOA,EAAAA,MAAMwC,MAAMC,qBAAqB6iB,aAAAA,EAAAA,EAAAA,OADxCxlB,EAAAA,EAAAA,IAqBO,Q,MAnBN/H,GAAG,iBACHkH,MAAM,8CACN,aAAW,cACVY,QAAK,Y,QAAEG,EAAAA,gBAAAA,EAAAA,kBAAAA,KALT,EAOCb,EAAAA,EAAAA,GAOE,SANDpH,GAAG,eACH6H,IAAI,cACJvE,KAAK,OACL,kBAAgB,SAChB6qB,SAAA,GACC5e,SAAM,Y,QAAEtH,EAAAA,qBAAAA,EAAAA,uBAAAA,KANV,WAQAb,EAAAA,EAAAA,GAKE,UAJDpH,GAAG,SACHsD,KAAK,SACL,aAAW,cACVwG,UAAW7B,EAAAA,MAAMwC,MAAM0Y,aAJzB,eAfD,gBAsBA/b,EAAAA,EAAAA,GAWO,OAXP,GAWO,EANNA,EAAAA,EAAAA,GAKE,UAJDpH,GAAG,SACHsD,KAAK,SACL,aAAW,eACVwG,UAAW7B,EAAAA,MAAMwC,MAAM0Y,aAJzB,cA3CF,G,iCGMMjc,MAAM,S,+BAmBNA,MAAM,SAuCPknB,GAAQ,CACb,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,KACL,IAAK,UACL,IAAK,QACL,GAAI,UAGL,QAAe1mB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,eACN0E,WAAY,CACXiW,SAAQA,GAAAA,GAEThU,MAAO,CACNpI,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAMwC,GACL,MAAMkkB,GAAkBxmB,EAAAA,EAAAA,IAAI,IACtBymB,GAAazmB,EAAAA,EAAAA,MACb0mB,GAAW1mB,EAAAA,EAAAA,MACX2mB,GAAgB1S,EAAAA,EAAAA,KAAS,KAC9B,GAAKuS,EAAgBhoB,MAIrB,OAAOooB,EAAAA,GAAAA,QAAYJ,EAAgBhoB,MAAO8D,EAAMpI,QAAQqoB,MAAO,CAC9DV,IAAK,MACLC,KAAM,OACN+E,QAAUlE,GAAMA,EAAEhc,MAHnB,IAOKmgB,GAAe7S,EAAAA,EAAAA,KAAS,KAC7B,MAAM8S,EAAS,CAAC,EAEhB,GAAIP,EAAgBhoB,OAASmoB,EAAcnoB,MAAO,CACjD,MAAMwoB,EAASL,EAAcnoB,MAE7B,IAAK,MAAMyC,KAAQ+lB,EAAQ,CAC1B,MAAMC,EAAOhmB,EAAK4f,SAAS0F,MAAM,IAAM,GAElCQ,EAAOE,KACXF,EAAOE,GAAQ,IAIhBhmB,EAAK2f,OAASqG,EAAOhmB,EAAK2f,OAE1BmG,EAAOE,GAAMvtB,KAAKuH,EACnB,CACD,MACC,IAAK,MAAMA,KAAQqB,EAAMpI,QAAQqoB,MAAO,CACvC,MAAM0E,EAAOhmB,EAAKslB,MAAM,IAAM,GAEzBQ,EAAOE,GAGXF,EAAOE,GAAMvtB,KAAKuH,GAFlB8lB,EAAOE,GAAQ,CAAChmB,EAIlB,CAGD,OAAO8lB,CAAP,IAgDKG,EAAqB,MAErB/jB,EAAAA,EAAAA,KAAS,KACb,MAAMyX,EAAK8L,EAASloB,OAAOiU,cAAc,WACzCmI,GAAIuM,eAAe,CAACC,MAAO,UAAWC,OAAQ,WAA9C,GAFD,EA2DD,MAAO,CACNV,gBACAG,eACAN,kBACAC,aACAC,WAEAY,mBA5G2B/uB,IAC3BiuB,EAAgBhoB,MAASjG,EAAE0B,OAA4BuE,KAAvD,EA4GA+oB,aAzGqBN,GACdV,GAAMU,GAyGbO,WAtGkB,KAGlB,IAAKf,EAAWjoB,QAAUkoB,EAASloB,MAClC,OAGD,MAAMoc,EAAK8L,EAASloB,MAAMiU,cAAc,WAExC,IAAKmI,EACJ,OAGD,MAAM6M,EAAO7M,EAAG8M,wBACVC,EAAK,IAAIC,WAAW,QAAS,CAClCC,KAAMhpB,OACNipB,SAAS,EACTC,YAAY,EACZC,QAASP,EAAKQ,KACdC,QAAST,EAAKU,IAAMV,EAAK9nB,SAE1Bib,EAAG0J,cAAcqD,EAAjB,EAkFAS,UA/EkBnnB,IAClBwlB,EAAWjoB,MAAQyC,CAAnB,EA+EAonB,gBA5EuB,KACvB5B,EAAWjoB,MAAQ,IAAnB,EA4EA8pB,iBAjEwB,CAAChqB,EAAciqB,KAGvCjqB,EAAMkqB,2BACNlqB,EAAMyC,iBAEN,IAAIwhB,EAAQjgB,EAAMpI,QAAQqoB,MAQ1B,GALIiE,EAAgBhoB,OAASmoB,EAAcnoB,QAC1C+jB,EAAQoE,EAAcnoB,MAAMxG,KAAKgvB,GAAWA,EAAOnG,aAI/C0B,EAAMxoB,OAEV,YADA0sB,EAAWjoB,MAAQ,MAIpB,MAAMiqB,EAAQ,KACbhC,EAAWjoB,MAAQ+pB,EAAYhG,EAAM,GAAKA,EAAMA,EAAMxoB,OAAS,GAC/DmtB,GAAoB,EAIrB,IAAKT,EAAWjoB,MAEf,YADAiqB,IAID,IAAIC,EAAenG,EAAMS,QAAQyD,EAAWjoB,OAE5C,IAAsB,IAAlBkqB,EAAJ,CASA,IAJAA,GAAgBH,EAITG,EAAe,GACrBA,GAAgBnG,EAAMxoB,OAGvB,KAAO2uB,EAAenG,EAAMxoB,OAAS,GACpC2uB,GAAgBnG,EAAMxoB,OAGvB0sB,EAAWjoB,MAAQ+jB,EAAMmG,GACzBxB,GAfA,MAFCuB,GAiBmB,EAiBrB,ICrPF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,qEDJ1DvoB,EAAAA,EAAAA,IAsDQ,SArDPF,IAAI,WACJX,MAAM,WACL,aAAU,iBAAqBe,EAAAA,QAAQzE,KACvCgtB,aAAU,Y,QAAEvoB,EAAAA,iBAAAA,EAAAA,mBAAAA,KAJd,EAMCb,EAAAA,EAAAA,GAkBM,MAlBN,GAkBM,EAjBLA,EAAAA,EAAAA,GAgBE,SAfDS,IAAI,QACHxB,MAAO4B,EAAAA,gBACP+E,YAAmB/E,EAAAA,QAAQmiB,MAAMxoB,OAAM,SAAkC,IAApBqG,EAAAA,QAAQmiB,MAAMxoB,OAAM,QAG1E0B,KAAK,SACL4D,MAAM,SACN,aAAW,6BACX6T,SAAS,KACRrM,QAAK,Y,QAAEzG,EAAAA,oBAAAA,EAAAA,sBAAAA,IACPwoB,UAAO,0BAAKxoB,EAAAA,iBAAiBuE,GAAM,aAA5B,yBACOvE,EAAAA,iBAAiBuE,EAAM,eAD9B,yBAEUvE,EAAAA,iBAAiBuE,GAAM,mBAFjC,yBAGYvE,EAAAA,iBAAiBuE,EAAM,qBAHnC,sB,QAIQvE,EAAAA,YAAAA,EAAAA,cAAAA,IAAU,cAf3B,eAkBDb,EAAAA,EAAAA,GA4BM,MA5BN,GA4BM,gBA3BLW,EAAAA,EAAAA,IA0BMwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAzBmB/W,EAAAA,cAAY,CAA5BmiB,EAAO0E,M,WADhB/mB,EAAAA,EAAAA,IA0BM,OAxBJtB,IAAKqoB,EACL5nB,OAAK,qBAAgBe,EAAAA,aAAauI,OAAOse,OAH3C,CAKiB7mB,EAAAA,gBAAgBrG,OAAM,iBAErCmG,EAAAA,EAAAA,IAOEwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAAuY,EAAAA,EAAAA,IANcoL,GAARthB,K,WADR4H,EAAAA,EAAAA,IAOEyO,EAAA,CALA1Y,IAAKqC,EAAK4f,SAASla,KAAI,UACvB,WAAUvG,EAAAA,UACVmJ,OAAQtI,EAAK4f,WAAazgB,EAAAA,WAC1Ba,KAAMA,EAAK4f,SACZhO,UAAQ5R,EAAK2f,QANd,yEAWA1gB,EAAAA,EAAAA,IAMEwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAAuY,EAAAA,EAAAA,IALcoL,GAARthB,K,WADR4H,EAAAA,EAAAA,IAMEyO,EAAA,CAJA1Y,IAAKqC,EAAK0F,KACV,WAAUvG,EAAAA,UACVmJ,OAAQtI,IAASb,EAAAA,WACjBa,KAAMA,GALR,+CAlBF,eA1BF,M,eEAO5B,MAAM,Y,IACZE,EAAAA,EAAAA,GAMQ,eALPA,EAAAA,EAAAA,GAIK,YAHJA,EAAAA,EAAAA,GAAgC,MAA5BF,MAAM,YAAW,WACrBE,EAAAA,EAAAA,GAAoC,MAAhCF,MAAM,aAAY,cACtBE,EAAAA,EAAAA,GAAoC,MAAhCF,MAAM,aAAY,iBAJxB,G,IASMA,MAAM,Y,IACNA,MAAM,a,IACNA,MAAM,aAYd,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,WACN0E,WAAY,CACX+V,cAAaA,GAAAA,GAEd9T,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAK,KAKG,CACNiX,WALmB8R,IACZC,EAAAA,GAAAA,GAAWD,OC7BrB,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,0EDJ1D3oB,EAAAA,EAAAA,IAeQ,QAfR,GAeQ,CAdPmB,IAOA9B,EAAAA,EAAAA,GAMQ,6BALPW,EAAAA,EAAAA,IAIKwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAJa/W,EAAAA,QAAQkE,MAAfykB,K,WAAX7oB,EAAAA,EAAAA,IAIK,MAJ4BtB,IAAKmqB,EAAIC,UAA1C,EACCzpB,EAAAA,EAAAA,GAAmF,KAAnF,GAAmF,EAA9DuC,EAAAA,EAAAA,IAAyDyV,EAAA,CAAzCzc,QAASsF,EAAAA,QAAU7E,KAAMwtB,EAAIC,UAA7C,8BACrBzpB,EAAAA,EAAAA,GAA8C,KAA9C,IAA8CqF,EAAAA,EAAAA,IAArBmkB,EAAIE,WAAS,IACtC1pB,EAAAA,EAAAA,GAA0D,KAA1D,IAA0DqF,EAAAA,EAAAA,IAAjCxE,EAAAA,WAAW2oB,EAAIG,YAAS,QAHlD,S,eETK7pB,MAAM,e,IACZE,EAAAA,EAAAA,GAMQ,eALPA,EAAAA,EAAAA,GAIK,YAHJA,EAAAA,EAAAA,GAAiC,MAA7BF,MAAM,YAAW,YACrBE,EAAAA,EAAAA,GAAwC,MAApCF,MAAM,gBAAe,eACzBE,EAAAA,EAAAA,GAAwC,MAApCF,MAAM,gBAAe,kBAJ3B,G,IASMA,MAAM,Y,IAGNA,MAAM,gB,IACNA,MAAM,gBAYd,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN0E,WAAY,CACX+V,cAAaA,GAAAA,GAEd9T,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAK,KACG,CACNiX,WAAa8R,IAAe9R,EAAAA,GAAAA,GAAW8R,OC/B1C,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,0EDJ1D3oB,EAAAA,EAAAA,IAiBQ,QAjBR,GAiBQ,CAhBPmB,IAOA9B,EAAAA,EAAAA,GAQQ,6BAPPW,EAAAA,EAAAA,IAMKwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IANgB/W,EAAAA,QAAQkE,MAAlB6kB,K,WAAXjpB,EAAAA,EAAAA,IAMK,MAN+BtB,IAAKuqB,EAAOH,UAAhD,EACCzpB,EAAAA,EAAAA,GAEK,KAFL,GAEK,EADJuC,EAAAA,EAAAA,IAA4DyV,EAAA,CAA5Czc,QAASsF,EAAAA,QAAU7E,KAAM4tB,EAAOH,UAAhD,8BAEDzpB,EAAAA,EAAAA,GAAqD,KAArD,IAAqDqF,EAAAA,EAAAA,IAAzBukB,EAAOC,YAAU,IAC7C7pB,EAAAA,EAAAA,GAAiE,KAAjE,IAAiEqF,EAAAA,EAAAA,IAArCxE,EAAAA,WAAW+oB,EAAOE,aAAU,QALzD,S,gCERYhqB,MAAM,gB,IACnBE,EAAAA,EAAAA,GAMQ,eALPA,EAAAA,EAAAA,GAIK,YAHJA,EAAAA,EAAAA,GAAgC,MAA5BF,MAAM,WAAU,YACpBE,EAAAA,EAAAA,GAA4B,MAAxBF,MAAM,SAAQ,UAClBE,EAAAA,EAAAA,GAA4B,MAAxBF,MAAM,SAAQ,aAJpB,G,IASMA,MAAM,W,IACNA,MAAM,S,IACNA,MAAM,SAWd,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,eACN0E,WAAY,CACX+V,cAAaA,GAAAA,GAEd9T,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,MCzB5D,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,+DDJ9CvB,EAAAA,QAAQkE,KAAK/I,OAAAA,EAAAA,EAAAA,OAAzB2E,EAAAA,EAAAA,IAA6D,OAAAqK,IAAA3F,EAAAA,EAAAA,IAA3BxE,EAAAA,QAAQkE,KAAK/I,MAAI,MAAnD,WACA2E,EAAAA,EAAAA,IAeQ,QAfR,GAeQ,CAdPoB,IAOA/B,EAAAA,EAAAA,GAMQ,6BALPW,EAAAA,EAAAA,IAIKwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAJc/W,EAAAA,QAAQkE,MAAhBhJ,K,WAAX4E,EAAAA,EAAAA,IAIK,MAJ6BtB,IAAKtD,EAAKpB,SAA5C,EACCqF,EAAAA,EAAAA,GAAkF,KAAlF,GAAkF,EAA9DuC,EAAAA,EAAAA,IAAyDyV,EAAA,CAAzCzc,QAASsF,EAAAA,QAAU7E,KAAMD,EAAKpB,SAA9C,8BACpBqF,EAAAA,EAAAA,GAA2C,KAA3C,IAA2CqF,EAAAA,EAAAA,IAAtBtJ,EAAKguB,WAAS,IACnC/pB,EAAAA,EAAAA,GAA8E,KAA9E,GAA8E,EAA5DuC,EAAAA,EAAAA,IAAuDyV,EAAA,CAAvCzc,QAASsF,EAAAA,QAAU7E,KAAMD,EAAKiuB,OAA9C,kCAHnB,U,eEVKlqB,MAAM,e,IACZE,EAAAA,EAAAA,GAKQ,eAJPA,EAAAA,EAAAA,GAGK,YAFJA,EAAAA,EAAAA,GAAkC,MAA9BF,MAAM,YAAW,aACrBE,EAAAA,EAAAA,GAAgC,MAA5BF,MAAM,QAAO,kBAHnB,G,IAQMA,MAAM,Y,IACNA,MAAM,QAYd,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN0E,WAAY,CACX+V,cAAaA,GAAAA,GAEd9T,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3D7B,MAAK,KACG,CACNiX,WAAUA,GAAAA,MC3Bb,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,0EDJ1D7W,EAAAA,EAAAA,IAaQ,QAbR,GAaQ,CAZPmB,IAMA9B,EAAAA,EAAAA,GAKQ,6BAJPW,EAAAA,EAAAA,IAGKwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAHc/W,EAAAA,QAAQkE,MAAhBrD,K,WAAXf,EAAAA,EAAAA,IAGK,MAH6BtB,IAAKqC,EAAK+nB,UAA5C,EACCzpB,EAAAA,EAAAA,GAAoF,KAApF,GAAoF,EAA/DuC,EAAAA,EAAAA,IAA0DyV,EAAA,CAA1Czc,QAASsF,EAAAA,QAAU7E,KAAM0F,EAAK+nB,UAA9C,8BACrBzpB,EAAAA,EAAAA,GAAiD,KAAjD,IAAiDqF,EAAAA,EAAAA,IAA7BxE,EAAAA,WAAWa,EAAKuoB,OAAI,QAFzC,S,KjBkIH,IAAe3pB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,OACN0E,WAAY,CACX+V,cADW,KAEXqT,YAFW,GAGXC,UAHW,GAIXC,aAJW,GAKXtnB,cALW,GAMXkX,kBAAiBA,IAElBjX,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,GAC1D6U,QAAS9N,QAEVkhB,MAAO,CAAC,mBACR9pB,MAAMwC,GAAO,KAACnF,IACb,MAAMhE,GAAQgJ,EAAAA,EAAAA,MAER0nB,GAAc7pB,EAAAA,EAAAA,MACd8pB,GAAa9pB,EAAAA,EAAAA,IAA6B,MAE1C+pB,GAAmB9V,EAAAA,EAAAA,KAAS,KACjC,OAAQ3R,EAAMpI,QAAQ8vB,SACrB,IAAK,YACJ,OAAOC,GACR,IAAK,eACJ,OAAOC,GACR,IAAK,gBACJ,OAAOC,GACR,IAAK,eACJ,OAAOC,GAGT,IAGKC,EAAiB,KAEtBltB,EAAK,kBAAmBmF,EAAMpI,SAE9BF,EAAAA,EAAAA,KAAY,OAAQsI,EAAMpI,QAAQ/B,IAE9BmK,EAAMpI,QAAQowB,gBACjBhoB,EAAMpI,QAAQowB,eAAgB,EAE9BtwB,EAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQqI,EAAMpI,QAAQ/B,KAExB,EAuED,OA5BA8K,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,UACZ,KACCmwB,GAAgB,KAIlBpnB,EAAAA,EAAAA,KACC,IAAMX,EAAMpI,QAAQqwB,YACnBC,IACIA,IACErnB,EAAAA,EAAAA,KAAS,KACb2mB,EAAWtrB,OAAO4E,OAAlB,GAEF,KAIFxC,EAAAA,EAAAA,KAAU,KACTypB,IAEI/nB,EAAMpI,QAAQqwB,YACZpnB,EAAAA,EAAAA,KAAS,KACb2mB,EAAWtrB,OAAO4E,OAAlB,GAEF,IAGM,CACNjK,QACA0wB,cACAC,aACAC,mBACAU,qBAzE4B,KAC5BtxB,EAAMiJ,OAAO,0BAA2B,KAAxC,EAyEAmoB,UAtEiB,KACU,YAAvBjoB,EAAMpI,QAAQuB,OACjB6G,EAAMpI,QAAQqwB,WAAY,EAC3B,EAoEAG,UAjEiB,KAGjB,GAFApoB,EAAMpI,QAAQqwB,WAAY,GAErBT,EAAWtrB,MACf,OAGD,MAAMgsB,EAAWV,EAAWtrB,MAAMA,MAElC,GAAI8D,EAAMpI,QAAQqvB,QAAUiB,EAAU,CACrC,MAAMvwB,EAASqI,EAAMpI,QAAQ/B,GACvBoD,EAAQ,cAAa+G,EAAMpI,QAAQyB,SAAS6uB,IAClDxwB,EAAAA,EAAAA,KAAY,QAAS,CAACC,SAAQsB,QAC/B,GAqDAovB,gBAlDwBrsB,IACxBwW,GAAAA,EAAAA,KAAc,sBAAuB,CACpCxW,MAAOA,EACPpE,QAASoI,EAAMpI,QACfY,QAASwH,EAAMxH,SAHhB,EAkDA8vB,aA3CqBtsB,IACrBwW,GAAAA,EAAAA,KAAc,kBAAmB,CAChCxW,MAAOA,GADR,EA4CD,ImBvQF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,mNnBJ1D4B,EAAAA,EAAAA,IAsHM,OAtHD/H,GAAG,iBAAiBkH,MAAM,SAAU,uBAAsBe,EAAAA,QAAQzE,KAAMkvB,KAAK,IAAlF,EACCtrB,EAAAA,EAAAA,GA4GM,OA3GLpH,GAAG,OACFkH,OAAK,S,aAAsBe,EAAAA,MAAMwC,MAAMoP,SAAS8Y,K,eAA0B1qB,EAAAA,MAAMwC,MAAMoP,SAAS2E,Y,WAA6BvW,EAAAA,MAAMwC,MAAMoP,SAAS0E,Y,sBAFnJ,EASCnX,EAAAA,EAAAA,GAkGM,OAjGJpH,GAAE,QAAYiI,EAAAA,QAAQjI,GACvBkH,MAAM,YACL,YAAWe,EAAAA,QAAQ3E,KACnB,aAAY2E,EAAAA,QAAQzE,KACrB2D,KAAK,YALN,EAOCC,EAAAA,EAAAA,GA0DM,MA1DN,GA0DM,EAzDLuC,EAAAA,EAAAA,IAAiB0C,IACjBjF,EAAAA,EAAAA,GAES,QAFHF,MAAM,QAAS,aAAU,kBAAsBe,EAAAA,QAAQ3E,OAA7D,QACC2E,EAAAA,QAAQzE,MAAI,EAAA4F,KAEe,IAAjBnB,EAAAA,QAAQmqB,YAAS,WAA5BrqB,EAAAA,EAAAA,IAaM,MAbN,GAaM,EAZLX,EAAAA,EAAAA,GAQE,SAPDS,IAAI,aACHxB,MAAO4B,EAAAA,QAAQmpB,MAChBlqB,MAAM,cACN8F,YAAY,oBACZkhB,aAAa,OACZ/N,QAAK,uB,QAAQlY,EAAAA,WAAAA,EAAAA,aAAAA,IAAS,YAAjB,yBACMA,EAAAA,QAAQmqB,WAAS,eAP9B,aASAhrB,EAAAA,EAAAA,GAEO,QAFD,aAAW,aAAaF,MAAM,aAAcY,QAAK,Y,QAAEG,EAAAA,WAAAA,EAAAA,aAAAA,KAAzD,SAVD,WAcAF,EAAAA,EAAAA,IASS,Q,MAPPuV,MAAOrV,EAAAA,QAAQmpB,MACflqB,OAAK,SAAAkqB,OAAAA,EAAAwB,OAAwB3qB,EAAAA,QAAQmpB,QACrCyB,WAAQ,Y,QAAE5qB,EAAAA,WAAAA,EAAAA,aAAAA,KAJZ,CAMQA,EAAAA,QAAQmpB,QAAAA,EAAAA,EAAAA,OADd1gB,EAAAA,EAAAA,IAIA0O,EAAA,C,MAFCzc,QAASsF,EAAAA,QACT7E,KAAM6E,EAAAA,QAAQmpB,OAHf,6CALF,QAWenpB,EAAAA,MAAMwC,MAAMoP,SAASC,eAArB,oBAAkE7W,SAASgF,EAAAA,QAAQ3E,QAAAA,EAAAA,EAAAA,OADlGoN,EAAAA,EAAAA,IAOEuS,EAAA,C,MAFAtgB,QAASsF,EAAAA,QACTlG,QAASkG,EAAAA,SANX,gDAQAb,EAAAA,EAAAA,GAIE,UAHDF,MAAM,WACN,aAAW,qBACVY,QAAK,Y,QAAEG,EAAAA,cAAAA,EAAAA,gBAAAA,OAETb,EAAAA,EAAAA,GAIE,UAHDF,MAAM,OACN,aAAW,wBACVY,QAAK,Y,QAAEG,EAAAA,iBAAAA,EAAAA,mBAAAA,MAGU,YAAZA,EAAAA,QAAQ3E,OAAI,WADnByE,EAAAA,EAAAA,IAUO,OAVP,GAUO,EALNX,EAAAA,EAAAA,GAIE,UAHDF,MAAM,KACN,aAAW,mBACVY,QAAK,eAAEG,EAAAA,MAAMgC,OAAM,yBARtB,iBAYsB,YAAZhC,EAAAA,QAAQ3E,OAAI,WAAvByE,EAAAA,EAAAA,IAYM,MAZN,GAYM,EAXLX,EAAAA,EAAAA,GAUM,MAVN,GAUM,EATLA,EAAAA,EAAAA,GAQM,MARN,GAQM,EAPLA,EAAAA,EAAAA,GAMM,MANN,GAMM,cALLsJ,EAAAA,EAAAA,KAIEwO,EAAAA,EAAAA,IAHIjX,EAAAA,kBAAgB,CACpBtF,QAASsF,EAAAA,QACTlG,QAASkG,EAAAA,SAHX,0CAJJ,WAaAF,EAAAA,EAAAA,IAkBM,MAlBN,GAkBM,EAjBLX,EAAAA,EAAAA,GASM,OARJF,OAAK,oE,qBAAoGe,EAAAA,QAAQqc,oBAIlH,aAAW,0BACVxc,QAAK,eAAEG,EAAAA,aAAasa,iBANtB,MAUgC,YAAZta,EAAAA,QAAQ3E,OAAI,WAAhCoN,EAAAA,EAAAA,IAAqEoiB,EAAA,C,MAApB/wB,QAASkG,EAAAA,SAA1D,sCACA0B,EAAAA,EAAAA,IAKEopB,EAAA,CAJDlrB,IAAI,cACHlF,QAASsF,EAAAA,QACTlG,QAASkG,EAAAA,QACToW,QAASpW,EAAAA,SAJX,4CA3FF,OATD,GA8GOA,EAAAA,MAAMwC,MAAMuoB,0BAAAA,EAAAA,EAAAA,OADnBjrB,EAAAA,EAAAA,IAMM,O,MAJL/H,GAAG,qBACF8H,QAAK,Y,QAAEG,EAAAA,sBAAAA,EAAAA,wBAAAA,MAHT,QAKIA,EAAAA,MAAMwC,MAAMuoB,yBAAuB,KALvC,gBAOArpB,EAAAA,EAAAA,IAAmDspB,EAAA,CAAvCtwB,QAASsF,EAAAA,QAAUlG,QAASkG,EAAAA,SAAxC,+BArHD,K,KoBkBD,IAAeP,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,aACN0E,WAAY,CACXgrB,KAAIA,IAELvrB,QACC,MAAMmJ,GAAQC,EAAAA,EAAAA,MACR/P,GAAQgJ,EAAAA,EAAAA,MAERmpB,GAAgBrX,EAAAA,EAAAA,KAAS,KAC9B,MAAMgG,EAASC,SAASvR,OAAOM,EAAMrN,OAAOzD,IAAM,IAAK,IAEvD,OADgBgB,EAAM6Z,QAAQmH,YAAYF,EAC1C,IAGKG,EAAmB,KACpBkR,EAAc9sB,OACjBrF,EAAMiJ,OAAO,gBAAiBkpB,EAAc9sB,MAC7C,EAqBD,OAlBAyE,EAAAA,EAAAA,IAAMqoB,GAAe,KACpBlR,GAAkB,KAGnBxZ,EAAAA,EAAAA,KAAU,KACTwZ,GAAkB,IAaZ,CACNnR,QACAqiB,gBACAjB,eAbuBnwB,IACvB,MAAM+f,EAAS/f,EAAQ/B,GACjBozB,EAAcpyB,EAAM6Z,QAAQmH,YAAYF,GAE1CsR,GAAarxB,UAChBqxB,EAAYrxB,QAAQsxB,OAAS,EAC7BD,EAAYrxB,QAAQmE,UAAY,EACjC,EAQD,ICxDF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,sDDHnD+B,EAAAA,gBAAAA,EAAAA,EAAAA,OADPyI,EAAAA,EAAAA,IAME4iB,EAAA,C,MAJA3wB,QAASsF,EAAAA,cAActF,QACvBZ,QAASkG,EAAAA,cAAclG,QACvBsc,QAAS0D,SAASvR,OAAOvI,EAAAA,MAAMvE,MAAM2a,SAAO,IAC5CkV,iBAAiBtrB,EAAAA,gBALnB,2E,eECCb,EAAAA,EAAAA,GAAiB,UAAb,YAAQ,G,IAEJF,MAAM,O,2BAC8D,U,IACrEE,EAAAA,EAAAA,GAA4C,QAAtCkW,MAAM,sBAAqB,QAAI,G,IAIpCpW,MAAM,O,2BAKV,kC,IAKIA,MAAM,O,2BAKV,4B,IAKHE,EAAAA,EAAAA,GAAsB,UAAlB,iBAAa,G,IAETF,MAAM,O,2BACgE,uB,IAKtEA,MAAM,O,2BACgE,0B,IAK/EE,EAAAA,EAAAA,GAQK,MARDpH,GAAG,yBAAuB,UAAC,sBAE9BoH,EAAAA,EAAAA,GAKO,QAJNF,MAAM,8CACN,aAAW,8DAFZ,EAICE,EAAAA,EAAAA,GAA6B,UAArBF,MAAM,mBANhB,G,IASKC,KAAK,QAAQ,kBAAgB,yB,IAC1BD,MAAM,O,2BAMV,2C,IAGIA,MAAM,O,2BAMV,uC,IAGIA,MAAM,O,2BAMV,8B,IAIJE,EAAAA,EAAAA,GAAoB,UAAhB,eAAW,G,IAEPF,MAAM,O,2BAKV,8B,IAGIA,MAAM,O,2BAKV,yB,IAKIA,MAAM,O,IACZE,EAAAA,EAAAA,GAQQ,SARDK,IAAI,cAAcP,MAAM,OAA/B,UAAqC,gCAEpCE,EAAAA,EAAAA,GAKO,QAJNF,MAAM,8CACN,aAAW,mDAFZ,EAICE,EAAAA,EAAAA,GAA6B,UAArBF,MAAM,mBANhB,G,iBAoBFE,EAAAA,EAAAA,GAAc,UAAV,SAAK,G,IAERA,EAAAA,EAAAA,GAAuD,SAAhDK,IAAI,eAAeP,MAAM,WAAU,SAAK,G,8BAkB/CE,EAAAA,EAAAA,GAA0B,UAAtB,qBAAiB,G,IACrBA,EAAAA,EAAAA,GAEQ,SAFDK,IAAI,2BAA2BP,MAAM,WAAU,kEAEtD,G,aAsBH,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,qBACNmE,MAAK,KAGG,CACN3G,OAHagJ,EAAAA,EAAAA,UClKhB,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDN1DjC,EAAAA,EAAAA,IA0JM,YAzJLqK,IACAhL,EAAAA,EAAAA,GAKM,aAJLA,EAAAA,EAAAA,GAGQ,QAHR,GAGQ,EAFPA,EAAAA,EAAAA,GAA0E,SAAlEkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS8Y,KAAMrvB,KAAK,WAAWE,KAAK,QAAjE,WAEO,GADFyJ,QAGP7F,EAAAA,EAAAA,GASM,aARLA,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS2E,YAC/Blb,KAAK,WACLE,KAAK,eAHN,WAMO,QAET4D,EAAAA,EAAAA,GASM,aARLA,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS0E,YAC/Bjb,KAAK,WACLE,KAAK,eAHN,WAMO,OAEOyE,EAAAA,MAAMwC,MAAMC,qBAAqB8oB,WAAAA,EAAAA,EAAAA,OAAjDzrB,EAAAA,EAAAA,IAcWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAbVkM,IACAvL,EAAAA,EAAAA,GAKM,aAJLA,EAAAA,EAAAA,GAGQ,QAHR,GAGQ,EAFPA,EAAAA,EAAAA,GAA4E,SAApEkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS4C,MAAOnZ,KAAK,WAAWE,KAAK,SAAlE,WAEO,QAET4D,EAAAA,EAAAA,GAKM,aAJLA,EAAAA,EAAAA,GAGQ,QAHR,GAGQ,EAFPA,EAAAA,EAAAA,GAA4E,SAApEkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS6C,MAAOpZ,KAAK,WAAWE,KAAK,SAAlE,WAEO,QAZV,qBAeAiwB,IASArsB,EAAAA,EAAAA,GA4BM,MA5BN,GA4BM,EA3BLA,EAAAA,EAAAA,GAQQ,QARR,GAQQ,EAPPA,EAAAA,EAAAA,GAKE,SAJAkI,QAA4C,UAAnCrH,EAAAA,MAAMwC,MAAMoP,SAAS8K,eAC/BrhB,KAAK,QACLE,KAAK,iBACL6C,MAAM,SAJP,WAOO,MACRe,EAAAA,EAAAA,GAQQ,QARR,GAQQ,EAPPA,EAAAA,EAAAA,GAKE,SAJAkI,QAA4C,cAAnCrH,EAAAA,MAAMwC,MAAMoP,SAAS8K,eAC/BrhB,KAAK,QACLE,KAAK,iBACL6C,MAAM,aAJP,WAOO,MACRe,EAAAA,EAAAA,GAQQ,QARR,GAQQ,EAPPA,EAAAA,EAAAA,GAKE,SAJAkI,QAA4C,WAAnCrH,EAAAA,MAAMwC,MAAMoP,SAAS8K,eAC/BrhB,KAAK,QACLE,KAAK,iBACL6C,MAAM,UAJP,WAOO,OAET0L,IACA3K,EAAAA,EAAAA,GAiBM,aAhBLA,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS6Z,aAC/BpwB,KAAK,WACLE,KAAK,gBAHN,WAMO,MACR4D,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAStQ,aAC/BjG,KAAK,WACLE,KAAK,gBAHN,WAMO,QAET4D,EAAAA,EAAAA,GAoBM,aAnBLA,EAAAA,EAAAA,GAkBQ,QAlBR,GAkBQ,CAjBPusB,IASAvsB,EAAAA,EAAAA,GAOE,SANDpH,GAAG,cACFqG,MAAO4B,EAAAA,MAAMwC,MAAMoP,SAAS+Z,YAC7BtwB,KAAK,OACLE,KAAK,cACL0D,MAAM,QACN8F,YAAY,yCANb,eAWF4G,IACAxM,EAAAA,EAAAA,GAgBM,YAfLyF,IACAzF,EAAAA,EAAAA,GAaS,UAZRpH,GAAG,eACFqG,MAAO4B,EAAAA,MAAMwC,MAAMoP,SAASga,MAC7BrwB,KAAK,QACL0D,MAAM,SAJP,gBAMCa,EAAAA,EAAAA,IAMSwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IALQ/W,EAAAA,MAAMwC,MAAMC,qBAAqBopB,QAA1CD,K,WADR9rB,EAAAA,EAAAA,IAMS,UAJPtB,IAAKotB,EAAMrwB,KACX6C,MAAOwtB,EAAMrwB,OAHf,QAKIqwB,EAAME,aAAW,EAAAhnB,OALrB,OAND,SAgBD3F,EAAAA,EAAAA,GAYM,YAXLyM,GACAvF,IAGAlH,EAAAA,EAAAA,GAME,YALDpH,GAAG,2BACFqG,MAAO4B,EAAAA,MAAMwC,MAAMoP,SAASma,WAC7B9sB,MAAM,QACN1D,KAAK,aACLwJ,YAAY,kDALb,c,0BEhJA5F,EAAAA,EAAAA,GAAmB,UAAf,cAAU,G,eAmBdA,EAAAA,EAAAA,GAAqB,UAAjB,gBAAY,G,IAERF,MAAM,O,2BAKV,6D,IAEFE,EAAAA,EAAAA,GAMO,QALNF,MAAM,8CACN,aAAW,+JAFZ,EAKCE,EAAAA,EAAAA,GAA6B,UAArBF,MAAM,iBALf,G,eAWFE,EAAAA,EAAAA,GAAiC,UAA7B,4BAAwB,G,IACrBF,MAAM,O,2BAKV,6C,UAIwCA,MAAM,uB,IAC/CE,EAAAA,EAAAA,GAGI,WAFHA,EAAAA,EAAAA,GAAyB,cAAjB,aAEL,QAFsB,oGAD1B,G,IAIAA,EAAAA,EAAAA,GAGI,SAHD,6GAGH,G,UAKWF,MAAM,uB,KACjBE,EAAAA,EAAAA,GAGI,WAFHA,EAAAA,EAAAA,GAAyB,cAAjB,aAEL,QAFsB,+HAD1B,I,eAQFA,EAAAA,EAAAA,GAA+B,UAA3B,0BAAsB,G,IAEnBF,MAAM,O,IACZE,EAAAA,EAAAA,GAAuE,SAAhEK,IAAI,cAAcP,MAAM,WAAU,0BAAsB,G,aAqBnE,IAAI+sB,GAAsD,KAE1DvtB,OAAO8e,iBAAiB,uBAAwBplB,IAC/CA,EAAEwI,iBACFqrB,GAAqB7zB,CAArB,IAGD,QAAesH,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACNmE,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACRkqB,GAAsBrsB,EAAAA,EAAAA,KAAI,GAE1BssB,GAAwBrY,EAAAA,EAAAA,KAAS,IAER,OAAvBmY,KAmDR,OAhDAxrB,EAAAA,EAAAA,KAAU,KAGTyrB,EAAoB7tB,QACjBK,OAAOsM,UAAUohB,0BAClBpzB,EAAMyJ,MAAMC,qBAAqBgC,WAFnC,IA6CM,CACN1L,QACAkzB,sBACAC,wBACAE,oBA5C2B,KACtBJ,KAILA,GAAmBK,SAAS1wB,OAAOxD,IAElCyD,QAAQC,MAAM1D,EAAd,IAGD6zB,GAAqB,KAArB,EAmCAM,iBAhCwB,KACxBvzB,EAAMyQ,SAAS,oBAAoB,GAAM7N,OAAOxD,IAE/CyD,QAAQC,MAAM1D,EAAd,IAGDY,EACEyQ,SAAS,kBAAmB,CAC5BjO,KAAM,eACN6C,OAAO,EACPqL,MAAM,IAEN9N,OAAOxD,IAEPyD,QAAQC,MAAM1D,EAAd,GARF,EA2BAo0B,iBAfwB,KACxB,MAAMC,EAAMjzB,SAASV,SAAS4zB,OAASlzB,SAASV,SAAS6zB,SAAW,UAGpEjuB,OAAOsM,UAAUohB,wBAAwB,MAAOK,EAAK,cAErD/tB,OAAOsM,UAAUohB,wBAAwB,OAAQK,EAAK,aAAtD,EAWD,ICrKF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDJ1D1sB,EAAAA,EAAAA,IAuFM,YAtFME,EAAAA,qBAAuBA,EAAAA,wBAAAA,EAAAA,EAAAA,OAAlCF,EAAAA,EAAAA,IAkBM,MAAAqK,GAAA,CAjBLlJ,GAEOjB,EAAAA,wBAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAOS,U,MALRzE,KAAK,SACL4D,MAAM,MACLY,QAAK,sB,QAAUG,EAAAA,qBAAAA,EAAAA,uBAAAA,IAAmB,eACnC,qCALD,eASOA,EAAAA,sBAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAOS,U,MALRzE,KAAK,SACL4D,MAAM,MACLY,QAAK,sB,QAAUG,EAAAA,kBAAAA,EAAAA,oBAAAA,IAAgB,eAChC,wCALD,mBAVD,eAmBWA,EAAAA,MAAMwC,MAAMC,qBAAqB6iB,aAAAA,EAAAA,EAAAA,OAA5CxlB,EAAAA,EAAAA,IAmBM,MAAAoB,GAAA,CAlBLC,IACAhC,EAAAA,EAAAA,GAgBM,aAfLA,EAAAA,EAAAA,GAcQ,QAdR,GAcQ,EAbPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS+a,aAC/BtxB,KAAK,WACLE,KAAK,gBAHN,WAaO,GAPPkP,WAVH,eAoBYzK,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAA7C,iBAA6CA,EAAAA,EAAAA,OAA7C5E,EAAAA,EAAAA,IA+BM,MAAAmF,GAAA,CA9BLnD,IACA3C,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAASgb,aAC/BvxB,KAAK,WACLE,KAAK,gBAHN,WAMO,KACSyE,EAAAA,MAAMwC,MAAMoP,SAASgb,cAAtC,iBAAsCA,EAAAA,EAAAA,OAAtC9sB,EAAAA,EAAAA,IAoBWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAnBCwB,EAAAA,MAAMwC,MAAMqqB,oBAAAA,EAAAA,EAAAA,OAAvB/sB,EAAAA,EAAAA,IAYM,MAZN,GAYM,CAXLgtB,GAIAvnB,IAIApG,EAAAA,EAAAA,GAES,UAFD9D,KAAK,SAAS4D,MAAM,gBAAiBY,QAAK,Y,QAAEG,EAAAA,kBAAAA,EAAAA,oBAAAA,KAAkB,mCATvE,WAaAF,EAAAA,EAAAA,IAKM,MALN,GAKM0rB,MAnBP,QAsBWxrB,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAA7C,iBAA6CA,EAAAA,EAAAA,OAA7C5E,EAAAA,EAAAA,IAcM,MAAAitB,GAAA,CAbLnX,IAEAzW,EAAAA,EAAAA,GAUQ,QAVR,GAUQ,CATP0W,IACA1W,EAAAA,EAAAA,GAOE,SANDpH,GAAG,cACFqG,MAAO4B,EAAAA,MAAMwC,MAAMoP,SAASob,YAC7B3xB,KAAK,OACLE,KAAK,cACL0D,MAAM,QACN8F,YAAY,0CANb,iB,qBEvEDhN,GAAG,kBACHmH,KAAK,QACL,kBAAgB,yB,IAEhBC,EAAAA,EAAAA,GAAmD,MAA/CpH,GAAG,yBAAwB,mBAAe,G,IACzCkH,MAAM,sB,IACVE,EAAAA,EAAAA,GAA8E,SAAvEK,IAAI,mBAAmBP,MAAM,WAAU,4BAAwB,G,gBAalEA,MAAM,sB,IACVE,EAAAA,EAAAA,GAA8E,SAAvEK,IAAI,eAAeP,MAAM,WAAU,gCAA4B,G,gBAalEA,MAAM,sB,IACVE,EAAAA,EAAAA,GAA8E,SAAvEK,IAAI,sBAAsBP,MAAM,WAAU,yBAAqB,G,sBAetEA,MAAM,oB,UAMNA,MAAM,kB,UAW6CA,MAAM,eAAeC,KAAK,S,IAC9EC,EAAAA,EAAAA,GAAiB,UAAb,YAAQ,G,IAEZA,EAAAA,EAAAA,GAAwB,UAApB,mBAAe,G,IAIlBA,EAAAA,EAAAA,GAAwB,UAApB,mBAAe,G,IAQpBA,EAAAA,EAAAA,GAAuB,UAAnB,kBAAc,G,2BAGjBA,EAAAA,EAAAA,GAA6D,UAAzD,wDAAoD,I,IC1FtDF,MAAM,gB,IACLA,MAAM,qB,sBAOmBA,MAAM,iB,UAGgBA,MAAM,iB,YAAgB,kB,IAIrEA,MAAM,oB,YAEwB,Y,YAChB,U,eAmCrB,IAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,UACN2G,MAAO,CACN+qB,QAAS,CACR5xB,KAAM9C,OACNgJ,UAAU,IAGZ7B,MAAMwC,IAcE,CACNgrB,SAderZ,EAAAA,EAAAA,KAAS,KACjB8C,EAAAA,GAAAA,GAAWzU,EAAM+qB,QAAQC,WAchCC,QAXe,KACVjrB,EAAM+qB,QAAQza,SAGlB5Y,EAAAA,EAAAA,KAAY,YACZjB,GAAAA,EAAAA,WAHAiB,EAAAA,EAAAA,KAAY,WAAYsI,EAAM+qB,QAAQG,MAIvC,MChEH,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDN1DttB,EAAAA,EAAAA,IAqBM,MArBN,GAqBM,EApBLX,EAAAA,EAAAA,GAaM,MAbN,GAaM,EAZLA,EAAAA,EAAAA,GAAoC,eAAAqF,EAAAA,EAAAA,IAAzBxE,EAAAA,QAAQqtB,OAAK,IAExBluB,EAAAA,EAAAA,GAEM,KAFFyK,KAAI,qBAAyB5J,EAAAA,QAAQstB,GAAIzzB,OAAO,SAASgQ,IAAI,aAAjE,QACC7J,EAAAA,QAAQstB,IAAE,EAAApsB,IAGFlB,EAAAA,QAAQmJ,OAAM,eAAvBrJ,EAAAA,EAAAA,IAEI,IAFJ,GAAmD,eACxC0E,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQmJ,QAAS,aAC/B,IACenJ,EAAAA,QAAQwS,SAAYxS,EAAAA,QAAQmJ,QAA3C,iBAA2CA,EAAAA,EAAAA,OAA3CrJ,EAAAA,EAAAA,IAEI,IAFJ,GAEI,KADUX,EAAAA,EAAAA,GAA0B,aAAAqF,EAAAA,EAAAA,IAAjBxE,EAAAA,SAAO,SAG/Bb,EAAAA,EAAAA,GAKM,MALN,GAKM,EAJLA,EAAAA,EAAAA,GAGS,UAHDF,MAAM,MAAOY,QAAK,sB,QAAUG,EAAAA,SAAAA,EAAAA,WAAAA,IAAO,eAA3C,CACiBA,EAAAA,QAAQwS,UAAAA,EAAAA,EAAAA,OAAxB1S,EAAAA,EAAAA,IAAoDwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAApD,kBACAsB,EAAAA,EAAAA,IAAkCwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAAlC,U,KD2FJ,IAAeiB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,eACN0E,WAAY,CACXC,eADW,EAEXqtB,QAAOA,IAER7tB,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MASRyrB,GAAuB5tB,EAAAA,EAAAA,MAKvB6tB,GAAe7tB,EAAAA,EAAAA,IAAI,IACnB8tB,GAAe9tB,EAAAA,EAAAA,IAAI,IACnB+tB,GAAkB/tB,EAAAA,EAAAA,IAAI,IAEtBguB,GAAiB/Z,EAAAA,EAAAA,KAAS,IACxB9a,EAAMyJ,MAAMqrB,SAASC,MAAMhxB,GAASA,EAAK0V,YAG3Cub,GAAiBla,EAAAA,EAAAA,KAAS,IACxB9a,EAAMyJ,MAAMqrB,SAAShxB,QAAQC,IAAUA,EAAK0V,SAAW1V,EAAKqM,OAAS,MAGvE6kB,GAAgBna,EAAAA,EAAAA,KAAS,IACvB9a,EAAMyJ,MAAMqrB,SAAShxB,QAAQC,IAAUA,EAAK0V,UAAY1V,EAAKqM,WAsCrE,OAnCA3I,EAAAA,EAAAA,KAAU,KACT5G,EAAAA,EAAAA,KAAY,eAAZ,IAkCM,CACNb,QACAy0B,uBACAS,eAlEsB,CACtBC,eAAgB,4BAChBC,kBAAmB,sCACnBC,mBAAoB,kEACpBC,cAAe,kCA+DfT,iBACAG,iBACAC,gBACAM,eAtCsB,KACtB,MAAMpqB,EAAO,CACZupB,aAAcA,EAAarvB,MAC3BsvB,aAAcA,EAAatvB,MAC3BuvB,gBAAiBA,EAAgBvvB,OAG7B8F,EAAKupB,cAAiBvpB,EAAKwpB,cAAiBxpB,EAAKypB,gBAQlDzpB,EAAKwpB,eAAiBxpB,EAAKypB,iBAQ/B/zB,EAAAA,EAAAA,KAAY,mBAAoB20B,IAE/Bf,EAAqBpvB,MAAQmwB,CAA7B,IAGD30B,EAAAA,EAAAA,KAAY,kBAAmBsK,IAZ9BspB,EAAqBpvB,MAAQ,CAC5BowB,SAAS,EACT3yB,MAAO,qBAVR2xB,EAAqBpvB,MAAQ,CAC5BowB,SAAS,EACT3yB,MAAO,iBAkBT,EAWA4xB,eACAC,eACAC,kBAED,IG3LF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,iGHJ1D7tB,EAAAA,EAAAA,IAmGM,YAjGQE,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAAe1E,EAAAA,MAAMwC,MAAMC,qBAAqBgsB,aAD9F,iBAC8FA,EAAAA,EAAAA,OAD9F3uB,EAAAA,EAAAA,IAqEM,MArEN,GAqEM,CA5DLmB,IACA9B,EAAAA,EAAAA,GAaM,MAbN,GAaM,CAZLgC,IACAO,EAAAA,EAAAA,IAUiBC,EAAA,MAVMrH,SAAO,SAAEsH,GAAS,WACxCzC,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,mB,qCACMiI,EAAAA,aAAYuE,GACrBjD,aAAa,mBACZjG,KAAMuG,EAAUjC,UAAS,kBAC1BpE,KAAK,eACL0D,MAAM,QACN8F,YAAY,0BAPb,kBAEU/E,EAAAA,mB,SASZb,EAAAA,EAAAA,GAaM,MAbN,GAaM,CAZLsC,IACAC,EAAAA,EAAAA,IAUiBC,EAAA,MAVMrH,SAAO,SAAEsH,GAAS,WACxCzC,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,e,qCACMiI,EAAAA,aAAYuE,GACpBlJ,KAAMuG,EAAUjC,UAAS,kBAC1BpE,KAAK,eACL+F,aAAa,eACbrC,MAAM,QACN8F,YAAY,8BAPb,kBAEU/E,EAAAA,mB,SASZb,EAAAA,EAAAA,GAaM,MAbN,GAaM,CAZL2C,IACAJ,EAAAA,EAAAA,IAUiBC,EAAA,MAVMrH,SAAO,SAAEsH,GAAS,WACxCzC,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,sB,qCACMiI,EAAAA,gBAAeuE,GACvBlJ,KAAMuG,EAAUjC,UAAS,kBAC1BpE,KAAK,kBACL+F,aAAa,eACbrC,MAAM,QACN8F,YAAY,uBAPb,kBAEU/E,EAAAA,sB,QAULA,EAAAA,sBAAwBA,EAAAA,qBAAqBwuB,UAAAA,EAAAA,EAAAA,OADpD1uB,EAAAA,EAAAA,IAKM,MALN,GAGC,yCAIWE,EAAAA,sBAAwBA,EAAAA,qBAAqBnE,QAAAA,EAAAA,EAAAA,OADzDiE,EAAAA,EAAAA,IAKM,MALN,IAKM0E,EAAAA,EAAAA,IADFxE,EAAAA,eAAeA,EAAAA,qBAAqBnE,QAAK,KAJ7C,gBAMAsD,EAAAA,EAAAA,GAIM,aAHLA,EAAAA,EAAAA,GAES,UAFD9D,KAAK,SAAS4D,MAAM,MAAOY,QAAK,sB,QAAUG,EAAAA,gBAAAA,EAAAA,kBAAAA,IAAc,eAAE,0BAMxDA,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAA7C,iBAA6CA,EAAAA,EAAAA,OAA7C5E,EAAAA,EAAAA,IA0BM,MA1BN,GA0BM,CAzBLgtB,GAEAvnB,GACevF,EAAAA,iBAAAA,EAAAA,EAAAA,OAAfyI,EAAAA,EAAAA,IAA2DimB,EAAA,C,MAA3BzB,QAASjtB,EAAAA,gBAAzC,qCAEgBA,EAAAA,eAAerG,OAAM,eAArCmG,EAAAA,EAAAA,IAOWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CANVmX,KAMU,aALV7V,EAAAA,EAAAA,IAIEwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAHiB/W,EAAAA,gBAAXitB,K,WADRxkB,EAAAA,EAAAA,IAIEimB,EAAA,CAFAlwB,IAAKyuB,EAAQG,MACbH,QAASA,GAHX,8BAFD,qBASA5hB,GACoC,IAA3BrL,EAAAA,MAAMwC,MAAMqrB,SAASl0B,SAAM,WAApCmG,EAAAA,EAAAA,IAAwD,IAAA0rB,GAAZ,aACV,IAApBxrB,EAAAA,cAAcrG,SAAM,WAAlCmG,EAAAA,EAAAA,IAEI,IAAAitB,GAAA4B,OAFJ,aAGA7uB,EAAAA,EAAAA,IAKEwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAAuY,EAAAA,EAAAA,IAJiB/W,EAAAA,eAAXitB,K,WADRxkB,EAAAA,EAAAA,IAKEimB,EAAA,CAFAlwB,IAAKyuB,EAAQG,MACbH,QAASA,GAJX,iC,eI1FA9tB,EAAAA,EAAAA,GAA2B,UAAvB,sBAAkB,G,4BAYgD,yC,YAGE,c,YAGrD,qC,UAE0CF,MAAM,S,KACjEE,EAAAA,EAAAA,GAAwB,cAAhB,WAAO,I,QAAS,qE,UAGuCF,MAAM,S,IACrEE,EAAAA,EAAAA,GAAwB,cAAhB,WAAO,G,YAAS,M,IACxBA,EAAAA,EAAAA,GAAkE,YAA5D,yDAAqD,G,UAEzCF,MAAM,0B,aAAyB,kBAEhDE,EAAAA,EAAAA,GAKC,KAJAyK,KAAK,iDACL/P,OAAO,SACPgQ,IAAI,YACH,uDAAmD,I,QACpD,qI,IAOL1K,EAAAA,EAAAA,GAA8B,UAA1B,yBAAqB,G,IAEjBF,MAAM,O,sCAOV,iC,IAC0BE,EAAAA,EAAAA,GAAM,mB,UACiCF,MAAM,S,KACxEE,EAAAA,EAAAA,GAAwB,cAAhB,WAAO,I,QAAS,wD,UAIxBpH,GAAG,kCACHkH,MAAM,S,KAENE,EAAAA,EAAAA,GAAwB,cAAhB,WAAO,I,QAAS,gE,UAKxBpH,GAAG,kCACHkH,MAAM,S,KAENE,EAAAA,EAAAA,GAAwB,cAAhB,WAAO,I,QAAS,kD,IAKnBF,MAAM,O,2BAKV,+B,IAKEA,MAAM,O,IAMJA,MAAM,O,2BAKV,0C,eAMIA,MAAM,O,IACZE,EAAAA,EAAAA,GASQ,SATDK,IAAI,aAAaP,MAAM,OAA9B,UAAoC,wBAEnCE,EAAAA,EAAAA,GAMO,QALNF,MAAM,8CACN,aAAW,iGAFZ,EAKCE,EAAAA,EAAAA,GAA6B,UAArBF,MAAM,mBAPhB,G,4BAuBMA,MAAM,O,IACZE,EAAAA,EAAAA,GAUQ,SAVDK,IAAI,sBAAsBP,MAAM,OAAvC,UAA6C,2BAE5CE,EAAAA,EAAAA,GAOO,QANNF,MAAM,8CACN,aAAW,oLAFZ,EAMCE,EAAAA,EAAAA,GAA6B,UAArBF,MAAM,mBARhB,G,4BA8BJ,IAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,uBACNmE,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MA4Bd,MAAO,CACN6sB,OA3Ba/a,EAAAA,EAAAA,KACb,IACC,CACC,iBACA,mBACA,iBACA,OACA,SACA,QACC7Y,SAAS+P,UAAUC,WAEpBD,UAAU8jB,UAAU7zB,SAAS,QAAU,eAAgBzB,WAiBzDR,QACA+1B,iBAfwB,KACxB,MAAMjT,EAAM,IAAIkT,MAChBlT,EAAIzc,IAAM,gBAGVyc,EAAImT,MAAJ,EAWAC,kBARyB,KACzBC,GAAAA,EAAAA,wBAAA,EASD,IC7LF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDJ1DpvB,EAAAA,EAAAA,IAsJM,YArJYE,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAAlD,iBAAkDA,EAAAA,EAAAA,OAAlD5E,EAAAA,EAAAA,IAyCWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAxCV2L,IACAhL,EAAAA,EAAAA,GAsCM,aArCLA,EAAAA,EAAAA,GAiBS,UAhBRpH,GAAG,oBACHsD,KAAK,SACL4D,MAAM,MACL4C,SAAkD,cAAjC7B,EAAAA,MAAMwC,MAAM2sB,uBAAgF,eAAjCnvB,EAAAA,MAAMwC,MAAM2sB,sBAIxFtvB,QAAK,Y,QAAEG,EAAAA,mBAAAA,EAAAA,qBAAAA,KART,CAUkD,eAAjCA,EAAAA,MAAMwC,MAAM2sB,wBAAqB,WAAjDrvB,EAAAA,EAAAA,IAEWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAFX,KAGsD,YAAjCwB,EAAAA,MAAMwC,MAAM2sB,wBAAqB,WAAtDrvB,EAAAA,EAAAA,IAEWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAFX,kBAGAsB,EAAAA,EAAAA,IAA6DwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAA7D,MAhBD,MAkB4C,YAAjCwB,EAAAA,MAAMwC,MAAM2sB,wBAAqB,WAA5CrvB,EAAAA,EAAAA,IAGM,MAHN,GAGMmF,MAHN,eAI4C,gBAAjCjF,EAAAA,MAAMwC,MAAM2sB,wBAAqB,WAA5CrvB,EAAAA,EAAAA,IAcM,MAdN,GAcM,CAbLqF,GAaK,GAZLG,GAEWtF,EAAAA,QAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IASM,MATN,GASMuL,MATN,mBAJD,kBAzBF,KA2CAmgB,IACArsB,EAAAA,EAAAA,GA6BM,aA5BLA,EAAAA,EAAAA,GA2BQ,QA3BR,GA2BQ,EA1BPA,EAAAA,EAAAA,GAME,SALDpH,GAAG,uBACFsP,QAASrH,EAAAA,MAAMwC,MAAMoP,SAASwd,qBAC9BvtB,SAA8C,YAApC7B,EAAAA,MAAMwC,MAAM6sB,yBACvBh0B,KAAK,WACLE,KAAK,wBALN,WA0BO,GAnBqBsa,GACmB,gBAApC7V,EAAAA,MAAMwC,MAAM6sB,2BAAwB,WAA/CvvB,EAAAA,EAAAA,IAEM,MAFN,GAEMyL,MAFN,eAI2C,YAApCvL,EAAAA,MAAMwC,MAAM6sB,2BAAwB,WAD3CvvB,EAAAA,EAAAA,IAOM,MAPN,GAOM+F,MAPN,eAS2C,YAApC7F,EAAAA,MAAMwC,MAAM6sB,2BAAwB,WAD3CvvB,EAAAA,EAAAA,IAMM,MANN,GAMMmG,MANN,oBASF9G,EAAAA,EAAAA,GASM,aARLA,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS0d,aAC/Bj0B,KAAK,WACLE,KAAK,gBAHN,WAMO,QAET4D,EAAAA,EAAAA,GAIM,aAHLA,EAAAA,EAAAA,GAEM,MAFN,GAEM,EADLA,EAAAA,EAAAA,GAAuE,UAA/DpH,GAAG,OAAQ8H,QAAK,sB,QAAUG,EAAAA,kBAAAA,EAAAA,oBAAAA,IAAgB,eAAE,mBAItDb,EAAAA,EAAAA,GASM,aARLA,EAAAA,EAAAA,GAOQ,QAPR,GAOQ,EANPA,EAAAA,EAAAA,GAIE,SAHAkI,QAASrH,EAAAA,MAAMwC,MAAMoP,SAAS2d,kBAC/Bl0B,KAAK,WACLE,KAAK,qBAHN,WAMO,OAGGyE,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAA7C,iBAA6CA,EAAAA,EAAAA,OAA7C5E,EAAAA,EAAAA,IAsBM,MAAAgF,GAAA,EArBL3F,EAAAA,EAAAA,GAoBQ,QApBR,GAoBQ,CAnBPkH,IAUAlH,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,aACFqG,MAAO4B,EAAAA,MAAMwC,MAAMoP,SAAS4d,WAC7Bn0B,KAAK,OACLE,KAAK,aACL0D,MAAM,QACNqC,aAAa,MACbyD,YAAY,6DAPb,gBAYU/E,EAAAA,MAAMwC,MAAMC,qBAAqBiC,QAA7C,iBAA6CA,EAAAA,EAAAA,OAA7C5E,EAAAA,EAAAA,IAuBM,MAAAwG,GAAA,EAtBLnH,EAAAA,EAAAA,GAqBQ,QArBR,GAqBQ,CApBPwH,IAWAxH,EAAAA,EAAAA,GAQE,SAPDpH,GAAG,sBACFqG,MAAO4B,EAAAA,MAAMwC,MAAMoP,SAAS6d,oBAC7Bp0B,KAAK,OACLE,KAAK,sBACL0D,MAAM,QACNqC,aAAa,MACbyD,YAAY,6DAPb,iB,KEzHJ,MAAMzJ,IAASo0B,EAAAA,EAAAA,IAAa,CAC3BC,SAASC,EAAAA,EAAAA,MACTC,OAAQ,CACP,CACCt0B,KAAM,SACNpB,KAAM,WACN21B,UAAWC,EACXC,YAAYpnB,EAAI2K,EAAMC,GAEjBza,EAAAA,EAAAA,MAAAA,UACHya,GAAK,GAINA,GACA,GAEF,CACCjY,KAAM,UACNpB,KAAM,WACN21B,UAAWG,GACX/tB,MAAQ2G,IAAD,CAAahB,YAAagB,EAAMpN,SAExC,CACCtB,KAAM,YACN21B,UAAWI,GACXC,SAAU,CACT,CACC50B,KAAM,UACNpB,KAAM,GACN21B,UAAWM,IAEZ,CACC70B,KAAM,aACNpB,KAAM,aACN21B,UAAWO,IAEZ,CACC90B,KAAM,UACNpB,KAAM,UACN21B,UAAWQ,GACXpuB,OAAO,GAER,CACC3G,KAAM,gBACNpB,KAAM,gBACN21B,UAAWS,MAId,CACCh1B,KAAM,OACNpB,KAAM,QACN21B,UAAWU,IAEZ,CACCj1B,KAAM,YACNpB,KAAM,aACN21B,UAAWW,IAEZ,CACCl1B,KAAM,cACNpB,KAAM,sBACN21B,UAAWY,IAEZ,CACCn1B,KAAM,aACNpB,KAAM,YACN21B,UAAWa,IAEZ,CACCp1B,KAAM,gBACNpB,KAAM,mBACN21B,UAAWc,OAoEdrW,eAAetR,GAAS4nB,EAAmBr1B,EAAc,CAAC,GACrDF,GAAOw1B,aAAa1yB,MAAM7C,WACvBD,GAAOhC,KAAK,CAACiC,KAAMs1B,EAAWr1B,iBAM9BF,GAAOglB,QAAQ,CAAC/kB,KAAMs1B,EAAWr1B,WAASG,OAAM,QAEvD,CAED,SAASP,GAAgBtB,GACnBmP,GAAS,aAAc,CAAClR,GAAI+B,EAAQ/B,IACzC,CA7EDuD,GAAOy1B,YAAW,CAACnoB,EAAI2K,EAAMC,KAGvBza,EAAAA,EAAAA,MAAAA,WAAqC,WAAZ6P,EAAGrN,KASjCiY,IARCza,EAAAA,EAAAA,OACEyJ,GAAUA,EAAMwuB,YACjB,IAAMxd,KAMF,IAGPlY,GAAOy1B,YAAW,CAACnoB,EAAI2K,EAAMC,MAEvB5K,EAAGqoB,QAAQt3B,QAMA,eAAZiP,EAAGrN,OAA0BxC,EAAAA,EAAAA,QAAAA,YAA0BuP,OAAOM,EAAGpN,OAAOzD,MAM5D,gBAAZ6Q,EAAGrN,OAA2BxC,EAAAA,EAAAA,QAAAA,YAA0BwP,OAAOK,EAAGpN,OAAO6I,OAX5EmP,GAAK,GAgBNA,GAAM,IAGPlY,GAAO41B,WAAWtoB,IAOjB,GANI7P,EAAAA,EAAAA,MAAAA,WACC0F,OAAO0yB,YAAc3a,EAAAA,EAAAA,sBACxBzd,EAAAA,EAAAA,OAAa,eAAe,GAI1BA,EAAAA,EAAAA,MAAAA,cAA2B,CAC9B,MAAMe,EAAUf,EAAAA,EAAAA,MAAAA,cAAAA,QAEA,eAAZ6P,EAAGrN,MACNxC,EAAAA,EAAAA,OAAa,qBAAiBmsB,GAI3BprB,EAAQ4f,UAAU/f,OAAS,IAC9BG,EAAQqjB,YAAcrjB,EAAQ4f,SAAS5f,EAAQ4f,SAAS/f,OAAS,GAAG5B,IAGjE+B,EAAQ4f,UAAU/f,OAAS,MAC9BG,EAAQ4f,SAASmM,OAAO,EAAG/rB,EAAQ4f,SAAS/f,OAAS,KACrDG,EAAQ8lB,sBAAuB,EAEhC,KAmBE,kBAAmB7U,WACtBA,UAAUqmB,cAAc7T,iBAAiB,WAAYrf,IACpD,GAAIA,EAAMgG,MAA4B,SAApBhG,EAAMgG,KAAK7I,KAAiB,CAC7C,MAAMtD,EAAK+hB,SAAS5b,EAAMgG,KAAKpK,QAAQO,UAAU,GAAI,IAE/Cg3B,EAAgBt4B,EAAAA,EAAAA,QAAAA,YAA0BhB,GAE5Cs5B,GACHj2B,GAAgBi2B,EAAcv3B,QAE/B,I,8BCvLH,MAAMF,GAA6D03B,E,QAAAA,IAAG,CACrEC,WAAYC,KAAK/Y,MAAMlf,SAASC,KAAKi4B,QAAQF,YAAc,4BAC3Dp3B,KAAMsE,OAAO5F,SAAS6zB,SAAW,aACjCgF,aAAa,EACbC,cAAep4B,SAASC,KAAKC,UAAUC,SAAS,YAcjD,K,kGClBA,MAAMk4B,EAAuB,CAE5BC,QAAU,EACVv3B,QAAS,KACTmP,KAAM,MAGDqoB,EAAgB,CACrBlF,aAAc,CACbtyB,SAAS,EACTmP,KAAM,QACNooB,MAAM94B,EAAmBqF,EAAgB2zB,GAAO,GAE3C3zB,IAAU2zB,GACbn4B,EAAAA,EAAAA,KAAY,cAEb,GAEFo4B,SAAU,CACT13B,SAAS,GAEVgH,aAAc,CACbhH,SAAS,GAEVqxB,YAAa,CACZrxB,QAAS,IAEVmxB,aAAc,CACbnxB,SAAS,GAEV80B,qBAAsB,CACrB90B,SAAS,EACTmP,KAAM,QACNooB,MAAM94B,EAAmBqF,GAGxBrF,EAAMiJ,OAAO,kCAAmC,KAAM,CAACgb,MAAM,IAEzD,iBAAkBve,QAAUL,GAAqC,YAA5B6zB,aAAaC,YACrDD,aAAaE,mBAAkB,IAC9Bp5B,EAAMiJ,OAAO,kCAAmC,KAAM,CAACgb,MAAM,MAC5DrhB,OAAOxD,IAERyD,QAAQC,MAAM1D,EAAd,GAGF,GAEFq3B,WAAY,CACXl1B,QAAS,GACTmP,KAAM,UAEPgmB,oBAAqB,CACpBn1B,QAAS,GACTmP,KAAM,UAEPujB,YAAa,CACZ1yB,QAAS,GACTmP,KAAM,UAEPgL,MAAO,CACNna,SAAS,GAEVowB,KAAM,CACLpwB,SAAS,GAEVg1B,aAAc,CACbh1B,SAAS,EACTmP,KAAM,SAEP8lB,kBAAmB,CAClBj1B,SAAS,GAEVic,YAAa,CACZjc,SAAS,GAEVgc,YAAa,CACZhc,SAAS,GAEVoiB,eAAgB,CACfpiB,QAAS,aAEVsxB,MAAO,CACNtxB,QAASf,SAAS64B,eAAe,UAAUX,QAAQY,YACnDR,MAAM94B,EAAmBqF,GACxB,MAAMk0B,EAAU/4B,SAAS64B,eAAe,SAClCG,EAAY,UAASn0B,QAE3B,KAAMk0B,aAAmBE,iBACxB,MAAM,IAAIp6B,MAAM,+BAGjB,MAAMq6B,EAAWH,EAAQI,WAAWC,aAAa,QAEjD,IAAKF,EACJ,MAAM,IAAIr6B,MAAM,mCAGjB,GAAIq6B,EAASr0B,QAAUm0B,EACtB,OAKD,GAFAE,EAASr0B,MAAQm0B,GAEZx5B,EAAMyJ,MAAMC,oBAChB,OAGD,MAAMmwB,EAAW75B,EAAMyJ,MAAMC,qBAAqBopB,OAAOhvB,QACvD+uB,GAAUA,EAAMrwB,OAAS6C,IACzB,GAEIy0B,EAAet5B,SAAS8Y,cAAc,4BAE5C,KAAMwgB,aAAwBC,iBAC7B,MAAM,IAAI16B,MAAM,4CAGjB,GAAIy6B,EAAc,CACjB,MAAME,EAAaH,EAASG,YAAcF,EAAanf,QACvDmf,EAAanf,QAAUqf,CACvB,CACD,GAEFve,MAAO,CACNla,SAAS,GAEVqyB,aAAc,CACbryB,SAAS,GAEVyxB,WAAY,CACXzxB,QAAS,GACTu3B,MAAM94B,EAAmBqF,GACxB,IAAK,YAAY4jB,KAAKvjB,OAAO5F,SAASqnB,QAAS,CAC9C,MAAM8S,EAAUz5B,SAAS64B,eAAe,sBAEpCY,IACHA,EAAQvgB,UAAYrU,EAErB,CACD,GAEFyT,cAAe,CACdvX,SAAS,IAIEiI,EAYb,SAAyB+Y,GACxB,MAAM2X,EAA2C,CAAC,EAElD,IAAK,MAAMC,KAAe5X,EACzB2X,EAAUC,GAAe,IAAItB,KAAyBtW,EAAI4X,IAG3D,OAAOD,CACP,CApBqBE,CAAgBrB,GAE/B,SAASsB,IACf,MAAM5wB,EAAQ,CAAC,EAEf,IAAK,MAAM0wB,KAAe3wB,EACzBC,EAAM0wB,GAAe3wB,EAAO2wB,GAAa54B,QAG1C,OAAOkI,CACP,CCxFD,SAAS6wB,IACR,IAAIC,EAAsC,CAAC,EAE3C,IACCA,EAAiB9B,KAAK/Y,MAAM7f,EAAAA,EAAAA,IAAY,aAAe,KAGvD,CAFC,MAAOT,GACRS,EAAAA,EAAAA,OAAe,WACf,CAED,OAAK06B,GAK6B,OAA9BA,EAAe9D,YAA4D,iBAA9B8D,EAAe9D,aAC/D8D,EAAe9D,WAAa8D,EAAe9D,WAAWv0B,KAAK,OAGrDq4B,GARC,CAAC,CAST,CASD,SAASC,EACRC,EACAF,GAEA,MAAMG,EAAc,IAAID,GAExB,IAAK,MAAMh1B,KAAOg1B,OAGe,IAAxBF,EAAe90B,WACfg1B,EAAgBh1B,WAAgB80B,EAAe90B,KAEtDi1B,EAAYj1B,GAAO80B,EAAe90B,IAIpC,OAAOi1B,CACP,CClGD,MAAMC,EAAUn6B,SAAS8b,M,IAEpBse,EAOL,SAASC,IACR,MAAM,iBAAkBn1B,OAEbwzB,aAAaC,aAAeyB,EAAyBE,QACxDF,EAAyBE,QACrBp1B,OAAOq1B,gBAIZH,EAAyBI,QAHxBJ,EAAyBK,QAJzBL,EAAyBM,WAQjC,E,SAjBIN,GAAAA,EAAAA,YAAAA,cAAAA,EAAAA,QAAAA,UAAAA,EAAAA,QAAAA,UAAAA,EAAAA,QAAAA,S,EAAAA,IAAAA,EAAAA,CAAAA,IAuEL,MAqSMO,EAAe,CACpB1xB,MAtSa,MAEZwuB,WAAW,EACX9F,mBAAehG,EACf6F,wBAAyB,KACzBsE,yBAA0BuE,IAC1B5O,kBAAkB,EAClB9J,aAAa,EACbiZ,SAAU,GACVC,SAAU,GACVC,kBAAkB,EAClBlF,sBAAuB,cACvB1sB,oBAAqB,KACrBorB,SAAU,GACVyG,aAAa,EACbC,iBAAiB,EACjBC,aAA0D,UAA5C57B,EAAAA,EAAAA,IAAY,4BAC1BqR,YAAa,KACbC,cAAe,UACfS,oBAAoB,EACpBkiB,mBAAmB,EACnBjT,qBAAsB,KACtBqB,0BAA2B,KAC3BpJ,eAAe,IAgRhB4iB,UAvH4B,CAC5BzD,UAAUxuB,GACTA,EAAMwuB,WAAY,CAClB,EACD9F,cAAc1oB,EAAOkyB,GACpBlyB,EAAM0oB,cAAgBwJ,CACtB,EACD3J,wBAAwBvoB,EAAO3G,GAC9B2G,EAAMuoB,wBAA0BlvB,CAChC,EACD84B,gCAAgCnyB,GAC/BA,EAAM6sB,yBAA2BuE,GACjC,EACD5O,iBAAiBxiB,EAAOwiB,GACvBxiB,EAAMwiB,iBAAmBA,CACzB,EACD9J,YAAY1Y,EAAOoyB,GAClBpyB,EAAM0Y,YAAc0Z,CACpB,EACDT,SAAS3xB,EAAO2xB,GACf3xB,EAAM2xB,SAAWA,CACjB,EACDC,SAAS5xB,EAAO4xB,GACf5xB,EAAM4xB,SAAWA,CACjB,EACDS,cAAcryB,EAAOsyB,GACpBtyB,EAAM2xB,SAAStO,OACdrjB,EAAM2xB,SAASY,WAAWC,GAAMA,EAAE3wB,OAASywB,IAC3C,EAED,EACDG,aAAazyB,EAAO0yB,GACnB1yB,EAAM2xB,SAAS/R,KAAK8S,EACpB,EACDb,iBAAiB7xB,GAChBA,EAAM6xB,kBAAmB,CACzB,EACDlF,sBAAsB3sB,EAAO2sB,GAC5B3sB,EAAM2sB,sBAAwBA,CAC9B,EACD1sB,oBAAoBD,EAAOC,GAC1BD,EAAMC,oBAAsBA,CAC5B,EACDorB,SAASrrB,EAAOoyB,GACfpyB,EAAMqrB,SAAW+G,CACjB,EACDN,YAAY9xB,EAAOoyB,GAClBpyB,EAAM8xB,YAAcM,CACpB,EACDL,gBAAgB/xB,EAAOoyB,GACtBpyB,EAAM+xB,gBAAkBK,CACxB,EACDO,cAAc3yB,GACbA,EAAM8xB,aAAe9xB,EAAM8xB,WAC3B,EACDc,eAAe5yB,GACdA,EAAMgyB,cAAgBhyB,EAAMgyB,YAC5B,EACDA,aAAahyB,EAAOoyB,GACnBpyB,EAAMgyB,aAAeI,CACrB,EACD3qB,YAAYzH,EAAOoyB,GAClBpyB,EAAMyH,YAAc2qB,CACpB,EACD1qB,cAAc1H,EAAOoyB,GACpBpyB,EAAM0H,cAAgB0qB,CACtB,EACDjqB,mBAAmBnI,EAAOoyB,GACzBpyB,EAAMmI,mBAAqBiqB,CAC3B,EACD/H,kBAAkBrqB,EAAOpE,GACxBoE,EAAMqqB,kBAAoBzuB,CAC1B,EACD6c,0BAA0BzY,EAAOpE,GAChCoE,EAAMyY,0BAA4B7c,CAClC,EACDwb,qBAAqBpX,EAAOpE,GAC3BoE,EAAMoX,qBAAuBxb,CAC7B,EACDi3B,wBAAwB7yB,EAAOpE,GAM9B,GAJKoE,EAAMoX,uBACVpX,EAAMoX,qBAAuB,CAACD,QAAS,MAGnCvb,EACJ,OAGD,MAAMub,EAAU,IAAIvb,EAAMub,WAAYnX,EAAMoX,qBAAqBD,SAEjEnX,EAAMoX,qBAAuB,CAC5BD,UAED,GA0BD2b,QAVwB,CACxBC,aAAY,OAACvzB,EAAD,MAASQ,GAAQkyB,GAE5B1yB,EAAO,WADUQ,EAAM4xB,SAASv3B,QAAQ24B,KAAUA,EAAI3b,SAAW6a,EAAQ56B,QAAQ/B,MAEjF,GAOD6a,QAvPwB,CACxB6iB,4BAA8BjzB,GAAWjH,IACxCA,EAAOA,EAAKgmB,cACL/e,EAAM0oB,eAAexwB,QAAQF,SAASszB,MAAM/yB,GAAMA,EAAEQ,KAAKgmB,gBAAkBhmB,KAEnFm6B,qBAAuBlzB,GAAU,CAAC2X,EAAqBC,KACtD,IAAK,MAAM1f,KAAW8H,EAAM2xB,SAC3B,GAAIz5B,EAAQ2J,OAAS8V,EAIrB,IAAK,MAAMrgB,KAAWY,EAAQF,SAC7B,GAAIV,EAAQyB,OAAS6e,EACpB,MAAO,CAAC1f,UAASZ,WAKpB,OAAO,IAAP,EAEDigB,YAAcvX,GAAWzK,IACxB,IAAK,MAAM2C,KAAW8H,EAAM2xB,SAC3B,IAAK,MAAMr6B,KAAWY,EAAQF,SAC7B,GAAIV,EAAQ/B,KAAOA,EAClB,MAAO,CAAC2C,UAASZ,WAKpB,OAAO,IAAP,EAED+Y,YAAcrQ,GAAW6B,IACxB,IAAK,MAAM3J,KAAW8H,EAAM2xB,SAC3B,GAAIz5B,EAAQ2J,OAASA,EACpB,OAAO3J,EAIT,OAAO,IAAP,EAEDi7B,eAAenzB,GACd,IAAImzB,EAAiB,EAErB,IAAK,MAAMj7B,KAAW8H,EAAM2xB,SAC3B,IAAK,MAAMr6B,KAAWY,EAAQF,SACzBV,EAAQ87B,QAIZD,GAAkB77B,EAAQmE,WAI5B,OAAO03B,CACP,EACDtgB,MAAK,CAAC7S,EAAOoQ,KACYA,EAAQ+iB,eAC5B,IAAG/iB,EAAQ+iB,eAAejd,eAC3B,KACiBlW,EAAM0oB,cAAiB,GAAE1oB,EAAM0oB,cAAcpxB,QAAQyB,UAAY,IAE9Cm4B,EAExCmC,YAAa,IAAO/7B,IAEnBA,EAAQ8jB,eAAiB,GACzB9jB,EAAQsrB,qBAAuB,EAE/BtrB,EAAQurB,aAAe,CAAC,IAAIvD,OAC3BhoB,EAAQ4f,SACN7c,QAAQi5B,GAAMA,EAAEhf,MAAQgf,EAAE36B,MAAmB,YAAX26B,EAAEz6B,OACpCzD,KAAKk+B,GAAMA,EAAE36B,OACb46B,UACA94B,MAAM,EAAG,KAEZnD,EAAQyiB,gBAAiB,EACzBziB,EAAQuiB,kBAAmB,EAC3BviB,EAAQqwB,WAAY,EAEpBrwB,EAAQ8lB,qBAAuB9lB,EAAQk8B,cAAiBl8B,EAAQ4f,SAAS/f,cAClEG,EAAQk8B,cAEM,YAAjBl8B,EAAQuB,OACXvB,EAAQowB,eAAgB,GAGlBpwB,KAqKI0E,EAAkCy3B,SAWlCl9B,GAAQm9B,EAAAA,EAAAA,IAAYhC,GAE3BiC,EDhZC,SAA6Bp9B,GACnC,MAAO,CACNq9B,YAAY,EACZ5zB,MAAO+wB,EAAqBH,IAAeC,KAC3CoB,UAAW,CACV93B,IAAI6F,GAAO,KAACjH,EAAD,MAAO6C,IACjBoE,EAAMjH,GAAQ6C,CACd,GAEFk3B,QAAS,CACRe,SAAQ,MAAC7zB,GAAQ8zB,GAAQ,GACxB,IAA2B,IAAvB9zB,EAAMoqB,eAAoC,IAAV0J,EAApC,CAIAv9B,EAAMiJ,OAAO,qBAAqB,GAElC,IAAK,MAAMzG,KAAQiH,EACQ,UAAtBD,EAAOhH,GAAMkO,MAA0C,WAAtBlH,EAAOhH,GAAMkO,MACjD7P,EAAAA,EAAAA,KAAY,cAAe,CAAC2B,OAAM6C,MAAOoE,EAAMjH,IANhD,CASD,EACDg7B,UAAS,MAAC/zB,IACT,IAAK,MAAM0wB,KAAe3wB,EACzBA,EAAO2wB,GAAarB,MAAM94B,EAAOyJ,EAAM0wB,IAAc,EAEtD,EACDsD,QAAO,MAACh0B,EAAD,OAAQR,IAAS,KAACzG,EAAD,MAAO6C,EAAP,KAAcqL,GAAO,IAC5C,GAAIjH,EAAMjH,KAAU6C,EACnB,OAGD,MAAMq4B,EAAgBl0B,EAAOhH,GAGxBk7B,KAKK,IAAThtB,IACwB,IAAvBjH,EAAMoqB,cAAiD,UAAvB6J,EAAchtB,QAKhDzH,EAAO,MAAO,CAACzG,OAAM6C,UACrBxF,EAAAA,EAAAA,IAAY,WAAY44B,KAAKkF,UAAUl0B,IACvCi0B,EAAc5E,MAAM94B,EAAOqF,GAEtBqL,IAKHjH,EAAMoqB,cAAuC,UAAvB6J,EAAchtB,MACd,WAAvBgtB,EAAchtB,OAEd7P,EAAAA,EAAAA,KAAY,cAAe,CAAC2B,OAAM6C,UAEnC,GAGH,CCgVqBu4B,CAAoB59B,GAMnC,SAASgJ,IACf,OAAO60B,EAAAA,EAAAA,IAAap4B,EACpB,CAJDzF,EAAM89B,eAAe,WAAYV,E,gECzFjC,MAAMW,EAAW,IA5TjB,MACCC,IAA6B,KAC7BC,UAAoB,GACpBC,eAAwC,KAExCC,QAAiC,KACjCC,kBAA4C,KAE5CC,YAAej/B,GAAiBk/B,KAAKC,UAAUn/B,GAC/Co/B,WAAcp/B,GAAiBk/B,KAAKG,SAASr/B,GAC7Cs/B,YAAet/B,GAAiBk/B,KAAKK,UAAUv/B,GAC/Cw/B,OAAUx/B,GAAiBk/B,KAAKO,KAAKz/B,GACrC0/B,QAAW1/B,GAAsBk/B,KAAKS,MAAM3/B,GAE5C4/B,OACCn+B,EAAAA,EAAAA,GAAU,eAAgBwzB,GAAUiK,KAAKW,sBAAsB5K,IAC/D,CAED6K,UACCZ,KAAKH,QAAU39B,SAAS64B,eAAe,kBACvCiF,KAAKF,kBAAoB59B,SAAS64B,eAAe,sBAEjD74B,SAASgkB,iBAAiB,YAAa8Z,KAAKD,aAC5C79B,SAASgkB,iBAAiB,WAAY8Z,KAAKE,YAC3Ch+B,SAASgkB,iBAAiB,YAAa8Z,KAAKI,aAC5Cl+B,SAASgkB,iBAAiB,OAAQ8Z,KAAKM,QACvCp+B,SAASgkB,iBAAiB,QAAS8Z,KAAKQ,QACxC,CAEDK,YACC3+B,SAASukB,oBAAoB,YAAauZ,KAAKD,aAC/C79B,SAASukB,oBAAoB,WAAYuZ,KAAKE,YAC9Ch+B,SAASukB,oBAAoB,YAAauZ,KAAKI,aAC/Cl+B,SAASukB,oBAAoB,OAAQuZ,KAAKM,QAC1Cp+B,SAASukB,oBAAoB,QAASuZ,KAAKQ,QAC3C,CAEDL,SAASt5B,GACJA,EAAMi6B,cAAcC,MAAMp9B,SAAS,UAGtCkD,EAAMyC,gBAEP,CAED22B,UAAUp5B,IAGJA,EAAMm6B,eAAiBn6B,EAAMi6B,cAAcC,MAAMp9B,SAAS,WAC9DkD,EAAMyC,iBAEN02B,KAAKH,SAASz9B,UAAU6Y,IAAI,eAE7B,CAEDolB,UAAUx5B,GAEJA,EAAMm6B,gBACVn6B,EAAMyC,iBACN02B,KAAKH,SAASz9B,UAAUoF,OAAO,eAEhC,CAED+4B,KAAK15B,GACJ,IAAKA,EAAMi6B,cAAcC,MAAMp9B,SAAS,SACvC,OAMD,IAAIyqB,EAHJvnB,EAAMyC,iBACN02B,KAAKH,SAASz9B,UAAUoF,OAAO,eAK9B4mB,EADGvnB,EAAMi6B,aAAaG,MACdtwB,MAAMuL,KAAKrV,EAAMi6B,aAAaG,OACpCz7B,QAAQC,GAAuB,SAAdA,EAAKy7B,OACtB3gC,KAAKkF,GAASA,EAAK07B,cAEbxwB,MAAMuL,KAAKrV,EAAMi6B,aAAa1S,OAGvC4R,KAAKoB,cAAchT,EACnB,CAEDqS,MAAM55B,GACL,MAAMo6B,EAAQp6B,EAAMw6B,eAAeJ,MAC7B7S,EAAyB,GAE/B,GAAK6S,EAAL,CAIA,IAAK,IAAI56B,EAAI,EAAGA,EAAI46B,EAAM3+B,OAAQ+D,IACX,SAAlB46B,EAAM56B,GAAG66B,MACZ9S,EAAMnsB,KAAKg/B,EAAM56B,GAAG86B,aAID,IAAjB/S,EAAM9rB,SAIVuE,EAAMyC,iBACN02B,KAAKoB,cAAchT,GAblB,CAcD,CAEDgT,cAAchT,GACb,IAAKA,EAAM9rB,OACV,OAGD,IAAKZ,EAAAA,EAAAA,MAAAA,YAKJ,YAJAs+B,KAAKsB,eAAe,CACnB98B,MAAQ,uEAMV,MAAM+8B,EAA0C,IAA1BvB,KAAKL,UAAUr9B,OAC/Bk/B,EAAc9/B,EAAAA,EAAAA,MAAAA,qBAAiC+/B,uBAAyB,EAE9E,IAAK,MAAMC,KAAQtT,EAAO,CACzB,IAAKsT,EACJ,OAGGF,EAAc,GAAKE,EAAKt7B,KAAOo7B,EAClCxB,KAAKsB,eAAe,CACnB98B,MAAQ,QAAOk9B,EAAKx9B,0CAMtB87B,KAAKL,UAAU19B,KAAKy/B,EACpB,CAIGH,GAA8B,OAAbvB,KAAKN,KAAgBM,KAAKL,UAAUr9B,OAAS,GACjE09B,KAAK2B,cAEN,CAEDA,eACCp/B,EAAAA,EAAAA,KAAY,cACZ,CAEDq/B,YAAY76B,GACNi5B,KAAKF,oBAIVE,KAAKF,kBAAkB19B,UAAUy/B,OAAO,6BAA8B96B,EAAQ,GAC9Ei5B,KAAKF,kBAAkBh0B,MAAM7D,MAAS,GAAElB,KACxC,CAED45B,sBAAsB5K,GACrB,MAAM2L,EAAO1B,KAAKL,UAAUjR,QAEvBgT,IAQL1B,KAAKJ,eAAiBkC,aAAY,IAAMv/B,EAAAA,EAAAA,KAAY,cAAewzB,IAAQ,KAG1Er0B,EAAAA,EAAAA,MAAAA,SAAAA,cACAggC,EAAK19B,KAAK+9B,WAAW,YACpBL,EAAK19B,KAAKL,SAAS,QACN,cAAd+9B,EAAK19B,KAELg8B,KAAKgC,YAAYN,GAAOO,GAAYjC,KAAKkC,cAAcnM,EAAOkM,KAE9DjC,KAAKkC,cAAcnM,EAAO2L,GAE3B,CAEDM,YAAYN,EAAY3Y,GACvB,MAAMoZ,EAAa,IAAIC,WAEvBD,EAAWE,QAAU,IAAMtZ,EAAS2Y,GACpCS,EAAWG,QAAU,IAAMH,EAAWnR,QAEtCmR,EAAWI,OAAS,KACnB,MAAMC,EAAM,IAAIC,MAEhBD,EAAIF,QAAU,IAAMvZ,EAAS2Y,GAE7Bc,EAAID,OAAS,KACZ,MAAMG,EAASxgC,SAASolB,cAAc,UACtCob,EAAOz6B,MAAQu6B,EAAIv6B,MACnBy6B,EAAOx6B,OAASs6B,EAAIt6B,OACpB,MAAMy6B,EAAMD,EAAOE,WAAW,MAE9B,IAAKD,EACJ,MAAM,IAAI5hC,MAAM,0CAGjB4hC,EAAIE,UAAUL,EAAK,EAAG,GAEtBE,EAAOI,QAAQC,IACdha,EAAS,IAAIia,KAAK,CAACD,GAAQrB,EAAKx9B,MAAhC,GACEw9B,EAAK19B,KAFR,EAKDw+B,EAAIz6B,IAAMmJ,OAAOixB,EAAW5S,OAA5B,EAGD4S,EAAWc,cAAcvB,EACzB,CAEDQ,cAAcnM,EAAe2L,GAC5B1B,KAAKN,IAAM,IAAIwD,eAEflD,KAAKN,IAAIxR,OAAOhI,iBACf,YACCplB,IACA,MAAMqiC,EAAUl9B,KAAKK,MAAOxF,EAAEsiC,OAAStiC,EAAEuiC,MAAS,KAAQ,GAC1DrD,KAAK4B,YAAYuB,EAAjB,IAED,GAGDnD,KAAKN,IAAI4D,mBAAqB,KAC7B,GAAItD,KAAKN,KAAK6D,aAAeL,eAAeM,KAAM,CACjD,IAAItM,EAEJ,IACCA,EAAWiD,KAAK/Y,MAAM4e,KAAKN,IAAI+D,aAS/B,CARC,MAAO9iB,GAKRuW,EAAW,CACV1yB,MAAQ,mBAAkBw7B,KAAKN,IAAIgE,oBAAoB1D,KAAKN,IAAIiE,UAEjE,CAED3D,KAAKsB,eAAepK,GAEpB8I,KAAKN,IAAM,KAGPM,KAAKL,UAAUr9B,OAAS,GAC3B09B,KAAK2B,cAEN,GAGF,MAAMh1B,EAAW,IAAIC,SACrBD,EAASi3B,OAAO,OAAQlC,GACxB1B,KAAKN,IAAImE,KAAK,OAAS,eAAc9N,KACrCiK,KAAKN,IAAIoE,KAAKn3B,EACd,CAED20B,eAAepK,GACd8I,KAAK4B,YAAY,GAEb5B,KAAKJ,iBACRmE,cAAc/D,KAAKJ,gBACnBI,KAAKJ,eAAiB,MAGnB1I,EAAS1yB,MACZ9C,EAAAA,EAAAA,OAAa,0BAA2Bw1B,EAAS1yB,OAI9C0yB,EAAS/jB,KACZ6sB,KAAKgE,gBAAgB9M,EAAS/jB,IAE/B,CAED6wB,gBAAgB7wB,GACf,MAAM8wB,EAAU,IAAIC,IAAI/wB,EAAK3R,SAAS6f,YAAYA,WAC5C8iB,EAAUjiC,SAAS64B,eAAe,SAExC,KAAMoJ,aAAmBC,qBACxB,MAAM,IAAIrjC,MAAM,oCAGjB,MAAMsjC,EAAYF,EAAQ3X,eAGpB8X,EAAeD,EAAY,EAAIF,EAAQp9B,MAAM/D,UAAU,EAAGqhC,GAAa,IAAM,GAG7EE,EAAeJ,EAAQp9B,MAAM/D,UAAUqhC,GAGvCG,EAAiBF,EAAeL,EAAU,KAEhDQ,EAAAA,EAAAA,QAAaN,EAASK,EAAiBD,GAGvCJ,EAAQ3X,eAAiB2X,EAAQvX,aAAe4X,EAAeliC,MAC/D,CAGD0uB,QACCgP,KAAKL,UAAY,GAEbK,KAAKN,MACRM,KAAKN,IAAI1O,QACTgP,KAAKN,IAAM,KAEZ,GAKF,KACC1O,MAAO,IAAMyO,EAASzO,QACtB0T,WAAY,IAAMjF,EAASiB,OAC3BE,QAAS,IAAMnB,EAASmB,UACxBC,UAAW,IAAMpB,EAASoB,YAC1BO,cAAgBhT,GAAUqR,EAAS2B,cAAchT,G,gHC7SlD,SAASuW,EAAiB93B,GACzB,MAAMjL,EAAUsP,OAAOrE,EAAKjL,SAAWiL,GAIvC,GAFAnL,EAAAA,EAAAA,OAAa,eAAe,IAEvBa,EAAAA,EAAAA,GAAAA,eAMJ,OALAb,EAAAA,EAAAA,OACC,0BACC,iCAAgCE,0DAElCgjC,IAgBF,IAA6B7b,EAZ5BrnB,EAAAA,EAAAA,OAAa,0BAA4B,0BAAyBE,MAClEgjC,IAMIriC,EAAAA,EAAAA,GAAAA,eAAuC,yBAAZX,IAKHmnB,EAJP,IAAMxmB,EAAAA,EAAAA,UAAkB,IAKzC6E,OAAOy9B,oBAGVz9B,OAAOy9B,oBAAoB9b,EAAU,CAAC+b,QARM,MAU5C/b,IARD,CAYD,SAAS6b,IACR,MAAMG,EAAU7iC,SAAS64B,eAAe,wBAEpCgK,IACHA,EAAQC,YAActjC,EAAAA,EAAAA,MAAAA,wBAEvB,CAlEDa,EAAAA,EAAAA,GAAU,aAAcoiC,GACxBpiC,EAAAA,EAAAA,GAAU,gBAAiBoiC,GAC3BpiC,EAAAA,EAAAA,GAAU,QAASoiC,GAEnBpiC,EAAAA,EAAAA,GAAAA,GAAa,qBAAqB,SAAU0iC,GAC3CvjC,EAAAA,EAAAA,OAAa,0BAA4B,0BAAyBujC,MAClEL,GACA,IAEDriC,EAAAA,EAAAA,GAAU,cAAc,WACvBb,EAAAA,EAAAA,OAAa,0BAA2B,eACxCkjC,GACA,IAEDriC,EAAAA,EAAAA,GAAU,WAAW,WAIpBA,EAAAA,EAAAA,WAAoB,GAEpBb,EAAAA,EAAAA,OAAa,0BAA2B,0BACxCkjC,GACA,I,cCpBD,IAAIM,EAAgC,KA2EpChiB,eAAeiiB,IAEV/9B,OAAOg+B,0BACVh+B,OAAOg+B,2BAG+B,WAAnCnhC,EAAAA,GAAAA,aAAAA,MAAAA,YACG2N,EAAAA,EAAAA,IAAS,SAEhB,CAED,SAASyzB,EAAWzjC,GACnBW,EAAAA,EAAAA,aACAb,EAAAA,EAAAA,OAAa,0BAA2BE,GACxCJ,EAAAA,EAAAA,QACA,CAED,SAASojC,IACR,MAAMG,EAAU7iC,SAAS64B,eAAe,wBAEpCgK,IACHA,EAAQC,YAActjC,EAAAA,EAAAA,MAAAA,wBAEvB,CCFD,SAAS4jC,EAAiBC,EAA+BC,GACxD,IAAK,IAAI9hC,EAAI,EAAGA,EAAI8hC,EAAYljC,OAAQoB,IAAK,CAC5C,MAAMjB,EAAU+iC,EAAY9hC,GACtB+hC,EAAiBF,EAAY9O,MAAM5yB,GAASA,EAAKnD,KAAO+B,EAAQ/B,KAGtE,GAAK+kC,EAAL,CAQA,IAAK,MAAMt+B,KAAO1E,EACZvB,OAAO2P,UAAUC,eAAeC,KAAKtO,EAAS0E,KAKvC,UAARA,EAsBQ,kBAARA,EASQ,aAARA,GAAsBs+B,EAAepjB,UAAY5f,EAAQ4f,SAAS/f,OAAS,IAC9EmjC,EAAepjB,SAAWojB,EAAepjB,SAASoI,OAAOhoB,EAAQ4f,UAEjEojB,EAAet+B,GAAO1E,EAAQ0E,GAX9Bs+B,EAAeld,qBACd9lB,EAAQk8B,cAAiB8G,EAAepjB,SAAS/f,OAvB7B,YAAjBG,EAAQuB,OAEVtC,EAAAA,EAAAA,MAAAA,eACAA,EAAAA,EAAAA,MAAAA,cAAAA,UAAsC+jC,EAGtCljC,EAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,KAKjB+kC,EAAe5S,eAAgB,IAyBnC2S,EAAY9hC,GAAK+hC,CAhDhB,MAHA/jC,EAAAA,EAAAA,QAAAA,YAA0Be,EAoD3B,CAED,OAAO+iC,CACP,CDtJDjjC,EAAAA,EAAAA,GAAU,gBAAgB,WACzBb,EAAAA,EAAAA,OAAa,0BAA2B,qBACxCkjC,GACA,IAEDriC,EAAAA,EAAAA,GAAU,eAAe2gB,iBAGxB,GAFA3hB,EAAAA,EAAAA,OAAe,SAEXG,EAAAA,EAAAA,MAAAA,UACH,OAAO2jC,EAAW,2CAGbF,GACN,IAED5iC,EAAAA,EAAAA,GAAU,cAAc2gB,eAAgBwiB,GAGvC,GAAIR,GAAkBQ,IAAeR,EACpC,OAAOG,EAAW,gCAGnBH,EAAiBQ,EAEjB,MAAMl8B,EAAOjI,EAAAA,EAAAA,IAAY,QACnBw0B,EAAQx0B,EAAAA,EAAAA,IAAY,SACpBokC,EAAan8B,GAAQusB,EAG3B,GAAIr0B,EAAAA,EAAAA,MAAAA,YAA0BikC,EAC7B,OAAON,EAAW,qCAInB,GAAIM,EAAY,CACfjkC,EAAAA,EAAAA,OAAa,0BAA2B,gBACxCkjC,IAEA,IAAI3f,GAAe,EAEnB,IAAK,MAAM5hB,KAAW3B,EAAAA,EAAAA,MAAAA,SACrB,IAAK,MAAMmC,KAAQR,EAAQF,SAC1B,GAAIU,EAAKwe,SAAS/f,OAAS,EAAG,CAC7B,MAAM5B,EAAKmD,EAAKwe,SAASxe,EAAKwe,SAAS/f,OAAS,GAAG5B,GAE/CukB,EAAcvkB,IACjBukB,EAAcvkB,EAEf,CAIH,MAAMklC,EACJlkC,EAAAA,EAAAA,MAAAA,eAA6BA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,IAAyC,KAExEa,EAAAA,EAAAA,KAAY,eAAgB,CAC3BiH,OACAusB,QACA9Q,cACA2gB,cACAC,UAA+C,OAApCnkC,EAAAA,EAAAA,MAAAA,qBAEZ,YACMyjC,GAEP,IE3ED5iC,EAAAA,EAAAA,GAAU,YAAY,SAAUG,GAC3BA,IACHyc,EAAAA,EAAAA,SAAqBzc,EAEtB,IDCDH,EAAAA,EAAAA,GAAU,QAAQ2gB,eAAgBrW,GASjC,GARAnL,EAAAA,EAAAA,OAAa,WAmDd,SAA0BokC,GACzB,MAAMC,EAASxkC,EAAAA,EAAAA,IAAY,gCACrBykC,EAAoBD,EAAS,IAAIE,IAAI9L,KAAK/Y,MAAM2kB,IAAW,IAAIE,IAErE,IAAK,IAAItI,EAAI,EAAGA,EAAImI,EAAYxjC,OAAQq7B,IAAK,CAC5C,MAAMt6B,EAAUyiC,EAAYnI,GACtBuI,EAAiBxkC,EAAAA,EAAAA,QAAAA,YAA0B2B,EAAQ2J,MAGzD,GAAKk5B,EAAL,CAUA,IAAK,MAAM/+B,KAAO9D,EACZnC,OAAO2P,UAAUC,eAAeC,KAAK1N,EAAS8D,KAKvC,aAARA,EACH++B,EAAe/iC,SAAWmiC,EACzBY,EAAe/iC,SACfE,EAAQF,UAGT+iC,EAAe/+B,GAAO9D,EAAQ8D,IAIhC2+B,EAAYnI,GAAKuI,CApBhB,MALA7iC,EAAQ8iC,oBAAqB,EAC7B9iC,EAAQsD,YAAcq/B,EAAkB5gC,IAAI/B,EAAQ2J,MACpD3J,EAAQF,SAAS2J,QAAQpL,EAAAA,EAAAA,QAAAA,YAwB1B,CAED,OAAOokC,CACP,CA1FyBM,CAAiBv5B,EAAKiwB,WAC/Cp7B,EAAAA,EAAAA,OAAa,eAAe,GAC5BA,EAAAA,EAAAA,OAAa,0BAA2B,MAEpCmL,EAAKkpB,OACRx0B,EAAAA,EAAAA,IAAY,QAASsL,EAAKkpB,QAGtBr0B,EAAAA,EAAAA,MAAAA,UAAuB,CAC3BA,EAAAA,EAAAA,OAAa,aAEba,EAAAA,EAAAA,KAAY,eAEZ,UACO0B,EAAAA,GAAAA,SAIN,CAHC,MAAOnD,GAGR,CAEGsG,OAAOg+B,0BACVh+B,OAAOg+B,2BAGR,MAAMiB,QAoIRnjB,iBACC,KAAM,oBAAqB9b,QAC1B,OAAO,EAGR,MAAMjD,EAAS,IAAImiC,gBAAgBpkC,SAASV,SAASqnB,QAE/C0d,EAAc,KAEnB,MAAMC,EAAWp/B,OAAO5F,SAAS4zB,OAAShuB,OAAO5F,SAAS6zB,SAAWjuB,OAAO5F,SAASilC,KACrFr/B,OAAOkxB,QAAQoO,aAAa,CAAC,EAAGxkC,SAAS8b,MAAOwoB,EAAhD,EAGD,GAAIriC,EAAOiB,IAAI,OAAQ,CAEtB,MAAM+vB,EAAMhxB,EAAOkB,IAAI,OACjBmL,EErLR,CAAgBm2B,IACf,MAAM95B,EAAO,CACZ3I,KAAM,GACN2J,KAAM,GACNxB,KAAM,GACNzI,KAAM,GACNqI,KAAK,GAGN,IAEC,MAAMkpB,EAAM,IAAI+O,IAAIyC,GAIpB,GAAqB,SAAjBxR,EAAIyR,SACPzR,EAAIyR,SAAW,QAEVzR,EAAI9oB,OACR8oB,EAAI9oB,KAAO,YAEN,IAAqB,UAAjB8oB,EAAIyR,SASd,OARAzR,EAAIyR,SAAW,SAEVzR,EAAI9oB,OACR8oB,EAAI9oB,KAAO,QAGZQ,EAAKZ,KAAM,CAGX,CAED,IAAKkpB,EAAI0R,SACR,MAAO,CAAC,EAGTh6B,EAAKgB,KAAOhB,EAAK3I,KAAOixB,EAAI0R,SAC5Bh6B,EAAKR,KAAO8oB,EAAI9oB,KAEhB,IAAI5J,EAAU,GAEV0yB,EAAIE,SAAS/yB,OAAS,IACzBG,EAAU0yB,EAAIE,SAAS1I,OAAO,IAG3BwI,EAAIsR,KAAKnkC,OAAS,IACrBG,GAAW0yB,EAAIsR,MAIhB55B,EAAKjJ,KAAOnB,CAGZ,CAFC,MAAO3B,GAER,CAED,OAAO+L,CAxDR,EFqLsBi6B,CAAY51B,OAAOikB,IAKvC,OAHAoR,UACMtiC,EAAAA,GAAAA,KAAY,CAACC,KAAM,UAAWE,MAAOoM,KAEpC,CACP,CAAM,GAAItO,SAASC,KAAKC,UAAUC,SAAS,WAAaH,SAASV,SAASqnB,OAAQ,CAElF,MAAMrY,EAActP,OAAO6lC,YAAY5iC,EAAOohB,WAK9C,OAHAghB,UACMtiC,EAAAA,GAAAA,KAAY,CAACC,KAAM,UAAWE,MAAOoM,KAEpC,CACP,CAED,OAAO,CACP,CArK4Bw2B,GAI3B,KAAKX,GAIFpiC,EAAAA,GAAAA,cAAqB8C,OAAO7C,MACQ,WAArCD,EAAAA,GAAAA,cAAqB8C,OAAO7C,MAC3B,CACD,MAAMzB,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKiF,QAE3CrP,GACHsB,EAAAA,EAAAA,IAAgBtB,EAAQA,SACdf,EAAAA,EAAAA,MAAAA,SAAAA,OAA8B,GAGxCqC,EAAAA,EAAAA,IAAgBrC,EAAAA,EAAAA,MAAAA,SAAAA,GAAAA,SAAAA,UAEVkQ,EAAAA,EAAAA,IAAS,UAEhB,CAEF,CACD,IGtDDrP,EAAAA,EAAAA,GAAU,QAAQ,SAAUsK,GAC3BnL,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAE/B,MAAMR,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKxJ,SAE/C,IAAKA,EACJ,OAMD,GAHAA,EAAQF,SAASqrB,OAAO3hB,EAAKwc,QAAU,EAAG,EAAGxc,EAAKhJ,MAG3B,UAAnBgJ,EAAKhJ,KAAKG,OAAqB6I,EAAKo6B,WACvC,OAGD,MAAMpjC,EAAOnC,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,KAAKnD,IAE7CmD,GACHE,EAAAA,EAAAA,IAAgBF,EAAKpB,SAGrB8B,QAAQC,MAAM,yBAA0BqI,EAAKhJ,KAAKnD,GAEnD,I,cCtBD6B,EAAAA,EAAAA,GAAU,QAAQ2gB,UACjB,MAAMzgB,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,OAAOpB,QAEjDA,IAILA,EAAQurB,aAAevrB,EAAQurB,aAAavD,OAC3C5d,EAAKwV,SACH7c,QAAQi5B,GAAMA,EAAEhf,MAAQgf,EAAE36B,MAAmB,YAAX26B,EAAEz6B,OACpCzD,KAAKk+B,GAAMA,EAAE36B,OACb46B,UACA94B,MAAM,EAAG,IAAMnD,EAAQurB,aAAa1rB,SAEvCG,EAAQ8lB,qBACP1b,EAAK8xB,cAAgBl8B,EAAQ4f,SAAS/f,OAASuK,EAAKwV,SAAS/f,OAC9DG,EAAQ4f,SAAS6kB,WAAYr6B,EAAKwV,gBAE5B3W,EAAAA,EAAAA,MACNjJ,EAAQyiB,gBAAiB,EAAzB,I,cClBD,IAAIV,EAEJ,IACCA,EAAM,IAAIkT,MACVlT,EAAIzc,IAAM,eAMV,CALC,MAAOjH,GACR0jB,EAAM,CAELmT,OAAS,EAEV,CAEDp1B,EAAAA,EAAAA,GAAU,OAAO,SAAUsK,GAC1B,MAAMs6B,EAAmBzlC,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAExD,IAAKsjC,EACJ,OAGD,IAAI1kC,EAAU0kC,EAAiB1kC,QAC3B2kC,EACH1lC,EAAAA,EAAAA,MAAAA,eAA6BA,EAAAA,EAAAA,MAAAA,cAAAA,UAAsCe,EAIhEoK,EAAKsxB,IAAIne,eAGXte,EAAAA,EAAAA,MAAAA,eACAA,EAAAA,EAAAA,MAAAA,cAAAA,UAAsCylC,EAAiB9jC,SAEvDZ,EAAUf,EAAAA,EAAAA,MAAAA,cAAAA,QAIV0lC,GAAkB,EAEdv6B,EAAKhJ,OAASpB,EAAQ/B,UAGlBmM,EAAKsxB,IAAIne,aAEhBnT,EAAKhJ,KAAOpB,EAAQ/B,WAGdmM,EAAKsxB,IAAIne,cAMbonB,SAC0B,IAAnBv6B,EAAKjG,YACfnE,EAAQmE,UAAYiG,EAAKjG,gBAGC,IAAhBiG,EAAKknB,SACftxB,EAAQsxB,OAASlnB,EAAKknB,SAIxBtxB,EAAQ4f,SAASpgB,KAAK4K,EAAKsxB,KAEvBtxB,EAAKsxB,IAAI1e,KACZhd,EAAQqjB,YAAcjZ,EAAKsxB,IAAIz9B,GA0BjC,SACC2mC,EACA5kC,EACAoxB,EACAsK,GAEA,IAAI17B,EAAQ87B,QAIRJ,EAAIv3B,WAAclF,EAAAA,EAAAA,MAAAA,SAAAA,mBAAuD,YAAby8B,EAAIn6B,SAC9D9B,SAASolC,aAAezT,GAAiBA,EAAcpxB,UAAYA,GAAS,CAChF,GAAIf,EAAAA,EAAAA,MAAAA,SAAAA,aACH,IACC8iB,EAAImT,MAGJ,CAFC,MAAO4P,GAER,CAGF,GACC7lC,EAAAA,EAAAA,MAAAA,SAAAA,sBACA,iBAAkB0F,QACU,YAA5BwzB,aAAaC,WACZ,CACD,IAAI7c,EACA7b,EAEa,WAAbg8B,EAAIn6B,MACPga,EAAQ,sBACR7b,EAAOg8B,EAAIjiB,KAAKhN,KAAO,mBAAqBivB,EAAI17B,UAEhDub,EAAQ9M,OAAOitB,EAAIjiB,KAAKhN,MAEH,UAAjBzM,EAAQuB,OACXga,GAAU,KAAIvb,EAAQyB,SAGN,YAAbi6B,EAAIn6B,OACPga,GAAS,UAGV7b,GAAOqlC,EAAAA,EAAAA,GAAgBrJ,EAAIr6B,OAG5B,MAAM2jC,EAAYvmB,KAAKE,MAAMlQ,OAAOitB,EAAIn3B,OAExC,IACKtF,EAAAA,EAAAA,MAAAA,iBACHgS,UAAUqmB,cAAc2N,MACtBC,MAAMC,IACNA,EAAa91B,QAAQ+1B,YAAY,CAChC7jC,KAAM,eACNwe,OAAQ6kB,EACRI,UAAWA,EACXzpB,MAAOA,EACP7b,KAAMA,GALP,IAQAmC,OAAM,SAIO,IAAIs2B,aAAa5c,EAAO,CACtC8pB,IAAM,QAAOT,IACbU,MAAO,oDACPC,KAAM,yCACN7lC,KAAMA,EACNslC,UAAWA,IAELvhB,iBAAiB,SAAS,WAChC8Z,KAAKiI,QACL7gC,OAAOuE,QAEP,MAAMquB,EAAgBt4B,EAAAA,EAAAA,QAAAA,YAA0B2lC,GAE5CrN,IACHj2B,EAAAA,EAAAA,IAAgBi2B,EAAcv3B,QAE/B,GAIF,CAFC,MAAO8kC,GAER,CACD,CACD,CAEF,CA/GCW,CAAcr7B,EAAKhJ,KAAMpB,EAASf,EAAAA,EAAAA,MAAAA,cAA2BmL,EAAKsxB,KAGnE,IAAIgK,EAAe,EAEdf,EAGM3kC,EAAQuiB,mBAGlBmjB,EAAe,MAJfA,EAAe,IAOZA,EAAe,GAAK1lC,EAAQ4f,SAAS/f,OAAS6lC,IACjD1lC,EAAQ4f,SAASmM,OAAO,EAAG/rB,EAAQ4f,SAAS/f,OAAS6lC,GACrD1lC,EAAQ8lB,sBAAuB,GAGX,YAAjB9lB,EAAQuB,MA8Fb,SAAwBvB,EAAS07B,GAChC,GAAiB,YAAbA,EAAIn6B,MAAmC,WAAbm6B,EAAIn6B,KAAmB,CACpD,MAAMwF,EAAO/G,EAAQqoB,MAAM2L,MAAMvL,GAAMA,EAAEhc,OAASivB,EAAIjiB,KAAKhN,OAEvD1F,IACHA,EAAKyb,YAAc,IAAI/D,KAAKid,EAAIn3B,MAAMohC,WAAalnB,KAAKC,MAEzD,MAAM,GAAiB,SAAbgd,EAAIn6B,MAAgC,SAAbm6B,EAAIn6B,KAAiB,CACtD,MAAMqkC,EAAM5lC,EAAQqoB,MAAM4S,WAAWxS,GAAMA,EAAEhc,OAASivB,EAAIjiB,KAAKhN,OAE3Dm5B,GAAO,GACV5lC,EAAQqoB,MAAM0D,OAAO6Z,EAAK,EAE3B,MAAM,GAAiB,SAAblK,EAAIn6B,KAAiB,CAC/B,MAAMqkC,EAAM5lC,EAAQqoB,MAAM4S,WAAWxS,GAAMA,EAAEhc,OAASivB,EAAI37B,OAAO0M,OAE7Dm5B,GAAO,GACV5lC,EAAQqoB,MAAM0D,OAAO6Z,EAAK,EAE3B,CACD,CAjHCC,CAAe7lC,EAASoK,EAAKsxB,IAE9B,IC5FD57B,EAAAA,EAAAA,GAAU,eAAe,SAAUsK,GAClC,MACMjL,EADUF,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,OACtBpB,QAAQ4f,SAASoU,MAAMgI,GAAMA,EAAE/9B,KAAOmM,EAAKnM,KAEpE,IAAKkB,EACJ,OAGD,MAAM2mC,EAAe3mC,EAAQG,SAAS27B,WAAWe,GAAMA,EAAE3jB,OAASjO,EAAK/K,QAAQgZ,OAE3EytB,GAAgB,IACnB3mC,EAAQG,SAASwmC,GAAgB17B,EAAK/K,QAEvC,ICZDS,EAAAA,EAAAA,GAAU,eAAe,SAAUsK,GAClC,MAAMwwB,EAAU37B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAE1Cw5B,IAILA,EAAQ56B,QAAQoK,KAAOA,EAAKA,MAC5B9I,EAAAA,EAAAA,IAAgBs5B,EAAQ56B,SACxB,ICVDF,EAAAA,EAAAA,GAAU,SAAS,SAAUsK,GAC5B,MAAMwwB,EAAU37B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKnM,IAE3C28B,IACHA,EAAQ56B,QAAQqoB,MAAQje,EAAKie,MAE9B,ICLDvoB,EAAAA,EAAAA,GAAU,WAAW,SAAUsK,GAC9B,MAAMxJ,EAAUwJ,EAAKiwB,SAAS,GAE9Bz5B,EAAQ8iC,oBAAqB,EAC7B9iC,EAAQsD,aAAc,EACtBtD,EAAQF,SAAS2J,QAAQpL,EAAAA,EAAAA,QAAAA,aAEzBA,EAAAA,EAAAA,OAAa,WAAY,IAAIA,EAAAA,EAAAA,MAAAA,SAAsB2B,KAGnDU,EAAAA,EAAAA,IAAgBV,EAAQF,SAASE,EAAQF,SAASb,OAAS,GAC3D,IAEDC,EAAAA,EAAAA,GAAU,mBAAmB,SAAUsK,GACtC,MAAMxJ,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKxJ,SAE3CA,IACHA,EAAQC,cAAgBuJ,EAAKvJ,cAE9B,IAEDf,EAAAA,EAAAA,GAAU,kBAAkB,SAAUsK,GACrC,MAAMxJ,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKxJ,SAE1CA,IAILA,EAAQsgC,OAAO6E,UAAY37B,EAAK27B,UAChCnlC,EAAQsgC,OAAO8E,OAAS57B,EAAK47B,OAExB57B,EAAK27B,WACTnlC,EAAQF,SAAS2J,SAASrK,IACzBA,EAAQqoB,MAAQ,GAChBroB,EAAQ0I,MAAQ,CAAhB,IAGF,IAED5I,EAAAA,EAAAA,GAAU,iBAAiB,SAAUsK,GACpC,MAAMpK,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAE3CpB,IACHA,EAAQA,QAAQ0I,MAAQ0B,EAAK1B,MAE9B,IAED5I,EAAAA,EAAAA,GAAU,gBAAgB,SAAUsK,GACnC,MAAMxJ,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKG,MAE/C,GAAK3J,EAIL,IAAK,MAAM8D,KAAO0F,EACjBxJ,EAAQ8D,GAAO0F,EAAK1F,EAErB,IAED5E,EAAAA,EAAAA,GAAU,gBAAgB,SAAUsK,GACnC,MAAMxJ,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKG,MAE3C3J,IACHA,EAAQa,KAAOb,EAAQF,SAAS,GAAGe,KAAO2I,EAAK3I,KAEhD,IClED3B,EAAAA,EAAAA,GAAU,QAAQ,SAAUsK,GAC3B,MAAMxJ,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKxJ,SAE3CA,IACHA,EAAQ6L,KAAOrC,EAAKqC,KAErB,ICLD3M,EAAAA,EAAAA,GAAU,QAAQ,SAAU7B,GAC3B,GAAIA,EAAK,EACR,OAID,GAAIgB,EAAAA,EAAAA,MAAAA,eAA6BA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,KAAyChB,EACzE,OAID,MAAM+B,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BhB,GAEtC+B,IACHA,EAAQA,QAAQmE,UAAY,EAC5BnE,EAAQA,QAAQsxB,OAAS,EAErBtxB,EAAQA,QAAQ4f,SAAS/f,OAAS,IACrCG,EAAQA,QAAQqjB,YACfrjB,EAAQA,QAAQ4f,SAAS5f,EAAQA,QAAQ4f,SAAS/f,OAAS,GAAG5B,IAGjE,ICtBD6B,EAAAA,EAAAA,GAAU,QAAQ2gB,eAAgBrW,GAE7BnL,EAAAA,EAAAA,MAAAA,eAA6BA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,KAAyCmL,EAAKhJ,OAC9EE,EAAAA,EAAAA,IAAgBrC,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,SAAAA,IAGjB,MAAMe,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAE1CpB,IAILA,EAAQY,QAAQF,SAASqrB,OACxB/rB,EAAQY,QAAQF,SAASu6B,WAAWh6B,GAAMA,EAAEhD,KAAOmM,EAAKhJ,OACxD,SAGKnC,EAAAA,EAAAA,SAAe,cAAee,GACpC,IClBDF,EAAAA,EAAAA,GAAU,QAAQ2gB,eAAgBrW,GAGjC,MAAM67B,EACLhnC,EAAAA,EAAAA,MAAAA,eAA6BA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,OAA2CmL,EAAKxJ,QAE9E3B,EAAAA,EAAAA,OAAa,gBAAiBmL,EAAKxJ,SAE9BqlC,IAIDhnC,EAAAA,EAAAA,MAAAA,SAAAA,OAA8B,GACjCqC,EAAAA,EAAAA,IAAgBrC,EAAAA,EAAAA,MAAAA,SAAAA,GAAAA,SAAAA,UAEVkQ,EAAAA,EAAAA,IAAS,WAEhB,IClBDrP,EAAAA,EAAAA,GAAU,aAAa,SAAUsK,GAChC,MAAM87B,EAAQ97B,EAAK87B,MAEnB,OAAQ97B,EAAK7I,MACZ,IAAK,WACJtC,EAAAA,EAAAA,OACC,gBACA,CAACspB,EAAGC,IAAO0d,EAAmBpd,QAAQP,EAAEhe,MAAS27B,EAAmBpd,QAAQN,EAAEje,QAG/E,MAED,IAAK,WAAY,CAChB,MAAM3J,EAAU3B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKrK,QAE/C,IAAKa,EACJ,OAGDA,EAAQF,SAAS4nB,MAChB,CAACC,EAAGC,IAAO0d,EAAmBpd,QAAQP,EAAEtqB,IAAOioC,EAAmBpd,QAAQN,EAAEvqB,MAG7E,KACA,EAEF,IC1BD6B,EAAAA,EAAAA,GAAU,SAAS,SAAUsK,GAC5B,MAAMpK,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAE3CpB,IACHA,EAAQA,QAAQqvB,MAAQjlB,EAAKilB,MAE9B,ICNDvvB,EAAAA,EAAAA,GAAU,SAAS,SAAUsK,GAC5B,GAAInL,EAAAA,EAAAA,MAAAA,eAA6BA,EAAAA,EAAAA,MAAAA,cAAAA,QAAAA,KAAyCmL,EAAKhJ,KAC9E,OAAOtB,EAAAA,EAAAA,KAAY,QAAS,CAC3BC,OAAQqK,EAAKhJ,OAIf,MAAMpB,EAAUf,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKhJ,MAE3CpB,IACHA,EAAQA,QAAQowB,eAAgB,EAEjC,I,cCZDtwB,EAAAA,EAAAA,GAAU,YAAY,WACrBjB,EAAAA,EAAAA,SACA,ICFDiB,EAAAA,EAAAA,GAAU,iBAAiB,SAAUsK,GACpCA,EAAKke,MAAK,CAACC,EAAGC,IAAMA,EAAE4K,QAAU7K,EAAE6K,UAClCn0B,EAAAA,EAAAA,OAAa,WAAYmL,EACzB,I,cCFDtK,EAAAA,EAAAA,KAAY,iBAAiB,SAAUsK,GACtCnL,EAAAA,EAAAA,OAAa,sBAAuBmL,GAI/BnL,EAAAA,EAAAA,SAAe,qBAEhBmL,EAAKohB,YACRC,EAAAA,EAAAA,aAKD,MAAM0a,EAAe/7B,EAAK2nB,OAAOiC,MAAMoS,GAAMA,EAAE3kC,OAASxC,EAAAA,EAAAA,MAAAA,SAAAA,aAEnCmsB,IAAjB+a,EACElnC,EAAAA,EAAAA,SAAe,kBAAmB,CACtCwC,KAAM,QACN6C,MAAO8F,EAAKi8B,aACZ12B,MAAM,IAEGw2B,EAAalN,aACtBx5B,SAAS8Y,cAAc,4BAAgDqB,QACvEusB,EAAalN,YAGXx5B,SAASC,KAAKC,UAAUC,SAAS,WACpC+E,OAAO8e,iBAAiB,gBAAiBplB,IACxCA,EAAEwI,iBACFxI,EAAEioC,YAAc,wDAAhB,GAGF,ICjCDxmC,EAAAA,EAAAA,GAAU,aAAa,SAAUsK,GAIhC,IAAI82B,EAgBJ,GAnBAjiC,EAAAA,EAAAA,OAAa,cAAemL,GAC5BnL,EAAAA,EAAAA,OAAa,sBAAsB,GAKlCiiC,EADG92B,EAAKkG,OACC,cACClG,EAAKm8B,SACN,eACCn8B,EAAKsO,QAAQR,UACd,aAEA,QAGVjZ,EAAAA,EAAAA,OAAa,gBAAiBiiC,GAI1B92B,EAAKo8B,UAAW,CACnB,MAAMC,EAAUr8B,EAAKo8B,UAAY/nB,KAAKC,MAElC+nB,EAAU,EACbzhB,YAAW,IAAM/lB,EAAAA,EAAAA,OAAa,sBAAsB,IAAOwnC,GAE3DxnC,EAAAA,EAAAA,OAAa,sBAAsB,EAEpC,CACD,IAEDa,EAAAA,EAAAA,GAAU,wBAAwB,KAC5Bb,EAAAA,EAAAA,MAAAA,sBAILA,EAAAA,EAAAA,MAAAA,oBAAAA,mBAAoD,EAApD,ICpCDa,EAAAA,EAAAA,GAAU,eAAe2gB,eAAgBrW,GACxC,MAAM3I,EAAO2I,EAAK3I,KACZ6C,EAAQ8F,EAAK9F,YACbrF,EAAAA,EAAAA,SAAe,kBAAmB,CAACwC,OAAM6C,QAAOqL,MAAM,GAC5D,IAED7P,EAAAA,EAAAA,GAAU,eAAe2gB,eAAgB3I,GACxC,MAAMib,EAAoBt0B,OAAOD,KAAKsZ,GAAUjY,OAAS,EAIzD,GAFAZ,EAAAA,EAAAA,OAAa,oBAAqB8zB,GAE9BA,EACH,IAAK,MAAMtxB,KAAQqW,QACZ7Y,EAAAA,EAAAA,SAAe,kBAAmB,CAACwC,OAAM6C,MAAOwT,EAASrW,GAAOkO,MAAM,eAGvE1Q,EAAAA,EAAAA,SAAe,mBAEtB,IClBDa,EAAAA,EAAAA,GAAU,iBAAiB,SAAUsK,GACpC,MAAMwwB,EAAU37B,EAAAA,EAAAA,QAAAA,YAA0BmL,EAAKrK,QAE3C66B,GAAS56B,UACZ46B,EAAQ56B,QAAQ4f,SAAW,GAC3Bgb,EAAQ56B,QAAQsxB,OAAS,EACzBsJ,EAAQ56B,QAAQmE,UAAY,EAC5By2B,EAAQ56B,QAAQqjB,YAAc,EAC9BuX,EAAQ56B,QAAQ8lB,sBAAuB,EAExC,ICTDhmB,EAAAA,EAAAA,GAAU,iBAAiB,SAAUsK,GACpCnL,EAAAA,EAAAA,OAAa,WAAYmL,EACzB,ICHDtK,EAAAA,EAAAA,GAAU,kBAAmB20B,IAC5B,MAAMiS,EAAeznC,EAAAA,EAAAA,MAAAA,0BAGnBynC,GACDA,EAAapmB,cAAgBmU,EAASnU,aACtComB,EAAarmB,cAAgBoU,EAASpU,aACtCqmB,EAAalnB,SAAWiV,EAASjV,QACjCknB,EAAanmB,aAAekU,EAASlU,aAQtCthB,EAAAA,EAAAA,OAAa,4BAA6B,MAEtCA,EAAAA,EAAAA,MAAAA,qBACHA,EAAAA,EAAAA,OAAa,0BAA2Bw1B,GAIzCx1B,EAAAA,EAAAA,OAAa,uBAAwB,CAAC4gB,QAAS4U,EAAS5U,UAAxD,ICvBD/f,EAAAA,EAAAA,GAAU,gBAAiB20B,IAC1B,MAAM,OAAC10B,EAAD,OAASmhC,GAAUzM,EAEnBmG,EAAU37B,EAAAA,EAAAA,QAAAA,YAA0Bc,GAE1C,GAA8B,UAA1B66B,GAAS56B,QAAQuB,KACpB,IAAK,MAAMH,KAAQw5B,EAAQh6B,QAAQF,SAChB,YAAdU,EAAKG,OACRH,EAAK06B,MAAQoF,QAGLtG,IACVA,EAAQ56B,QAAQ87B,MAAQoF,EACxB,I,6DCUF,SAASyF,EAAetY,GACvB,GAAoC,IAAhCpvB,EAAAA,EAAAA,MAAAA,SAAAA,OACH,OAGD,MAAM2nC,EAA6B,GACnC,IAAIhgB,GAAS,EAEb,IAAK,MAAMhmB,KAAW3B,EAAAA,EAAAA,MAAAA,SACrB,IAAK,MAAMe,KAAWY,EAAQF,UACzBmmC,EAAAA,EAAAA,GAAmBjmC,EAASZ,MAIjB,IAAX4mB,GAAgB3nB,EAAAA,EAAAA,MAAAA,eAA2Be,UAAYA,IAC1D4mB,EAAQggB,EAAa/mC,QAGtB+mC,EAAapnC,KAAKQ,IAKpB,MAAMH,EAAS+mC,EAAa/mC,OAC5B+mB,IAAWA,EAAQyH,GAAaxuB,EAAUA,GAAUA,EAEpDinC,EAAcF,EAAahgB,GAC3B,CAwED,SAASkgB,EAAcC,IACtBzlC,EAAAA,EAAAA,IAAgBylC,GAEhB,MAAM7N,EAAUz5B,SAAS8Y,cACvB,oDAAmDwuB,EAAc9oC,QAG/Di7B,GACkBA,EA8FnBjM,eAAe,CAACC,MAAO,SAAUC,OAAQ,WA5F5C,CA7HDtD,IAAAA,KAAe,CAAC,SAAU,aAAa,SAAUxrB,EAAGG,GACnD,SAAIwoC,EAAAA,EAAAA,GAAiB3oC,KAIrBsoC,EAAyC,OAA1BnoC,EAAKwC,MAAM,KAAK+gB,OAAkB,EAAI,IAE9C,EACP,ICdD,SAAkCklB,GACjC,IAAIpR,EAGE,GAENp2B,SAASC,KAAK+jB,iBACb,aACA,SAAUrf,GACT,GAA6B,IAAzBA,EAAM8iC,QAAQrnC,OACjB,OAGD,MAAM0oB,EAAInkB,EAAM8iC,QAAQlkC,KAAK,GACvBwlB,EAAIpkB,EAAM8iC,QAAQlkC,KAAK,GAE7B,IAAKulB,IAAMC,EACV,OAGD,MAAMwc,EAAYrgC,OAAOwiC,YAAYzoB,MAC/B0oB,EAAS,EAAE7e,EAAE8e,QAAU7e,EAAE6e,SAAW,GAAI9e,EAAE+e,QAAU9e,EAAE8e,SAAW,GAEvE,GAAIzR,EAAQh2B,OAAS,EAAG,CACvB,MAAM0nC,EAAO1R,EAAQA,EAAQh2B,OAAS,GAChC2nC,EACLD,EAAKH,OAAO,KAAOA,EAAO,IAAMG,EAAKH,OAAO,KAAOA,EAAO,GAE3D,GAAIG,EAAKvC,YAAcA,GAAawC,EAGnC,MAED,CAED3R,EAAQr2B,KAAK,CAACwlC,YAAWoC,UACzB,GACD,CAAC1jB,SAAS,IAGXjkB,SAASC,KAAK+jB,iBACb,YACA,SAAUrf,GACT,KAAIA,EAAM8iC,QAAQrnC,QAAU,GAI5B,IACC,MAAMwuB,EAsBV,SAAkBoZ,GAIjB,GAAIA,EAAK5nC,OAAS,EACjB,OAAO,KAGR,IAAK,IAAI+D,EAAI,EAAGA,EAAI6jC,EAAK5nC,SAAU+D,EAAG,CACrC,MAAM8jC,EAAWD,EAAK7jC,EAAI,GACpB8U,EAAU+uB,EAAK7jC,GAMrB,IAHC+jC,EAAAA,EAAAA,GAASD,EAASN,OAAQ1uB,EAAQ0uB,QAClC5jC,KAAKokC,IAAIF,EAAS1C,UAAYtsB,EAAQssB,WAZhB,GAetB,OAAO,IAER,CAED,OAGD,UAA+B5hC,EAAIC,IAAMC,EAAIC,IAE5C,MAAMskC,GAAWtkC,EAAKF,IAAOC,EAAKF,GAGlC,OAAII,KAAKokC,IAAIC,GAAW,EAChBzkC,EAAKE,EAAK,IAAM,IAGjBD,EAAKE,EAAK,IAAM,GACvB,CAbOukC,CAAqBL,EAAK,GAAGL,OAAQK,EAAKA,EAAK5nC,OAAS,GAAGunC,OAClE,CA5CqBW,CAASlS,GAEvBxH,GACH4Y,EAAiB5Y,EAIlB,CARD,QAOCwH,EAAU,EACV,CACD,GACD,CAACnS,SAAS,IAGXjkB,SAASC,KAAK+jB,iBACb,eACA,WACCoS,EAAU,EACV,GACD,CAACnS,SAAS,GAEX,CDnDDskB,EAAyB,SAAUC,GACR,MAAtBA,GAAmD,MAAtBA,GAChCtB,EAAqC,MAAtBsB,GAA6B,EAAI,EAEjD,IAgCDpe,IAAAA,KAAe,CAAC,eAAgB,mBAAmB,SAAUxrB,EAAGG,GAC/D,IAAIwoC,EAAAA,EAAAA,GAAiB3oC,GACpB,OAAO,EAGR,MAAMwB,EAASZ,EAAAA,EAAAA,MAAAA,SAAAA,OAEf,GAAe,IAAXY,EACH,OAAO,EAGR,MAAMwuB,EAAsC,OAA1B7vB,EAAKwC,MAAM,KAAK+gB,OAAkB,EAAI,EACxD,IAAI6E,EAAQ,EAcZ,OAXI3nB,EAAAA,EAAAA,MAAAA,gBACH2nB,EAAQ3nB,EAAAA,EAAAA,MAAAA,SAAAA,WAAgCi8B,GAAMA,IAAMj8B,EAAAA,EAAAA,MAAAA,eAA2B2B,WAG5D,IAAfytB,GAAgE,UAA5CpvB,EAAAA,EAAAA,MAAAA,eAA2Be,QAAQuB,OAC1DqlB,IAAWA,EAAQyH,GAAaxuB,EAAUA,GAAUA,IAItDinC,EAAc7nC,EAAAA,EAAAA,MAAAA,SAAqB2nB,GAAOlmB,SAAS,KAE5C,CACP,IAIDmpB,IAAAA,KAAe,CAAC,UAAU,SAAUxrB,GACnC,IAAI2oC,EAAAA,EAAAA,GAAiB3oC,GACpB,OAAO,EAGR,IAAI0oC,EAEJmB,EAAY,IAAK,MAAMtnC,KAAW3B,EAAAA,EAAAA,MAAAA,SACjC,IAAK,MAAMmC,KAAQR,EAAQF,SAAU,CACpC,GAAIU,EAAK+C,UAAW,CACnB4iC,EAAgB3lC,EAChB,MAAM8mC,CACN,CAEG9mC,EAAKkwB,SAAWyV,IACnBA,EAAgB3lC,EAEjB,CAOF,OAJI2lC,GACHD,EAAcC,IAGR,CACP,IAGDld,IAAAA,KAAe,CAAC,UAAU,SAAUxrB,GACnC,SAAI2oC,EAAAA,EAAAA,GAAiB3oC,MAKrB8Q,EAAAA,EAAAA,IAAS,QAAQtN,OAAOqc,GAAQpc,QAAQgC,IAAIoa,MACrC,EACP,IAeD,MAAMiqB,EAAc,CACnB,GAAG,EACH,GAAG,EACH,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,GAGN1oC,SAASgkB,iBAAiB,WAAYplB,IAErC,GAAc,WAAVA,EAAEqG,KAAuD,SAAnClD,EAAAA,GAAAA,aAAAA,MAAAA,KAEzB,YADAA,EAAAA,GAAAA,IAAW,GAMZ,GAAInD,EAAE+pC,QAAUD,EAAY9pC,EAAEgqC,OAC7B,OAID,IAAKhqC,EAAEiqC,SAAWjqC,EAAEkqC,UAAwB,KAAZlqC,EAAEgqC,MACjC,OAID,GAAgB,KAAZhqC,EAAEgqC,OAA4B,KAAZhqC,EAAEgqC,MAAc,CACrC,MAAM/oB,EAAO7f,SAAS8Y,cAAc,+BAMpC,YAJI+G,GACFA,EAAwBpW,QAI1B,CAED,MAAM7E,EAAWhG,EAAE0B,OAAuBsE,QAG1C,GAAgB,UAAZA,GAAmC,aAAZA,EAC1B,OAGD,MAAMrF,EAAQS,SAAS64B,eAAe,SAEjCt5B,IAILA,EAAMkK,QAIU,KAAZ7K,EAAEgqC,OACLhqC,EAAEwI,iBACF,IE7MF,MAAM2hC,EAAU/oC,SAAS64B,eAAe,WAClCmQ,EAAgBD,GAASE,aAAa,SAAW,GACjDC,EAAiBH,GAAS7Q,QAAQiR,OAAS,GAEpCC,GAASC,EAAAA,EAAAA,IAAUC,EAAAA,GAEhCF,EAAOG,IAAIxnC,EAAAA,IACXqnC,EAAOG,IAAI/pC,EAAAA,EAAOyF,EAAAA,IAElBmkC,EAAOI,MAAM,QACbnpC,EAAAA,EAAAA,OAEAb,EAAAA,EAAAA,OACEyJ,GAAUA,EAAM8xB,cAChBA,IACI71B,OAAO0yB,WAAa3a,EAAAA,EAAAA,uBACvB5d,EAAAA,EAAAA,IAAY,0BAA2B07B,EAAY5b,YACnDhE,EAAAA,EAAAA,KAAc,UACd,IAIH3b,EAAAA,EAAAA,OACEyJ,GAAUA,EAAMgyB,eAChBA,IACA57B,EAAAA,EAAAA,IAAY,2BAA4B47B,EAAa9b,YACrDhE,EAAAA,EAAAA,KAAc,SAAd,IAIF3b,EAAAA,EAAAA,OACC,CAACgqB,EAAGnQ,IAA6BA,EAAQyC,QACxCA,IACA9b,SAAS8b,MAAQA,CAAjB,IAKFtc,EAAAA,EAAAA,OACC,CAACgqB,EAAGnQ,IAA6BA,EAAQ+iB,iBACxCA,IACA2M,GAASlwB,aAAa,OAAQujB,EAAiB,EAAI8M,EAAiBF,GAEpE,MAAMS,EAAiCvkC,OAAOsM,UAE1Ci4B,EAAIC,cACHtN,EAAiB,EACpBqN,EAAIC,YAAYtN,GAEZqN,EAAIE,eACPF,EAAIE,gBAGN,IAIHP,EAAOpgC,OAAO4gC,aAAe,SAAUhrC,GAClCA,aAAaC,MAChBW,EAAAA,EAAAA,OAAa,0BAA4B,cAAaZ,EAAEc,WAExDF,EAAAA,EAAAA,OAAa,0BAA4B,cAAawP,OAAOpQ,MAI9DyD,QAAQC,MAAM1D,EACd,C,sDC/ED,KAAgBirC,uBA6ChB,WACCrqC,EAAAA,EAAAA,OAAa,wBAAyB,WAEtCgS,UAAUqmB,cAAc2N,MACtBC,MAAMC,GACNA,EAAaoE,YAAYC,kBAAkBtE,MAAMuE,GAC5CA,GACH3pC,EAAAA,EAAAA,KAAY,mBAEL2pC,EAAqBC,cAAcxE,MAAMyE,IAC/C1qC,EAAAA,EAAAA,OACC,wBACA0qC,EAAa,YAAc,cAF5B,KAOKxE,EAAaoE,YAClBK,UAAU,CACVC,qBAAsB5qC,EAAAA,EAAAA,MAAAA,qBAAiC4qC,qBACvDC,iBAAiB,IAEjB5E,MAAM6E,IACNjqC,EAAAA,EAAAA,KAAY,gBAAiBiqC,EAAaC,UAC1C/qC,EAAAA,EAAAA,OAAa,wBAAyB,cACtCA,EAAAA,EAAAA,OAAa,kCAAb,QAIH4C,OAAOqc,IACPjf,EAAAA,EAAAA,OAAa,wBAAyB,eACtCA,EAAAA,EAAAA,OAAa,mCACb6C,QAAQC,MAAMmc,EAAd,GAEF,GA7EDpe,EAAAA,EAAAA,KAAY,qBAAqB,SAAUmqC,GAiFnB,WAAtBlrC,SAASolC,UACa,cAAtBplC,SAASqlC,UACa,cAAtBrlC,SAASqlC,SA7EJ,kBAAmBnzB,WAIzBA,UAAUqmB,cACR4S,SAAS,qBACThF,MAAMC,IAGN,GAFAlmC,EAAAA,EAAAA,OAAa,oBAERkmC,EAAaoE,YAIlB,OAAOpE,EAAaoE,YAAYC,kBAAkBtE,MAAM6E,IAGnDA,IAA4C,IAA5BE,EACdF,EAAaL,cAAcxE,MAAMyE,IACrC1qC,EAAAA,EAAAA,OACC,wBACA0qC,EAAa,YAAc,cAF5B,IAMD1qC,EAAAA,EAAAA,OACC,wBACA8qC,EAAe,aAAe,YAE/B,GAfF,IAkBAloC,OAAOqc,IACPjf,EAAAA,EAAAA,OAAa,wBAAyB,eACtC6C,QAAQC,MAAMmc,EAAd,IArCDjf,EAAAA,EAAAA,OAAa,wBAAyB,UAuCvC,G,uDC9CD,MAAMkrC,EACL,iHAEM,SAASpF,EAAgB5lC,GAC/B,OAAOA,EAAQqnB,QAAQ2jB,EAAiB,IAAIC,MAC5C,CAEM,MAAM3oB,EAAiB,IAAI+hB,IAAI,CACrC,OACA,OACA,UACA,OACA,OACA,OACA,OACA,OACA,Q,0FCFCn+B,EAAAA,EAAAA,GAA+B,OAA1BpH,GAAG,kBAAgB,S,qGCblBA,GAAG,UAAU6H,IAAI,W,GAClBX,MAAM,mB,GACLA,MAAM,kB,6BAeToW,MAAM,gDACLlS,MAAO,C,6FAYHpL,GAAG,U,GAETkH,MAAM,8CACN,aAAW,sB,8CAcNA,MAAM,8CAA8C,aAAW,Y,wJC7CtEA,MAAM,QACNC,KAAK,aACL,aAAW,4B,SAIAU,IAAI,cAAcV,KAAK,aAAa,aAAW,4B,GACrDD,MAAM,iB,qBAmBYA,MAAM,mB,sCAwBhBA,MAAM,c,uBCrCrB,MAAMklC,EAAQ,CACbC,MAAO,CACN/oC,KAAMiN,OACNhO,QAAS,EACTiH,UAAU,GAEX8iC,iBAAkB,CACjBhpC,KAAMiH,QACNhI,SAAS,EACTiH,UAAU,GAEX+iC,oBAAqB,CACpBjpC,KAAMiN,OACNhO,QAAS,GACTiH,UAAU,GAEXgjC,OAAQ,CACPlpC,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXijC,UAAW,CACVnpC,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXkjC,WAAY,CACXppC,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXmjC,UAAW,CACVrpC,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXojC,MAAO,CACNtpC,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXtC,MAAO,CACN5D,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXqjC,QAAS,CACRvpC,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,GAEXsjC,KAAM,CACLxpC,KAAM2M,MACN1N,QAAS,GACTiH,UAAU,GAEX1E,OAAQ,CACPxB,KAAMkN,OACNjO,QAAS,GACTiH,UAAU,IAIZ,OAAe9B,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,YACN2G,MAAOiiC,EACP3a,MAAO,CAAC,SAAU,SAAU,YAC5B9pB,MAAMwC,GAAO,KAACnF,IACb,MAAM+nC,GAAellC,EAAAA,EAAAA,IAAwB,MACvCmlC,GAAWnlC,EAAAA,EAAAA,IAAqB,MA6BtC,OA3BAiD,EAAAA,EAAAA,IAAMiiC,GAAeE,IAChBA,IACHD,EAAS3mC,MAAQ,IAAI6mC,EAAAA,GAASD,EAAc,IACxC9iC,EAEHgjC,SAAShnC,GACRnB,EAAK,SAAUmB,EACf,EAEDinC,WAAWjnC,GACVnB,EAAK,WAAYmB,EACjB,EAEDknC,MAAMlnC,GACLnB,EAAK,SAAUmB,EACf,IAEH,KAGDuC,EAAAA,EAAAA,KAAgB,KACXskC,EAAS3mC,QACZ2mC,EAAS3mC,MAAMumB,UACfmgB,EAAa1mC,MAAQ,KACtB,IAGM,CACN0mC,eAED,I,UC9GF,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,wCDJ1DhlC,EAAAA,EAAAA,IAQM,OARDF,IAAI,eAAgBX,OAAK,QAAEe,EAAAA,OAAOf,QAAvC,gBACCa,EAAAA,EAAAA,IAMQwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IALiB/W,EAAAA,MAAI,CAApBlD,EAAM4jB,KADf3gB,EAAAA,EAAAA,IAMQC,EAAAA,OAAA,QAJNxB,IAAK1B,EAAKkD,EAAAA,SACVgzB,QAASl2B,EACT4jB,MAAOA,MAJT,OADD,E,0EESEvhB,EAAAA,EAAAA,GAAsC,QAAhCF,MAAM,yBAAuB,U,SAEvBA,MAAM,oB,GACdA,MAAM,c,qBAITA,MAAM,6CACN,aAAW,uB,IAEXE,EAAAA,EAAAA,GAAgC,QAA1BF,MAAM,mBAAiB,U,SAI7BA,MAAM,gDACN,aAAW,gB,KAEXE,EAAAA,EAAAA,GAAmC,QAA7BF,MAAM,sBAAoB,U,oDCzBpC,QAAgBvE,EAASsD,KACxB,MAAMo/B,EAASxkC,EAAAA,EAAAA,IAAY,gCACrBu7B,EAAWiJ,EAAS,IAAIE,IAAI9L,KAAK/Y,MAAM2kB,IAAW,IAAIE,IAE5D5iC,EAAQsD,YAAcA,EAElBA,EACHm2B,EAAS7hB,IAAI5X,EAAQ2J,MAErB8vB,EAASkR,OAAO3qC,EAAQ2J,MAGzBzL,EAAAA,EAAAA,IAAY,+BAAgC44B,KAAKkF,UAAU,IAAIvC,IAZhE,ECFA,GAAgBmR,GACXA,EAAQ,IACJA,EAAM5sB,YAGN4sB,EAAQ,KAAMvnC,QAAQ,GAAGd,MAAM,GAAI,GAAK,I,kHCqCjD,IAAewC,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,iBACN2G,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXzH,QAAS,CACRuB,KAAM9C,OACNgJ,UAAU,GAEX4H,OAAQ7G,QACRijC,YAAajjC,SAEd5C,MAAMwC,GACL,MAAMnJ,GAAQgJ,EAAAA,EAAAA,MA6Cd,MAAO,CACNmpB,eA7CqBrX,EAAAA,EAAAA,KAAS,IAAM9a,EAAMyJ,MAAM0oB,gBA8ChDsa,kBA7CwB3xB,EAAAA,EAAAA,KACxB,IAAM3R,EAAMqjC,eAAgB5E,EAAAA,GAAAA,GAAmBz+B,EAAMxH,QAASwH,EAAMpI,WA6CpE2rC,aA1CoB,KACpB,MAAMC,EAAkB,GAClBrqC,EAAO6G,EAAMpI,QAAQuB,KAkB3B,OAhBI6G,EAAMpI,QAAQsxB,OAAS,IACtBlpB,EAAMpI,QAAQsxB,OAAS,EAC1Bsa,EAAMpsC,KAAM,GAAE4I,EAAMpI,QAAQsxB,0BAE5Bsa,EAAMpsC,KAAM,GAAE4I,EAAMpI,QAAQsxB,0BAI1BlpB,EAAMpI,QAAQmE,UAAY,IACzBiE,EAAMpI,QAAQmE,UAAY,EAC7BynC,EAAMpsC,KAAM,GAAE4I,EAAMpI,QAAQmE,sBAE5BynC,EAAMpsC,KAAM,GAAE4I,EAAMpI,QAAQmE,sBAItB,GAAE5C,MAAS6G,EAAMpI,QAAQyB,QAAQmqC,EAAM/rC,OAAU,IAAG+rC,EAAMzqC,KAAK,SAAW,IAAlF,EAuBA0qB,MApBa,KACTzjB,EAAMqjC,cAIVnqC,EAAAA,GAAAA,IAAgB8G,EAAMpI,QAAtB,EAgBAywB,gBAbwBrsB,IACxBwW,EAAAA,EAAAA,KAAc,sBAAuB,CACpCxW,MAAOA,EACPpE,QAASoI,EAAMpI,QACfY,QAASwH,EAAMxH,SAHhB,EAcD,ICtGF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,6BDFnDsF,EAAAA,mBAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IA6BM,O,MA3BLF,IAAI,UACHX,OAAK,8B,OAAwCe,EAAAA,QAAxC,C,iBAAmF,YAAZA,EAAAA,QAAQ3E,MAAmC,IAAb2E,EAAAA,QAAQwC,OAA7G,C,YAA4IxC,EAAAA,QAAQ4d,gBAApJ,C,aAAuL5d,EAAAA,QAAQorB,QAA/L,C,gBAA6NprB,EAAAA,QAAQ/B,WAArO,C,aAAyR,UAAZ+B,EAAAA,QAAQ3E,MAAoB2E,EAAAA,QAAQg7B,OAAO6E,YAAc7/B,EAAAA,QAAQg7B,OAAO8E,QAArV,C,gBAAoY,UAAZ9/B,EAAAA,QAAQ3E,OAAqB2E,EAAAA,QAAQg7B,OAAO6E,WAApa,C,WAAgc7/B,EAAAA,QAAQ41B,SAc7c,aAAY51B,EAAAA,eACZqV,MAAOrV,EAAAA,eACP,YAAWA,EAAAA,QAAQzE,KACnB,YAAWyE,EAAAA,QAAQ3E,KACnB,gBAAa,SAAa2E,EAAAA,QAAQjI,GAClC,gBAAeiI,EAAAA,OACfmD,OAAK,QAAEnD,EAAAA,QAAQ+b,OAAM,CAAA4pB,WAAAA,OAAAC,QAAAA,SAAwC1gB,GAC9DhmB,KAAK,MACJW,QAAK,Y,QAAEG,EAAAA,OAAAA,EAAAA,SAAAA,IACP6lC,cAAW,sB,QAAU7lC,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,eA1BtC,EA4BCD,EAAAA,EAAAA,IAA8EC,EAAAA,OAAA,WAAvEtF,QAASsF,EAAAA,QAAUlG,QAASkG,EAAAA,QAAUkrB,cAAgBlrB,EAAAA,iBA5B9D,uB,KHqDD,IAAeP,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,UACN0E,WAAY,CACX6lC,eAAcA,IAEf5jC,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXi8B,mBAAoBl7B,QACpB6G,OAAQ7G,QACRijC,YAAajjC,SAEdknB,MAAO,CAAC,uBACR9pB,MAAMwC,GACL,MAAMpI,GAAU+Z,EAAAA,EAAAA,KAAS,IACjB3R,EAAMxH,QAAQF,SAAS,KAGzBurC,GAAmBlyB,EAAAA,EAAAA,KAAS,IAC1B3R,EAAMs7B,mBAAqB,SAAW,oBAGxCwI,GAAcnyB,EAAAA,EAAAA,KAAS,IACrBoyB,GAAiBnsC,EAAQsE,MAAMgtB,UAWvC,MAAO,CACNtxB,UACAisC,mBACAC,cACAlqB,gBAZuB,KACvBoqB,GAAgBhkC,EAAMxH,SAAUwH,EAAMxH,QAAQsD,YAA9C,EAYAmoC,eATuBzrC,GAChBA,EAAQsD,YAAc,SAAW,WAUzC,IK3FF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,2ELJ1DyK,EAAAA,EAAAA,IA2CiB29B,GA3CjB,QAAwBpmC,EA2CP,OA3Ca,CAAGlG,QAASkG,EAAAA,UAAO,C,kBAChD,IASS,CARFA,EAAAA,QAAQxF,SAASb,OAAM,eAD9BmG,EAAAA,EAAAA,IASS,U,MAPP,gBAAa,WAAeE,EAAAA,QAAQqE,KACpC,aAAYrE,EAAAA,eAAeA,EAAAA,SAC3B,iBAAgBA,EAAAA,QAAQhC,YACzBiB,MAAM,mBACLY,QAAK,sB,QAAOG,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,YAN7B,qBAUAF,EAAAA,EAAAA,IAAwC,OAAxC,KACAX,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBLA,EAAAA,EAAAA,GAAkE,QAA3DkW,MAAOrV,EAAAA,QAAQzE,KAAM0D,MAAM,SAAlC,QAA4Ce,EAAAA,QAAQzE,MAAI,EAAAgP,GAEjDvK,EAAAA,QAAQg7B,OAAO6E,YAAc7/B,EAAAA,QAAQg7B,OAAO8E,SAAAA,EAAAA,EAAAA,OADnDhgC,EAAAA,EAAAA,IAMO,OANP,EAMOmF,KANP,eAQQjF,EAAAA,QAAQg7B,OAAO6E,WADvB,iBACuBA,EAAAA,EAAAA,OADvB//B,EAAAA,EAAAA,IAMO,OANP,EAMO4K,KACK1K,EAAAA,QAAQorB,SAAAA,EAAAA,EAAAA,OAApBtrB,EAAAA,EAAAA,IAES,Q,MAFoBb,OAAK,UAAAhB,UAAc+B,EAAAA,QAAQ/B,WAAkB,YAA1E,QACC+B,EAAAA,aAAW,KADZ,kBAIDb,EAAAA,EAAAA,GAUO,QATL,aAAYa,EAAAA,iBACbf,MAAM,mEAFP,EAICE,EAAAA,EAAAA,GAKE,UAJAF,OAAK,wBAAA+V,OAA2BhV,EAAAA,sBAChC,gBAAa,gBAAoBA,EAAAA,QAAQjI,GACzC,aAAYiI,EAAAA,iBACZH,QAAK,yBAAOG,EAAAA,MAAK,oCAJnB,aAJD,S,KAhCD,e,eMEOf,MAAM,Q,UAUVA,MAAM,iDACN,aAAW,wB,KAEXE,EAAAA,EAAAA,GAAoC,QAA9BF,MAAM,uBAAqB,U,IAE5BA,MAAM,wCAAwC,aAAW,S,UAKzDA,MAAM,wCAAwC,aAAW,S,eCnBnD,SAASonC,GAAgBvsC,GACvC,MAAO,KACe,UAAjBA,EAAQuB,MAwBZvB,EAAQiiB,QAAS,EAEjBniB,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQyO,OAAOxO,EAAQ/B,IACvBoD,KAAM,YA3BNuZ,EAAAA,EAAAA,KACC,iBACA,CACCW,MAAO,iBACPla,KAAO,4CAA2CrB,EAAQyB,+BAC1D+qC,OAAQ,mBAER1f,IACKA,IAIL9sB,EAAQiiB,QAAS,EACjBniB,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQyO,OAAOxO,EAAQ/B,IACvBoD,KAAM,UAFP,GAYH,CAKD,CDAD,QAAesE,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,UACN0E,WAAY,CACX6lC,eAAcA,IAEf5jC,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXzH,QAAS,CACRuB,KAAM9C,OACNgJ,UAAU,GAEX4H,OAAQ7G,QACRijC,YAAajjC,SAEd5C,MAAMwC,IAIE,CACN8jC,aAJmBnyB,EAAAA,EAAAA,KAAS,IAAMoyB,GAAiB/jC,EAAMpI,QAAQsxB,UAKjEkU,MAJa+G,GAAgBnkC,EAAMpI,aEjDtC,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,2EFH1D2O,EAAAA,EAAAA,IAyBiB29B,GAzBjB,QAyBiB,CAzBDxmC,IAAI,WAAkBI,EAAAA,QAAM,C,kBAC3C,IAA4C,EAA5Cb,EAAAA,EAAAA,GAA4C,OAA5C,IAA4CqF,EAAAA,EAAAA,IAAtBxE,EAAAA,QAAQzE,MAAI,GAE3ByE,EAAAA,QAAQorB,SAAAA,EAAAA,EAAAA,OADftrB,EAAAA,EAAAA,IAKC,Q,MAHCb,OAAK,UAAAhB,UAAc+B,EAAAA,QAAQ/B,YAAc+B,EAAAA,QAAQ41B,OAC5C,YAHP,QAIK51B,EAAAA,aAAW,KAJhB,eAM4B,YAAZA,EAAAA,QAAQ3E,OAAI,WAA5ByE,EAAAA,EAAAA,IAWWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CATU,IAAbwB,EAAAA,QAAQwC,QAAK,WADpB1C,EAAAA,EAAAA,IAMO,OANP,GAMOqB,MANP,gBAOAhC,EAAAA,EAAAA,GAEO,OAFP,GAEO,EADNA,EAAAA,EAAAA,GAA+D,UAAvDF,MAAM,QAAQ,aAAW,QAASY,QAAK,sB,QAAOG,EAAAA,OAAAA,EAAAA,SAAAA,IAAK,gBAT7D,kBAaCF,EAAAA,EAAAA,IAEO,OAFP,GAEO,EADNX,EAAAA,EAAAA,GAA+D,UAAvDF,MAAM,QAAQ,aAAW,QAASY,QAAK,sB,QAAOG,EAAAA,OAAAA,EAAAA,SAAAA,IAAK,mB,KAtB9D,G,yBG+BCb,EAAAA,EAAAA,GAAyD,UAAjD9D,KAAK,SAAS4D,MAAM,iBAAgB,QAAI,GAWlD,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACNgrC,WAAY,CACXvjC,MAAO,CACNi1B,QAAUzd,GAAwBA,EAAGxX,UAGvCd,MAAO,CACNxH,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,GAC7DzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,IAE3DioB,MAAO,CAAC,uBACR9pB,MAAMwC,GAAO,KAACnF,IACb,MAAMhE,GAAQgJ,EAAAA,EAAAA,MACRykC,GAAe5mC,EAAAA,EAAAA,IAAI,IACnB6mC,GAAgB7mC,EAAAA,EAAAA,IAAI,IA0B1B,MAAO,CACN4mC,eACAC,gBACA/lC,SA3BgB,KAChB,MAAMgmC,EAAkB3tC,EAAM6Z,QAAQ6iB,4BAA4B+Q,EAAapoC,OAE/E,GAAIsoC,GACHtrC,EAAAA,GAAAA,IAAgBsrC,OACV,CACN,MAAMjsC,EAAYyH,EAAMxH,QAAQC,cAAcC,UAC9C,IAAId,EAAU0sC,EAAapoC,MAEvB3D,GAAaA,EAAUd,OAAS,IAAMc,EAAUO,SAASlB,EAAQ,MACpEA,EAAUW,EAAU,GAAKX,GAG1BF,GAAAA,EAAAA,KAAY,QAAS,CACpBuB,KAAO,SAAQrB,KAAW2sC,EAAcroC,QACxCvE,OAAQqI,EAAMpI,QAAQ/B,IAExB,CAEAyuC,EAAapoC,MAAQ,GACrBqoC,EAAcroC,MAAQ,GACtBrB,EAAK,sBAAL,EAQD,ICnFF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,kEDJ1D+C,EAAAA,EAAAA,IAiCO,QAhCL/H,GAAE,gBAAoBiI,EAAAA,QAAQjI,GAC/BkH,MAAM,YACN8B,OAAO,OACPC,OAAO,GACPM,aAAa,MACZknB,UAAO,kCAAcxoB,EAAAA,MAAK,+CAC1BU,SAAM,sB,QAAUV,EAAAA,UAAAA,EAAAA,YAAAA,IAAQ,eAP1B,WASCb,EAAAA,EAAAA,GAWE,S,qCAVQa,EAAAA,aAAYuE,GAErBlJ,KAAK,OACL4D,MAAM,QACN1D,KAAK,UACLwJ,YAAY,UACZyB,QAAQ,UACR3B,UAAU,MACVwQ,MAAM,0CACN9T,SAAA,IAVD,iBACUvB,EAAAA,cAAAA,CAAAA,MAAAA,EAAAA,EAAAA,KAWVb,EAAAA,EAAAA,GAUE,S,qCATQa,EAAAA,cAAauE,GACtBlJ,KAAK,WACL4D,MAAM,QACN1D,KAAK,MACLwJ,YAAY,sBACZyB,QAAQ,UACR3B,UAAU,MACVwQ,MAAM,8CACN/T,aAAa,gBATd,iBACUtB,EAAAA,iBAUViB,IAhCD,M,gBZgOD,IAAexB,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN0E,WAAY,CACX0mC,YADW,GAEXC,aAFW,GAGXC,QAHW,GAIXC,UAASA,GAEVpnC,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACRglC,GAAannC,EAAAA,EAAAA,IAAI,IACjBonC,GAAmBpnC,EAAAA,EAAAA,MAInBqnC,GAAYrnC,EAAAA,EAAAA,MACZ4X,GAAc5X,EAAAA,EAAAA,IAA6B,MAC3CsnC,GAActnC,EAAAA,EAAAA,IAA2B,MAEzCunC,GAAmBvnC,EAAAA,EAAAA,KAAI,GAEvBwnC,EAAkB,CAAInlB,EAAY1O,EAAc3K,KACrD,MAAM9L,EAAOmlB,EAAM4D,OAAOtS,EAAM,GAAG,GACnC0O,EAAM4D,OAAOjd,EAAI,EAAG9L,EAApB,EAGKw7B,GAAQzkB,EAAAA,EAAAA,KAAS,KACtB,MAAMwzB,EAAsB,GAE5B,IAAK,MAAM3sC,KAAW3B,EAAMyJ,MAAM2xB,SACjC,IAAK,MAAMr6B,KAAWY,EAAQF,SAE5BzB,EAAMyJ,MAAM0oB,eACZpxB,IAAYf,EAAMyJ,MAAM0oB,cAAcpxB,SAKvCutC,EAAS/tC,KAAK,CAACoB,UAASZ,YAI1B,OAAOutC,CAAP,IAGK1tB,GAAU9F,EAAAA,EAAAA,KAAS,KACL2S,EAAAA,EAAAA,QAAYugB,EAAW3oC,MAAOk6B,EAAMl6B,MAAO,CAC7DqoB,QAAU3pB,GAASA,EAAKhD,QAAQyB,OAC9B3D,KAAKkF,GAASA,EAAK2jB,aAKjBylB,EAAmBhoC,MACpB4iC,EAAAA,EAAAA,GAAiB5iC,KAIjBnF,EAAMyJ,MAAM0oB,eACfoc,GAAsBvuC,EAAMyJ,MAAM0oB,cAAcxwB,SAAS,IAGnD,GAGF6sC,EAAiBrpC,MAClB4iC,EAAAA,EAAAA,GAAiB5iC,KAIjBnF,EAAMyJ,MAAM0oB,eACfoc,GAAsBvuC,EAAMyJ,MAAM0oB,cAAcxwB,SAAS,IAGnD,GA+GF8sC,EAAiB,KAClBhwB,EAAYpZ,QAAU7E,SAASkuC,gBAInCN,EAAiB/oC,OAAQrF,EAAMyJ,MAAM8xB,YACrCv7B,EAAMiJ,OAAO,eAAe,IAEvBe,EAAAA,EAAAA,KAAS,KACbyU,EAAYpZ,OAAO4E,OAAnB,IADD,EAKK0kC,EAAmB,KACxBV,EAAiB5oC,MAAQ,KACzB2oC,EAAW3oC,MAAQ,GACnBoZ,EAAYpZ,OAAO0Z,OAEfqvB,EAAiB/oC,OACpBrF,EAAMiJ,OAAO,eAAe,EAC7B,EAGK6V,EAAgB3Z,MACjB4iC,EAAAA,EAAAA,GAAiB5iC,KAIjBsZ,EAAYpZ,QAAU7E,SAASkuC,eAClCC,KACO,IAGRF,KACO,IAOFG,EAAuB7tC,IACvB6f,EAAQvb,MAAMzE,SAIdG,IACJA,EAAU6f,EAAQvb,MAAM,GAAGtE,SAG5BktC,EAAiB5oC,MAAQtE,EAAzB,EAGK8tC,EAAiB,MAEjB7kC,EAAAA,EAAAA,KAAS,KACb,MAAMyX,EAAK0sB,EAAY9oC,OAAOiU,cAAc,6BAExCmI,GACHA,EAAGuM,eAAe,CAACC,MAAO,UAAWC,OAAQ,WAC9C,GALD,EAqFD,OAnBApkB,EAAAA,EAAAA,IAAMkkC,GAAY,KACjBY,GAAqB,KAGtBnnC,EAAAA,EAAAA,KAAU,KACTmjB,IAAAA,KAAe,kBAAmB4jB,GAClC5jB,IAAAA,KAAe,iBAAkBuiB,GACjCviB,IAAAA,KAAe,QAAS9L,EAAxB,KAGDpX,EAAAA,EAAAA,KAAgB,KACfkjB,IAAAA,OAAiB,mBACjBA,IAAAA,OAAiB,kBACjBA,IAAAA,OAAiB,QAAjB,KAG2B/jB,EAAAA,EAAAA,OACRA,EAAAA,EAAAA,IAAqC,CAAC,GAEnD,CACN7G,QACAmuC,cACA1vB,cACAuvB,aACAptB,UACAqtB,mBACAa,oBA/T2B,IAiU3BL,iBACAE,mBACA7vB,eACAiwB,cAnHsB3vC,IACtB4uC,EAAW3oC,MAASjG,EAAE0B,OAA4BuE,KAAlD,EAmHAupC,sBACAC,iBACAG,aA3FoB,KACfhB,EAAW3oC,OAAUub,EAAQvb,MAAMzE,QAIpCqtC,EAAiB5oC,SACpBhD,EAAAA,GAAAA,IAAgB4rC,EAAiB5oC,OACjCspC,IACAE,IACD,EAmFAI,gBAhFuB,CAAC9pC,EAAciqB,KAMtC,GAHAjqB,EAAMkqB,2BACNlqB,EAAMyC,kBAEDomC,EAAW3oC,MACf,OAGD,MAAM5D,EAAWmf,EAAQvb,MAAMxG,KAAKqwC,GAAMA,EAAEnuC,UAG5C,IAAKU,EAASb,OAEb,YADAqtC,EAAiB5oC,MAAQ,MAI1B,IAAIkqB,EAAe0e,EAAiB5oC,MACjC5D,EAASooB,QAAQokB,EAAiB5oC,QACjC,EAGJ,IAAK4oC,EAAiB5oC,QAA2B,IAAlBkqB,EAG9B,OAFA0e,EAAiB5oC,MAAQ+pB,EAAY3tB,EAAS,GAAKA,EAASA,EAASb,OAAS,QAC9EiuC,IAQD,IAJAtf,GAAgBH,EAITG,EAAe,GACrBA,GAAgB9tB,EAASb,OAG1B,KAAO2uB,EAAe9tB,EAASb,OAAS,GACvC2uB,GAAgB9tB,EAASb,OAG1BqtC,EAAiB5oC,MAAQ5D,EAAS8tB,GAClCsf,GAAgB,EAuChBM,cA1PsB/vC,IACtB,IAAI,SAACgwC,EAAD,SAAWC,GAAYjwC,EAE3B,QAAiB+sB,IAAbijB,QAAuCjjB,IAAbkjB,GAA0BD,IAAaC,EACpE,OAIDD,GAAY,EACZC,GAAY,EAEZ,MAAMC,EAAalwC,EAAE2E,KAAK0lC,aAAa,aAEvC,IAAK6F,EACJ,OAGD,MAAMtwC,EAAK+hB,SAASuuB,GACd3T,EAAU37B,EAAM6Z,QAAQmH,YAAYhiB,GAErC28B,IAIL0S,EAAgB1S,EAAQh6B,QAAQF,SAAU2tC,EAAUC,GAEpDxuC,GAAAA,EAAAA,KAAY,OAAQ,CACnByB,KAAM,WACNxB,OAAQ66B,EAAQh6B,QAAQ2J,KACxB27B,MAAOtL,EAAQh6B,QAAQF,SAAS5C,KAAKmD,GAAMA,EAAEhD,OAH9C,EAiOAuwC,cA1QsBnwC,IACtB,MAAM,SAACgwC,EAAD,SAAWC,GAAYjwC,OAEZ+sB,IAAbijB,QAAuCjjB,IAAbkjB,GAA0BD,IAAaC,IAIrEhB,EAAgBruC,EAAMyJ,MAAM2xB,SAAUgU,EAAUC,GAEhDxuC,GAAAA,EAAAA,KAAY,OAAQ,CACnByB,KAAM,WACN2kC,MAAOjnC,EAAMyJ,MAAM2xB,SAASv8B,KAAKo9B,GAAMA,EAAE3wB,SAF1C,EAkQAkkC,sBA1L8BrqC,IACD,IAAzBA,EAAM8iC,QAAQrnC,QAGjBJ,SAASC,KAAKC,UAAU6Y,IAAI,kBAC7B,EAsLAk2B,qBAnL6BtqC,IAC7B,GAAI+oC,EAAU7oC,OAASF,EAAM8iC,QAAQrnC,OAAS,EAAG,CAChD,MAAM8uC,EAAQvqC,EAAM8iC,QAAQ,GACtB0H,EAAkB,CAACD,EAAM7gB,QAAS6gB,EAAM3gB,UAE1C2Z,EAAAA,GAAAA,GAASwF,EAAU7oC,MAAOsqC,GAAuC,IAGpEh0B,EAAAA,EAAAA,KAAc,qBAEhB,GA0KAi0B,oBAvK4BzqC,IACC,IAAzBA,EAAM8iC,QAAQrnC,QACjBJ,SAASC,KAAKC,UAAUoF,OAAO,kBAChC,EAqKA+pC,kBApN0B1qC,IAC1B,MAAMuiB,EAAWviB,EAAM2qC,cAXF3qC,OAKnBA,EAAM8iC,SAAW9iC,EAAM8iC,QAAQ,IAC/B9iC,EAAM4qC,aAAqC,UAAtB5qC,EAAM4qC,aAOzBC,CAAatoB,KAKhBviB,EAAMpB,KAAKrD,UAAU6Y,IAAI,kCAErBmO,aAAoBuoB,YAAcvoB,EAASugB,QAAQrnC,OAAS,EAC/DstC,EAAU7oC,MAAQ,CAACqiB,EAASugB,QAAQ,GAAGpZ,QAASnH,EAASugB,QAAQ,GAAGlZ,SAC1DrH,aAAoBwoB,eAC9BhC,EAAU7oC,MAAQ,CAACqiB,EAASmH,QAASnH,EAASqH,UAEhD,EAsMAohB,oBAnM4BhrC,IAC5BA,EAAMpB,KAAKrD,UAAUoF,OAAO,kCAC5BooC,EAAU7oC,MAAQ,IAAlB,EAmMD,IctjBF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,sIdLxB,IAA3B4B,EAAAA,MAAMwC,MAAM2xB,SAASx6B,SAAM,WADlCmG,EAAAA,EAAAA,IAOM,MAPN,EAKC,mDALD,WAQAA,EAAAA,EAAAA,IAoIM,MApIN,EAoIM,EAnILX,EAAAA,EAAAA,GAkBM,MAlBN,EAkBM,EAjBLA,EAAAA,EAAAA,GAgBE,SAfDS,IAAI,cACHxB,MAAO4B,EAAAA,WACR+E,YAAY,aACZ1J,KAAK,SACL4D,MAAM,yBACN,aAAW,gCACX6T,SAAS,KACRrM,QAAK,Y,QAAEzG,EAAAA,eAAAA,EAAAA,iBAAAA,IACPwoB,UAAO,0BAAKxoB,EAAAA,gBAAgBuE,GAAM,aAA3B,yBACOvE,EAAAA,gBAAgBuE,EAAM,eAD7B,yBAEUvE,EAAAA,gBAAgBuE,GAAM,mBAFhC,yBAGYvE,EAAAA,gBAAgBuE,EAAM,qBAHlC,sB,QAIQvE,EAAAA,cAAAA,EAAAA,gBAAAA,IAAY,YAJpB,sB,QAKSA,EAAAA,kBAAAA,EAAAA,oBAAAA,IAAgB,cAChCmpC,QAAK,Y,QAAEnpC,EAAAA,gBAAAA,EAAAA,kBAAAA,KAfT,aAkBUA,EAAAA,aAAAA,EAAAA,EAAAA,OAAXF,EAAAA,EAAAA,IAyBM,MAzBN,EAyBM,CAxBME,EAAAA,QAAQrG,SAAAA,EAAAA,EAAAA,OAAnBmG,EAAAA,EAAAA,IAsBM,MAAAyK,EAAA,gBArBLzK,EAAAA,EAAAA,IAoBMwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAnBU/W,EAAAA,SAARlD,K,WADRgD,EAAAA,EAAAA,IAoBM,OAlBJtB,IAAK1B,EAAKhD,QAAQ/B,GAClBqxC,aAAU,GAAEppC,EAAAA,oBAAoBlD,EAAKhD,SACrC+F,QAAK,sB,QAAUG,EAAAA,cAAAA,EAAAA,gBAAAA,IAAY,eAJ7B,CAOyB,UAAjBlD,EAAKhD,QAAQuB,OAAI,WADxBoN,EAAAA,EAAAA,IAME4gC,EAAA,C,MAJAvvC,QAASgD,EAAKhD,QACdY,QAASoC,EAAKpC,QACdyO,OAAQrM,EAAKhD,UAAYkG,EAAAA,iBACzB,gBAAc,GALhB,qDAOAyI,EAAAA,EAAAA,IAME6gC,EAAA,C,MAJAxvC,QAASgD,EAAKhD,QACdY,QAASoC,EAAKpC,QACdyO,OAAQrM,EAAKhD,UAAYkG,EAAAA,iBACzB,gBAAc,GALhB,yCAbD,oBADD,WAuBAF,EAAAA,EAAAA,IAAsD,MAAtD,EAA+B,2BAxBhC,WA0BA2I,EAAAA,EAAAA,IAqFY8gC,EAAA,C,MAnFV1E,KAAM7kC,EAAAA,MAAMwC,MAAM2xB,SAClBiQ,MAAOpkC,EAAAA,oBACP,uBAAqB,EACrB,wBAAuB,GACxBukC,OAAO,wCACPC,UAAU,WACV,cAAY,oBACZ,aAAW,uBACXG,MAAM,WACN1lC,MAAM,WACN,WAAS,OACRqI,SAAQtH,EAAAA,cACRklC,SAAQllC,EAAAA,kBACRmlC,WAAUnlC,EAAAA,qBAfZ,CAiBkBlD,MAAI,SACpB,EAiEMk2B,QAlE0Bt4B,KAAO,cACvCoF,EAAAA,EAAAA,IAiEM,OAhEJ/H,GAAE,WAAe2C,EAAQ2J,KACzB7F,IAAK9D,EAAQ2J,KACbpF,OAAK,U,UAAqBvE,EAAQsD,Y,iBAAqCtD,EAAQsgC,OAAO6E,U,cAAgCnlC,EAAQsgC,OAAO8E,QAKhI,YACN5gC,KAAK,SACL,YAAU,SACTsqC,aAAU,Y,QAAExpC,EAAAA,uBAAAA,EAAAA,yBAAAA,IACZypC,YAAS,c,QAAEzpC,EAAAA,sBAAAA,EAAAA,wBAAAA,IACX0pC,WAAQ,c,QAAE1pC,EAAAA,qBAAAA,EAAAA,uBAAAA,IACV2pC,cAAW,c,QAAE3pC,EAAAA,qBAAAA,EAAAA,uBAAAA,KAdf,EAgBC0B,EAAAA,EAAAA,IAUE4nC,EAAA,CATA5uC,QAASA,EACT,wBAAuBA,EAAQ8iC,mBAC/Br0B,OAAgBnJ,EAAAA,MAAMwC,MAAM0oB,eAAwBxwB,EAAQF,SAAQ,KAAQwF,EAAAA,MAAMwC,MAAM0oB,cAAcpxB,QAItG8vC,oBAAmB,GAAUlvC,EAAQ8iC,oBAAsB9iC,EAAQ8iC,oBAPrE,2EAYO9iC,EAAQ8iC,qBAAAA,EAAAA,EAAAA,OADf/0B,EAAAA,EAAAA,IAOEohC,EAAA,C,MALAnvC,QAASA,EACTZ,QAASY,EAAQF,SAAQ,GACzBovC,oBAAmB,GAAUlvC,EAAQ8iC,oBAAsB9iC,EAAQ8iC,oBAJrE,sEASA97B,EAAAA,EAAAA,IA4BY6nC,EAAA,CA3BX/E,UAAU,qBACV,cAAY,oBACZ,aAAW,uBACVG,MAAOjqC,EAAQ2J,KACfwgC,KAAMnqC,EAAQF,SACd4pC,MAAOpkC,EAAAA,oBACP,uBAAqB,EACrB,wBAAuB,GACxBf,MAAM,WACN,WAAS,OACRqI,SAAQtH,EAAAA,cACRklC,SAAQllC,EAAAA,kBACRmlC,WAAUnlC,EAAAA,qBAbZ,CAekBlD,MAAI,SACpB,EAUEk2B,QAX8Bl5B,EAAS4mB,WAAK,CAEvCA,EAAQ,IAAH,WADZjY,EAAAA,EAAAA,IAUE4gC,EAAA,CARA7qC,IAAK1E,EAAQ/B,GACb,YAAW+B,EAAQ/B,GACnB+B,QAASA,EACTY,QAASA,EACTyO,OAAkBnJ,EAAAA,MAAMwC,MAAM0oB,eAA0BpxB,IAAYkG,EAAAA,MAAMwC,MAAM0oB,cAAcpxB,SANhG,uE,KAhBF,mEApCD,U,KAlBF,yDA9CD,K,KDwFD,IAAe2F,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,UACN0E,WAAY,CACX6pC,YAAWA,IAEZ5nC,MAAO,CACNg1B,QAAS,CAAC77B,KAAM9C,OAAwCgJ,UAAU,IAEnE7B,MAAMwC,GACL,MAEMnJ,GAAQgJ,EAAAA,EAAAA,MACR8G,GAAQC,EAAAA,EAAAA,MAERihC,GAAgBnqC,EAAAA,EAAAA,MAChBoqC,GAAcpqC,EAAAA,EAAAA,MACdqqC,GAAiBrqC,EAAAA,EAAAA,IAAY,GAC7BsqC,GAAYtqC,EAAAA,EAAAA,IAAY,GACxBuqC,GAAevqC,EAAAA,EAAAA,KAAa,GAC5BwqC,GAAiBxqC,EAAAA,EAAAA,KAAa,GAE9ByqC,GAAUzqC,EAAAA,EAAAA,IAAwB,MAElCs5B,EAAU12B,IACfzJ,EAAMiJ,OAAO,cAAeQ,EAA5B,EAGK8nC,EAAenyC,IACpB,MAAMswC,EAASuB,EAAY5rC,MAAQjG,EAAE6oC,QAAQlkC,KAAK,GAElD,KACE2rC,GACAsB,EAAc3rC,OACd2rC,EAAc3rC,MAAM+iC,SACpB4I,EAAc3rC,MAAMgjC,SAErB,OAGD,IAAImJ,EAAQ9B,EAAMtH,QAAU4I,EAAc3rC,MAAM+iC,QAChD,MAAMqJ,EAAQ/B,EAAMrH,QAAU2I,EAAc3rC,MAAMgjC,QAElD,IAAK+I,EAAa/rC,MAAO,CAIxB,GAAId,KAAKokC,IAAI8I,EAAQD,IAAU,EAG9B,YADAE,IAID,MAAMC,EAAmBjsC,OAAOisC,kBAAoB,EAEhDptC,KAAKokC,IAAI6I,GAASG,IACrB3xC,EAAMiJ,OAAO,mBAAmB,GAChCmoC,EAAa/rC,OAAQ,EAEvB,CAGKgsC,EAAehsC,QAIhBrF,EAAMyJ,MAAM8xB,cACfiW,GAASL,EAAU9rC,OAGhBmsC,EAAQL,EAAU9rC,MACrBmsC,EAAQL,EAAU9rC,MACRmsC,EAAQ,IAClBA,EAAQ,GAGLF,EAAQjsC,QACXisC,EAAQjsC,MAAM+E,MAAMwnC,UAAY,eAAiBJ,EAAM7xB,WAAa,aAGjExW,EAAMg1B,UACTh1B,EAAMg1B,QAAQ/zB,MAAMyiC,QAAW,GAAE2E,EAAQL,EAAU9rC,OACpD,EAGKqsC,EAAa,KAClB,IAAKV,EAAc3rC,OAAO+iC,UAAY6I,EAAY5rC,OAAO+iC,QACxD,OAGD,MAAMyJ,EAAOZ,EAAY5rC,MAAM+iC,QAAU4I,EAAc3rC,MAAM+iC,QACvD0J,EAAUvtC,KAAKokC,IAAIkJ,IAGxBC,EAAUX,EAAU9rC,MAAQ,GAC3Bma,KAAKC,MAAQyxB,EAAe7rC,MAAQ,KAAOysC,EAAU,KAEtD3R,EAAO0R,EAAO,GAGfrxC,SAASC,KAAKskB,oBAAoB,YAAawsB,GAC/C/wC,SAASC,KAAKskB,oBAAoB,WAAY2sB,GAE9C1xC,EAAMiJ,OAAO,mBAAmB,GAEhC+nC,EAAc3rC,MAAQ,KACtB4rC,EAAY5rC,MAAQ,KACpB6rC,EAAe7rC,MAAQ,EACvB+rC,EAAa/rC,OAAQ,GAEhB2E,EAAAA,EAAAA,KAAS,KACTsnC,EAAQjsC,QACXisC,EAAQjsC,MAAM+E,MAAMwnC,UAAY,IAG7BzoC,EAAMg1B,UACTh1B,EAAMg1B,QAAQ/zB,MAAMyiC,QAAU,GAC/B,GAPD,EAWKkF,EAAgB3yC,IACrB,IAAKkyC,EAAQjsC,MACZ,OAKD,GAFA2rC,EAAc3rC,MAAQ4rC,EAAY5rC,MAAQjG,EAAE6oC,QAAQlkC,KAAK,GAEhC,IAArB3E,EAAE6oC,QAAQrnC,OAEb,YADA8wC,IAID,MAAMM,EAAStsC,OAAO0kB,iBAAiBknB,EAAQjsC,OAE/C8rC,EAAU9rC,MAAQP,WAAWktC,EAAOzrC,OACpC8qC,EAAehsC,MAA4B,aAApB2sC,EAAOhpB,WAG5BhpB,EAAMyJ,MAAM8xB,aACZyV,EAAc3rC,OAAO+iC,SAAW4I,EAAc3rC,MAAM+iC,QAAU+I,EAAU9rC,SAEzE6rC,EAAe7rC,MAAQma,KAAKC,MAE5Bjf,SAASC,KAAK+jB,iBAAiB,YAAa+sB,EAAa,CAAC9sB,SAAS,IACnEjkB,SAASC,KAAK+jB,iBAAiB,WAAYktB,EAAY,CAACjtB,SAAS,IAClE,EAaD,OAVAhd,EAAAA,EAAAA,KAAU,KACTjH,SAASC,KAAK+jB,iBAAiB,aAAcutB,EAAc,CAACttB,SAAS,GAArE,KAGD7I,EAAAA,EAAAA,KAAY,KACXpb,SAASC,KAAKskB,oBAAoB,aAAcgtB,EAAhD,IAKM,CACNE,eAtJqBC,EAuJrBlyC,QACA8P,QACAwhC,UACAnR,SACA4R,eACAR,cACAG,aACAS,SAXgB,IAAM3xC,SAASC,KAAKC,UAAUC,SAAS,UAaxD,IgBnQF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,kGhBJ1DoG,EAAAA,EAAAA,IAuFQ,QAvFR,EAuFQ,EAtFPX,EAAAA,EAAAA,GA4BM,MA5BN,EA4BM,EA3BLA,EAAAA,EAAAA,GAyBM,MAzBN,EAyBM,EAxBLA,EAAAA,EAAAA,GAKE,OAJAC,IAAG,YAAcY,EAAAA,WAAQ,qCAC1Bf,MAAM,OACNI,IAAI,aACJH,KAAK,gBAJN,WAMAC,EAAAA,EAAAA,GAKE,OAJAC,IAAG,YAAcY,EAAAA,WAAQ,8CAC1Bf,MAAM,gBACNI,IAAI,aACJH,KAAK,gBAJN,UAOOc,EAAAA,gBAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAWC,OAXD,EAUE,eAVF,kBAaD4B,EAAAA,EAAAA,IAAeypC,MAEhBhsC,EAAAA,EAAAA,GAwDS,SAxDT,EAwDS,EAvDRA,EAAAA,EAAAA,GAeQ,OAfR,EAeQ,EAZNuC,EAAAA,EAAAA,IAYDqH,EAAA,CAVCH,GAAG,WACH1J,KAAK,MACL,gBAAc,WAJd,CACO5E,SAAO,SAKd,EALiB2O,WAAUmiC,cAAQ,EAKnCjsC,EAAAA,EAAAA,GAKE,UAJAF,OAAK,2BAAAkK,OAA+BiiC,KACpC,gBAAeA,EACfvrC,QAAOoJ,EACPG,YAAQ,QAAQH,EAAQ,YAJ1B,c,SAOF9J,EAAAA,EAAAA,GAaQ,OAbR,EAaQ,EAZNuC,EAAAA,EAAAA,IAYDqH,EAAA,CAVCH,GAAG,YACH1J,KAAK,MACL,gBAAc,YAJd,CACO5E,SAAO,SAKd,EALiB2O,WAAUmiC,cAAQ,EAKnCjsC,EAAAA,EAAAA,GAKU,UAJRF,OAAK,4BAAAkK,OAAgCiiC,KACrC,gBAAeA,EACfvrC,QAAOoJ,EACPG,YAAQ,QAAQH,EAAQ,YAJ1B,c,SAOF9J,EAAAA,EAAAA,GAwBQ,QAvBPF,MAAM,8CACL,aAAkBe,EAAAA,MAAMwC,MAAMC,qBAAqB4oC,kBAAjC,mCAFpB,EAOE3pC,EAAAA,EAAAA,IAiBDqH,EAAA,CAfCH,GAAG,QACH1J,KAAK,MACL,gBAAc,QAJd,CACO5E,SAAO,SAKd,EALiB2O,WAAUmiC,cAAQ,EAKnCjsC,EAAAA,EAAAA,GAUU,UATR,gBAAyB,SAAVa,EAAAA,MAAMzE,KACrB0D,OAAK,wB,SAAoDe,EAAAA,MAAMwC,MAAMC,qBAAqB4oC,mBAArF,C,OAAyHD,KAM9HvrC,QAAOoJ,EACPG,YAAQ,QAAQH,EAAQ,YAT1B,c,OAbF,QA7DF,I,eiBSE9J,EAAAA,EAAAA,GAAsD,UAA9CF,MAAM,YAAY,aAAW,SAArC,S,uBAqCH,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACNmE,QACC,MAAM4rC,GAAS1rC,EAAAA,EAAAA,MACT2rC,GAAQ3rC,EAAAA,EAAAA,MAERuS,GAAOvS,EAAAA,EAAAA,IAA8B,MACrC4rC,GAAgB5rC,EAAAA,EAAAA,MAChB6rC,GAAY7rC,EAAAA,EAAAA,MACZ9F,GAAU8F,EAAAA,EAAAA,MAEVmiB,GAAWniB,EAAAA,EAAAA,IAGd,CACF8rC,EAAG,EACHC,EAAG,IAGEhB,GAAY/qC,EAAAA,EAAAA,IAIf,CACFgsC,MAAO,EACPF,EAAG,EACHC,EAAG,IAGEE,GAAqBh4B,EAAAA,EAAAA,KAAS,KAGnC,MAAMi4B,EAAaxuC,KAAKK,MAAMgtC,EAAUvsC,MAAMstC,GACxCK,EAAazuC,KAAKK,MAAMgtC,EAAUvsC,MAAMutC,GAE9C,MAAO,CACN9jB,KAAO,GAAE9F,EAAS3jB,MAAMstC,MACxB3jB,IAAM,GAAEhG,EAAS3jB,MAAMutC,MACvBhB,UAAY,eAAcmB,QAAiBC,mBAA4BpB,EAAUvsC,MAAMwtC,UAAUjB,EAAUvsC,MAAMwtC,YAHlH,IAOKn4B,EAAc,KACA,OAAftB,EAAK/T,QAITtE,EAAQsE,MAAQ,KAChBotC,EAAcptC,MAAQ,KACtBqtC,EAAUrtC,MAAQ,KAClB+T,EAAK/T,MAAQ,KAAb,EAmBKojC,EAAW,KACZgK,EAAcptC,QACjB+T,EAAK/T,MAAQotC,EAAcptC,MAC5B,EAGKoV,EAAO,KACRi4B,EAAUrtC,QACb+T,EAAK/T,MAAQqtC,EAAUrtC,MACxB,EA0BK4tC,EAAqB,CAACC,EAAkBP,EAAWC,EAAWO,KACnE,IAAKX,EAAMntC,QAAUktC,EAAOltC,MAC3B,OAGD,MAAM+tC,EAAaZ,EAAMntC,MAAMkB,MACzB8sC,EAAUd,EAAOltC,MAAM8V,YAAc,EACrCm4B,EAAUf,EAAOltC,MAAMkf,aAAe,EAE5C,MAAO,CACNouB,EACCU,GACEA,GAAWT,EAAKQ,EAAaT,EAAK,IAAMA,EAAKO,EAC9CE,EAAaF,EAAY,EAC3BN,EACCU,GACEA,GAAWH,EAAYC,EAAaT,EAAK,IAAMA,EAAKO,EACrDE,EAAaF,EAAY,EAR5B,EAYKK,EAAkB,KACvB,MAAMC,EAAUhB,EAAMntC,MAChBouC,EAAWlB,EAAOltC,MAExB,IAAKmuC,IAAYC,EAChB,OAGD,MAAMC,EAAcF,EAAQjtC,MAAQqrC,EAAUvsC,MAAMwtC,MAC9Cc,EAAeH,EAAQhtC,OAASorC,EAAUvsC,MAAMwtC,MAChDe,EAAiBH,EAASt4B,YAC1B04B,EAAkBJ,EAASlvB,aAE7BmvB,EAAcE,EACjBhC,EAAUvsC,MAAMstC,EAAIiB,EAAiB,EAC3BhC,EAAUvsC,MAAMstC,EAAIe,EAAc,EAAI,EAChD9B,EAAUvsC,MAAMstC,EAAIe,EAAc,EACxB9B,EAAUvsC,MAAMstC,EAAIe,EAAc,EAAIE,IAChDhC,EAAUvsC,MAAMstC,EAAIiB,EAAiBF,EAAc,GAGhDC,EAAeE,EAClBjC,EAAUvsC,MAAMutC,EAAIiB,EAAkB,EAC5BjC,EAAUvsC,MAAMutC,EAAIe,EAAe,EAAI,EACjD/B,EAAUvsC,MAAMutC,EAAIe,EAAe,EACzB/B,EAAUvsC,MAAMutC,EAAIe,EAAe,EAAIE,IACjDjC,EAAUvsC,MAAMutC,EAAIiB,EAAkBF,EAAe,EACtD,EAIKG,EAAiB7L,IACtB,IAAI8L,EAAS,EACTC,EAAS,EACTC,EAAa,EAEjB,IAAK,IAAItvC,EAAI,EAAGA,EAAIsjC,EAAQrnC,OAAQ+D,IAAK,CACxC,MAAMguC,EAAI1K,EAAQtjC,GAAGkqB,QACf+jB,EAAI3K,EAAQtjC,GAAGoqB,QAErBglB,GAAUpB,EACVqB,GAAUpB,EAEV,IAAK,IAAIsB,EAAK,EAAGA,EAAKjM,EAAQrnC,OAAQszC,IACrC,GAAIvvC,IAAMuvC,EAAI,CACb,MAAM7vC,EAAK4jC,EAAQiM,GAAIrlB,QACjBvqB,EAAK2jC,EAAQiM,GAAInlB,QACvBklB,GAAc1vC,KAAK4vC,MAAMxB,EAAItuC,IAAOsuC,EAAItuC,IAAOuuC,EAAItuC,IAAOsuC,EAAItuC,GAC/D,CAEF,CAMA,OAJmB,IAAf2vC,IACHA,EAAa,GAGP,CACNtB,EAAGoB,EAAS9L,EAAQrnC,OACpBgyC,EAAGoB,EAAS/L,EAAQrnC,OACpBiyC,MAAOoB,EAAahM,EAAQrnC,OAH7B,EAoOD,OApBAkJ,EAAAA,EAAAA,IAAMsP,GAAM,CAACg7B,EAASC,KAErB,GAAgB,OAAZD,EAKH,OAJAz4B,EAAAA,EAAAA,IAAa,YAAajB,GAC1BiB,EAAAA,EAAAA,IAAa,SAAU43B,GACvB3oB,IAAAA,OAAiB,aACjBA,IAAAA,OAAiB,SAtVO,MACzB,IAAK7pB,EAAQsE,QAAU+T,EAAK/T,MAC3B,OAAO,KAGR,MAAMqW,EAAQ3a,EAAQsE,MAAMsb,SAC1B9hB,KAAK49B,GAAQA,EAAIp8B,WACjBi0C,OACAxwC,QAAQ1D,GAAYA,EAAQ2b,QAExBwT,EAAe7T,EAAMmO,QAAQzQ,EAAK/T,OAExCotC,EAAcptC,MAAQqW,EAAM6T,EAAe,IAAM,KACjDmjB,EAAUrtC,MAAQqW,EAAM6T,EAAe,IAAM,IAA7C,EA6UAglB,GAEKF,IACJ14B,EAAAA,EAAAA,GAAY,YAAajB,GACzBiB,EAAAA,EAAAA,GAAY,SAAU43B,GACtB3oB,IAAAA,KAAe,OAAQ6d,GACvB7d,IAAAA,KAAe,QAASnQ,GACzB,IAGM,CACNrB,OACArY,UACAyxC,QACAZ,YACAl3B,cACAD,OACAguB,WACA+L,YA7TmB,KAnBC,MACpB,MAAMf,EAAWlB,EAAOltC,MAClBmuC,EAAUhB,EAAMntC,MAEtB,IAAKouC,IAAaD,EACjB,OAGD,MAAMjtC,EAAQktC,EAASt4B,YACjB3U,EAASitC,EAASlvB,aAClBsuB,EAAQtuC,KAAK8H,IAAI,EAAG9F,EAAQitC,EAAQjtC,MAAOC,EAASgtC,EAAQhtC,QAElEwiB,EAAS3jB,MAAMstC,EAAIpuC,KAAKK,OAAO4tC,EAAMntC,MAAOovC,aAAe,GAC3DzrB,EAAS3jB,MAAMutC,EAAIruC,KAAKK,OAAO4tC,EAAMntC,MAAOqvC,cAAgB,GAC5D9C,EAAUvsC,MAAMwtC,MAAQtuC,KAAK+H,IAAIumC,EAAO,IACxCjB,EAAUvsC,MAAMstC,EAAIpsC,EAAQ,EAC5BqrC,EAAUvsC,MAAMutC,EAAIpsC,EAAS,CAA7B,EAIAmuC,EAAc,EA6TdC,iBA1IyBx1C,IAKzB,GAAgB,IAAZA,EAAEgqC,MACL,OAGDhqC,EAAEy1C,kBACFz1C,EAAEwI,iBAEF,MAAM6rC,EAAWlB,EAAOltC,MAClBmuC,EAAUhB,EAAMntC,MAEtB,IAAKouC,IAAaD,EACjB,OAGD,MAAMsB,EAAS11C,EAAEyvB,QACXkmB,EAAS31C,EAAE2vB,QACXimB,EAAkBpD,EAAUvsC,MAAMstC,EAClCsC,EAAkBrD,EAAUvsC,MAAMutC,EAClCc,EAAcF,EAAQjtC,MAAQqrC,EAAUvsC,MAAMwtC,MAC9Cc,EAAeH,EAAQhtC,OAASorC,EAAUvsC,MAAMwtC,MAChDe,EAAiBH,EAASt4B,YAC1B04B,EAAkBJ,EAASlvB,aAC3B8uB,EAAUzB,EAAUvsC,MAAMstC,EAAIe,EAAc,EAC5CJ,EAAU1B,EAAUvsC,MAAMutC,EAAIe,EAAe,EACnD,IAAIuB,EAAgB,EAEpB,MAAMC,EAAaC,IAClBA,EAAUP,kBACVO,EAAUxtC,iBAEV,MAAMytC,EAAOD,EAAUvmB,QAAUimB,EAC3BQ,EAAOF,EAAUrmB,QAAUgmB,EAEjCG,EAAgB3wC,KAAK+H,IAAI4oC,EAAe3wC,KAAKokC,IAAI0M,GAAO9wC,KAAKokC,IAAI2M,KAE7DjC,EAAU,GAAKK,EAAcL,EAAUO,KAC1ChC,EAAUvsC,MAAMstC,EAAIqC,EAAkBK,IAGnC/B,EAAU,GAAKK,EAAeL,EAAUO,KAC3CjC,EAAUvsC,MAAMutC,EAAIqC,EAAkBK,GAGvC/B,GAAiB,EAGZgC,EAAWC,IAChBjC,IAEI2B,EAAgB,GAAwB,IAAnBM,EAAQjI,QAChC7yB,IAGD83B,EAAMntC,OAAO0f,oBAAoB,YAAaowB,GAC9C3C,EAAMntC,OAAO0f,oBAAoB,UAAWwwB,EAA5C,EAGD/C,EAAMntC,OAAOmf,iBAAiB,YAAa2wB,GAC3C3C,EAAMntC,OAAOmf,iBAAiB,UAAW+wB,EAAzC,EA4EAE,aAxEqBr2C,IAGrB,GAAmB,OAAfga,EAAK/T,MAAT,CAMA,GAFAjG,EAAEwI,iBAEExI,EAAEiqC,QACLuI,EAAUvsC,MAAMutC,GAAKxzC,EAAEs2C,WACjB,CACN,MAAMC,EAAQv2C,EAAEs2C,OAAS,EAAI,IAAO,GAC9BxC,EAAW3uC,KAAK8H,IAAI,EAAG9H,KAAK+H,IAAI,GAAKslC,EAAUvsC,MAAMwtC,MAAQ8C,IAC7DC,EAAgB3C,EACrBC,EACAtB,EAAUvsC,MAAMwtC,MAChBjB,EAAUvsC,MAAMstC,EAChBf,EAAUvsC,MAAMutC,GAGjB,IAAKgD,EACJ,OAGDhE,EAAUvsC,MAAMwtC,MAAQK,EACxBtB,EAAUvsC,MAAMstC,EAAIiD,EAAcjD,EAClCf,EAAUvsC,MAAMutC,EAAIgD,EAAchD,CACnC,CAEAW,GAzBA,CAyBiB,EA2CjBzsC,QAxCgB1H,IAEZA,EAAE0B,SAAW0xC,EAAMntC,OAIvBqV,GAAa,EAmCbq3B,aAzOqB3yC,IAErBA,EAAEiwB,0BAAF,EAwOAojB,gBACAC,YACAmD,kBApO0Bz2C,IAC1B,MAAM0hC,EAAM0R,EAAMntC,MAClB,IAAIqqC,EAAQoE,EAAc10C,EAAE6oC,SACxB6N,EAAiB12C,EAAE6oC,QACnB8N,EAAkB,EAEtB,MAAMC,EAAmB,CACxBrD,EAAGjD,EAAMiD,EACTC,EAAGlD,EAAMkD,EACTC,MAAOnD,EAAMmD,OAGRoD,EAAiB,CACtBtD,EAAGf,EAAUvsC,MAAMstC,EACnBC,EAAGhB,EAAUvsC,MAAMutC,EACnBC,MAAOjB,EAAUvsC,MAAMwtC,OAGlBqD,EAAad,IAClB1F,EAAQoE,EAAcsB,EAAUnN,SAE5B6N,EAAel1C,SAAWw0C,EAAUnN,QAAQrnC,SAC/Co1C,EAAiBrD,EAAIjD,EAAMiD,EAC3BqD,EAAiBpD,EAAIlD,EAAMkD,EAC3BoD,EAAiBnD,MAAQnD,EAAMmD,MAC/BoD,EAAetD,EAAIf,EAAUvsC,MAAMstC,EACnCsD,EAAerD,EAAIhB,EAAUvsC,MAAMutC,EACnCqD,EAAepD,MAAQjB,EAAUvsC,MAAMwtC,OAGxC,MAAMsD,EAASzG,EAAMiD,EAAIqD,EAAiBrD,EACpC+C,EAAShG,EAAMkD,EAAIoD,EAAiBpD,EACpCwD,EAAa1G,EAAMmD,MAAQmD,EAAiBnD,MAClDiD,EAAiBV,EAAUnN,QAC3B8N,EAAkB,EAElB,MAAM7C,EAAW3uC,KAAK8H,IAAI,EAAG9H,KAAK+H,IAAI,GAAK2pC,EAAepD,MAAQuD,IAE5DR,EAAgB3C,EACrBC,EACA+C,EAAepD,MACfoD,EAAetD,EACfsD,EAAerD,GAGXgD,IAILhE,EAAUvsC,MAAMstC,EAAIiD,EAAcjD,EAAIwD,EACtCvE,EAAUvsC,MAAMutC,EAAIgD,EAAchD,EAAI8C,EACtC9D,EAAUvsC,MAAMwtC,MAAQK,EACxBK,IAAiB,EAGZ8C,EAAYC,IACjB,MAAMC,EAAiBD,EAASC,eAAe31C,OAE3Ck1C,EAAel1C,OAAS21C,EAAiBR,EAC5CA,GAAmBQ,GAYpBhD,IAEAzS,GAAK/b,oBAAoB,YAAamxB,GACtCpV,GAAK/b,oBAAoB,WAAYsxB,GAArC,EAGDvV,GAAKtc,iBAAiB,YAAa0xB,EAAW,CAACzxB,SAAS,IACxDqc,GAAKtc,iBAAiB,WAAY6xB,EAAU,CAAC5xB,SAAS,GAAtD,EAuJAquB,qBACAP,SAED,ICpdF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDJ1DxrC,EAAAA,EAAAA,IAoCM,OAnCL/H,GAAG,eACH6H,IAAI,SACHX,OAAK,SAAA+V,OAAe,OAAJhV,EAAAA,OAChBuvC,QAAK,Y,QAAEvvC,EAAAA,cAAAA,EAAAA,gBAAAA,I,wCACaA,EAAAA,cAAAA,EAAAA,gBAAAA,IACpBH,QAAK,Y,QAAEG,EAAAA,SAAAA,EAAAA,WAAAA,KANT,CAQqB,OAAJA,EAAAA,OAAI,WAApBF,EAAAA,EAAAA,IA2BWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CA1BV2L,GAGOnK,EAAAA,gBAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAKU,U,MAHTb,MAAM,qBACN,aAAW,iBACVY,QAAK,sB,QAAOG,EAAAA,UAAAA,EAAAA,YAAAA,IAAQ,eAJtB,eAOOA,EAAAA,YAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAKU,U,MAHTb,MAAM,iBACN,aAAW,aACVY,QAAK,sB,QAAOG,EAAAA,MAAAA,EAAAA,QAAAA,IAAI,eAJlB,gBAOAb,EAAAA,EAAAA,GAAyE,KAAtEF,MAAM,WAAY2K,KAAM5J,EAAAA,KAAKmS,KAAMtY,OAAO,SAASgQ,IAAI,YAA1D,YAEA1K,EAAAA,EAAAA,GAQE,OAPDS,IAAI,QACHR,IAAKY,EAAAA,KAAK8U,MACXzV,IAAI,GACH8D,OAAK,QAAEnD,EAAAA,oBACPoV,OAAI,Y,QAAEpV,EAAAA,aAAAA,EAAAA,eAAAA,IACNmY,YAAS,Y,QAAEnY,EAAAA,kBAAAA,EAAAA,oBAAAA,I,wCACSA,EAAAA,mBAAAA,EAAAA,qBAAAA,KAPtB,aAlBD,sBARD,G,yCE6BM,SAASwvC,GACf11C,EACAY,GAEA,MAAM+0C,EAAepJ,GAAgBvsC,GAgBrC,IAAIw+B,EAA2B,CAC9B,CACCoX,MAAO51C,EAAQyB,KACfF,KAAM,OACN4D,MAlBc,CACf0wC,MAAO,UACP71C,QAAS,OACT2B,MAAO,QACPmuB,QAAS,QAcO9vB,EAAQuB,MACvB8W,KAAO,SAAQrY,EAAQ/B,MAExB,CACCsD,KAAM,YAKa,UAAjBvB,EAAQuB,OACXi9B,EAAQ,IACJA,EACH,CACCoX,MAAO,qBACPr0C,KAAM,OACN4D,MAAO,OACPkT,KAAO,iBAAgBzX,EAAQ2J,QAEhC,CACCqrC,MAAO,kBACPr0C,KAAM,OACN4D,MAAO,OACP+B,OAAQ,IAAOtG,EAAQ8iC,oBAAqB,GAE7C,CACCkS,MAAO,oBACPr0C,KAAM,OACN4D,MAAO,OACP+B,OAAQ,IACPpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,WAGT,CACCu0C,MAAO,qBACPr0C,KAAM,OACN4D,MAAO,OACP+B,OAAQ,IACPpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,iBAGTT,EAAQsgC,OAAO6E,UACZ,CACA6P,MAAO,aACPr0C,KAAM,OACN4D,MAAO,aACP+B,OAAQ,IACPpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,iBAGR,CACAu0C,MAAO,UACPr0C,KAAM,OACN4D,MAAO,UACP+B,OAAQ,IACPpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,gBAOQ,YAAjBrB,EAAQuB,OACXi9B,EAAMh/B,KAAK,CACVo2C,MAAO,aACPr0C,KAAM,OACN4D,MAAO,OACP+B,SACClH,EAAQqwB,WAAY,GACpB/uB,EAAAA,GAAAA,IAAgBtB,EAChB,IAEFw+B,EAAMh/B,KAAK,CACVo2C,MAAO,oBACPr0C,KAAM,OACN4D,MAAO,OACP+B,SACCpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,YAEP,KAKkB,UAAjBrB,EAAQuB,MACXi9B,EAAMh/B,KACL,CACCo2C,MAAO,mBACPr0C,KAAM,OACN4D,MAAO,eACP+B,UACC5F,EAAAA,GAAAA,IAAgBtB,GAChBF,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,UAAYrB,EAAQyB,MAE3B,GAEF,CACCm0C,MAAO,cACPr0C,KAAM,OACN4D,MAAO,gBACP+B,SACCpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,WAAarB,EAAQyB,MAE5B,IAKiB,YAAjBzB,EAAQuB,MAAuC,UAAjBvB,EAAQuB,MACzCi9B,EAAMh/B,KAAK,CACVo2C,MAAO,gBACPr0C,KAAM,OACN4D,MAAO,gBACP+B,SACC0T,EAAAA,EAAAA,KACC,iBACA,CACCW,MAAO,gBACPla,KAAO,8CAA6CrB,EAAQyB,+BAC5D+qC,OAAQ,kBAER1f,IACKA,GAILhtB,GAAAA,EAAAA,KAAY,gBAAiB,CAC5BC,OAAQC,EAAQ/B,IADjB,GAKF,IAIH,MAAM63C,EAAmD,CACxDD,MAAO,UACP71C,QAAS,UACT2B,MAAO,gBAMR,GAFyBlD,OAAOD,KAAKs3C,GAEhB50C,SAASlB,EAAQuB,MAAO,CAC5C,MAAMw0C,EAAWD,EAAyB91C,EAAQuB,MAElDi9B,EAAMh/B,KAAK,CACVo2C,MAAO51C,EAAQ87B,MAAS,UAASia,IAAc,QAAOA,IACtDx0C,KAAM,OACN4D,MAAO,OACP+B,SACCpH,GAAAA,EAAAA,KAAY,cAAe,CAC1BC,OAAQC,EAAQ/B,GAChB+3C,YAAah2C,EAAQ87B,OAEtB,GAEF,CAYD,OATA0C,EAAMh/B,KAAK,CACVo2C,MA1LgB,CAChBC,MAAO,SACP71C,QAAS,QACT2B,MAAO,QACPmuB,QAAS,SAsLO9vB,EAAQuB,MACxBA,KAAM,OACN4D,MAAO,QACP+B,SACCyuC,GACA,IAGKnX,CACP,CAEM,SAASyX,GACfh3C,EACAmC,EACAR,GAEA,MAkBMZ,EAAUY,EAAQF,SAASszB,MAAM/yB,GAAMA,EAAEQ,OAASL,IAExD,OAAIpB,EACI,CACN,CACC41C,MAAO,gBACPr0C,KAAM,OACN4D,MAAO,OACPkT,KAAO,SAAQrY,EAAQ/B,OAKnB,CACN,CACC23C,MAAO,eACPr0C,KAAM,OACN4D,MAAO,OACP+B,OApCW,KACZ,MAAMlH,EAAUY,EAAQF,SAASszB,MAAM/yB,GAAMA,EAAEQ,OAASL,IAEpDpB,IACHsB,EAAAA,GAAAA,IAAgBtB,GAGbf,EAAMyJ,MAAM0oB,cACftxB,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQd,EAAMyJ,MAAM0oB,cAAcpxB,QAAQ/B,GAC1CoD,KAAM,SAAWD,IAIlBU,QAAQC,MAAM,qDACd,GAwBF,CAEM,SAASm0C,GACfj3C,EACAe,EACAY,EACAmG,GAEA,MAAMovC,EAAyDn2C,GAC5DA,EAAQqoB,MAAM2L,MAAMvL,GAAMA,EAAEhc,OAAS7L,EAAQ6L,QAC7C,CAAC,EAEE2pC,EAAQ,KACb,MAAMh1C,EAAOR,EAAQF,SAASszB,MAAM/yB,GAAMA,EAAEQ,OAASsF,EAAK0F,OAEtDrL,IACHE,EAAAA,GAAAA,IAAgBF,GAGjBtB,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,UAAY0F,EAAK0F,MAFxB,EAMK+xB,EAA2B,CAChC,CACCoX,MAAO7uC,EAAK0F,KACZlL,KAAM,OACN4D,MAAO,OACP+B,OAAQkvC,GAET,CACC70C,KAAM,WAEP,CACCq0C,MAAO,mBACPr0C,KAAM,OACN4D,MAAO,eACP+B,OAAQkvC,GAET,CACCR,MAAO,cACPr0C,KAAM,OACN4D,MAAO,gBACP+B,SACCpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,WAAa0F,EAAK0F,MAEzB,GAEF,CACCmpC,MAAO,kBACPr0C,KAAM,OACN4D,MAAO,eACP+B,SACC,MAAM9F,EAAOnC,EAAM6Z,QAAQ6iB,4BAA4B50B,EAAK0F,MAExDrL,IACHE,EAAAA,GAAAA,IAAgBF,GAGjBtB,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,UAAY0F,EAAK0F,MAExB,IAKH,IAAK0pC,EAAmB9pB,OAAS8pB,EAAmB9pB,MAAMxsB,OAAS,EAClE,OAAO2+B,EAIR,MAAM6X,EAAiB,CACtB,IAAK,QACL,IAAK,QACL,IAAK,WACL,IAAK,UACL,IAAK,SAIAC,EAAmB,CACxBC,OAAOva,GACN,MAAMv6B,EAAO40C,EAAera,EAAEwa,QAE9B,MAAoB,iBAAT/0C,EACH,GAGIA,EAAQ,UAASA,OAAUu6B,EAAEjP,QAAW,SAAQiP,EAAEjP,MAE9D,EACD0pB,KAAKza,GACJ,MAAMv6B,EAAO40C,EAAera,EAAEwa,QAE9B,MAAoB,iBAAT/0C,EACH,GAGIA,EAAQ,QAAOA,OAAUu6B,EAAEjP,QAAW,SAAQiP,EAAEjP,MAE5D,GAGI2pB,EAAqB91C,EAAQC,cAAc81C,OAAOC,QAcxD,SAASC,EAAQC,EAAYC,GAE5B,MAAO,KAAKjuB,QAAQguB,IAAO,EACxBJ,EAAmB5tB,QAAQguB,IAAOJ,EAAmB5tB,QAAQiuB,GAC7DL,EAAmB5tB,QAAQguB,GAAMJ,EAAmB5tB,QAAQiuB,EAC/D,CAsDD,OApDAn2C,EAAQC,cAAc81C,OAAOK,OAAO3sC,SAAS0iB,IACvC8pB,EAAQV,EAAmB9pB,MAAM,GAAIU,EAAKypB,UAK1CzvC,EAAKslB,MAAMnrB,SAAS6rB,EAAKypB,QAc7BhY,EAAMh/B,KAAK,CACVo2C,MAAOU,EAAiBC,OAAOxpB,GAC/BxrB,KAAM,OACN4D,MAAO,qBACP+B,SACCpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,UAAY0rB,EAAKA,KAAO,IAAMhmB,EAAK0F,MAE1C,IArBF+xB,EAAMh/B,KAAK,CACVo2C,MAAOU,EAAiBG,KAAK1pB,GAC7BxrB,KAAM,OACN4D,MAAO,kBACP+B,SACCpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,UAAY0rB,EAAKA,KAAO,IAAMhmB,EAAK0F,MAE1C,IAcF,IAIGoqC,EAAQH,EAAmB5tB,QAAQ,MAAQ,EAAI,IAAM,IAAKqtB,EAAmB9pB,MAAM,MAE7D,IAAtBtlB,EAAKslB,MAAMxsB,QAAgBg3C,EAAQV,EAAmB9pB,MAAM,GAAItlB,EAAKslB,MAAM,MAC9EmS,EAAMh/B,KAAK,CACVo2C,MAAO,OACPr0C,KAAM,OACN4D,MAAO,cACP+B,SACCpH,GAAAA,EAAAA,KAAY,QAAS,CACpBC,OAAQC,EAAQ/B,GAChBoD,KAAM,SAAW0F,EAAK0F,MAEvB,IAKG+xB,CACP,CC3ZD,QAAe74B,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,cACN2G,MAAO,CACNjJ,QAAS,CACRsI,UAAU,EACVlG,KAAM9C,SAGRmH,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACRzG,GAASmc,EAAAA,EAAAA,MAETs5B,GAASnxC,EAAAA,EAAAA,KAAI,GACboxC,GAAcpxC,EAAAA,EAAAA,KAAI,GAElBqxC,GAAcrxC,EAAAA,EAAAA,MACdsxC,GAAwBtxC,EAAAA,EAAAA,MACxB04B,GAAQ14B,EAAAA,EAAAA,IAAuB,IAC/BuxC,GAAavxC,EAAAA,EAAAA,KAAK,GAClBuD,GAAQvD,EAAAA,EAAAA,IAAI,CACjBmoB,IAAK,EACLF,KAAM,IAGDyX,EAAQ,KACRyR,EAAO3yC,QAIZ2yC,EAAO3yC,OAAQ,EACfk6B,EAAMl6B,MAAQ,GAEV8yC,EAAsB9yC,QACzB8yC,EAAsB9yC,MAAM4E,QAC5BkuC,EAAsB9yC,MAAQ,MAC/B,EAGKgzC,EAAsB,KAC3BJ,EAAY5yC,OAAQ,EACpB7E,SAASC,KAAKskB,oBAAoB,YAAaszB,EAA/C,EA2CKC,EAAav0C,IAClBwiC,IAEI,WAAYxiC,GAAQA,EAAKkE,OAC5BlE,EAAKkE,SACK,SAAUlE,GAAQA,EAAKqV,MACjC7W,EAAOhC,KAAKwD,EAAKqV,MAAMxW,OAAM,KAE5BC,QAAQC,MAAM,wBAAyBiB,EAAKqV,KAA5C,GAEF,EASK+oB,EAAO,CAACh9B,EAAmBmpC,KAChCnpC,EAAMyC,iBAENuwC,EAAsB9yC,MAAQ7E,SAASkuC,cACvCnP,EAAMl6B,MAAQipC,EACd8J,EAAW/yC,MAAQ,EACnB2yC,EAAO3yC,OAAQ,GAGf2E,EAAAA,EAAAA,KAAS,KACR,MAAMuuC,EA/DqBpzC,KAC5B,MAAM80B,EAAU90B,EAAMrE,OAEtB,IAAKo3C,EAAY7yC,MAChB,OAGD,MAAM8rC,EAAY+G,EAAY7yC,OAAO8V,YAC/Bq9B,EAAaN,EAAY7yC,OAAOkf,aAEtC,GAAI0V,GAAWA,EAAQv5B,UAAUC,SAAS,QACzC,MAAO,CACNmuB,KAAMmL,EAAQ1L,wBAAwBO,MAAQqiB,EAAYlX,EAAQ9e,aAClE6T,IAAKiL,EAAQ1L,wBAAwBS,IAAMiL,EAAQ1V,cAIrD,MAAMhE,EAAS,CAACuO,KAAM3pB,EAAMszC,MAAOzpB,IAAK7pB,EAAMuzC,OAU9C,OARIhzC,OAAO0yB,WAAa7X,EAAOuO,KAAOqiB,IACrC5wB,EAAOuO,KAAOppB,OAAO0yB,WAAa+Y,GAG/BzrC,OAAOizC,YAAcp4B,EAAOyO,IAAMwpB,IACrCj4B,EAAOyO,IAAMtpB,OAAOizC,YAAcH,GAG5Bj4B,CAAP,EAoCaq4B,CAAoBzzC,GAE3BozC,IAILnuC,EAAM/E,MAAMypB,KAAOypB,EAAIzpB,KACvB1kB,EAAM/E,MAAM2pB,IAAMupB,EAAIvpB,IACtBkpB,EAAY7yC,OAAO4E,QAAnB,IACErH,OAAOxD,IAETyD,QAAQC,MAAM1D,EAAd,GAZD,EAgBKy5C,EAA0B1tC,IAKP,gBAApBA,EAAKhG,MAAM7C,OAGd21C,EAAY5yC,OAAQ,EACpB7E,SAASC,KAAK+jB,iBAAiB,YAAa6zB,EAAqB,CAChE5zB,SAAS,KAIX,MAAM6pB,EAAWmI,GAA2BtrC,EAAKpK,QAASoK,EAAKxJ,SAC/DwgC,EAAKh3B,EAAKhG,MAAOmpC,EAAjB,EAGKwK,EAAgC3tC,IACrC,MAAM,QAACxJ,GAAW3B,EAAMyJ,MAAM0oB,cACxBmc,EAAW0I,GAAiCh3C,EAAOmL,EAAKpK,QAASY,GAEvEwgC,EAAKh3B,EAAKhG,MAAOmpC,EAAjB,EAGKyK,EAAuB5tC,IAI5B,MAAM,QAACxJ,EAAD,QAAUZ,GAAWf,EAAMyJ,MAAM0oB,cAEjCmc,EAAW2I,GAChBj3C,EACAe,EACAY,EACAZ,EAAQqoB,MAAM2L,MAAMvL,GAAMA,EAAEhc,OAASrC,EAAKrD,KAAK0F,QAAS,CACvDA,KAAMrC,EAAKrD,KAAK0F,KAChB4f,MAAO,KAGT+U,EAAKh3B,EAAKhG,MAAOmpC,EAAjB,EA4CD,OAlBA7mC,EAAAA,EAAAA,KAAU,KACTkU,EAAAA,EAAAA,GAAY,YAAa4qB,GACzB5qB,EAAAA,EAAAA,GAAY,qBAAsB4qB,GAClC5qB,EAAAA,EAAAA,GAAY,mBAAoBo9B,GAChCp9B,EAAAA,EAAAA,GAAY,sBAAuBk9B,GACnCl9B,EAAAA,EAAAA,GAAY,6BAA8Bm9B,EAA1C,KAGDl9B,EAAAA,EAAAA,KAAY,KACXD,EAAAA,EAAAA,IAAa,YAAa4qB,GAC1B5qB,EAAAA,EAAAA,IAAa,qBAAsB4qB,GACnC5qB,EAAAA,EAAAA,IAAa,mBAAoBo9B,GACjCp9B,EAAAA,EAAAA,IAAa,sBAAuBk9B,GACpCl9B,EAAAA,EAAAA,IAAa,6BAA8Bm9B,GAE3CvS,GAAO,IAGD,CACNyR,SACAzY,QACA6Y,aACAhuC,QACA8tC,cACAD,cACA1R,QACAyS,eAhLuB7zC,IACnBA,EAAM8zC,gBAAkB9zC,EAAMrE,QACjCylC,GACD,EA8KA2S,aAlDqB9pB,IACrB,IAAIG,EAAe6oB,EAAW/yC,MAE9BkqB,GAAgBH,EAEhB,MAAM+pB,EAAW5Z,EAAMl6B,MAAMkqB,GAGzB4pB,GAAY,SAAUA,GAA8B,YAAlBA,EAAS72C,OAC9CitB,GAAgBH,GAGbG,EAAe,IAClBA,GAAgBgQ,EAAMl6B,MAAMzE,QAGzB2uB,EAAegQ,EAAMl6B,MAAMzE,OAAS,IACvC2uB,GAAgBgQ,EAAMl6B,MAAMzE,QAG7Bw3C,EAAW/yC,MAAQkqB,CAAnB,EA+BA6pB,UA9IkBp6C,IAClBo5C,EAAW/yC,MAAQrG,CAAnB,EA8IAs5C,YACAe,gBA/HuB,KACnB9Z,EAAMl6B,MAAM+yC,EAAW/yC,QAC1BizC,EAAU/Y,EAAMl6B,MAAM+yC,EAAW/yC,OAClC,EA8HD,IClRF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,6BDHnD4B,EAAAA,SAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAuCM,O,MArCL/H,GAAG,yBACFkH,OAAK,SAAA+xC,YAAGhxC,EAAAA,cACRH,QAAK,Y,QAAEG,EAAAA,gBAAAA,EAAAA,kBAAAA,IACP6lC,cAAW,sB,QAAU7lC,EAAAA,gBAAAA,EAAAA,kBAAAA,IAAc,cACnCwoB,UAAO,mCAAmBxoB,EAAAA,cAAY,kCAA/B,kCACqBA,EAAAA,aAAY,oCADjC,kCAEoBA,EAAAA,aAAY,mCAFhC,kCAGoBA,EAAAA,cAAY,qCATzC,EAWCb,EAAAA,EAAAA,GA2BK,MA1BJpH,GAAG,eACH6H,IAAI,cACJV,KAAK,OACJiE,OAAK,S,IAAanD,EAAAA,MAAM+nB,IAAG,K,KAAmB/nB,EAAAA,MAAM6nB,KAAI,OAIzD/U,SAAS,KACRyV,aAAU,eAAEvoB,EAAAA,YAAU,GACtBwoB,UAAO,+B,QAAgBxoB,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,0BAVxC,gBAaCF,EAAAA,EAAAA,IAaWwE,EAAAA,GAAA,MAAAyS,EAAAA,EAAAA,IAbqB/W,EAAAA,OAAK,CAAnBlD,EAAM/E,M,WACvB+H,EAAAA,EAAAA,IAWK,M,IAZ+ChD,EAAKvB,KAEvD0D,OAAK,yBAA4BnC,EAAKzB,KAAYyB,EAAKmC,MAAK,gBAAqBnC,EAAKmC,MAAK,KAAtF,C,OAA8GlH,IAAOiI,EAAAA,cAK3Hd,KAAK,WACJkqC,aAAU,GAAEppC,EAAAA,UAAUjI,GACtB8H,QAAK,GAAEG,EAAAA,UAAUlD,KARnB,QAUIA,EAAK4yC,OAAK,GAAAvlC,OAXf,OAbD,KAXD,oB,qBEC2BpS,GAAG,kB,IACvBkH,MAAM,gB,IACLA,MAAM,sB,IAGPA,MAAM,mBA2Dd,QAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,gBACNmE,QACC,MAAMwE,GAAOtE,EAAAA,EAAAA,MACPwgB,GAAWxgB,EAAAA,EAAAA,MAEXs7B,EAAO,CAACmX,EAA6BC,KAC1CpuC,EAAK9F,MAAQi0C,EACbjyB,EAAShiB,MAAQk0C,CAAjB,EAGKhT,EAAS1Y,IACd1iB,EAAK9F,WAAQ8mB,EAET9E,EAAShiB,OACZgiB,EAAShiB,QAAQwoB,EAClB,EAaD,OAVApmB,EAAAA,EAAAA,KAAU,KACTkU,EAAAA,EAAAA,GAAY,YAAa4qB,GACzB5qB,EAAAA,EAAAA,GAAY,iBAAkBwmB,EAA9B,KAGDvmB,EAAAA,EAAAA,KAAY,KACXD,EAAAA,EAAAA,IAAa,YAAa4qB,GAC1B5qB,EAAAA,EAAAA,IAAa,iBAAkBwmB,EAA/B,IAGM,CACNh3B,OACAo7B,QAED,IC1FF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,wCDN1Dx/B,EAAAA,EAAAA,IAWM,OAXD/H,GAAG,yBAA0BkH,OAAK,SAAA+V,SAAahV,EAAAA,QAApD,CACgB,OAAJA,EAAAA,OAAI,WAAfF,EAAAA,EAAAA,IASM,MATN,GASM,EARLX,EAAAA,EAAAA,GAGM,MAHN,GAGM,EAFLA,EAAAA,EAAAA,GAAuD,MAAvD,IAAuDqF,EAAAA,EAAAA,IAApBxE,EAAAA,MAAMqV,OAAK,IAC9ClW,EAAAA,EAAAA,GAAuB,UAAAqF,EAAAA,EAAAA,IAAjBxE,EAAAA,MAAM7E,MAAI,MAEjBgE,EAAAA,EAAAA,GAGM,MAHN,GAGM,EAFLA,EAAAA,EAAAA,GAAoE,UAA5DF,MAAM,iBAAkBY,QAAK,eAAEG,EAAAA,OAAK,KAAS,WACrDb,EAAAA,EAAAA,GAA+E,UAAvEF,MAAM,iBAAkBY,QAAK,eAAEG,EAAAA,OAAK,MAA5C,QAAuDA,EAAAA,MAAMsmC,QAAM,SAPrE,gBADD,E,eEMMrnC,MAAM,kB,IACLA,MAAM,wB,YAAuB,qB,0BAgB3BA,MAAM,iB,IAEHA,MAAM,Q,YAMM,wB,qBACd,KAAM,K,iBAOTA,MAAM,wCACN,aAAW,wB,mBAUTA,MAAM,UAAU8T,IAAI,Q,iFA2G9BzU,KAAAA,OAAai0C,MAEb,QAAe9yC,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,WACN0E,WAAY,CACXiW,SADW,KAEXF,cAAaA,GAAAA,GAEdtW,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACRgvC,GAASnxC,EAAAA,EAAAA,KAAI,GACb4yC,GAAY5yC,EAAAA,EAAAA,KAAI,GAChB6yC,GAAmB5+B,EAAAA,EAAAA,KAAS,KACjC,MAAM6F,EAAW3gB,EAAMyJ,MAAM4xB,SAASn3B,QAAQ84B,UAE9C,IAAK,MAAM98B,KAAWygB,EACrBzgB,EAAQ0d,YAAaA,EAAAA,GAAAA,GAAW1d,EAAQoF,MACxCpF,EAAQa,QAAUf,EAAM6Z,QAAQmH,YAAY9gB,EAAQ4gB,QAGrD,OAAOH,EAAS7c,QAAQ5D,IAAaA,EAAQa,SAASA,QAAQ87B,OAA9D,KAGD/yB,EAAAA,EAAAA,KACC,IAAM9J,EAAMyJ,MAAM4xB,WAClB,KACCoe,EAAUp0C,OAAQ,CAAlB,IAIF,MAwBMs0C,EAAc,KACnB3B,EAAO3yC,OAAS2yC,EAAO3yC,MAEnB2yC,EAAO3yC,QACVo0C,EAAUp0C,OAAQ,EAClBxE,GAAAA,EAAAA,KAAY,gBACb,EAGK+4C,EAAa,KAClB5B,EAAO3yC,OAAQ,CAAf,EAaD,OAVAoC,EAAAA,EAAAA,KAAU,KACTkU,EAAAA,EAAAA,GAAY,kBAAmBg+B,GAC/Bh+B,EAAAA,EAAAA,GAAY,YAAai+B,EAAzB,KAGDh+B,EAAAA,EAAAA,KAAY,KACXD,EAAAA,EAAAA,IAAa,kBAAmBg+B,GAChCh+B,EAAAA,EAAAA,IAAa,YAAai+B,EAA1B,IAGM,CACN5B,SACAyB,YACAC,mBACAh8B,YAnDoBpY,GACbC,KAAMD,GAAMu0C,UAmDnBC,eAhDuB55C,IACvBF,EAAMyJ,MAAM4xB,SAASvO,OACpB9sB,EAAMyJ,MAAM4xB,SAASW,WAAWe,GAAMA,EAAEnW,QAAU1mB,EAAQ0mB,QAC1D,GAGD/lB,GAAAA,EAAAA,KAAY,mBAAoBX,EAAQ0mB,MAAxC,EA2CAmzB,mBAxC0B,KAC1B/5C,EAAMyJ,MAAM4xB,SAAW,GACvBx6B,GAAAA,EAAAA,KAAY,uBAAZ,EAuCAm4C,eApCuB7zC,IACnBA,EAAM8zC,gBAAkB9zC,EAAMrE,SACjCk3C,EAAO3yC,OAAQ,EAChB,EAmCD,IC3OF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,sFDLnD4B,EAAAA,SAAAA,EAAAA,EAAAA,OADPF,EAAAA,EAAAA,IAwDM,O,MAtDL/H,GAAG,2BACF8H,QAAK,Y,QAAEG,EAAAA,gBAAAA,EAAAA,kBAAAA,IACP6lC,cAAW,Y,QAAE7lC,EAAAA,gBAAAA,EAAAA,kBAAAA,KAJf,EAMCb,EAAAA,EAAAA,GAiDM,MAjDN,GAiDM,EAhDLA,EAAAA,EAAAA,GASM,MATN,GASM,IANEa,EAAAA,iBAAiBrG,SAAAA,EAAAA,EAAAA,OADxBmG,EAAAA,EAAAA,IAMS,U,MAJRb,MAAM,2BACLY,QAAK,eAAEG,EAAAA,uBACR,mBAJD,iBAQsC,IAAvBA,EAAAA,iBAAiBrG,SAAM,WAAvCmG,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFDwB,EAAAA,YAAAA,EAAAA,EAAAA,OAATF,EAAAA,EAAAA,IAAgC,IAAAqB,GAAZ,eAApB,WACArB,EAAAA,EAAAA,IAA0C,IAAAkF,GAAhC,kCAFX,oBAIAlF,EAAAA,EAAAA,IAiCWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAAuY,EAAAA,EAAAA,IAjCiB/W,EAAAA,kBAAX/G,K,WAChB6G,EAAAA,EAAAA,IA+BM,O,IAhCoD7G,EAAQ0mB,MAC5D1gB,OAAK,eAAUhG,EAAQoC,QAA7B,EACC8D,EAAAA,EAAAA,GA0BM,MA1BN,GA0BM,EAzBLA,EAAAA,EAAAA,GAYM,aAXLA,EAAAA,EAAAA,GAOC,OAPD,GAOC,EANAuC,EAAAA,EAAAA,IAA0CwV,EAAA,CAA/BrW,KAAO5H,EAAQsa,MAA1B,iBACgBta,EAAQa,UAAAA,EAAAA,EAAAA,OAAxBgG,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,UAHsB,QAC7BgG,EAAAA,EAAAA,IAAGvL,EAAQa,QAAQA,QAAQyB,MAAO,QACrCiJ,EAAAA,EAAAA,IAAGvL,EAAQa,QAAQY,QAAQa,MAAI,IAFhC,kBAIAuE,EAAAA,EAAAA,IAAgDwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,KAAhD,OAKI,IAHLW,EAAAA,EAAAA,GAEO,QAFAkW,MAAOpc,EAAQ0d,WAAY1X,MAAM,SAAxC,QACIe,EAAAA,YAAY/G,EAAQoF,KAAKqa,aAAQ,EAAA5W,OAGtC3C,EAAAA,EAAAA,GAWM,aAVLA,EAAAA,EAAAA,GASO,OATP,GASO,EALNA,EAAAA,EAAAA,GAIU,UAHTF,MAAM,cACN,aAAW,uBACVY,QAAK,GAAEG,EAAAA,eAAe/G,IAHxB,kBAQHkG,EAAAA,EAAAA,GAEM,MAFN,GAEM,EADLuC,EAAAA,EAAAA,IAA6CyV,EAAA,CAA7Ble,QAAUA,GAA1B,uBA7BF,MADD,SArBF,oB,KzB2CM,MAAMoa,GAAiB4iB,SACxB8c,GAAiB9c,SACjB+c,GAAmB/c,SAEzB,QAAex2B,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,MACN0E,WAAY,CACXgzC,QADW,GAEXC,YAFW,GAGXC,YAHW,GAIXC,cAJW,GAKXC,SAAQA,IAET3zC,QACC,MAAM3G,GAAQgJ,EAAAA,EAAAA,MACRm1B,GAAUt3B,EAAAA,EAAAA,IAAI,MACd0zC,GAAe1zC,EAAAA,EAAAA,IAAI,MACnBuT,GAAcvT,EAAAA,EAAAA,IAAI,MAClBqxC,GAAcrxC,EAAAA,EAAAA,IAAI,MAClB2zC,GAAgB3zC,EAAAA,EAAAA,IAAI,OAE1B4zC,EAAAA,EAAAA,IAAQngC,GAAgBF,IACxBqgC,EAAAA,EAAAA,IAAQT,GAAgB9B,IACxBuC,EAAAA,EAAAA,IAAQR,GAAkBO,GAE1B,MAAME,GAAkB5/B,EAAAA,EAAAA,KAAS,KACzB,CACN6/B,SAAU36C,EAAM6Z,QAAQ+iB,eAAiB,EACzC,YAAa58B,EAAMyJ,MAAMwuB,WAAaj4B,EAAMyJ,MAAM8xB,YAClD,gBAAiBv7B,EAAMyJ,MAAM+xB,gBAC7B,gBAAiBx7B,EAAMyJ,MAAMgyB,iBAIzBmf,GAAkB/zC,EAAAA,EAAAA,MAClBg0C,GAAmBh0C,EAAAA,EAAAA,MAEnBi0C,EAAY,KACjBn/B,EAAAA,EAAAA,KAAc,YAAd,EAGKygB,EAAiBh9B,MAClB2oC,EAAAA,EAAAA,GAAiB3oC,KAIrBY,EAAMiJ,OAAO,kBAEN,GAGF8xC,EAAkB37C,MACnB2oC,EAAAA,EAAAA,GAAiB3oC,KAIrBY,EAAMiJ,OAAO,mBAEN,GAGF+xC,EAAiB,KACc,IAAhCh7C,EAAMyJ,MAAM2xB,SAASx6B,QACxB+a,EAAAA,EAAAA,KAAc,kBACf,EAGKs/B,EAAiB,KAEtB,MAAMC,EAAQ,IAAI17B,KAOlB,OANiB,IAAIA,KACpB07B,EAAM10B,cACN00B,EAAM30B,WACN20B,EAAM50B,UAAY,GACjBogB,UAEgBwU,EAAMxU,SAAxB,EA2DD,MAxD0B,MACzB,MAAMyU,EAAgBz1C,OAAO0yB,WAC7B,IAAIgjB,EAAiBv7C,EAAAA,EAAAA,IAAY,4BAE7Bs7C,EAAgB19B,EAAAA,EAAAA,sBACnBzd,EAAMiJ,OAAO,cAA0D,UAA3CpJ,EAAAA,EAAAA,IAAY,4BAKrCs7C,GAAiB,MAA2B,SAAnBC,GAAgD,UAAnBA,IACzDA,EAAiB,QAGlBp7C,EAAMiJ,OAAO,eAAmC,SAAnBmyC,EAA7B,EAGDC,IAEA5zC,EAAAA,EAAAA,KAAU,KACTmjB,IAAAA,KAAe,MAAOkwB,GACtBlwB,IAAAA,KAAe,QAASmwB,GACxBnwB,IAAAA,KAAe,QAASwR,GACxBxR,IAAAA,KAAe,QAASowB,GAExBJ,EAAgBv1C,MAAQi2C,KAAS,KAChC3/B,EAAAA,EAAAA,KAAc,SAAd,GACE,KAEHjW,OAAO8e,iBAAiB,SAAUo2B,EAAgBv1C,MAAO,CAACof,SAAS,IAGnE,MAAM82B,EAAgB,KACrB5/B,EAAAA,EAAAA,KAAc,aAEdk/B,EAAiBx1C,MAAQ0gB,WAAWw1B,EAAeN,IAAnD,EAGDJ,EAAiBx1C,MAAQ0gB,WAAWw1B,EAAeN,IAAnD,KAGDvzC,EAAAA,EAAAA,KAAgB,KACfkjB,IAAAA,OAAiB,OACjBA,IAAAA,OAAiB,SACjBA,IAAAA,OAAiB,SACjBA,IAAAA,OAAiB,SAEbgwB,EAAgBv1C,OACnBK,OAAOqf,oBAAoB,SAAU61B,EAAgBv1C,OAGlDw1C,EAAiBx1C,OACpBm2C,aAAaX,EAAiBx1C,MAC/B,IAGM,CACNq1C,kBACAI,YACA1e,gBACA2e,iBACAC,iBACAh7C,QACAm+B,UACAoc,eACAngC,cACA89B,cACAsC,gBAED,I2BzLF,IAFiC,OAAgB,GAAQ,CAAC,CAAC,S,qM3BJ1DzzC,EAAAA,EAAAA,IAcM,OAdD/H,GAAG,WAAYkH,OAAK,QAAEe,EAAAA,iBAAiBd,KAAK,WAAjD,CACgBc,EAAAA,MAAMwC,MAAMwuB,YAAAA,EAAAA,EAAAA,OAA3BvoB,EAAAA,EAAAA,IAA2D+rC,EAAA,C,MAApBtd,QAASl3B,EAAAA,SAAhD,sCACAb,EAAAA,EAAAA,GAKE,OAJDpH,GAAG,kBACH6H,IAAI,UACJ,cAAY,OACXC,QAAK,eAAEG,EAAAA,MAAMgC,OAAM,oBAJrB,WAMAN,EAAAA,EAAAA,IAA8CiI,EAAA,CAAjC/J,IAAI,gBAAc,WAC/B8B,EAAAA,EAAAA,IAAY+yC,IACZ/yC,EAAAA,EAAAA,IAAiCgzC,EAAA,CAApB90C,IAAI,eAAa,WAC9B8B,EAAAA,EAAAA,IAAiCizC,EAAA,CAApB/0C,IAAI,eAAa,WAC9B8B,EAAAA,EAAAA,IAAqCkzC,EAAA,CAAtBh1C,IAAI,iBAAe,UAClCuK,GAbD,E,uF4BAMlL,MAAM,W,WAGuB,a,GAE9BA,MAAM,gB,WAAe,K,WAAwD,K,wBAWnF,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCvBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAOO,OAPP,EAOO,CANeE,EAAAA,QAAQ8W,OAAAA,EAAAA,EAAAA,OAA7BrO,EAAAA,EAAAA,IAA2E0O,EAAA,C,MAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAAhE,4CACAF,EAAAA,EAAAA,IAIWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EAHVkD,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAGU,GADVpU,EAAAA,EAAAA,GAAqF,IAArF,EAAqF,IAA5DuC,EAAAA,EAAAA,IAAuDyV,EAAA,CAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA5C,8BAA4D,KAHtF,M,uFEFKf,MAAM,W,WAGuB,a,wBAYpC,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCtBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAMO,OANP,EAMO,CALeE,EAAAA,QAAQ8W,OAAAA,EAAAA,EAAAA,OAA7BrO,EAAAA,EAAAA,IAA2E0O,EAAA,C,MAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAAhE,4CACAF,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EAFVkD,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAEU,GAHX,M,iGEFKtU,MAAM,W,WACsB,iB,qBAG/B,gB,qBAGA,gB,GACEA,MAAM,Y,wBAWZ,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,wBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MC1Bb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAUO,OAVP,EAUO,EATN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBASM,EAPMvT,EAAAA,QAAQ60C,YAAAA,EAAAA,EAAAA,OAApB/0C,EAAAA,EAAAA,IAEC,OAAAoB,EAAA,IADa/B,EAAAA,EAAAA,GAA8B,UAAAqF,EAAAA,EAAAA,IAAxBxE,EAAAA,QAAQ60C,WAAS,OADrC,eAGY70C,EAAAA,QAAQ80C,WAAAA,EAAAA,EAAAA,OAApBh1C,EAAAA,EAAAA,IAGQ,OAAAkF,EAAA,IADP7F,EAAAA,EAAAA,GACA,IADA,EACA,EADoBuC,EAAAA,EAAAA,IAA6DyV,EAAA,CAA7Czc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQ80C,UAAjD,iCAFrB,gB,iGENK71C,MAAM,W,WACsB,KACjC,QAAG,M,GAAgBA,MAAM,gB,wBAU3B,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCnBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAGO,OAHP,EAGO,EAFN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAEM,GADOpU,EAAAA,EAAAA,GAA+E,OAA/E,EAA+E,EAApDuC,EAAAA,EAAAA,IAA6CyV,EAAA,CAA7Bhc,KAAM6E,EAAAA,QAAQ+0C,aAA9B,oB,uFEFnC91C,MAAM,W,WACsB,Y,GAC1BE,EAAAA,EAAAA,GAAmD,QAA7CkW,MAAM,6BAA4B,QAAI,G,WAAO,c,GACpDpW,MAAM,gB,wBAUd,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,yBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCpBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAIO,OAJP,EAIO,EAHN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAGM,EAFCrS,EAED,GADN/B,EAAAA,EAAAA,GAA+E,OAA/E,EAA+E,EAApDuC,EAAAA,EAAAA,IAA6CyV,EAAA,CAA7Bhc,KAAM6E,EAAAA,QAAQ+0C,aAA9B,oB,uFEHtB91C,MAAM,W,cAUb,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,mBACN0E,WAAY,CACX+V,cAAaA,EAAAA,GAEd9T,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,IAGZ7B,MAAMwC,IAsCE,CACN8yC,cAtCoBnhC,EAAAA,EAAAA,KAAS,KAC7B,OAAQ3R,EAAMjJ,QAAQ4C,OACrB,IAAK,kBACJ,MAAQ,eAAcqG,EAAMjJ,QAAQa,6BACrC,IAAK,sBACJ,MAAQ,eAAcoI,EAAMjJ,QAAQa,mDACrC,IAAK,yBACJ,MAAQ,0BAAyBoI,EAAMjJ,QAAQa,UAChD,IAAK,kBACJ,MAAQ,eAAcoI,EAAMjJ,QAAQa,6BACrC,IAAK,sBACJ,MAAO,wDACR,IAAK,sBACJ,MAAQ,eAAcoI,EAAMjJ,QAAQa,oCACrC,IAAK,eACJ,MAAQ,QAAOoI,EAAMjJ,QAAQsN,2CAC9B,IAAK,iBACJ,MAAO,oDACR,IAAK,oBACJ,MAAO,qBACR,IAAK,oBACJ,MAAQ,eAAcrE,EAAMjJ,QAAQa,2EACrC,IAAK,kBACJ,MAAQ,oBAAmBoI,EAAMjJ,QAAQmB,UAC1C,IAAK,sBACJ,MAAQ,QAAO8H,EAAMjJ,QAAQsN,8BAC9B,IAAK,kBACJ,MAAQ,QAAOrE,EAAMjJ,QAAQsN,kCAC9B,QACC,OAAIrE,EAAMjJ,QAAQg8C,OACT,GAAE/yC,EAAMjJ,QAAQg8C,WAAW/yC,EAAMjJ,QAAQ4C,SAG3CqG,EAAMjJ,QAAQ4C,MAhCvB,QCrBH,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,0EDJ1DiE,EAAAA,EAAAA,IAEO,OAFP,EAEO,EADN4B,EAAAA,EAAAA,IAA4EyV,EAAA,CAA5Dzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,QAAU7E,KAAM6E,EAAAA,cAA5D,sC,uFEDKf,MAAM,W,WACsB,a,qBAGS,Q,wBAW5C,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,oBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCtBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAMO,OANP,EAMO,EALN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAKM,EAHMvT,EAAAA,QAAQk1C,aAAAA,EAAAA,EAAAA,OAApBp1C,EAAAA,EAAAA,IAA0C,OAAAoB,EAAV,UAAhC,WACAuH,EAAAA,EAAAA,IAA0CyO,EAAA,C,MAAxBrW,KAAMb,EAAAA,QAAQnG,QAAhC,kBAEM,GADH6H,EAAAA,EAAAA,IAA4DyV,EAAA,CAA5Czc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQlG,SAAjD,4B,iGELEmF,MAAM,W,GAERA,MAAM,Y,WAAW,M,WAAmE,K,SAEnFA,MAAM,W,SAGNA,MAAM,Y,WACC,4B,wBAWb,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MC1Bb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAUO,OAVP,EAUO,EATN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,kBACApU,EAAAA,EAAAA,GAA4F,IAA5F,EAA4F,IAAlEuC,EAAAA,EAAAA,IAA6DyV,EAAA,CAA7Czc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQ4oB,UAAjD,2BAAkE,IAC5E5oB,EAAAA,QAAQm1C,UAAAA,EAAAA,EAAAA,OACvBr1C,EAAAA,EAAAA,IAAmD,IAAnD,EAAmB,MAAM0E,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQm1C,SAAU,IAAC,KAA/C,eAEen1C,EAAAA,QAAQo1C,QAAAA,EAAAA,EAAAA,OACvBt1C,EAAAA,EAAAA,IAAkD,IAAlD,EAAoB,MAAM0E,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQo1C,OAAQ,IAAC,KAA9C,eAGK,G,uFEVDn2C,MAAM,W,WACsB,gB,SAGVA,MAAM,e,WAC3B,M,WAA6D,K,wBAWjE,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCvBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAOO,OAPP,EAOO,EANN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAMM,GAJN7R,EAAAA,EAAAA,IAAmCwV,EAAA,CAAxBrW,KAAMb,EAAAA,QAAQnG,QAAzB,iBACSmG,EAAAA,QAAQ7E,OAAAA,EAAAA,EAAAA,OAAjB2E,EAAAA,EAAAA,IAEC,IAFD,EAEC,IADO4B,EAAAA,EAAAA,IAAuDyV,EAAA,CAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA5C,8BACP,MAFD,gB,uFEJKf,MAAM,W,WACsB,e,wBAYnC,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCpBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAIO,OAJP,EAIO,EAHN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAGM,GADN7R,EAAAA,EAAAA,IAAoCyV,EAAA,CAApBle,QAAS+G,EAAAA,SAAO,qB,iGEH3Bf,MAAM,W,WAAU,qBASvB,OAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,qBACN2G,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCZb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,wCDJ1DzB,EAAAA,EAAAA,IAEO,OAFP,EAEO,IADUX,EAAAA,EAAAA,GAAyB,UAAAqF,EAAAA,EAAAA,IAAnBxE,EAAAA,QAAQ7E,MAAI,I,iGED7B8D,MAAM,W,WAAU,uBASvB,OAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,qBACN2G,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCZb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,wCDJ1DzB,EAAAA,EAAAA,IAEO,OAFP,EAEO,IADYX,EAAAA,EAAAA,GAA8B,UAAAqF,EAAAA,EAAAA,IAAxBxE,EAAAA,QAAQq1C,WAAS,I,uFEDpCp2C,MAAM,W,GACLA,MAAM,Q,cASd,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,4BACN0E,WAAY,CACX+V,cAAaA,EAAAA,GAEd9T,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,IAGZ7B,MAAMwC,IAiBE,CACNozC,WAjBiBzhC,EAAAA,EAAAA,KAAS,KAC1B,IAAI0hC,EAAQrzC,EAAMjJ,QAAQkC,KAAKL,MAAM,MASrC,OALIy6C,EAAMC,OAAOC,GAAkB,KAATA,GAA2B,MAAZA,EAAK,OAC7CF,EAAQA,EAAM39C,KAAK69C,GAASA,EAAKp7C,UAAU,MAIrCk7C,EACL39C,KAAK69C,GAASA,EAAKn1B,QAAQ,OAAQ,MACnCrlB,KAAK,MACLqlB,QAAQ,qBAAsB,GAHhC,QC9BH,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,0EDJ1DxgB,EAAAA,EAAAA,IAEO,OAFP,EAEO,EADNX,EAAAA,EAAAA,GAAgF,OAAhF,EAAgF,EAA7DuC,EAAAA,EAAAA,IAAsDyV,EAAA,CAAtCzc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,WAAzC,8B,uFEDdf,MAAM,W,WACsB,qB,cAWnC,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACXiW,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MClBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,qEDJ1DzB,EAAAA,EAAAA,IAIO,OAJP,EAIO,EAHN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBAGM,GADN7R,EAAAA,EAAAA,IAAsEwV,EAAA,CAA3DrW,KAAI,CAAA0F,KAASvG,EAAAA,QAAQ01C,SAAQ7uB,KAAQ7mB,EAAAA,QAAQuT,KAAKsT,OAA7D,kB,uFEHK5nB,MAAM,W,GAERA,MAAM,Y,WAAW,M,WAA+D,K,WAAK,0B,SAEjEA,MAAM,e,WAC3B,K,WAAwD,K,wBAW5D,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCvBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAOO,OAPP,EAOO,EANN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,kBACApU,EAAAA,EAAAA,GAAwF,IAAxF,EAAwF,IAAlEuC,EAAAA,EAAAA,IAA6DyV,EAAA,CAA7Czc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQ4oB,UAAjD,2BAAkE,IAKlF,EAHG5oB,EAAAA,QAAQ7E,OAAAA,EAAAA,EAAAA,OAAjB2E,EAAAA,EAAAA,IAEC,IAFD,EAEC,IADE4B,EAAAA,EAAAA,IAAuDyV,EAAA,CAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA5C,8BACF,MAFD,gB,uFEJKf,MAAM,W,GAERA,MAAM,Y,WAAW,M,WAA+D,K,WAAK,c,SAEjEA,MAAM,e,WAC3B,K,WAAwD,K,wBAW5D,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,kBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCvBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAOO,OAPP,EAOO,EANN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,kBACApU,EAAAA,EAAAA,GAAwF,IAAxF,EAAwF,IAAlEuC,EAAAA,EAAAA,IAA6DyV,EAAA,CAA7Czc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQ4oB,UAAjD,2BAAkE,IAKlF,EAHG5oB,EAAAA,QAAQ7E,OAAAA,EAAAA,EAAAA,OAAjB2E,EAAAA,EAAAA,IAEC,IAFD,EAEC,IADE4B,EAAAA,EAAAA,IAAuDyV,EAAA,CAAvCzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA5C,8BACF,MAFD,gB,iGEJKf,MAAM,WAOb,OAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,iBACN2G,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCVb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,wCDJ1DzB,EAAAA,EAAAA,IAA+C,OAA/C,GAA+C0E,EAAAA,EAAAA,IAAtBxE,EAAAA,QAAQ7E,MAAI,E,uFEA/B8D,MAAM,W,WAEwB,+B,WAElB,kB,SACSA,MAAM,a,wBAYlC,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,mBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,MCxBb,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1DzB,EAAAA,EAAAA,IAQO,OARP,EAQO,CAPUE,EAAAA,QAAQuT,MAAQvT,EAAAA,QAAQuT,KAAKhN,OAAAA,EAAAA,EAAAA,OAA7CzG,EAAAA,EAAAA,IAEWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,EADTkD,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,iBACS,GAFX,kBAGAzT,EAAAA,EAAAA,IAA0CwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,IAA1C,KACYwB,EAAAA,QAAQ7E,OAAAA,EAAAA,EAAAA,OAApB2E,EAAAA,EAAAA,IAES,OAFT,EAES,EADP4B,EAAAA,EAAAA,IACAyV,EAAA,CADgBzc,QAASsF,EAAAA,QAAU/G,QAAS+G,EAAAA,SAA5C,kCADF,gB,iGELKf,MAAM,W,WAAU,kB,wBAavB,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,wBACN0E,WAAY,CACXiW,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,IAGZ7B,MAAMwC,IAGE,CACNwU,mBAHyB7C,EAAAA,EAAAA,KAAS,KAAM8C,EAAAA,EAAAA,GAAWzU,EAAMjJ,QAAQmwB,YCvBpE,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,qEDJ1DtpB,EAAAA,EAAAA,IAIO,OAJP,EAIO,IAFN4B,EAAAA,EAAAA,IAAiCwV,EAAA,CAAtBrW,KAAMb,EAAAA,QAAQuT,MAAzB,kBAEM,QAF2B,QAC9B/O,EAAAA,EAAAA,IAAGxE,EAAAA,mBAAiB,I,gGEHlBf,MAAM,W,aAMPA,MAAM,S,GAERE,EAAAA,EAAAA,GAAsB,UAAlB,iBAAa,G,GAIlBA,EAAAA,EAAAA,GAAmB,UAAf,cAAU,G,GACVF,MAAM,Y,GAQTE,EAAAA,EAAAA,GAAqB,UAAjB,gBAAY,G,GACZF,MAAM,Y,wBAcVE,EAAAA,EAAAA,GAAmB,UAAf,cAAU,G,GAKdA,EAAAA,EAAAA,GAAyB,UAArB,oBAAgB,G,GAKpBA,EAAAA,EAAAA,GAAkB,UAAd,aAAS,G,GAKbA,EAAAA,EAAAA,GAAe,UAAX,UAAM,G,GAMTA,EAAAA,EAAAA,GAAiB,UAAb,YAAQ,G,GAMbA,EAAAA,EAAAA,GAAkB,UAAd,aAAS,G,GAKbA,EAAAA,EAAAA,GAA4B,UAAxB,uBAAmB,G,GACvBA,EAAAA,EAAAA,GAAY,UAAR,OAAG,G,GAIPA,EAAAA,EAAAA,GAAkB,UAAd,aAAS,G,GACbA,EAAAA,EAAAA,GAAY,UAAR,OAAG,G,GAIPA,EAAAA,EAAAA,GAAc,UAAV,SAAK,G,GAKTA,EAAAA,EAAAA,GAA2B,UAAvB,sBAAkB,G,GACtBA,EAAAA,EAAAA,GAAY,UAAR,OAAG,G,GAIPA,EAAAA,EAAAA,GAAqB,UAAjB,gBAAY,G,GAKhBA,EAAAA,EAAAA,GAAsB,UAAlB,iBAAa,G,GAOjBA,EAAAA,EAAAA,GAAsB,UAAlB,iBAAa,G,GAKjBA,EAAAA,EAAAA,GAAoB,UAAhB,eAAW,G,kCAcnB,GAAeM,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,mBACN0E,WAAY,CACX+V,cADW,IAEXE,SAAQA,EAAAA,GAEThU,MAAO,CACNxH,QAAS,CACRW,KAAM9C,OACNgJ,UAAU,GAEXtI,QAAS,CACRoC,KAAM9C,OACNgJ,UAAU,IAGZ7B,MAAK,KACG,CACNiX,WAAa8R,IAAe9R,EAAAA,EAAAA,GAAW8R,OCnI1C,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,iGDJ1D3oB,EAAAA,EAAAA,IA6GO,OA7GP,EA6GO,EA5GNX,EAAAA,EAAAA,GAGI,WAFHuC,EAAAA,EAAAA,IAA+CwV,EAAA,CAApCrW,KAAI,CAAA0F,KAASvG,EAAAA,QAAQkwC,MAAM3pC,OAAtC,iBACYvG,EAAAA,QAAQkwC,MAAMyF,SAAAA,EAAAA,EAAAA,OAA1B71C,EAAAA,EAAAA,IAAuE,OAAAmB,EAArC,oCAAlC,kBAGD9B,EAAAA,EAAAA,GAsGK,KAtGL,EAsGK,CArGYa,EAAAA,QAAQkwC,MAAMiF,UAAAA,EAAAA,EAAAA,OAA9Br1C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFV2C,GACAhC,EAAAA,EAAAA,GAAoC,WAAAqF,EAAAA,EAAAA,IAA7BxE,EAAAA,QAAQkwC,MAAMiF,SAAO,IAF7B,qBAKAnwC,GACA7F,EAAAA,EAAAA,GAKK,KALL,EAKK,EAJJuC,EAAAA,EAAAA,IAGEyV,EAAA,CAFAzc,QAASsF,EAAAA,QACT7E,KAAM6E,EAAAA,QAAQkwC,MAAM0F,MAAK,IAAS51C,EAAAA,QAAQkwC,MAAMhS,UAFlD,6BAMel+B,EAAAA,QAAQkwC,MAAM2F,kBAAAA,EAAAA,EAAAA,OAA9B/1C,EAAAA,EAAAA,IAaWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAZViD,GACAtC,EAAAA,EAAAA,GAUK,KAVL,EAUK,EATJA,EAAAA,EAAAA,GAKC,KAJCyK,KAAI,qBAAyB5J,EAAAA,QAAQkwC,MAAM4F,UAC5Cj8C,OAAO,SACPgQ,IAAI,aAHL,QAIK7J,EAAAA,QAAQkwC,MAAM4F,WAAS,EAAA7wC,GAEnBjF,EAAAA,QAAQkwC,MAAM2F,iBAAmB71C,EAAAA,QAAQkwC,MAAM4F,YAAAA,EAAAA,EAAAA,OAAxDh2C,EAAAA,EAAAA,IAEC,IAAAgC,EAFkE,MACjE0C,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQkwC,MAAM2F,iBAAkB,IAAC,KADtC,kBATF,qBAegB71C,EAAAA,QAAQkwC,MAAM6F,YAAAA,EAAAA,EAAAA,OAA9Bj2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFV2G,GACAhG,EAAAA,EAAAA,GAA6E,YAAzEuC,EAAAA,EAAAA,IAAoEyV,EAAA,CAApDzc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQkwC,MAAM6F,WAAvD,8BAFL,qBAKgB/1C,EAAAA,QAAQkwC,MAAM8F,kBAAAA,EAAAA,EAAAA,OAA9Bl2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFVkM,GACAvL,EAAAA,EAAAA,GAA4C,WAAAqF,EAAAA,EAAAA,IAArCxE,EAAAA,QAAQkwC,MAAM8F,iBAAe,IAFrC,qBAKgBh2C,EAAAA,QAAQkwC,MAAM11C,WAAAA,EAAAA,EAAAA,OAA9BsF,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFV8G,GACAnG,EAAAA,EAAAA,GAA4E,YAAxEuC,EAAAA,EAAAA,IAAmEyV,EAAA,CAAnDzc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQkwC,MAAM11C,UAAvD,8BAFL,qBAKgBwF,EAAAA,QAAQkwC,MAAM/pB,QAAAA,EAAAA,EAAAA,OAA9BrmB,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFVoM,GACAzL,EAAAA,EAAAA,GAAkC,WAAAqF,EAAAA,EAAAA,IAA3BxE,EAAAA,QAAQkwC,MAAM/pB,OAAK,IAF3B,qBAKgBnmB,EAAAA,QAAQkwC,MAAMtmB,UAAAA,EAAAA,EAAAA,KAAAA,IAC7B9pB,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAAuY,EAAAA,EAAAA,IAHiB/W,EAAAA,QAAQkwC,MAAMtmB,SAAzBA,K,6BAAwCA,GAAO,CAC/DkD,GACA3tB,EAAAA,EAAAA,GAAsB,WAAAqF,EAAAA,EAAAA,IAAfolB,GAAO,IAFiD,OAAhE,sBAMe5pB,EAAAA,QAAQkwC,MAAM+F,WAAAA,EAAAA,EAAAA,OAA9Bn2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFV+G,GACApG,EAAAA,EAAAA,GAAqC,WAAAqF,EAAAA,EAAAA,IAA9BxE,EAAAA,QAAQkwC,MAAM+F,UAAQ,IAF9B,qBAKgBj2C,EAAAA,QAAQkwC,MAAMgG,SAAAA,EAAAA,EAAAA,OAA9Bp2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFVmX,EACAtK,GAFD,qBAKgBrL,EAAAA,QAAQkwC,MAAMiG,MAAAA,EAAAA,EAAAA,OAA9Br2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,GAAA,CAFVgtB,EACAuB,GAFD,qBAKgB/sB,EAAAA,QAAQkwC,MAAMkG,OAAAA,EAAAA,EAAAA,OAA9Bt2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAA,CAFVoX,GACAzW,EAAAA,EAAAA,GAAwE,YAApEuC,EAAAA,EAAAA,IAA+DyV,EAAA,CAA/Czc,QAASsF,EAAAA,QAAU7E,KAAM6E,EAAAA,QAAQkwC,MAAMkG,MAAvD,8BAFL,qBAKgBp2C,EAAAA,QAAQkwC,MAAMpQ,SAAAA,EAAAA,EAAAA,OAA9BhgC,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAA,CAFVmwB,EACA9Y,GAFD,qBAKgB7V,EAAAA,QAAQkwC,MAAMmG,SAAAA,EAAAA,EAAAA,OAA9Bv2C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAA,CAFVkH,GACAvG,EAAAA,EAAAA,GAAmC,WAAAqF,EAAAA,EAAAA,IAA5BxE,EAAAA,QAAQkwC,MAAMmG,QAAM,IAF5B,qBAKgBr2C,EAAAA,QAAQkwC,MAAMoG,SAAAA,EAAAA,EAAAA,OAA9Bx2C,EAAAA,EAAAA,IAKWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAA,CAJV8M,GACAnM,EAAAA,EAAAA,GAEK,6BADDa,EAAAA,QAAQkwC,MAAMoG,QAAS,IAAC,IAAAn3C,EAAAA,EAAAA,GAAwC,SAArC,KAACqF,EAAAA,EAAAA,IAAGxE,EAAAA,QAAQkwC,MAAMqG,aAAc,IAAC,MAHjE,qBAOgBv2C,EAAAA,QAAQkwC,MAAMsG,YAAAA,EAAAA,EAAAA,OAA9B12C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAA,CAFVmH,GACAxG,EAAAA,EAAAA,GAAkD,WAAAqF,EAAAA,EAAAA,IAA3CxE,EAAAA,WAAWA,EAAAA,QAAQkwC,MAAMsG,YAAS,IAF1C,qBAKgBx2C,EAAAA,QAAQkwC,MAAMuG,OAAAA,EAAAA,EAAAA,OAA9B32C,EAAAA,EAAAA,IAGWwE,EAAAA,GAAA,CAAA9F,IAAAA,IAAA,CAFV+M,GACApM,EAAAA,EAAAA,GAAiD,WAAAqF,EAAAA,EAAAA,IAA1CxE,EAAAA,WAAWA,EAAAA,QAAQkwC,MAAMwG,WAAQ,IAFzC,wB,iEExGH,MA2BMC,EAAU,4BAGVC,EAAa,qCAIbC,EAAiB,gCAqLjBC,EAAa,CAClB,OACA,YACA,UACA,WACA,aACA,SACA,YACA,gBACA,aAwBD,I,mBC7OA,SAASC,EAAoBC,GAE5B,OADwBC,IAAaD,GACtB12B,QAAQ,IAAK,MAC5B,CAqCD,I,4BCvCA42B,IAAAA,UAAAA,UAAgC,SAAmB7uC,GAClDA,EAAM8uC,UAAW,EAEZ9uC,EAAM+uC,SACV/uC,EAAM+uC,OAAS,QACf/uC,EAAMmC,IAAM,UAAYnC,EAAMmC,IAC9BnC,EAAM8uC,UAAW,GAGG,OAAjB9uC,EAAM+uC,SACT/uC,EAAM+uC,OAAS,QACf/uC,EAAMmC,IAAM,QAAUnC,EAAMmC,IAC5BnC,EAAM8uC,UAAW,GAGG,YAAjB9uC,EAAM+uC,QAAyB,YAAYp1B,KAAK3Z,EAAMmC,OACzDnC,EAAMmC,IAAM,UAAYnC,EAAMmC,IAE/B,EAED,MAAM6sC,EAAUH,MAAYI,KAAKA,GAAMA,KAAK,SAAS,GAG/CC,EAAgB,CACrB,OACA,MACA,OACA,MACA,OACA,MACA,MACA,QACA,SACA,YACA,UACA,MACA,SACA,UAGD,IAAK,MAAMH,KAAUG,EACpBF,EAAQ/kC,IAAI8kC,EAAS,IAAK,SAuB3B,SAASI,EAAahtC,GACrB,MAAO,CACNitC,MAAOjtC,EAAIkW,MACXg3B,IAAKltC,EAAImtC,UACTxlC,KAAM3H,EAAIA,IAEX,C,aChFD,MAAMotC,E,MAASC,KCDf,MAAMC,EAAa,sBA6BnB,ICjBA,EATA,SAAyBz1B,EAASC,GACjC,OACED,EAAEo1B,OAASn1B,EAAEm1B,OAASn1B,EAAEm1B,MAAQp1B,EAAEq1B,KAClCr1B,EAAEo1B,MAAQn1B,EAAEo1B,KAAOp1B,EAAEo1B,KAAOr1B,EAAEq1B,KAC9Bp1B,EAAEm1B,OAASp1B,EAAEo1B,OAASp1B,EAAEo1B,MAAQn1B,EAAEo1B,KAClCp1B,EAAEm1B,MAAQp1B,EAAEq1B,KAAOr1B,EAAEq1B,KAAOp1B,EAAEo1B,GAEhC,ECwBD,SAASK,EAAU11B,EAASC,GAC3B,OAAOD,EAAEo1B,MAAQn1B,EAAEm1B,OAASn1B,EAAEo1B,IAAMr1B,EAAEq1B,GACtC,CA4CD,I,41rCCrEA,OAAej4C,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,oBACN2G,MAAO,CACNiQ,KAAM,CAAC9W,KAAM9C,OAAuCgJ,UAAU,GAC9DtI,QAAS,CAACoC,KAAM9C,OAAmCgJ,UAAU,IAE9DioB,MAAO,CAAC,uBACR9pB,MAAK,CAACwC,GAAO,KAACnF,MAUN,CACNi7C,WAViBnkC,EAAAA,EAAAA,KAAS,IACnB3R,EAAMiQ,KAAK9Y,MAAQ,mBAAqB,mBAU/CwG,QAPe,KACfqC,EAAMiQ,KAAK9Y,OAAS6I,EAAMiQ,KAAK9Y,MAC/B0D,EAAK,sBAAuBmF,EAAMiQ,KAAMjQ,EAAMjJ,QAA9C,M,UCpBH,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,4BDH1C,YAAT+G,EAAAA,KAAK3E,OAAI,WADhByE,EAAAA,EAAAA,IAKE,U,MAHAb,OAAK,2CAAA+V,OAA+ChV,EAAAA,KAAK3G,SACzD,aAAY2G,EAAAA,UACZH,QAAK,Y,QAAEG,EAAAA,SAAAA,EAAAA,WAAAA,KAJT,2B,cEAMf,MAAM,gB,cAOb,GAAeQ,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,sBACN2G,MAAO,CACNzE,KAAM,CAACpC,KAAMiN,OAAQ/G,UAAU,IAEhC7B,MAAMwC,IAGE,CACN+1C,aAHmBjkC,EAAAA,EAAAA,GAAa9R,EAAMzE,UCPzC,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,wCDJ1DqC,EAAAA,EAAAA,IAAqD,OAArD,EAA2B,KAAC0E,EAAAA,EAAAA,IAAGxE,EAAAA,aAAc,IAAC,E,yBEe/C,GAAeP,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,gBACN2G,MAAO,CACNpI,QAASyO,QAEV7I,MAAMwC,IAQE,CACNqoB,gBARwBrsB,IACxBwW,EAAAA,EAAAA,KAAc,6BAA8B,CAC3CxW,MAAOA,EACPpE,QAASoI,EAAMpI,SAFhB,MChBH,GAFiC,OAAgB,EAAQ,CAAC,CAAC,S,wCDJ1DgG,EAAAA,EAAAA,IAQQ,QAPPb,MAAM,iBACN8T,IAAI,OACJ7T,KAAK,SACL4T,SAAS,IACRjT,QAAK,sB,QAAUG,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,cAC9B6lC,cAAW,sB,QAAU7lC,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,eANtC,EAOED,EAAAA,EAAAA,IACDC,EAAAA,OAAA,YARD,G,eEgBD,MAAMk4C,EAAsB,mCA2M5B,MAxHA,SAAe/8C,EAAclC,EAAyByB,GAErD,MAAMy9C,Eb8HP,SAAiBh9C,GAChB,OA5LD,SAAoBA,GACnB,MAAMyrB,EAAwB,GAC9B,IAKIwxB,EACHC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAdGpB,EAAQ,EACR11B,EAAW,EAef,MAAM+2B,EAAa,KAClBT,GAAO,EACPC,OAAYpzB,EACZqzB,OAAUrzB,EACVszB,OAAWtzB,EACXuzB,OAAavzB,EACbwzB,GAAS,EACTC,GAAY,EACZC,GAAgB,EAChBC,GAAY,CAAZ,EAGDC,IAKA,MAAMC,EAAe,KAGpB,MAGMC,EAHW79C,EAAK8B,MAAMw6C,EAAO11B,GAGJzB,QAAQu2B,EAAgB,KAEvD,GAAImC,EAAcr/C,OAAQ,CAEzB,MAAMs/C,EAAgBryB,EAAOjtB,OAASitB,EAAOA,EAAOjtB,OAAS,GAAG+9C,IAAM,EAEtE9wB,EAAOttB,KAAK,CACX++C,OACAC,YACAC,UACAC,WACAC,aACAC,SACAC,YACAC,gBACAC,YACA19C,KAAM69C,EACNvB,MAAOwB,EACPvB,IAAKuB,EAAgBD,EAAcr/C,QAEpC,CAGD89C,EAAQ11B,EAAW,CAAnB,EAOD,KAAOA,EAAW5mB,EAAKxB,QAAQ,CAC9B,OAAQwB,EAAK4mB,IACZ,IA9GW,IA+GVg3B,IACAD,IACA,MAMD,IA1HU,IA2HTC,IACAV,GAAQA,EACR,MAED,IA9HW,IA+HVU,IAGAX,EAAaj9C,EAAK8B,MAAM8kB,EAAW,GAAG1Z,MAAMsuC,GAExCyB,GACHE,EAAYhwC,OAAO8vC,EAAW,IAE1BA,EAAW,KACdG,EAAUjwC,OAAO8vC,EAAW,KAK7Br2B,GAAYq2B,EAAW,GAAGz+C,OAC1B89C,EAAQ11B,EAAW,IAGnBu2B,OAAYpzB,EACZqzB,OAAUrzB,GAGX,MAED,IAtJe,IAuJd6zB,IAEAX,EAAaj9C,EAAK8B,MAAM8kB,EAAW,GAAG1Z,MAAMuuC,GAExCwB,GACHI,EAAWJ,EAAW,GAAGc,cAErBd,EAAW,KACdK,EAAaL,EAAW,GAAGc,eAK5Bn3B,GAAYq2B,EAAW,GAAGz+C,OAC1B89C,EAAQ11B,EAAW,IAGnBy2B,OAAWtzB,EACXuzB,OAAavzB,GAGd,MAED,IA5Ka,IA4KC,CACb6zB,IACA,MAAMI,EAAMZ,EACZA,EAAUD,EACVA,EAAYa,EACZ,KACA,CAED,IAnLY,IAoLXJ,IACAL,GAAUA,EACV,MAED,IAvLe,IAwLdK,IACAJ,GAAaA,EACb,MAED,IA3LmB,IA4LlBI,IACAH,GAAiBA,EACjB,MAED,IA/Le,IAgMdG,IACAF,GAAaA,EAKf92B,GAAY,CACZ,CAKD,OAFAg3B,IAEOnyB,CACP,CAgBCwyB,CAAWj+C,GAGTlB,QAAO,CAACo/C,EAAqBC,KAC7B,GAAID,EAAK1/C,OAAQ,CAChB,MAAM4/C,EAAYF,EAAKA,EAAK1/C,OAAS,GAErC,GAAIm9C,EAAWtB,OAAOh3C,GAAQ86C,EAAK96C,KAAS+6C,EAAU/6C,KAGrD,OAFA+6C,EAAUp+C,MAAQm+C,EAAKn+C,KACvBo+C,EAAU7B,KAAO4B,EAAKn+C,KAAKxB,OACpB0/C,CAER,CAED,OAAOA,EAAKv3B,OAAO,CAACw3B,GAApB,GACE,GAEL,CajJuBF,CAAWj+C,GAC5Bm6C,EAAY6C,EAAevgD,KAAK4hD,GAAaA,EAASr+C,OAAMF,KAAK,IASjEw+C,EZ1FP,SAAsBt+C,EAAcu+C,EAA2BC,GAK9D,MAAMC,EAAkBD,EAAU/hD,IAAIm/C,GAAqB97C,KAAK,IAC1D4+C,EAAuBH,EAAgB9hD,IAAIm/C,GAAqB97C,KAAK,IAErE6+C,EAAgB,IAAIC,OADF,aAAYH,QAAsBC,YACT,KAE3CjzB,EAAwB,GAC9B,IAAIve,EAEJ,GAGCA,EAAQyxC,EAAcE,KAAK7+C,GAEvBkN,GACHue,EAAOttB,KAAK,CACXm+C,MAAOpvC,EAAMqY,MAAQrY,EAAM,GAAG1O,OAAS0O,EAAM,GAAG1O,OAChD+9C,IAAKrvC,EAAMqY,MAAQrY,EAAM,GAAG1O,OAC5BG,QAASuO,EAAM,WAGTA,GAET,OAAOue,CACP,CY8DqBqzB,CAAa3E,EAJV56C,EAAUA,EAAQC,cAAcC,UAAY,CAAC,IAAK,KACxDF,EACfA,EAAQC,cAAc81C,QAAQK,QAAQl5C,KAAKsiD,GAASA,EAAK5J,SACzD,CAAC,IAAK,IAAK,IAAK,MAEb6J,EXxDA,SAAmBh/C,GACzB,MAAMi/C,EAAU/C,EAAQhvC,MAAMlN,GAE9B,OAAKi/C,EAIEA,EAAQxiD,IAAI4/C,GAHX,EAIR,CWgDkB6C,CAAU/E,GACtBgF,EVzGP,SAAmBn/C,GAClB,MAAMyrB,EAAsB,GAC5B,IAAIve,EAEJ,KAAQA,EAAQuvC,EAAOoC,KAAK7+C,IAC3ByrB,EAAOttB,KAAK,CACXm+C,MAAOpvC,EAAMqY,MACbg3B,IAAKrvC,EAAMqY,MAAQrY,EAAM,GAAG1O,OAC5B4gD,MAAOlyC,EAAM,KAIf,OAAOue,CACP,CU4FmB4zB,CAAUlF,GACvBmF,ET3GP,SAAmBt/C,EAAcu/C,GAChC,MAAM9zB,EAAqB,GAG3B,GAAqB,IAAjB8zB,EAAM/gD,OACT,OAAOitB,EAGR,IAAIve,EAEJ,KAAQA,EAAQyvC,EAAWkC,KAAK7+C,IAC3Bu/C,EAAM93B,QAAQva,EAAM,KAAO,GAC9Bue,EAAOttB,KAAK,CACXm+C,MAAOpvC,EAAMqY,MACbg3B,IAAKrvC,EAAMqY,MAAQrY,EAAM,GAAG1O,OAC5B4M,KAAM8B,EAAM,KAKf,OAAOue,CACP,CSsFkB+zB,CAAUrF,EAAWr8C,GAAUA,EAAQkpB,OAAc,IASvE,OP3ED,SACCy4B,EACAzC,EACA7C,GAiBA,MAAMuF,EQ/DP,SAAcC,EAAyB3/C,GACtC,IAAI4mB,EAAW,EAKf,MAAM6E,EAASk0B,EAAgB7gD,QAAe,CAACC,EAAK6gD,KAC/CA,EAAYtD,MAAQ11B,GACvB7nB,EAAIZ,KAAK,CACRm+C,MAAO11B,EACP21B,IAAKqD,EAAYtD,QAInB11B,EAAWg5B,EAAYrD,IAChBx9C,IACL,IAUH,OAPI6nB,EAAW5mB,EAAKxB,QACnBitB,EAAOttB,KAAK,CACXm+C,MAAO11B,EACP21B,IAAKv8C,EAAKxB,SAILitB,CACP,CRoCeo0B,CAdfJ,EAAQA,EAAMx4B,KAAK21B,GAAW99C,QAAoB,CAACo/C,EAAMC,IACnCD,EAAK4B,MAAMC,GAAMC,EAAgBD,EAAG5B,KAGjDD,EAGDA,EAAKv3B,OAAO,CAACw3B,KAClB,IAMwBhE,GAI3B,MAH8B,IAAIsF,KAAUC,GAAQz4B,KAAK21B,GAGzCngD,KAAK8jB,IACpBA,EAAK0/B,UAAYjD,EACft7C,QAAQ28C,GAAa2B,EAAgBz/B,EAAM89B,KAC3C5hD,KAAK4hD,GAjDT,SAAgB6B,EAAgB7B,GAC/B,MAAM8B,EAAY9B,EAAS/B,MACrBA,EAAQn6C,KAAK+H,IAAIm0C,EAAS/B,MAAO4D,EAAS5D,OAC1CC,EAAMp6C,KAAK8H,IAAIo0C,EAAS9B,IAAK2D,EAAS3D,KACtCv8C,EAAOq+C,EAASr+C,KAAK8B,MAAMw6C,EAAQ6D,EAAW5D,EAAM4D,GAE1D,OAAO/iD,OAAOuP,OAAO,CAAC,EAAG0xC,EAAU,CAAC/B,QAAOC,MAAKv8C,QAChD,CA0CqB2M,CAAO4T,EAAM89B,KAE1B99B,IAER,CO4CO6/B,CAPQ9B,EACb33B,OAAOq4B,GACPr4B,OAAOw4B,GACPx4B,OAAO24B,GAIWtC,EAAgB7C,GAAW19C,KAAKyjD,IACnD,MAAMD,EAAYC,EAASD,UAAUxjD,KAAK4hD,GAvF5C,SAAwBA,GACvB,MAAMgC,EAAoB,GAEtBhC,EAASnB,MACZmD,EAAQliD,KAAK,iBAGa4rB,IAAvBs0B,EAASlB,WACZkD,EAAQliD,KAAK,SAAWkgD,EAASlB,gBAGTpzB,IAArBs0B,EAASjB,SACZiD,EAAQliD,KAAK,SAAWkgD,EAASjB,SAG9BiB,EAASd,QACZ8C,EAAQliD,KAAK,cAGVkgD,EAASb,WACZ6C,EAAQliD,KAAK,iBAGVkgD,EAASZ,eACZ4C,EAAQliD,KAAK,qBAGVkgD,EAASX,WACZ2C,EAAQliD,KAAK,iBAGd,MAAM4K,EAGF,CACHjF,WAAOimB,EACP/hB,WAAO+hB,GAGR,IAAIu2B,GAAU,EAkBd,OAhBID,EAAQ7hD,OAAS,IACpB8hD,GAAU,EACVv3C,EAAKjF,MAAQu8C,GAGVhC,EAAShB,WACZiD,GAAU,EACVv3C,EAAKf,MAAQ,CACZu4C,MAAQ,IAAGlC,EAAShB,YAGjBgB,EAASf,aACZv0C,EAAKf,MAAM,oBAAuB,IAAGq2C,EAASf,eAIzCgD,GAAU98B,EAAAA,EAAAA,GAAc,OAAQza,EAAMs1C,EAASr+C,MAAQq+C,EAASr+C,IACvE,CA6BwDwgD,CAAenC,KAGtE,GAAI6B,EAASlpC,KAAM,CAClB,MAAMhZ,EACLF,GACAA,EAAQG,UACRH,EAAQG,SAAS00B,MAAMotB,GAAMA,EAAE/oC,OAASkpC,EAASlpC,OAC5CA,GAAOwM,EAAAA,EAAAA,GACZ,IACA,CACC/U,KAAMyxC,EAASlpC,KACfY,IAAK5Z,EAAU,KAAO,OACtBU,OAAQ,SACRgQ,IAAK,YAENuxC,GAGD,IAAKjiD,EACJ,OAAOgZ,EAGR,MAAMypC,EAAU,CAACzpC,GAmBjB,OAjBIhZ,EAAQsE,KAAO,GAClBm+C,EAAQtiD,MACPqlB,EAAAA,EAAAA,GAAck9B,EAAqB,CAClCp+C,KAAMtE,EAAQsE,QAKjBm+C,EAAQtiD,MACPqlB,EAAAA,EAAAA,GAAcm9B,EAAmB,CAChC3pC,KAAMhZ,EACNF,QAASA,MAMJ0lB,EAAAA,EAAAA,GACN,OACA,CACC5L,IAAK,QAEN6oC,EAED,CAAM,GAAIP,EAASvhD,QACnB,OAAO6kB,EAAAA,EAAAA,GACNo9B,EACA,CACCjiD,QAASuhD,EAASvhD,SAEnB,CACCQ,QAAS,IAAM8gD,IAGX,GAAIC,EAASd,MAAO,CAC1B,MAAMyB,EAAwBX,EAASd,MAAMj6B,QAAQ43B,EAAqB,IACpE7iC,EAAQ2K,EAASg8B,GAEnB,UAASh8B,EAASg8B,KACnB,KAEH,OAAOr9B,EAAAA,EAAAA,GACN,OACA,CACC1f,MAAO,CAAC,SACRC,KAAM,MACN,aAAcmW,EACdA,MAAOA,GAER+lC,EAED,CAAM,OAAIC,EAAS90C,MACZoY,EAAAA,EAAAA,GACNzI,EAAAA,EACA,CACCrV,KAAM,CACL0F,KAAM80C,EAAS90C,MAEhBwM,IAAK,QAEN,CACCzY,QAAS,IAAM8gD,IAKXA,CAAP,GAED,EErND,GCAe37C,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,gBACN0gD,YAAY,EACZ/5C,MAAO,CACN/G,KAAMoN,OACNtP,QAAS,CAACoC,KAAM9C,OAA4CgJ,UAAU,GACtE7G,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,IAE9D26C,OAAOC,GACC1jC,OACkB,IAAjB0jC,EAAQhhD,KAAuBghD,EAAQhhD,KAAOghD,EAAQljD,QAAQkC,KACrEghD,EAAQljD,QACRkjD,EAAQzhD,U,+HCQX,GAAe+E,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,WACN2G,MAAO,CACNrB,KAAM,CAELxF,KAAM9C,OACNgJ,UAAU,GAEX4H,OAAQ7G,QACR85C,QAAS,CACR/gD,KAAM+G,SACNb,UAAU,GAEXzH,QAAS,CAACuB,KAAM9C,OAAgCgJ,UAAU,GAC1D7G,QAAS,CAACW,KAAM9C,OAAmCgJ,UAAU,IAE9D7B,MAAMwC,IAiCE,CACN2kB,MAjCYhT,EAAAA,EAAAA,KAAS,IAEjB3R,EAAMrB,KAAKslB,MACPjkB,EAAMrB,KAAKslB,MAAM,GAGlBjkB,EAAMrB,KAAKgmB,OA4BlBw1B,WAxBiBxoC,EAAAA,EAAAA,KAAS,ICnD7B,CAAgByoC,IACf,IAAIxe,EAAO,EAEX,IAAK,IAAIpgC,EAAI,EAAGA,EAAI4+C,EAAI3iD,OAAQ+D,IAC/BogC,GAAQwe,EAAIC,WAAW7+C,GAQxB,MAAO,UAAY,EAAKogC,EAAO,IAAKplB,UAZrC,EDmDmC8jC,CAAWt6C,EAAMrB,KAAK0F,QAyBtDk2C,MAvBa,IACTv6C,EAAMk6C,QAEFl6C,EAAMk6C,QAAQl6C,EAAMrB,MAGrB,KAkBP0pB,gBAfwBrsB,IACxBwW,EAAAA,EAAAA,KAAc,mBAAoB,CACjCxW,MAAOA,EACP2C,KAAMqB,EAAMrB,KACZnG,QAASwH,EAAMxH,QACfZ,QAASoI,EAAMpI,SAJhB,EAeAf,OAPagJ,EAAAA,EAAAA,UEjEhB,GAFiC,E,QAAA,GAAgB,EAAQ,CAAC,CAAC,S,wCFJ1DjC,EAAAA,EAAAA,IAQC,QARD,QAQC,CAPCb,MAAK,UAAae,EAAAA,WAAYA,EAAAA,MAAMwC,MAAMoP,SAAS6Z,cAAY,CAAAtiB,OAAYnJ,EAAAA,SAC3E,YAAWA,EAAAA,KAAKuG,KACjBrH,KAAK,WACLw9C,EAAAA,EAAAA,IAAM18C,EAAmC,QAA5B,CAAA28C,WAAgB38C,EAAAA,OAAK,KACjCH,QAAK,sB,QAAUG,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,cAC9B6lC,cAAW,sB,QAAU7lC,EAAAA,iBAAAA,EAAAA,mBAAAA,IAAe,gBANtC,EAOED,EAAAA,EAAAA,IAAsCC,EAAAA,OAAA,cAAtC,IAAsC,mBAA7BA,EAAAA,OAAIwE,EAAAA,EAAAA,IAAMxE,EAAAA,KAAKuG,MAAI,OAP9B,K,OGAGq2C,EAA2B,CAAC,EAGhC,SAAS3kD,EAAoB4kD,GAE5B,IAAIC,EAAeF,EAAyBC,GAC5C,QAAqB33B,IAAjB43B,EACH,OAAOA,EAAapkD,QAGrB,IAAID,EAASmkD,EAAyBC,GAAY,CAGjDnkD,QAAS,CAAC,GAOX,OAHAqkD,EAAoBF,GAAUz0C,KAAK3P,EAAOC,QAASD,EAAQA,EAAOC,QAAST,GAGpEQ,EAAOC,OACf,CAGAT,EAAoB69B,EAAIinB,EpNzBpBplD,EAAW,GACfM,EAAoB+kD,EAAI,CAACp2B,EAAQq2B,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS3/C,EAAI,EAAGA,EAAI/F,EAASgC,OAAQ+D,IAAK,CACrCu/C,EAAWtlD,EAAS+F,GAAG,GACvBw/C,EAAKvlD,EAAS+F,GAAG,GACjBy/C,EAAWxlD,EAAS+F,GAAG,GAE3B,IAJA,IAGI4/C,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAAStjD,OAAQ4jD,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAa5kD,OAAOD,KAAKL,EAAoB+kD,GAAGxH,OAAOh3C,GAASvG,EAAoB+kD,EAAEx+C,GAAKy+C,EAASM,MAC9IN,EAASp3B,OAAO03B,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACb3lD,EAASkuB,OAAOnoB,IAAK,GACrB,IAAIuqC,EAAIiV,SACEh4B,IAAN+iB,IAAiBrhB,EAASqhB,EAC/B,CACD,CACA,OAAOrhB,CArBP,CAJCu2B,EAAWA,GAAY,EACvB,IAAI,IAAIz/C,EAAI/F,EAASgC,OAAQ+D,EAAI,GAAK/F,EAAS+F,EAAI,GAAG,GAAKy/C,EAAUz/C,IAAK/F,EAAS+F,GAAK/F,EAAS+F,EAAI,GACrG/F,EAAS+F,GAAK,CAACu/C,EAAUC,EAAIC,EAuBjB,EqN3BdllD,EAAoB+8B,EAAKv8B,IACxB,IAAI+kD,EAAS/kD,GAAUA,EAAOglD,WAC7B,IAAOhlD,EAAiB,QACxB,IAAM,EAEP,OADAR,EAAoBylD,EAAEF,EAAQ,CAAEn7B,EAAGm7B,IAC5BA,CAAM,ECLdvlD,EAAoBylD,EAAI,CAAChlD,EAASilD,KACjC,IAAI,IAAIn/C,KAAOm/C,EACX1lD,EAAoBC,EAAEylD,EAAYn/C,KAASvG,EAAoBC,EAAEQ,EAAS8F,IAC5EjG,OAAOqlD,eAAellD,EAAS8F,EAAK,CAAEq/C,YAAY,EAAMnhD,IAAKihD,EAAWn/C,IAE1E,ECNDvG,EAAoB6lD,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAO1mB,MAAQ,IAAIj1B,SAAS,cAAb,EAGhB,CAFE,MAAOjK,GACR,GAAsB,iBAAXsG,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxBxG,EAAoBC,EAAI,CAACojB,EAAK0iC,IAAUzlD,OAAO2P,UAAUC,eAAeC,KAAKkT,EAAK0iC,GCClF/lD,EAAoBgwC,EAAKvvC,IACH,oBAAXu9B,QAA0BA,OAAOgoB,aAC1C1lD,OAAOqlD,eAAellD,EAASu9B,OAAOgoB,YAAa,CAAE7/C,MAAO,WAE7D7F,OAAOqlD,eAAellD,EAAS,aAAc,CAAE0F,OAAO,GAAO,E,MCA9D,IAAI8/C,EAAkB,CACrB,IAAK,GAaNjmD,EAAoB+kD,EAAEO,EAAKY,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4Bn6C,KACvD,IAKI24C,EAAUsB,EALVlB,EAAW/4C,EAAK,GAChBo6C,EAAcp6C,EAAK,GACnBq6C,EAAUr6C,EAAK,GAGIxG,EAAI,EAC3B,GAAGu/C,EAAShC,MAAMljD,GAAgC,IAAxBmmD,EAAgBnmD,KAAa,CACtD,IAAI8kD,KAAYyB,EACZrmD,EAAoBC,EAAEomD,EAAazB,KACrC5kD,EAAoB69B,EAAE+mB,GAAYyB,EAAYzB,IAGhD,GAAG0B,EAAS,IAAI33B,EAAS23B,EAAQtmD,EAClC,CAEA,IADGomD,GAA4BA,EAA2Bn6C,GACrDxG,EAAIu/C,EAAStjD,OAAQ+D,IACzBygD,EAAUlB,EAASv/C,GAChBzF,EAAoBC,EAAEgmD,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOlmD,EAAoB+kD,EAAEp2B,EAAO,EAGjC43B,EAAqB1nC,KAA4B,sBAAIA,KAA4B,uBAAK,GAC1F0nC,EAAmBr6C,QAAQi6C,EAAqBx6B,KAAK,KAAM,IAC3D46B,EAAmBllD,KAAO8kD,EAAqBx6B,KAAK,KAAM46B,EAAmBllD,KAAKsqB,KAAK46B,G,KC/CvF,IAAIC,EAAsBxmD,EAAoB+kD,OAAE93B,EAAW,CAAC,MAAM,IAAOjtB,EAAoB,MAC7FwmD,EAAsBxmD,EAAoB+kD,EAAEyB,E","sources":["webpack://thelounge/webpack/runtime/chunk loaded","webpack://thelounge/./client/components/MessageTypes/ sync nonrecursive \\.vue$","webpack://thelounge/./client/js/commands/ sync \\.ts$","webpack://thelounge/./client/js/auth.ts","webpack://thelounge/./client/js/commands/collapse.ts","webpack://thelounge/./client/js/commands/expand.ts","webpack://thelounge/./client/js/commands/index.ts","webpack://thelounge/./client/js/commands/join.ts","webpack://thelounge/./client/js/commands/search.ts","webpack://thelounge/./client/js/constants.ts","webpack://thelounge/./client/js/eventbus.ts","webpack://thelounge/./client/js/helpers/distance.ts","webpack://thelounge/./client/js/helpers/friendlysize.ts","webpack://thelounge/./client/js/helpers/isChannelCollapsed.ts","webpack://thelounge/./client/js/helpers/isIgnoredKeybind.ts","webpack://thelounge/./client/js/helpers/localetime.ts","webpack://thelounge/./client/js/localStorage.ts","webpack://thelounge/./client/js/location.ts","webpack://thelounge/./client/components/Windows/SignIn.vue","webpack://thelounge/./client/components/RevealPassword.vue","webpack://thelounge/./client/components/RevealPassword.vue?c069","webpack://thelounge/./client/components/Windows/SignIn.vue?15cf","webpack://thelounge/./client/components/NetworkForm.vue","webpack://thelounge/./client/components/SidebarToggle.vue","webpack://thelounge/./client/components/SidebarToggle.vue?5dae","webpack://thelounge/./client/components/NetworkForm.vue?97fe","webpack://thelounge/./client/components/Windows/Connect.vue","webpack://thelounge/./client/components/Windows/Connect.vue?3910","webpack://thelounge/./client/components/Windows/Settings.vue","webpack://thelounge/./client/components/Settings/Navigation.vue","webpack://thelounge/./client/components/Settings/SettingTabItem.vue","webpack://thelounge/./client/components/Settings/SettingTabItem.vue?8598","webpack://thelounge/./client/components/Settings/Navigation.vue?538b","webpack://thelounge/./client/components/Windows/Settings.vue?b26a","webpack://thelounge/./client/components/Windows/Help.vue","webpack://thelounge/./client/components/VersionChecker.vue","webpack://thelounge/./client/components/VersionChecker.vue?f024","webpack://thelounge/./client/components/Windows/Help.vue?3de4","webpack://thelounge/./client/components/Windows/Changelog.vue","webpack://thelounge/./client/components/Windows/Changelog.vue?eb05","webpack://thelounge/./client/components/Windows/NetworkEdit.vue","webpack://thelounge/./client/components/Windows/NetworkEdit.vue?3546","webpack://thelounge/./client/components/Windows/SearchResults.vue","webpack://thelounge/./client/components/Message.vue","webpack://thelounge/./client/components/LinkPreview.vue","webpack://thelounge/./client/components/LinkPreview.vue?77b7","webpack://thelounge/./client/components/MessageTypes/index.ts","webpack://thelounge/./client/components/Message.vue?dd80","webpack://thelounge/./client/components/MessageSearchForm.vue","webpack://thelounge/./client/components/MessageSearchForm.vue?6f16","webpack://thelounge/./client/components/DateMarker.vue","webpack://thelounge/./client/components/DateMarker.vue?205b","webpack://thelounge/./client/components/Windows/SearchResults.vue?abb7","webpack://thelounge/./client/components/Chat.vue","webpack://thelounge/./client/components/MessageList.vue","webpack://thelounge/./client/components/MessageCondensed.vue","webpack://thelounge/./client/components/MessageCondensed.vue?0c2b","webpack://thelounge/./client/js/clipboard.ts","webpack://thelounge/./client/components/MessageList.vue?f60d","webpack://thelounge/./client/components/ChatInput.vue","webpack://thelounge/./client/js/autocompletion.ts","webpack://thelounge/./client/components/ChatInput.vue?83df","webpack://thelounge/./client/components/ChatUserList.vue","webpack://thelounge/./client/components/ChatUserList.vue?ef74","webpack://thelounge/./client/components/Special/ListBans.vue","webpack://thelounge/./client/components/Special/ListBans.vue?e125","webpack://thelounge/./client/components/Special/ListInvites.vue","webpack://thelounge/./client/components/Special/ListInvites.vue?3ace","webpack://thelounge/./client/components/Special/ListChannels.vue","webpack://thelounge/./client/components/Special/ListChannels.vue?727e","webpack://thelounge/./client/components/Special/ListIgnored.vue","webpack://thelounge/./client/components/Special/ListIgnored.vue?78d6","webpack://thelounge/./client/components/Chat.vue?9f2a","webpack://thelounge/./client/components/RoutedChat.vue","webpack://thelounge/./client/components/RoutedChat.vue?f310","webpack://thelounge/./client/components/Settings/Appearance.vue","webpack://thelounge/./client/components/Settings/Appearance.vue?aba1","webpack://thelounge/./client/components/Settings/General.vue","webpack://thelounge/./client/components/Settings/General.vue?e603","webpack://thelounge/./client/components/Settings/Account.vue","webpack://thelounge/./client/components/Session.vue","webpack://thelounge/./client/components/Session.vue?1e0d","webpack://thelounge/./client/components/Settings/Account.vue?8037","webpack://thelounge/./client/components/Settings/Notifications.vue","webpack://thelounge/./client/components/Settings/Notifications.vue?6626","webpack://thelounge/./client/js/router.ts","webpack://thelounge/./client/js/socket.ts","webpack://thelounge/./client/js/settings.ts","webpack://thelounge/./client/js/store-settings.ts","webpack://thelounge/./client/js/store.ts","webpack://thelounge/./client/js/upload.ts","webpack://thelounge/./client/js/socket-events/connection.ts","webpack://thelounge/./client/js/socket-events/auth.ts","webpack://thelounge/./client/js/socket-events/init.ts","webpack://thelounge/./client/js/socket-events/commands.ts","webpack://thelounge/./client/js/helpers/parseIrcUri.ts","webpack://thelounge/./client/js/socket-events/join.ts","webpack://thelounge/./client/js/socket-events/more.ts","webpack://thelounge/./client/js/socket-events/msg.ts","webpack://thelounge/./client/js/socket-events/msg_preview.ts","webpack://thelounge/./client/js/socket-events/msg_special.ts","webpack://thelounge/./client/js/socket-events/names.ts","webpack://thelounge/./client/js/socket-events/network.ts","webpack://thelounge/./client/js/socket-events/nick.ts","webpack://thelounge/./client/js/socket-events/open.ts","webpack://thelounge/./client/js/socket-events/part.ts","webpack://thelounge/./client/js/socket-events/quit.ts","webpack://thelounge/./client/js/socket-events/sync_sort.ts","webpack://thelounge/./client/js/socket-events/topic.ts","webpack://thelounge/./client/js/socket-events/users.ts","webpack://thelounge/./client/js/socket-events/sign_out.ts","webpack://thelounge/./client/js/socket-events/sessions_list.ts","webpack://thelounge/./client/js/socket-events/configuration.ts","webpack://thelounge/./client/js/socket-events/changelog.ts","webpack://thelounge/./client/js/socket-events/setting.ts","webpack://thelounge/./client/js/socket-events/history_clear.ts","webpack://thelounge/./client/js/socket-events/mentions.ts","webpack://thelounge/./client/js/socket-events/search.ts","webpack://thelounge/./client/js/socket-events/mute_changed.ts","webpack://thelounge/./client/js/keybinds.ts","webpack://thelounge/./client/js/helpers/listenForTwoFingerSwipes.ts","webpack://thelounge/./client/js/vue.ts","webpack://thelounge/./client/js/webpush.ts","webpack://thelounge/./shared/irc.ts","webpack://thelounge/./client/components/App.vue","webpack://thelounge/./client/components/Sidebar.vue","webpack://thelounge/./client/components/NetworkList.vue","webpack://thelounge/./client/components/Draggable.vue","webpack://thelounge/./client/components/Draggable.vue?a413","webpack://thelounge/./client/components/NetworkLobby.vue","webpack://thelounge/./client/js/helpers/collapseNetwork.ts","webpack://thelounge/./client/js/helpers/roundBadgeNumber.ts","webpack://thelounge/./client/components/ChannelWrapper.vue","webpack://thelounge/./client/components/ChannelWrapper.vue?8bb7","webpack://thelounge/./client/components/NetworkLobby.vue?7d17","webpack://thelounge/./client/components/Channel.vue","webpack://thelounge/./client/js/hooks/use-close-channel.ts","webpack://thelounge/./client/components/Channel.vue?19d6","webpack://thelounge/./client/components/JoinChannel.vue","webpack://thelounge/./client/components/JoinChannel.vue?d18e","webpack://thelounge/./client/components/NetworkList.vue?403b","webpack://thelounge/./client/components/Sidebar.vue?9985","webpack://thelounge/./client/components/ImageViewer.vue","webpack://thelounge/./client/components/ImageViewer.vue?2dfc","webpack://thelounge/./client/js/helpers/contextMenu.ts","webpack://thelounge/./client/components/ContextMenu.vue","webpack://thelounge/./client/components/ContextMenu.vue?fdba","webpack://thelounge/./client/components/ConfirmDialog.vue","webpack://thelounge/./client/components/ConfirmDialog.vue?36a8","webpack://thelounge/./client/components/Mentions.vue","webpack://thelounge/./client/components/Mentions.vue?dcdf","webpack://thelounge/./client/components/App.vue?37fa","webpack://thelounge/./client/components/MessageTypes/away.vue","webpack://thelounge/./client/components/MessageTypes/away.vue?c451","webpack://thelounge/./client/components/MessageTypes/back.vue","webpack://thelounge/./client/components/MessageTypes/back.vue?a43b","webpack://thelounge/./client/components/MessageTypes/chghost.vue","webpack://thelounge/./client/components/MessageTypes/chghost.vue?ab01","webpack://thelounge/./client/components/MessageTypes/ctcp.vue","webpack://thelounge/./client/components/MessageTypes/ctcp.vue?cacf","webpack://thelounge/./client/components/MessageTypes/ctcp_request.vue","webpack://thelounge/./client/components/MessageTypes/ctcp_request.vue?2dcb","webpack://thelounge/./client/components/MessageTypes/error.vue","webpack://thelounge/./client/components/MessageTypes/error.vue?3d38","webpack://thelounge/./client/components/MessageTypes/invite.vue","webpack://thelounge/./client/components/MessageTypes/invite.vue?0d58","webpack://thelounge/./client/components/MessageTypes/join.vue","webpack://thelounge/./client/components/MessageTypes/join.vue?8f48","webpack://thelounge/./client/components/MessageTypes/kick.vue","webpack://thelounge/./client/components/MessageTypes/kick.vue?24a1","webpack://thelounge/./client/components/MessageTypes/mode.vue","webpack://thelounge/./client/components/MessageTypes/mode.vue?86d9","webpack://thelounge/./client/components/MessageTypes/mode_channel.vue","webpack://thelounge/./client/components/MessageTypes/mode_channel.vue?8348","webpack://thelounge/./client/components/MessageTypes/mode_user.vue","webpack://thelounge/./client/components/MessageTypes/mode_user.vue?70f4","webpack://thelounge/./client/components/MessageTypes/monospace_block.vue","webpack://thelounge/./client/components/MessageTypes/monospace_block.vue?5357","webpack://thelounge/./client/components/MessageTypes/nick.vue","webpack://thelounge/./client/components/MessageTypes/nick.vue?d15a","webpack://thelounge/./client/components/MessageTypes/part.vue","webpack://thelounge/./client/components/MessageTypes/part.vue?e2a6","webpack://thelounge/./client/components/MessageTypes/quit.vue","webpack://thelounge/./client/components/MessageTypes/quit.vue?6cc8","webpack://thelounge/./client/components/MessageTypes/raw.vue","webpack://thelounge/./client/components/MessageTypes/raw.vue?56b1","webpack://thelounge/./client/components/MessageTypes/topic.vue","webpack://thelounge/./client/components/MessageTypes/topic.vue?2f75","webpack://thelounge/./client/components/MessageTypes/topic_set_by.vue","webpack://thelounge/./client/components/MessageTypes/topic_set_by.vue?2f65","webpack://thelounge/./client/components/MessageTypes/whois.vue","webpack://thelounge/./client/components/MessageTypes/whois.vue?a6be","webpack://thelounge/./client/js/helpers/ircmessageparser/parseStyle.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findChannels.ts","webpack://thelounge/./shared/linkify.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findEmoji.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findNames.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/anyIntersection.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/merge.ts","webpack://thelounge/./client/components/LinkPreviewToggle.vue","webpack://thelounge/./client/components/LinkPreviewToggle.vue?bfed","webpack://thelounge/./client/components/LinkPreviewFileSize.vue","webpack://thelounge/./client/components/LinkPreviewFileSize.vue?6888","webpack://thelounge/./client/components/InlineChannel.vue","webpack://thelounge/./client/components/InlineChannel.vue?b1e5","webpack://thelounge/./client/js/helpers/parse.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/fill.ts","webpack://thelounge/./client/components/ParsedMessage.vue?11f7","webpack://thelounge/./client/components/ParsedMessage.vue","webpack://thelounge/./client/components/Username.vue","webpack://thelounge/./client/js/helpers/colorClass.ts","webpack://thelounge/./client/components/Username.vue?2f83","webpack://thelounge/webpack/bootstrap","webpack://thelounge/webpack/runtime/compat get default export","webpack://thelounge/webpack/runtime/define property getters","webpack://thelounge/webpack/runtime/global","webpack://thelounge/webpack/runtime/hasOwnProperty shorthand","webpack://thelounge/webpack/runtime/make namespace object","webpack://thelounge/webpack/runtime/jsonp chunk loading","webpack://thelounge/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var map = {\n\t\"./away.vue\": 4509,\n\t\"./back.vue\": 5381,\n\t\"./chghost.vue\": 3089,\n\t\"./ctcp.vue\": 4878,\n\t\"./ctcp_request.vue\": 7052,\n\t\"./error.vue\": 3576,\n\t\"./invite.vue\": 6502,\n\t\"./join.vue\": 1770,\n\t\"./kick.vue\": 2501,\n\t\"./mode.vue\": 7393,\n\t\"./mode_channel.vue\": 1686,\n\t\"./mode_user.vue\": 1267,\n\t\"./monospace_block.vue\": 6258,\n\t\"./nick.vue\": 5169,\n\t\"./part.vue\": 3397,\n\t\"./quit.vue\": 9561,\n\t\"./raw.vue\": 7928,\n\t\"./topic.vue\": 6096,\n\t\"./topic_set_by.vue\": 4886,\n\t\"./whois.vue\": 801\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1039;","var map = {\n\t\"./collapse.ts\": 1329,\n\t\"./expand.ts\": 102,\n\t\"./index.ts\": 3805,\n\t\"./join.ts\": 7301,\n\t\"./search.ts\": 960\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2664;","import storage from \"./localStorage\";\nimport location from \"./location\";\n\nexport default class Auth {\n\tstatic signout() {\n\t\tstorage.clear();\n\t\tlocation.reload();\n\t}\n}\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nfunction input() {\n\tif (!store.state.activeChannel) {\n\t\treturn;\n\t}\n\n\tconst messageIds: number[] = [];\n\n\tfor (const message of store.state.activeChannel.channel.messages) {\n\t\tlet toggled = false;\n\n\t\tfor (const preview of message.previews) {\n\t\t\tif (preview.shown) {\n\t\t\t\tpreview.shown = false;\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (toggled) {\n\t\t\tmessageIds.push(message.id);\n\t\t}\n\t}\n\n\t// Tell the server we're toggling so it remembers at page reload\n\tif (!document.body.classList.contains(\"public\") && messageIds.length > 0) {\n\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\ttarget: store.state.activeChannel?.channel.id,\n\t\t\tmessageIds: messageIds,\n\t\t\tshown: false,\n\t\t});\n\t}\n\n\treturn true;\n}\n\nexport default {input};\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nfunction input() {\n\tif (!store.state.activeChannel) {\n\t\treturn;\n\t}\n\n\tconst messageIds: number[] = [];\n\n\tfor (const message of store.state.activeChannel.channel.messages) {\n\t\tlet toggled = false;\n\n\t\tfor (const preview of message.previews) {\n\t\t\tif (!preview.shown) {\n\t\t\t\tpreview.shown = true;\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (toggled) {\n\t\t\tmessageIds.push(message.id);\n\t\t}\n\t}\n\n\t// Tell the server we're toggling so it remembers at page reload\n\tif (!document.body.classList.contains(\"public\") && messageIds.length > 0) {\n\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\ttarget: store.state.activeChannel?.channel.id,\n\t\t\tmessageIds: messageIds,\n\t\t\tshown: true,\n\t\t});\n\t}\n\n\treturn true;\n}\n\nexport default {input};\n","// Taken from views/index.js\n\n// This creates a version of `require()` in the context of the current\n// directory, so we iterate over its content, which is a map statically built by\n// Webpack.\n// Second argument says it's recursive, third makes sure we only load javascript.\nconst commands = require.context(\"./\", true, /\\.ts$/);\n\nexport default commands.keys().reduce<Record<string, unknown>>((acc, path) => {\n\tconst command = path.substring(2, path.length - 3);\n\n\tif (command === \"index\") {\n\t\treturn acc;\n\t}\n\n\tacc[command] = commands(path).default;\n\n\treturn acc;\n}, {});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nfunction input(args: string[]) {\n\tif (args.length > 0) {\n\t\tlet channels = args[0];\n\n\t\tif (channels.length > 0) {\n\t\t\tconst chanTypes = store.state.activeChannel?.network.serverOptions.CHANTYPES;\n\t\t\tconst channelList = args[0].split(\",\");\n\n\t\t\tif (chanTypes && chanTypes.length > 0) {\n\t\t\t\tfor (let c = 0; c < channelList.length; c++) {\n\t\t\t\t\tif (!chanTypes.includes(channelList[c][0])) {\n\t\t\t\t\t\tchannelList[c] = chanTypes[0] + channelList[c];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchannels = channelList.join(\",\");\n\n\t\t\tconst chan = store.getters.findChannelOnCurrentNetwork(channels);\n\n\t\t\tif (chan) {\n\t\t\t\tswitchToChannel(chan);\n\t\t\t} else {\n\t\t\t\tif (store.state.activeChannel) {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttext: `/join ${channels} ${args.length > 1 ? args[1] : \"\"}`,\n\t\t\t\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} else if (store.state.activeChannel?.channel.type === \"channel\") {\n\t\t// If `/join` command is used without any arguments, re-join current channel\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\ttext: `/join ${store.state.activeChannel.channel.name}`,\n\t\t});\n\n\t\treturn true;\n\t}\n}\n\nexport default {input};\n","import {store} from \"../store\";\nimport {router} from \"../router\";\n\nfunction input(args: string[]) {\n\tif (!store.state.settings.searchEnabled) {\n\t\treturn false;\n\t}\n\n\trouter\n\t\t.push({\n\t\t\tname: \"SearchResults\",\n\t\t\tparams: {\n\t\t\t\tid: store.state.activeChannel?.channel.id,\n\t\t\t},\n\t\t\tquery: {\n\t\t\t\tq: args.join(\" \"),\n\t\t\t},\n\t\t})\n\t\t.catch((e: Error) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(`Failed to push SearchResults route: ${e.message}`);\n\t\t});\n\n\treturn true;\n}\n\nexport default {input};\n","const colorCodeMap = [\n\t[\"00\", \"White\"],\n\t[\"01\", \"Black\"],\n\t[\"02\", \"Blue\"],\n\t[\"03\", \"Green\"],\n\t[\"04\", \"Red\"],\n\t[\"05\", \"Brown\"],\n\t[\"06\", \"Magenta\"],\n\t[\"07\", \"Orange\"],\n\t[\"08\", \"Yellow\"],\n\t[\"09\", \"Light Green\"],\n\t[\"10\", \"Cyan\"],\n\t[\"11\", \"Light Cyan\"],\n\t[\"12\", \"Light Blue\"],\n\t[\"13\", \"Pink\"],\n\t[\"14\", \"Grey\"],\n\t[\"15\", \"Light Grey\"],\n];\n\nconst timeFormats = {\n\tmsgDefault: \"HH:mm\",\n\tmsgWithSeconds: \"HH:mm:ss\",\n\tmsg12h: \"hh:mm A\",\n\tmsg12hWithSeconds: \"hh:mm:ss A\",\n};\n\nexport default {\n\tcolorCodeMap,\n\tcommands: [] as string[],\n\ttimeFormats,\n\t// Same value as media query in CSS that forces sidebars to become overlays\n\tmobileViewportPixels: 768,\n};\n","const events = new Map();\n\nclass EventBus {\n\t/**\n\t * Register an event handler for the given type.\n\t *\n\t * @param  {String} type    Type of event to listen for.\n\t * @param  {Function} handler Function to call in response to given event.\n\t */\n\ton(type: string, handler: (...evt: any[]) => void) {\n\t\tif (events.has(type)) {\n\t\t\tevents.get(type).push(handler);\n\t\t} else {\n\t\t\tevents.set(type, [handler]);\n\t\t}\n\t}\n\n\t/**\n\t * Remove an event handler for the given type.\n\t *\n\t * @param  {String} type    Type of event to unregister `handler` from.\n\t * @param  {Function} handler Handler function to remove.\n\t */\n\toff(type: string, handler: (...evt: any[]) => void) {\n\t\tif (events.has(type)) {\n\t\t\tevents.set(\n\t\t\t\ttype,\n\t\t\t\tevents.get(type).filter((item: (...evt: any[]) => void) => item !== handler)\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Invoke all handlers for the given type.\n\t *\n\t * @param {String} type  The event type to invoke.\n\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler.\n\t */\n\temit(type: string, ...evt: any) {\n\t\tif (events.has(type)) {\n\t\t\tevents\n\t\t\t\t.get(type)\n\t\t\t\t.slice()\n\t\t\t\t.map((handler: (...evts: any[]) => void) => {\n\t\t\t\t\thandler(...evt);\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport default new EventBus();\n","function distance([x1, y1]: [number, number], [x2, y2]: [number, number]) {\n\treturn Math.hypot(x1 - x2, y1 - y2);\n}\n\nexport default distance;\n","const sizes = [\"Bytes\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\"];\n\nexport default (size: number) => {\n\t// Loosely inspired from https://stackoverflow.com/a/18650828/1935861\n\tconst i = size > 0 ? Math.floor(Math.log(size) / Math.log(1024)) : 0;\n\tconst fixedSize = parseFloat((size / Math.pow(1024, i)).toFixed(1));\n\treturn `${fixedSize} ${sizes[i]}`;\n};\n","import {store} from \"../store\";\n\nexport default (network, channel) => {\n\tif (!network.isCollapsed || channel.highlight || channel.type === \"lobby\") {\n\t\treturn false;\n\t}\n\n\tif (store.state.activeChannel && channel === store.state.activeChannel.channel) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n","export default (event: MouseEvent | Mousetrap.ExtendedKeyboardEvent) => {\n\tif (\n\t\t(event.target as HTMLElement).tagName !== \"TEXTAREA\" &&\n\t\t(event.target as HTMLElement).tagName !== \"INPUT\"\n\t) {\n\t\treturn false;\n\t}\n\n\t// If focus is in a textarea, do not handle keybinds if user has typed anything\n\t// This is done to prevent keyboard layout binds conflicting with ours\n\t// For example alt+shift+left on macos selects a word\n\treturn !!(event.target as any).value;\n};\n","import dayjs from \"dayjs\";\n\nexport default (time: Date | number) => dayjs(time).format(\"D MMMM YYYY, HH:mm:ss\");\n","// This is a simple localStorage wrapper because browser can throw errors\n// in different situations, including:\n// - Unable to store data if storage is full\n// - Local storage is blocked if \"third-party cookies and site data\" is disabled\n//\n// For more details, see:\n// https://stackoverflow.com/q/14555347/1935861\n// https://github.com/thelounge/thelounge/issues/2699\n// https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n\nexport default {\n\tset(key: string, value: string) {\n\t\ttry {\n\t\t\twindow.localStorage.setItem(key, value);\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n\tget(key: string) {\n\t\ttry {\n\t\t\treturn window.localStorage.getItem(key);\n\t\t} catch (e) {\n\t\t\t// Return null as if data is not set\n\t\t\treturn null;\n\t\t}\n\t},\n\tremove(key: string) {\n\t\ttry {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n\tclear() {\n\t\ttry {\n\t\t\twindow.localStorage.clear();\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n};\n","// This is a thin wrapper around `window.location`, in order to contain the\n// side-effects. Do not add logic to it as it cannot be tested, only mocked.\nexport default {\n\treload() {\n\t\twindow.location.reload();\n\t},\n};\n","<template>\n\t<div id=\"sign-in\" class=\"window\" role=\"tabpanel\" aria-label=\"Sign-in\">\n\t\t<form class=\"container\" method=\"post\" action=\"\" @submit=\"onSubmit\">\n\t\t\t<img\n\t\t\t\tsrc=\"img/logo-vertical-transparent-bg.svg\"\n\t\t\t\tclass=\"logo\"\n\t\t\t\talt=\"The Lounge\"\n\t\t\t\twidth=\"256\"\n\t\t\t\theight=\"170\"\n\t\t\t/>\n\t\t\t<img\n\t\t\t\tsrc=\"img/logo-vertical-transparent-bg-inverted.svg\"\n\t\t\t\tclass=\"logo-inverted\"\n\t\t\t\talt=\"The Lounge\"\n\t\t\t\twidth=\"256\"\n\t\t\t\theight=\"170\"\n\t\t\t/>\n\n\t\t\t<label for=\"signin-username\">Username</label>\n\t\t\t<input\n\t\t\t\tid=\"signin-username\"\n\t\t\t\tref=\"username\"\n\t\t\t\tclass=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"username\"\n\t\t\t\tautocapitalize=\"none\"\n\t\t\t\tautocorrect=\"off\"\n\t\t\t\tautocomplete=\"username\"\n\t\t\t\t:value=\"getStoredUser()\"\n\t\t\t\trequired\n\t\t\t\tautofocus\n\t\t\t/>\n\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"signin-password\">Password</label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"signin-password\"\n\t\t\t\t\t\tref=\"password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tautocapitalize=\"none\"\n\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"errorShown\" class=\"error\">Authentication failed.</div>\n\n\t\t\t<button :disabled=\"inFlight\" type=\"submit\" class=\"btn\">Sign in</button>\n\t\t</form>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport storage from \"../../js/localStorage\";\nimport socket from \"../../js/socket\";\nimport RevealPassword from \"../RevealPassword.vue\";\nimport {defineComponent, onBeforeUnmount, onMounted, ref} from \"vue\";\n\nexport default defineComponent({\n\tname: \"SignIn\",\n\tcomponents: {\n\t\tRevealPassword,\n\t},\n\tsetup() {\n\t\tconst inFlight = ref(false);\n\t\tconst errorShown = ref(false);\n\n\t\tconst username = ref<HTMLInputElement | null>(null);\n\t\tconst password = ref<HTMLInputElement | null>(null);\n\n\t\tconst onAuthFailed = () => {\n\t\t\tinFlight.value = false;\n\t\t\terrorShown.value = true;\n\t\t};\n\n\t\tconst onSubmit = (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!username.value || !password.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinFlight.value = true;\n\t\t\terrorShown.value = false;\n\n\t\t\tconst values = {\n\t\t\t\tuser: username.value?.value,\n\t\t\t\tpassword: password.value?.value,\n\t\t\t};\n\n\t\t\tstorage.set(\"user\", values.user);\n\n\t\t\tsocket.emit(\"auth:perform\", values);\n\t\t};\n\n\t\tconst getStoredUser = () => {\n\t\t\treturn storage.get(\"user\");\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tsocket.on(\"auth:failed\", onAuthFailed);\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tsocket.off(\"auth:failed\", onAuthFailed);\n\t\t});\n\n\t\treturn {\n\t\t\tinFlight,\n\t\t\terrorShown,\n\t\t\tusername,\n\t\t\tpassword,\n\t\t\tonSubmit,\n\t\t\tgetStoredUser,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div>\n\t\t<slot :is-visible=\"isVisible\" />\n\t\t<span\n\t\t\tref=\"revealButton\"\n\t\t\ttype=\"button\"\n\t\t\t:class=\"[\n\t\t\t\t'reveal-password tooltipped tooltipped-n tooltipped-no-delay',\n\t\t\t\t{'reveal-password-visible': isVisible},\n\t\t\t]\"\n\t\t\t:aria-label=\"isVisible ? 'Hide password' : 'Show password'\"\n\t\t\t@click=\"onClick\"\n\t\t>\n\t\t\t<span :aria-label=\"isVisible ? 'Hide password' : 'Show password'\" />\n\t\t</span>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\n\nexport default defineComponent({\n\tname: \"RevealPassword\",\n\tsetup() {\n\t\tconst isVisible = ref(false);\n\n\t\tconst onClick = () => {\n\t\t\tisVisible.value = !isVisible.value;\n\t\t};\n\n\t\treturn {\n\t\t\tisVisible,\n\t\t\tonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./RevealPassword.vue?vue&type=template&id=5df695c1&ts=true\"\nimport script from \"./RevealPassword.vue?vue&type=script&lang=ts\"\nexport * from \"./RevealPassword.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SignIn.vue?vue&type=template&id=52a7a731&ts=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=ts\"\nexport * from \"./SignIn.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"connect\" class=\"window\" role=\"tabpanel\" aria-label=\"Connect\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<form class=\"container\" method=\"post\" action=\"\" @submit.prevent=\"onSubmit\">\n\t\t\t<h1 class=\"title\">\n\t\t\t\t<template v-if=\"defaults.uuid\">\n\t\t\t\t\t<input v-model=\"defaults.uuid\" type=\"hidden\" name=\"uuid\" />\n\t\t\t\t\tEdit {{ defaults.name }}\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\tConnect\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-if=\"config?.lockNetwork && store?.state.serverConfiguration?.public\"\n\t\t\t\t\t>\n\t\t\t\t\t\tto {{ defaults.name }}\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</h1>\n\t\t\t<template v-if=\"!config?.lockNetwork\">\n\t\t\t\t<h2>Network settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:name\"\n\t\t\t\t\t\tv-model.trim=\"defaults.name\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:host\">Server</label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:host\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.host\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tname=\"host\"\n\t\t\t\t\t\t\taria-label=\"Server address\"\n\t\t\t\t\t\t\tmaxlength=\"255\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span id=\"connect:portseparator\">:</span>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:port\"\n\t\t\t\t\t\t\tv-model=\"defaults.port\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\tmax=\"65535\"\n\t\t\t\t\t\t\tname=\"port\"\n\t\t\t\t\t\t\taria-label=\"Server port\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RevealPassword>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label></label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"defaults.tls\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"tls\"\n\t\t\t\t\t\t\t\t:disabled=\"defaults.hasSTSPolicy\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tUse secure connection (TLS)\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tv-if=\"defaults.hasSTSPolicy\"\n\t\t\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\t\t\taria-label=\"This network has a strict transport security policy, you will be unable to disable TLS\"\n\t\t\t\t\t\t\t\t>🔒 STS</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"defaults.rejectUnauthorized\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"rejectUnauthorized\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tOnly allow trusted certificates\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<h2>Proxy Settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label></label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<label for=\"connect:proxyEnabled\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyEnabled\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyEnabled\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"proxyEnabled\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tEnable Proxy\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"defaults.proxyEnabled\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyHost\">SOCKS Address</label>\n\t\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyHost\"\n\t\t\t\t\t\t\t\tv-model.trim=\"defaults.proxyHost\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\tname=\"proxyHost\"\n\t\t\t\t\t\t\t\taria-label=\"Proxy host\"\n\t\t\t\t\t\t\t\tmaxlength=\"255\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span id=\"connect:proxyPortSeparator\">:</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyPort\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyPort\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\tmax=\"65535\"\n\t\t\t\t\t\t\t\tname=\"proxyPort\"\n\t\t\t\t\t\t\t\taria-label=\"SOCKS port\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyUsername\">Proxy username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:proxyUsername\"\n\t\t\t\t\t\t\tref=\"proxyUsernameInput\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.proxyUsername\"\n\t\t\t\t\t\t\tclass=\"input username\"\n\t\t\t\t\t\t\tname=\"proxyUsername\"\n\t\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t\t\tplaceholder=\"Proxy username\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyPassword\">Proxy password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyPassword\"\n\t\t\t\t\t\t\t\tref=\"proxyPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyPassword\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tplaceholder=\"Proxy password\"\n\t\t\t\t\t\t\t\tname=\"proxyPassword\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"config.lockNetwork && !store.state.serverConfiguration?.public\">\n\t\t\t\t<h2>Network settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:name\"\n\t\t\t\t\t\tv-model.trim=\"defaults.name\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RevealPassword>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<h2>User preferences</h2>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:nick\">Nick</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:nick\"\n\t\t\t\t\tv-model=\"defaults.nick\"\n\t\t\t\t\tclass=\"input nick\"\n\t\t\t\t\tname=\"nick\"\n\t\t\t\t\tpattern=\"[^\\s:!@]+\"\n\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\trequired\n\t\t\t\t\t@input=\"onNickChanged\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<template v-if=\"!config?.useHexIp\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:username\">Username</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:username\"\n\t\t\t\t\t\tref=\"usernameInput\"\n\t\t\t\t\t\tv-model.trim=\"defaults.username\"\n\t\t\t\t\t\tclass=\"input username\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:realname\">Real name</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:realname\"\n\t\t\t\t\tv-model.trim=\"defaults.realname\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tname=\"realname\"\n\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:leaveMessage\">Leave message</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:leaveMessage\"\n\t\t\t\t\tv-model.trim=\"defaults.leaveMessage\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tname=\"leaveMessage\"\n\t\t\t\t\tplaceholder=\"The Lounge - https://thelounge.chat\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<template v-if=\"defaults.uuid && !store.state.serverConfiguration?.public\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:commands\">\n\t\t\t\t\t\tCommands\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"tooltipped tooltipped-ne tooltipped-no-delay\"\n\t\t\t\t\t\t\taria-label=\"One /command per line.\nEach command will be executed in\nthe server tab on new connection\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid=\"connect:commands\"\n\t\t\t\t\t\tref=\"commandsInput\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t:value=\"defaults.commands ? defaults.commands.join('\\n') : ''\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"commands\"\n\t\t\t\t\t\t@input=\"resizeCommandsInput\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"!defaults.uuid\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:channels\">Channels</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:channels\"\n\t\t\t\t\t\tv-model.trim=\"defaults.join\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"join\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"store.state.serverConfiguration?.public\">\n\t\t\t\t<template v-if=\"config?.lockNetwork\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t\t<input v-model=\"displayPasswordField\" type=\"checkbox\" />\n\t\t\t\t\t\t\t\tI have a password\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"displayPasswordField\" class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\t\tref=\"publicPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<h2 id=\"label-auth\">Authentication</h2>\n\t\t\t\t<div class=\"connect-row connect-auth\" role=\"group\" aria-labelledby=\"label-auth\">\n\t\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"!defaults.sasl\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tNo authentication\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"defaults.sasl === 'plain'\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"plain\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('plain')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tUsername + password (SASL PLAIN)\n\t\t\t\t\t</label>\n\t\t\t\t\t<label\n\t\t\t\t\t\tv-if=\"!store.state.serverConfiguration?.public && defaults.tls\"\n\t\t\t\t\t\tclass=\"opt\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"defaults.sasl === 'external'\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"external\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('external')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tClient certificate (SASL EXTERNAL)\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<template v-if=\"defaults.sasl === 'plain'\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:username\">Account</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:saslAccount\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.saslAccount\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tname=\"saslAccount\"\n\t\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:saslPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.saslPassword\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tname=\"saslPassword\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-else-if=\"defaults.sasl === 'external'\" class=\"connect-sasl-external\">\n\t\t\t\t\t<p>The Lounge automatically generates and manages the client certificate.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tOn the IRC server, you will need to tell the services to attach the\n\t\t\t\t\t\tcertificate fingerprint (certfp) to your account, for example:\n\t\t\t\t\t</p>\n\t\t\t\t\t<pre><code>/msg NickServ CERT ADD</code></pre>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" class=\"btn\" :disabled=\"disabled ? true : false\">\n\t\t\t\t\t<template v-if=\"defaults.uuid\">Save network</template>\n\t\t\t\t\t<template v-else>Connect</template>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</template>\n\n<style>\n#connect .connect-auth {\n\tdisplay: block;\n\tmargin-bottom: 10px;\n}\n\n#connect .connect-auth .opt {\n\tdisplay: block;\n\twidth: 100%;\n}\n\n#connect .connect-auth input {\n\tmargin: 3px 10px 0 0;\n}\n\n#connect .connect-sasl-external {\n\tpadding: 10px;\n\tborder-radius: 2px;\n\tbackground-color: #d9edf7;\n\tcolor: #31708f;\n}\n\n#connect .connect-sasl-external pre {\n\tmargin: 0;\n\tuser-select: text;\n}\n</style>\n\n<script lang=\"ts\">\nimport RevealPassword from \"./RevealPassword.vue\";\nimport SidebarToggle from \"./SidebarToggle.vue\";\nimport {defineComponent, nextTick, PropType, ref, watch} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientNetwork} from \"../js/types\";\n\nexport type NetworkFormDefaults = Partial<ClientNetwork> & {\n\tjoin?: string;\n};\n\nexport default defineComponent({\n\tname: \"NetworkForm\",\n\tcomponents: {\n\t\tRevealPassword,\n\t\tSidebarToggle,\n\t},\n\tprops: {\n\t\thandleSubmit: {\n\t\t\ttype: Function as PropType<(network: ClientNetwork) => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaults: {\n\t\t\ttype: Object as PropType<NetworkFormDefaults>,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst config = ref(store.state.serverConfiguration);\n\t\tconst previousUsername = ref(props.defaults?.username);\n\t\tconst displayPasswordField = ref(false);\n\n\t\tconst publicPassword = ref<HTMLInputElement | null>(null);\n\n\t\twatch(displayPasswordField, (newValue) => {\n\t\t\tif (newValue) {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\tpublicPassword.value?.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst commandsInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst resizeCommandsInput = () => {\n\t\t\tif (!commandsInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset height first so it can down size\n\t\t\tcommandsInput.value.style.height = \"\";\n\n\t\t\t// 2 pixels to account for the border\n\t\t\tcommandsInput.value.style.height = `${Math.ceil(\n\t\t\t\tcommandsInput.value.scrollHeight + 2\n\t\t\t)}px`;\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.defaults?.commands,\n\t\t\t() => {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\tresizeCommandsInput();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.defaults?.tls,\n\t\t\t(isSecureChecked) => {\n\t\t\t\tconst ports = [6667, 6697];\n\t\t\t\tconst newPort = isSecureChecked ? 0 : 1;\n\n\t\t\t\t// If you disable TLS and current port is 6697,\n\t\t\t\t// set it to 6667, and vice versa\n\t\t\t\tif (props.defaults?.port === ports[newPort]) {\n\t\t\t\t\tprops.defaults.port = ports[1 - newPort];\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tconst setSaslAuth = (type: string) => {\n\t\t\tif (props.defaults) {\n\t\t\t\tprops.defaults.sasl = type;\n\t\t\t}\n\t\t};\n\n\t\tconst usernameInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst onNickChanged = (event: Event) => {\n\t\t\tif (!usernameInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst usernameRef = usernameInput.value;\n\n\t\t\tif (!usernameRef.value || usernameRef.value === previousUsername.value) {\n\t\t\t\tusernameRef.value = (event.target as HTMLInputElement)?.value;\n\t\t\t}\n\n\t\t\tpreviousUsername.value = (event.target as HTMLInputElement)?.value;\n\t\t};\n\n\t\tconst onSubmit = (event: Event) => {\n\t\t\tconst formData = new FormData(event.target as HTMLFormElement);\n\t\t\tconst data: Partial<ClientNetwork> = {};\n\n\t\t\tformData.forEach((value, key) => {\n\t\t\t\tdata[key] = value;\n\t\t\t});\n\n\t\t\tprops.handleSubmit(data as ClientNetwork);\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tconfig,\n\t\t\tdisplayPasswordField,\n\t\t\tpublicPassword,\n\t\t\tcommandsInput,\n\t\t\tresizeCommandsInput,\n\t\t\tsetSaslAuth,\n\t\t\tusernameInput,\n\t\t\tonNickChanged,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<button class=\"lt\" aria-label=\"Toggle channel list\" @click=\"store.commit('toggleSidebar')\" />\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"SidebarToggle\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./SidebarToggle.vue?vue&type=template&id=5256e772&ts=true\"\nimport script from \"./SidebarToggle.vue?vue&type=script&lang=ts\"\nexport * from \"./SidebarToggle.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkForm.vue?vue&type=template&id=7d6ce570&ts=true\"\nimport script from \"./NetworkForm.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkForm.vue?vue&type=script&lang=ts\"\n\nimport \"./NetworkForm.vue?vue&type=style&index=0&id=7d6ce570&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<NetworkForm :handle-submit=\"handleSubmit\" :defaults=\"defaults\" :disabled=\"disabled\" />\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\n\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport NetworkForm, {NetworkFormDefaults} from \"../NetworkForm.vue\";\n\nexport default defineComponent({\n\tname: \"Connect\",\n\tcomponents: {\n\t\tNetworkForm,\n\t},\n\tprops: {\n\t\tqueryParams: Object,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst disabled = ref(false);\n\n\t\tconst handleSubmit = (data: Record<string, any>) => {\n\t\t\tdisabled.value = true;\n\t\t\tsocket.emit(\"network:new\", data);\n\t\t};\n\n\t\tconst parseOverrideParams = (params?: Record<string, string>) => {\n\t\t\tif (!params) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst parsedParams: Record<string, any> = {};\n\n\t\t\tfor (let key of Object.keys(params)) {\n\t\t\t\tlet value = params[key];\n\n\t\t\t\t// Param can contain multiple values in an array if its supplied more than once\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue = value[0];\n\t\t\t\t}\n\n\t\t\t\t// Support `channels` as a compatibility alias with other clients\n\t\t\t\tif (key === \"channels\") {\n\t\t\t\t\tkey = \"join\";\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!Object.prototype.hasOwnProperty.call(\n\t\t\t\t\t\tstore.state.serverConfiguration?.defaults,\n\t\t\t\t\t\tkey\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// When the network is locked, URL overrides should not affect disabled fields\n\t\t\t\tif (\n\t\t\t\t\tstore.state.serverConfiguration?.lockNetwork &&\n\t\t\t\t\t[\"name\", \"host\", \"port\", \"tls\", \"rejectUnauthorized\"].includes(key)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (key === \"join\") {\n\t\t\t\t\tvalue = value\n\t\t\t\t\t\t.split(\",\")\n\t\t\t\t\t\t.map((chan) => {\n\t\t\t\t\t\t\tif (!chan.match(/^[#&!+]/)) {\n\t\t\t\t\t\t\t\treturn `#${chan}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn chan;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(\", \");\n\t\t\t\t}\n\n\t\t\t\t// Override server provided defaults with parameters passed in the URL if they match the data type\n\t\t\t\tswitch (typeof store.state.serverConfiguration?.defaults[key]) {\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tif (value === \"0\" || value === \"false\") {\n\t\t\t\t\t\t\tparsedParams[key] = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsedParams[key] = !!value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\tparsedParams[key] = Number(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tparsedParams[key] = String(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parsedParams;\n\t\t};\n\n\t\tconst defaults = ref<Partial<NetworkFormDefaults>>(\n\t\t\tObject.assign(\n\t\t\t\t{},\n\t\t\t\tstore.state.serverConfiguration?.defaults,\n\t\t\t\tparseOverrideParams(props.queryParams)\n\t\t\t)\n\t\t);\n\n\t\treturn {\n\t\t\tdefaults,\n\t\t\tdisabled,\n\t\t\thandleSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Connect.vue?vue&type=template&id=3ec80d95&ts=true\"\nimport script from \"./Connect.vue?vue&type=script&lang=ts\"\nexport * from \"./Connect.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"settings\" class=\"window\" role=\"tabpanel\" aria-label=\"Settings\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<Navigation />\n\n\t\t<div class=\"container\">\n\t\t\t<form ref=\"settingsForm\" autocomplete=\"off\" @change=\"onChange\" @submit.prevent>\n\t\t\t\t<router-view></router-view>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport Navigation from \"../Settings/Navigation.vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"Settings\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tNavigation,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst onChange = (event: Event) => {\n\t\t\tconst ignore = [\"old_password\", \"new_password\", \"verify_password\"];\n\n\t\t\tconst name = (event.target as HTMLInputElement).name;\n\n\t\t\tif (ignore.includes(name)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet value: boolean | string;\n\n\t\t\tif ((event.target as HTMLInputElement).type === \"checkbox\") {\n\t\t\t\tvalue = (event.target as HTMLInputElement).checked;\n\t\t\t} else {\n\t\t\t\tvalue = (event.target as HTMLInputElement).value;\n\t\t\t}\n\n\t\t\tvoid store.dispatch(\"settings/update\", {name, value, sync: true});\n\t\t};\n\n\t\treturn {\n\t\t\tonChange,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<!-- 220px is the width of the sidebar, and we add 100px to allow for the text -->\n\t<aside class=\"settings-menu\">\n\t\t<h2>Settings</h2>\n\t\t<ul role=\"navigation\" aria-label=\"Settings tabs\">\n\t\t\t<SettingTabItem name=\"General\" class-name=\"general\" to=\"\" />\n\t\t\t<SettingTabItem name=\"Appearance\" class-name=\"appearance\" to=\"appearance\" />\n\t\t\t<SettingTabItem name=\"Notifications\" class-name=\"notifications\" to=\"notifications\" />\n\t\t\t<SettingTabItem name=\"Account\" class-name=\"account\" to=\"account\" />\n\t\t</ul>\n\t</aside>\n</template>\n\n<style>\n.settings-menu {\n\tposition: fixed;\n\t/* top: Header + (padding bottom of h2 - border) */\n\ttop: calc(45px + 5px);\n\t/* Mid page minus width of container and 30 pixels for padding */\n\tmargin-left: calc(50% - 480px - 30px);\n}\n\n/** The calculation is mobile +  2/3 of container width. Fairly arbitrary. */\n@media screen and (max-width: calc(768px + 320px)) {\n\t.settings-menu {\n\t\tposition: static;\n\t\twidth: min(480px, 100%);\n\t\talign-self: center;\n\t\tmargin: 0 auto;\n\t\tpadding: 0 15px;\n\t}\n}\n\n.settings-menu ul {\n\tpadding: 0;\n}\n\n.settings-menu li {\n\tfont-size: 18px;\n\tlist-style: none;\n}\n\n.settings-menu button {\n\tcolor: var(--body-color-muted);\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: inline-block;\n\ttext-align: left;\n}\n\n.settings-menu li:not(:last-of-type) button {\n\tmargin-bottom: 8px;\n}\n\n.settings-menu button::before {\n\twidth: 18px;\n\theight: 18px;\n\tdisplay: inline-block;\n\tcontent: \"\";\n\tmargin-right: 8px;\n}\n\n.settings-menu .appearance::before {\n\tcontent: \"\\f108\"; /* http://fontawesome.io/icon/desktop/ */\n}\n\n.settings-menu .account::before {\n\tcontent: \"\\f007\"; /* http://fontawesome.io/icon/user/ */\n}\n\n.settings-menu .messages::before {\n\tcontent: \"\\f0e0\"; /* http://fontawesome.io/icon/envelope/ */\n}\n\n.settings-menu .notifications::before {\n\tcontent: \"\\f0f3\"; /* http://fontawesome.io/icon/bell/ */\n}\n\n.settings-menu .general::before {\n\tcontent: \"\\f013\"; /* http://fontawesome.io/icon/cog/ */\n}\n\n.settings-menu button:hover,\n.settings-menu button.active {\n\tcolor: var(--body-color);\n}\n\n.settings-menu button.active {\n\tcursor: default;\n}\n</style>\n\n<script lang=\"ts\">\nimport SettingTabItem from \"./SettingTabItem.vue\";\nimport {defineComponent} from \"vue\";\n\nexport default defineComponent({\n\tname: \"SettingsTabs\",\n\tcomponents: {\n\t\tSettingTabItem,\n\t},\n});\n</script>\n","<template>\n\t<li :aria-label=\"name\" role=\"tab\" :aria-selected=\"route.name === name\" aria-controls=\"settings\">\n\t\t<router-link v-slot:default=\"{navigate, isExactActive}\" :to=\"'/settings/' + to\" custom>\n\t\t\t<button\n\t\t\t\t:class=\"['icon', className, {active: isExactActive}]\"\n\t\t\t\t@click=\"navigate\"\n\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t>\n\t\t\t\t{{ name }}\n\t\t\t</button>\n\t\t</router-link>\n\t</li>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useRoute} from \"vue-router\";\n\nexport default defineComponent({\n\tname: \"SettingTabListItem\",\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tto: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\n\t\treturn {\n\t\t\troute,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./SettingTabItem.vue?vue&type=template&id=3df3582f&ts=true\"\nimport script from \"./SettingTabItem.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingTabItem.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Navigation.vue?vue&type=template&id=29a7cecc&ts=true\"\nimport script from \"./Navigation.vue?vue&type=script&lang=ts\"\nexport * from \"./Navigation.vue?vue&type=script&lang=ts\"\n\nimport \"./Navigation.vue?vue&type=style&index=0&id=29a7cecc&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Settings.vue?vue&type=template&id=7dcb681f&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"help\" class=\"window\" role=\"tabpanel\" aria-label=\"Help\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<h1 class=\"title\">Help</h1>\n\n\t\t\t<h2 class=\"help-version-title\">\n\t\t\t\t<span>About The Lounge</span>\n\t\t\t\t<small>\n\t\t\t\t\tv{{ store.state.serverConfiguration?.version }} (<router-link\n\t\t\t\t\t\tid=\"view-changelog\"\n\t\t\t\t\t\tto=\"/changelog\"\n\t\t\t\t\t\t>release notes</router-link\n\t\t\t\t\t>)\n\t\t\t\t</small>\n\t\t\t</h2>\n\n\t\t\t<div class=\"about\">\n\t\t\t\t<VersionChecker />\n\n\t\t\t\t<template v-if=\"store.state.serverConfiguration?.gitCommit\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe Lounge is running from source (<a\n\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/tree/${store.state.serverConfiguration?.gitCommit}`\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>commit <code>{{ store.state.serverConfiguration?.gitCommit }}</code></a\n\t\t\t\t\t\t>).\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCompare\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/compare/${store.state.serverConfiguration?.gitCommit}...master`\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>between\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.gitCommit }}</code> and\n\t\t\t\t\t\t\t\t<code>master</code></a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto see what you are missing\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCompare\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/compare/${store.state.serverConfiguration?.version}...${store.state.serverConfiguration?.gitCommit}`\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>between\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.version }}</code> and\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.gitCommit }}</code></a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto see your local changes\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</template>\n\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://thelounge.chat/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"website-link\"\n\t\t\t\t\t\t>Website</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://thelounge.chat/docs/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"documentation-link\"\n\t\t\t\t\t\t>Documentation</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://github.com/thelounge/thelounge/issues/new\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"report-issue-link\"\n\t\t\t\t\t\t>Report an issue…</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<h2 v-if=\"isTouch\">Gestures</h2>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Single-Finger Swipe Left</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Hide sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Single-Finger Swipe Right</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Show sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Two-Finger Swipe Left</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Two-Finger Swipe Right</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Keyboard Shortcuts</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd>↓</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>⇧</kbd> <kbd>↓</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next lobby in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd>↑</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>⇧</kbd> <kbd>↑</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous lobby in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd>←</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>⇧</kbd> <kbd>←</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Collapse current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd>→</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>⇧</kbd> <kbd>→</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Expand current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>↓</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>↓</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>↑</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>↑</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>A</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>A</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the first window with unread messages.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>S</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>S</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>U</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>U</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle channel user list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>J</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>J</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle jump to channel switcher.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>M</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>M</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle recent mentions popup.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>/</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌥</kbd> <kbd>/</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the help menu.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span><kbd>Esc</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClose current contextual window (context menu, image viewer, topic edit,\n\t\t\t\t\t\tetc) and remove focus from input.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Formatting Shortcuts</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>K</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>K</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark any text typed after this shortcut to be colored. After hitting this\n\t\t\t\t\t\tshortcut, enter an integer in the range\n\t\t\t\t\t\t<code>0—15</code> to select the desired color, or use the autocompletion\n\t\t\t\t\t\tmenu to choose a color name (see below).\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBackground color can be specified by putting a comma and another integer in\n\t\t\t\t\t\tthe range <code>0—15</code> after the foreground color number\n\t\t\t\t\t\t(autocompletion works too).\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tA color reference can be found\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://modern.ircdocs.horse/formatting.html#colors\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>here</a\n\t\t\t\t\t\t>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>B</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>B</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-bold\">bold</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>U</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>U</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-underline\">underlined</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>I</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>I</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-italic\">italics</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>S</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>S</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-strikethrough\">struck through</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>M</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>M</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-monospace\">monospaced</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>O</kbd></span>\n\t\t\t\t\t<span v-else><kbd>⌘</kbd> <kbd>O</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut to be reset to its original\n\t\t\t\t\t\tformatting.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Autocompletion</h2>\n\n\t\t\t<p>\n\t\t\t\tTo auto-complete nicknames, channels, commands, and emoji, type one of the\n\t\t\t\tcharacters below to open a suggestion list. Use the <kbd>↑</kbd> and\n\t\t\t\t<kbd>↓</kbd> keys to highlight an item, and insert it by pressing <kbd>Tab</kbd> or\n\t\t\t\t<kbd>Enter</kbd> (or by clicking the desired item).\n\t\t\t</p>\n\t\t\t<p>Autocompletion can be disabled in settings.</p>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>@</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Nickname</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>#</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Channel</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Commands (see list of commands below)</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>:</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tEmoji (note: requires two search characters, to avoid conflicting with\n\t\t\t\t\t\tcommon emoticons like <code>:)</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Commands</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/away [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Mark yourself as away with an optional message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/back</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Remove your away status (set with <code>/away</code>).</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ban nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBan (<code>+b</code>) a user from the current channel. This can be a\n\t\t\t\t\t\tnickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/banlist</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Load the banlist for the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/collapse</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tCollapse all previews in the current channel (opposite of\n\t\t\t\t\t\t<code>/expand</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/connect host [port]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tConnect to a new IRC network. If <code>port</code> starts with a\n\t\t\t\t\t\t<code>+</code> sign, the connection will be made secure using TLS.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Alias: <code>/server</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ctcp target cmd [args]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend a <abbr title=\"Client-to-client protocol\">CTCP</abbr>\n\t\t\t\t\t\trequest. Read more about this on\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://en.wikipedia.org/wiki/Client-to-client_protocol\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>the dedicated Wikipedia article</a\n\t\t\t\t\t\t>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/deop nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRemove op (<code>-o</code>) from one or several users in the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/devoice nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRemove voice (<code>-v</code>) from one or several users in the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/disconnect [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Disconnect from the current network with an optionally-provided message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/expand</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tExpand all previews in the current channel (opposite of\n\t\t\t\t\t\t<code>/collapse</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/invite nick [channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tInvite a user to the specified channel. If\n\t\t\t\t\t\t<code>channel</code> is omitted, user will be invited to the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ignore nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBlock any messages from the specified user on the current network. This can\n\t\t\t\t\t\tbe a nickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ignorelist</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Load the list of ignored users for the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/join channel [password]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tJoin a channel. Password is only needed in protected channels and can\n\t\t\t\t\t\tusually be omitted.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/kick nick [reason]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Kick a user from the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/kickban nick [reason]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tKick and ban (<code>+b</code>) a user from the current channel. Unlike\n\t\t\t\t\t\t<code>/ban</code>, only nicknames (and not host masks) can be used.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/list</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Retrieve a list of available channels on this network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/me message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend an action message to the current channel. The Lounge will display it\n\t\t\t\t\t\tinline, as if the message was posted in the third person.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/mode flags [args]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSet the given flags to the current channel if the active window is a\n\t\t\t\t\t\tchannel, another user if the active window is a private message window, or\n\t\t\t\t\t\tyourself if the current window is a server window.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/msg channel message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a message to the specified channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/mute [...channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tPrevent messages from generating any feedback for a channel. This turns off\n\t\t\t\t\t\tthe highlight indicator, hides mentions and inhibits push notifications.\n\t\t\t\t\t\tMuting a network lobby mutes the entire network. Not specifying any channel\n\t\t\t\t\t\ttarget mutes the current channel. Revert with <code>/unmute</code>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/nick newnick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Change your nickname on the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/notice channel message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Sends a notice message to the specified channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/op nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Give op (<code>+o</code>) to one or several users in the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/part [channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClose the specified channel or private message window, or the current\n\t\t\t\t\t\tchannel if <code>channel</code> is omitted.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Aliases: <code>/close</code>, <code>/leave</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/rejoin</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLeave and immediately rejoin the current channel. Useful to quickly get op\n\t\t\t\t\t\tfrom ChanServ in an empty channel, for example.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Alias: <code>/cycle</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/query nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a private message to the specified user.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/quit [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Disconnect from the current network with an optional message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/raw message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a raw message to the current IRC network.</p>\n\t\t\t\t\t<p>Aliases: <code>/quote</code>, <code>/send</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/slap nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Slap someone in the current channel with a trout!</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"store.state.settings.searchEnabled\" class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/search query</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Search for messages in the current channel / user</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/topic [newtopic]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tGet the topic in the current channel. If <code>newtopic</code> is specified,\n\t\t\t\t\t\tsets the topic in the current channel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unban nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUnban (<code>-b</code>) a user from the current channel. This can be a\n\t\t\t\t\t\tnickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unignore nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUnblock messages from the specified user on the current network. This can be\n\t\t\t\t\t\ta nickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unmute [...channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUn-mutes the given channel(s) or the current channel if no channel is\n\t\t\t\t\t\tprovided. See <code>/mute</code> for more information.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/voice nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tGive voice (<code>+v</code>) to one or several users in the current channel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/whois nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Retrieve information about the given user on the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport VersionChecker from \"../VersionChecker.vue\";\n\nexport default defineComponent({\n\tname: \"Help\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tVersionChecker,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst isApple = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) || false;\n\t\tconst isTouch = navigator.maxTouchPoints > 0;\n\n\t\treturn {\n\t\t\tisApple,\n\t\t\tisTouch,\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div id=\"version-checker\" :class=\"[store.state.versionStatus]\">\n\t\t<p v-if=\"store.state.versionStatus === 'loading'\">Checking for updates…</p>\n\t\t<p v-if=\"store.state.versionStatus === 'new-version'\">\n\t\t\tThe Lounge <b>{{ store.state.versionData?.latest.version }}</b>\n\t\t\t<template v-if=\"store.state.versionData?.latest.prerelease\"> (pre-release) </template>\n\t\t\tis now available.\n\t\t\t<br />\n\n\t\t\t<a :href=\"store.state.versionData?.latest.url\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\tRead more on GitHub\n\t\t\t</a>\n\t\t</p>\n\t\t<p v-if=\"store.state.versionStatus === 'new-packages'\">\n\t\t\tThe Lounge is up to date, but there are out of date packages Run\n\t\t\t<code>thelounge upgrade</code> on the server to upgrade packages.\n\t\t</p>\n\t\t<template v-if=\"store.state.versionStatus === 'up-to-date'\">\n\t\t\t<p>The Lounge is up to date!</p>\n\n\t\t\t<button\n\t\t\t\tv-if=\"store.state.versionDataExpired\"\n\t\t\t\tid=\"check-now\"\n\t\t\t\tclass=\"btn btn-small\"\n\t\t\t\t@click=\"checkNow\"\n\t\t\t>\n\t\t\t\tCheck now\n\t\t\t</button>\n\t\t</template>\n\t\t<template v-if=\"store.state.versionStatus === 'error'\">\n\t\t\t<p>Information about latest release could not be retrieved.</p>\n\n\t\t\t<button id=\"check-now\" class=\"btn btn-small\" @click=\"checkNow\">Try again</button>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted} from \"vue\";\nimport socket from \"../js/socket\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"VersionChecker\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst checkNow = () => {\n\t\t\tstore.commit(\"versionData\", null);\n\t\t\tstore.commit(\"versionStatus\", \"loading\");\n\t\t\tsocket.emit(\"changelog\");\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (!store.state.versionData) {\n\t\t\t\tcheckNow();\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tcheckNow,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./VersionChecker.vue?vue&type=template&id=522019e6&ts=true\"\nimport script from \"./VersionChecker.vue?vue&type=script&lang=ts\"\nexport * from \"./VersionChecker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Help.vue?vue&type=template&id=fb36735e&ts=true\"\nimport script from \"./Help.vue?vue&type=script&lang=ts\"\nexport * from \"./Help.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"changelog\" class=\"window\" aria-label=\"Changelog\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<router-link id=\"back-to-help\" to=\"/help\">« Help</router-link>\n\n\t\t\t<template\n\t\t\t\tv-if=\"store.state.versionData?.current && store.state.versionData?.current.version\"\n\t\t\t>\n\t\t\t\t<h1 class=\"title\">\n\t\t\t\t\tRelease notes for {{ store.state.versionData.current.version }}\n\t\t\t\t</h1>\n\n\t\t\t\t<template v-if=\"store.state.versionData.current.changelog\">\n\t\t\t\t\t<h3>Introduction</h3>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"changelog\"\n\t\t\t\t\t\tclass=\"changelog-text\"\n\t\t\t\t\t\tv-html=\"store.state.versionData.current.changelog\"\n\t\t\t\t\t></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<p>Unable to retrieve changelog for current release from GitHub.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if=\"store.state.serverConfiguration?.version\"\n\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/releases/tag/v${store.state.serverConfiguration?.version}`\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>View release notes for this version on GitHub</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</p>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<p v-else>Loading changelog…</p>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted, onUpdated, ref} from \"vue\";\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\n\nexport default defineComponent({\n\tname: \"Changelog\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst changelog = ref<HTMLDivElement | null>(null);\n\n\t\tconst patchChangelog = () => {\n\t\t\tif (!changelog.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst links = changelog.value.querySelectorAll(\"a\");\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\t// Make sure all links will open a new tab instead of exiting the application\n\t\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\t\t\t\tlink.setAttribute(\"rel\", \"noopener\");\n\n\t\t\t\tif (link.querySelector(\"img\")) {\n\t\t\t\t\t// Add required metadata to image links, to support built-in image viewer\n\t\t\t\t\tlink.classList.add(\"toggle-thumbnail\");\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (!store.state.versionData) {\n\t\t\t\tsocket.emit(\"changelog\");\n\t\t\t}\n\n\t\t\tpatchChangelog();\n\t\t});\n\n\t\tonUpdated(() => {\n\t\t\tpatchChangelog();\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Changelog.vue?vue&type=template&id=cdf28376&ts=true\"\nimport script from \"./Changelog.vue?vue&type=script&lang=ts\"\nexport * from \"./Changelog.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<NetworkForm\n\t\tv-if=\"networkData\"\n\t\t:handle-submit=\"handleSubmit\"\n\t\t:defaults=\"networkData\"\n\t\t:disabled=\"disabled\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted, ref, watch} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {switchToChannel} from \"../../js/router\";\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport NetworkForm, {NetworkFormDefaults} from \"../NetworkForm.vue\";\n\nexport default defineComponent({\n\tname: \"NetworkEdit\",\n\tcomponents: {\n\t\tNetworkForm,\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\t\tconst store = useStore();\n\n\t\tconst disabled = ref(false);\n\t\tconst networkData = ref<NetworkFormDefaults | null>(null);\n\n\t\tconst setNetworkData = () => {\n\t\t\tsocket.emit(\"network:get\", String(route.params.uuid || \"\"));\n\t\t\tnetworkData.value = store.getters.findNetwork(String(route.params.uuid || \"\"));\n\t\t};\n\n\t\tconst handleSubmit = (data: {uuid: string; name: string}) => {\n\t\t\tdisabled.value = true;\n\t\t\tsocket.emit(\"network:edit\", data);\n\n\t\t\t// TODO: move networks to vuex and update state when the network info comes in\n\t\t\tconst network = store.getters.findNetwork(data.uuid);\n\n\t\t\tif (network) {\n\t\t\t\tnetwork.name = network.channels[0].name = data.name;\n\n\t\t\t\tswitchToChannel(network.channels[0]);\n\t\t\t}\n\t\t};\n\n\t\twatch(\n\t\t\t() => route.params.uuid,\n\t\t\t(newValue) => {\n\t\t\t\tsetNetworkData();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\tsetNetworkData();\n\t\t});\n\n\t\treturn {\n\t\t\tdisabled,\n\t\t\tnetworkData,\n\t\t\thandleSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./NetworkEdit.vue?vue&type=template&id=7e54a048&ts=true\"\nimport script from \"./NetworkEdit.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkEdit.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"chat-container\" class=\"window\">\n\t\t<div\n\t\t\tid=\"chat\"\n\t\t\t:class=\"{\n\t\t\t\t'time-seconds': store.state.settings.showSeconds,\n\t\t\t\t'time-12h': store.state.settings.use12hClock,\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"chat-view\"\n\t\t\t\tdata-type=\"search-results\"\n\t\t\t\taria-label=\"Search results\"\n\t\t\t\trole=\"tabpanel\"\n\t\t\t>\n\t\t\t\t<div v-if=\"network && channel\" class=\"header\">\n\t\t\t\t\t<SidebarToggle />\n\t\t\t\t\t<span class=\"title\"\n\t\t\t\t\t\t>Searching in <span class=\"channel-name\">{{ channel.name }}</span> for</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"topic\">{{ route.query.q }}</span>\n\t\t\t\t\t<MessageSearchForm :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"close\"\n\t\t\t\t\t\taria-label=\"Close search window\"\n\t\t\t\t\t\ttitle=\"Close search window\"\n\t\t\t\t\t\t@click=\"closeSearch\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"network && channel\" class=\"chat-content\">\n\t\t\t\t\t<div ref=\"chat\" class=\"chat\" tabindex=\"-1\">\n\t\t\t\t\t\t<div v-show=\"moreResultsAvailable\" class=\"show-more\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tref=\"loadMoreButton\"\n\t\t\t\t\t\t\t\t:disabled=\"\n\t\t\t\t\t\t\t\t\t!!store.state.messageSearchPendingQuery ||\n\t\t\t\t\t\t\t\t\t!store.state.isConnected\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t\t@click=\"onShowMoreClick\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span v-if=\"store.state.messageSearchPendingQuery\">Loading…</span>\n\t\t\t\t\t\t\t\t<span v-else>Show older messages</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"store.state.messageSearchPendingQuery && !offset\"\n\t\t\t\t\t\t\tclass=\"search-status\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSearching…\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else-if=\"!messages.length && !offset\" class=\"search-status\">\n\t\t\t\t\t\t\tNo results found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"messages\"\n\t\t\t\t\t\t\trole=\"log\"\n\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t\taria-relevant=\"additions\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"(message, id) in messages\"\n\t\t\t\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t\t\t\tclass=\"result\"\n\t\t\t\t\t\t\t\t@click=\"jump(message, id)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DateMarker\n\t\t\t\t\t\t\t\t\tv-if=\"shouldDisplayDateMarker(message, id)\"\n\t\t\t\t\t\t\t\t\t:key=\"message.id + '-date'\"\n\t\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t\t:data-id=\"message.id\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n.channel-name {\n\tfont-weight: 700;\n}\n</style>\n\n<script lang=\"ts\">\nimport socket from \"../../js/socket\";\nimport eventbus from \"../../js/eventbus\";\n\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport Message from \"../Message.vue\";\nimport MessageSearchForm from \"../MessageSearchForm.vue\";\nimport DateMarker from \"../DateMarker.vue\";\nimport {watch, computed, defineComponent, nextTick, ref, onMounted, onUnmounted} from \"vue\";\nimport type {ClientMessage} from \"../../js/types\";\n\nimport {useStore} from \"../../js/store\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport {switchToChannel} from \"../../js/router\";\nimport {SearchQuery} from \"../../../server/plugins/messageStorage/types\";\n\nexport default defineComponent({\n\tname: \"SearchResults\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tMessage,\n\t\tDateMarker,\n\t\tMessageSearchForm,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst route = useRoute();\n\t\tconst router = useRouter();\n\n\t\tconst chat = ref<HTMLDivElement>();\n\n\t\tconst loadMoreButton = ref<HTMLButtonElement>();\n\n\t\tconst offset = ref(0);\n\t\tconst moreResultsAvailable = ref(false);\n\t\tconst oldScrollTop = ref(0);\n\t\tconst oldChatHeight = ref(0);\n\n\t\tconst messages = computed(() => {\n\t\t\tconst results = store.state.messageSearchResults?.results;\n\n\t\t\tif (!results) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn results;\n\t\t});\n\n\t\tconst chan = computed(() => {\n\t\t\tconst chanId = parseInt(String(route.params.id || \"\"), 10);\n\t\t\treturn store.getters.findChannel(chanId);\n\t\t});\n\n\t\tconst network = computed(() => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn chan.value.network;\n\t\t});\n\n\t\tconst channel = computed(() => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn chan.value.channel;\n\t\t});\n\n\t\tconst setActiveChannel = () => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstore.commit(\"activeChannel\", chan.value);\n\t\t};\n\n\t\tconst closeSearch = () => {\n\t\t\tif (!channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitchToChannel(channel.value);\n\t\t};\n\n\t\tconst shouldDisplayDateMarker = (message: ClientMessage, id: number) => {\n\t\t\tconst previousMessage = messages.value[id - 1];\n\n\t\t\tif (!previousMessage) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn new Date(previousMessage.time).getDay() !== new Date(message.time).getDay();\n\t\t};\n\n\t\tconst clearSearchState = () => {\n\t\t\toffset.value = 0;\n\t\t\tstore.commit(\"messageSearchResults\", null);\n\t\t\tstore.commit(\"messageSearchPendingQuery\", null);\n\t\t};\n\n\t\tconst doSearch = () => {\n\t\t\tif (!network.value || !channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearSearchState(); // this is a new search, so we need to clear anything before that\n\t\t\tconst query: SearchQuery = {\n\t\t\t\tnetworkUuid: network.value.uuid,\n\t\t\t\tchannelName: channel.value.name,\n\t\t\t\tsearchTerm: String(route.query.q || \"\"),\n\t\t\t\toffset: offset.value,\n\t\t\t};\n\t\t\tstore.commit(\"messageSearchPendingQuery\", query);\n\t\t\tsocket.emit(\"search\", query);\n\t\t};\n\n\t\tconst onShowMoreClick = () => {\n\t\t\tif (!chat.value || !network.value || !channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\toffset.value += 100;\n\n\t\t\toldScrollTop.value = chat.value.scrollTop;\n\t\t\toldChatHeight.value = chat.value.scrollHeight;\n\n\t\t\tconst query: SearchQuery = {\n\t\t\t\tnetworkUuid: network.value.uuid,\n\t\t\t\tchannelName: channel.value.name,\n\t\t\t\tsearchTerm: String(route.query.q || \"\"),\n\t\t\t\toffset: offset.value,\n\t\t\t};\n\t\t\tstore.commit(\"messageSearchPendingQuery\", query);\n\t\t\tsocket.emit(\"search\", query);\n\t\t};\n\n\t\tconst jumpToBottom = async () => {\n\t\t\tawait nextTick();\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tel.scrollTop = el.scrollHeight;\n\t\t};\n\n\t\tconst jump = (message: ClientMessage, id: number) => {\n\t\t\t// TODO: Implement jumping to messages!\n\t\t\t// This is difficult because it means client will need to handle a potentially nonlinear message set\n\t\t\t// (loading IntersectionObserver both before AND after the messages)\n\t\t};\n\n\t\twatch(\n\t\t\t() => route.params.id,\n\t\t\t() => {\n\t\t\t\tdoSearch();\n\t\t\t\tsetActiveChannel();\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => route.query,\n\t\t\t() => {\n\t\t\t\tdoSearch();\n\t\t\t\tsetActiveChannel();\n\t\t\t}\n\t\t);\n\n\t\twatch(messages, async () => {\n\t\t\tmoreResultsAvailable.value = !!(\n\t\t\t\tmessages.value.length && !(messages.value.length % 100)\n\t\t\t);\n\n\t\t\tif (!offset.value) {\n\t\t\t\tawait jumpToBottom();\n\t\t\t} else {\n\t\t\t\tawait nextTick();\n\n\t\t\t\tconst el = chat.value;\n\n\t\t\t\tif (!el) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentChatHeight = el.scrollHeight;\n\t\t\t\tel.scrollTop = oldScrollTop.value + currentChatHeight - oldChatHeight.value;\n\t\t\t}\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsetActiveChannel();\n\t\t\tdoSearch();\n\n\t\t\teventbus.on(\"escapekey\", closeSearch);\n\t\t\teventbus.on(\"re-search\", doSearch);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", closeSearch);\n\t\t\teventbus.off(\"re-search\", doSearch);\n\t\t\tclearSearchState();\n\t\t});\n\n\t\treturn {\n\t\t\tchat,\n\t\t\tloadMoreButton,\n\t\t\tmessages,\n\t\t\tmoreResultsAvailable,\n\t\t\tnetwork,\n\t\t\tchannel,\n\t\t\troute,\n\t\t\toffset,\n\t\t\tstore,\n\t\t\tsetActiveChannel,\n\t\t\tcloseSearch,\n\t\t\tshouldDisplayDateMarker,\n\t\t\tdoSearch,\n\t\t\tonShowMoreClick,\n\t\t\tjumpToBottom,\n\t\t\tjump,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\t:id=\"'msg-' + message.id\"\n\t\t:class=\"[\n\t\t\t'msg',\n\t\t\t{\n\t\t\t\tself: message.self,\n\t\t\t\thighlight: message.highlight || focused,\n\t\t\t\t'previous-source': isPreviousSource,\n\t\t\t},\n\t\t]\"\n\t\t:data-type=\"message.type\"\n\t\t:data-command=\"message.command\"\n\t\t:data-from=\"message.from && message.from.nick\"\n\t>\n\t\t<span\n\t\t\taria-hidden=\"true\"\n\t\t\t:aria-label=\"messageTimeLocale\"\n\t\t\tclass=\"time tooltipped tooltipped-e\"\n\t\t\t>{{ `${messageTime}&#32;` }}\n\t\t</span>\n\t\t<template v-if=\"message.type === 'unhandled'\">\n\t\t\t<span class=\"from\">[{{ message.command }}]</span>\n\t\t\t<span class=\"content\">\n\t\t\t\t<span v-for=\"(param, id) in message.params\" :key=\"id\">{{\n\t\t\t\t\t`&#32;${param}&#32;`\n\t\t\t\t}}</span>\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else-if=\"isAction()\">\n\t\t\t<span class=\"from\"><span class=\"only-copy\">***&nbsp;</span></span>\n\t\t\t<component :is=\"messageComponent\" :network=\"network\" :message=\"message\" />\n\t\t</template>\n\t\t<template v-else-if=\"message.type === 'action'\">\n\t\t\t<span class=\"from\"><span class=\"only-copy\">*&nbsp;</span></span>\n\t\t\t<span class=\"content\" dir=\"auto\">\n\t\t\t\t<Username\n\t\t\t\t\t:user=\"message.from\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\tdir=\"auto\"\n\t\t\t\t/>&#32;<ParsedMessage :message=\"message\" />\n\t\t\t\t<LinkPreview\n\t\t\t\t\tv-for=\"preview in message.previews\"\n\t\t\t\t\t:key=\"preview.link\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:link=\"preview\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<span v-if=\"message.type === 'message'\" class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">&lt;</span>\n\t\t\t\t\t<Username :user=\"message.from\" :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">&gt;&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span v-else-if=\"message.type === 'plugin'\" class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">[</span>\n\t\t\t\t\t{{ message.from.nick }}\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">]&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span v-else class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">-</span>\n\t\t\t\t\t<Username :user=\"message.from\" :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">-&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span class=\"content\" dir=\"auto\">\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"message.showInActive\"\n\t\t\t\t\taria-label=\"This message was shown in your active channel\"\n\t\t\t\t\tclass=\"msg-shown-in-active tooltipped tooltipped-e\"\n\t\t\t\t\t><span></span\n\t\t\t\t></span>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"message.statusmsgGroup\"\n\t\t\t\t\t:aria-label=\"`This message was only shown to users with ${message.statusmsgGroup} mode`\"\n\t\t\t\t\tclass=\"msg-statusmsg tooltipped tooltipped-e\"\n\t\t\t\t\t><span>{{ message.statusmsgGroup }}</span></span\n\t\t\t\t>\n\t\t\t\t<ParsedMessage :network=\"network\" :message=\"message\" />\n\t\t\t\t<LinkPreview\n\t\t\t\t\tv-for=\"preview in message.previews\"\n\t\t\t\t\t:key=\"preview.link\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:link=\"preview\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport dayjs from \"dayjs\";\n\nimport constants from \"../js/constants\";\nimport localetime from \"../js/helpers/localetime\";\nimport Username from \"./Username.vue\";\nimport LinkPreview from \"./LinkPreview.vue\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport MessageTypes from \"./MessageTypes\";\n\nimport type {ClientChan, ClientMessage, ClientNetwork} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nMessageTypes.ParsedMessage = ParsedMessage;\nMessageTypes.LinkPreview = LinkPreview;\nMessageTypes.Username = Username;\n\nexport default defineComponent({\n\tname: \"Message\",\n\tcomponents: MessageTypes,\n\tprops: {\n\t\tmessage: {type: Object as PropType<ClientMessage>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tkeepScrollPosition: Function as PropType<() => void>,\n\t\tisPreviousSource: Boolean,\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst timeFormat = computed(() => {\n\t\t\tlet format: keyof typeof constants.timeFormats;\n\n\t\t\tif (store.state.settings.use12hClock) {\n\t\t\t\tformat = store.state.settings.showSeconds ? \"msg12hWithSeconds\" : \"msg12h\";\n\t\t\t} else {\n\t\t\t\tformat = store.state.settings.showSeconds ? \"msgWithSeconds\" : \"msgDefault\";\n\t\t\t}\n\n\t\t\treturn constants.timeFormats[format];\n\t\t});\n\n\t\tconst messageTime = computed(() => {\n\t\t\treturn dayjs(props.message.time).format(timeFormat.value);\n\t\t});\n\n\t\tconst messageTimeLocale = computed(() => {\n\t\t\treturn localetime(props.message.time);\n\t\t});\n\n\t\tconst messageComponent = computed(() => {\n\t\t\treturn \"message-\" + props.message.type;\n\t\t});\n\n\t\tconst isAction = () => {\n\t\t\treturn typeof MessageTypes[\"message-\" + props.message.type] !== \"undefined\";\n\t\t};\n\n\t\treturn {\n\t\t\ttimeFormat,\n\t\t\tmessageTime,\n\t\t\tmessageTimeLocale,\n\t\t\tmessageComponent,\n\t\t\tisAction,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\tv-if=\"link.shown\"\n\t\tv-show=\"link.sourceLoaded || link.type === 'link'\"\n\t\tref=\"container\"\n\t\tclass=\"preview\"\n\t\tdir=\"ltr\"\n\t>\n\t\t<div\n\t\t\tref=\"content\"\n\t\t\t:class=\"['toggle-content', 'toggle-type-' + link.type, {opened: isContentShown}]\"\n\t\t>\n\t\t\t<template v-if=\"link.type === 'link'\">\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"link.thumb\"\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\tclass=\"toggle-thumbnail\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t@click=\"onThumbnailClick\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\t:src=\"link.thumb\"\n\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tclass=\"thumb\"\n\t\t\t\t\t\t@error=\"onThumbnailError\"\n\t\t\t\t\t\t@abort=\"onThumbnailError\"\n\t\t\t\t\t\t@load=\"onPreviewReady\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<div class=\"toggle-text\" dir=\"auto\">\n\t\t\t\t\t<div class=\"head\">\n\t\t\t\t\t\t<div class=\"overflowable\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\t\t\t\t:title=\"link.head\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>{{ link.head }}</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"showMoreButton\"\n\t\t\t\t\t\t\t:aria-expanded=\"isContentShown\"\n\t\t\t\t\t\t\t:aria-label=\"moreButtonLabel\"\n\t\t\t\t\t\t\tdir=\"auto\"\n\t\t\t\t\t\t\tclass=\"more\"\n\t\t\t\t\t\t\t@click=\"onMoreClick\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"more-caret\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"body overflowable\">\n\t\t\t\t\t\t<a :href=\"link.link\" :title=\"link.body\" target=\"_blank\" rel=\"noopener\">{{\n\t\t\t\t\t\t\tlink.body\n\t\t\t\t\t\t}}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'image'\">\n\t\t\t\t<a\n\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\tclass=\"toggle-thumbnail\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t@click=\"onThumbnailClick\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\t\t:src=\"link.thumb\"\n\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t@load=\"onPreviewReady\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'video'\">\n\t\t\t\t<video\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\tcontrols\n\t\t\t\t\t@canplay=\"onPreviewReady\"\n\t\t\t\t>\n\t\t\t\t\t<source :src=\"link.media\" :type=\"link.mediaType\" />\n\t\t\t\t</video>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'audio'\">\n\t\t\t\t<audio\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\tcontrols\n\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\t@canplay=\"onPreviewReady\"\n\t\t\t\t>\n\t\t\t\t\t<source :src=\"link.media\" :type=\"link.mediaType\" />\n\t\t\t\t</audio>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'error'\">\n\t\t\t\t<em v-if=\"link.error === 'image-too-big'\">\n\t\t\t\t\tThis image is larger than {{ imageMaxSize }} and cannot be previewed.\n\t\t\t\t\t<a :href=\"link.link\" target=\"_blank\" rel=\"noopener\">Click here</a>\n\t\t\t\t\tto open it in a new window.\n\t\t\t\t</em>\n\t\t\t\t<template v-else-if=\"link.error === 'message'\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<em>\n\t\t\t\t\t\t\tA preview could not be loaded.\n\t\t\t\t\t\t\t<a :href=\"link.link\" target=\"_blank\" rel=\"noopener\">Click here</a>\n\t\t\t\t\t\t\tto open it in a new window.\n\t\t\t\t\t\t</em>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<pre class=\"prefetch-error\">{{ link.message }}</pre>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\t:aria-expanded=\"isContentShown\"\n\t\t\t\t\t\t:aria-label=\"moreButtonLabel\"\n\t\t\t\t\t\tclass=\"more\"\n\t\t\t\t\t\t@click=\"onMoreClick\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"more-caret\" />\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tcomputed,\n\tdefineComponent,\n\tinject,\n\tnextTick,\n\tonBeforeUnmount,\n\tonMounted,\n\tonUnmounted,\n\tPropType,\n\tref,\n\twatch,\n} from \"vue\";\nimport {onBeforeRouteUpdate} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport friendlysize from \"../js/helpers/friendlysize\";\nimport {useStore} from \"../js/store\";\nimport type {ClientChan, ClientLinkPreview} from \"../js/types\";\nimport {imageViewerKey} from \"./App.vue\";\n\nexport default defineComponent({\n\tname: \"LinkPreview\",\n\tprops: {\n\t\tlink: {\n\t\t\ttype: Object as PropType<ClientLinkPreview>,\n\t\t\trequired: true,\n\t\t},\n\t\tkeepScrollPosition: {\n\t\t\ttype: Function as PropType<() => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst showMoreButton = ref(false);\n\t\tconst isContentShown = ref(false);\n\t\tconst imageViewer = inject(imageViewerKey);\n\n\t\tonBeforeRouteUpdate((to, from, next) => {\n\t\t\t// cancel the navigation if the user is trying to close the image viewer\n\t\t\tif (imageViewer?.value?.link) {\n\t\t\t\timageViewer.value.closeViewer();\n\t\t\t\treturn next(false);\n\t\t\t}\n\n\t\t\tnext();\n\t\t});\n\n\t\tconst content = ref<HTMLDivElement | null>(null);\n\t\tconst container = ref<HTMLDivElement | null>(null);\n\n\t\tconst moreButtonLabel = computed(() => {\n\t\t\treturn isContentShown.value ? \"Less\" : \"More\";\n\t\t});\n\n\t\tconst imageMaxSize = computed(() => {\n\t\t\tif (!props.link.maxSize) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn friendlysize(props.link.maxSize);\n\t\t});\n\n\t\tconst handleResize = () => {\n\t\t\tnextTick(() => {\n\t\t\t\tif (!content.value || !container.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tshowMoreButton.value = content.value.offsetWidth >= container.value.offsetWidth;\n\t\t\t}).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(\"Error in LinkPreview.handleResize\", e);\n\t\t\t});\n\t\t};\n\n\t\tconst onPreviewReady = () => {\n\t\t\tprops.link.sourceLoaded = true;\n\n\t\t\tprops.keepScrollPosition();\n\n\t\t\tif (props.link.type === \"link\") {\n\t\t\t\thandleResize();\n\t\t\t}\n\t\t};\n\n\t\tconst onPreviewUpdate = () => {\n\t\t\t// Don't display previews while they are loading on the server\n\t\t\tif (props.link.type === \"loading\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Error does not have any media to render\n\t\t\tif (props.link.type === \"error\") {\n\t\t\t\tonPreviewReady();\n\t\t\t}\n\n\t\t\t// If link doesn't have a thumbnail, render it\n\t\t\tif (props.link.type === \"link\") {\n\t\t\t\thandleResize();\n\t\t\t\tprops.keepScrollPosition();\n\t\t\t}\n\t\t};\n\n\t\tconst onThumbnailError = () => {\n\t\t\t// If thumbnail fails to load, hide it and show the preview without it\n\t\t\tprops.link.thumb = \"\";\n\t\t\tonPreviewReady();\n\t\t};\n\n\t\tconst onThumbnailClick = (e: MouseEvent) => {\n\t\t\te.preventDefault();\n\n\t\t\tif (!imageViewer?.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\timageViewer.value.channel = props.channel;\n\t\t\timageViewer.value.link = props.link;\n\t\t};\n\n\t\tconst onMoreClick = () => {\n\t\t\tisContentShown.value = !isContentShown.value;\n\t\t\tprops.keepScrollPosition();\n\t\t};\n\n\t\tconst updateShownState = () => {\n\t\t\t// User has manually toggled the preview, do not apply default\n\t\t\tif (props.link.shown !== null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet defaultState = false;\n\n\t\t\tswitch (props.link.type) {\n\t\t\t\tcase \"error\":\n\t\t\t\t\t// Collapse all errors by default unless its a message about image being too big\n\t\t\t\t\tif (props.link.error === \"image-too-big\") {\n\t\t\t\t\t\tdefaultState = store.state.settings.media;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"link\":\n\t\t\t\t\tdefaultState = store.state.settings.links;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdefaultState = store.state.settings.media;\n\t\t\t}\n\n\t\t\tprops.link.shown = defaultState;\n\t\t};\n\n\t\tupdateShownState();\n\n\t\twatch(\n\t\t\t() => props.link.type,\n\t\t\t() => {\n\t\t\t\tupdateShownState();\n\t\t\t\tonPreviewUpdate();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"resize\", handleResize);\n\n\t\t\tonPreviewUpdate();\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"resize\", handleResize);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\t// Let this preview go through load/canplay events again,\n\t\t\t// Otherwise the browser can cause a resize on video elements\n\t\t\tprops.link.sourceLoaded = false;\n\t\t});\n\n\t\treturn {\n\t\t\tmoreButtonLabel,\n\t\t\timageMaxSize,\n\t\t\tonThumbnailClick,\n\t\t\tonThumbnailError,\n\t\t\tonMoreClick,\n\t\t\tonPreviewReady,\n\t\t\tonPreviewUpdate,\n\t\t\tshowMoreButton,\n\t\t\tisContentShown,\n\t\t\tcontent,\n\t\t\tcontainer,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreview.vue?vue&type=template&id=66dae5b1&ts=true\"\nimport script from \"./LinkPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreview.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// This creates a version of `require()` in the context of the current\n// directory, so we iterate over its content, which is a map statically built by\n// Webpack.\n// Second argument says it's recursive, third makes sure we only load templates.\nconst requireViews = require.context(\".\", false, /\\.vue$/);\n\nexport default requireViews.keys().reduce((acc: Record<string, any>, path) => {\n\tacc[\"message-\" + path.substring(2, path.length - 4)] = requireViews(path).default;\n\n\treturn acc;\n}, {});\n","import { render } from \"./Message.vue?vue&type=template&id=6a83360a&ts=true\"\nimport script from \"./Message.vue?vue&type=script&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form :class=\"['message-search', {opened: searchOpened}]\" @submit.prevent=\"searchMessages\">\n\t\t<div class=\"input-wrapper\">\n\t\t\t<input\n\t\t\t\tref=\"searchInputField\"\n\t\t\t\tv-model=\"searchInput\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tname=\"search\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tplaceholder=\"Search messages…\"\n\t\t\t\t@blur=\"closeSearch\"\n\t\t\t\t@keyup.esc=\"closeSearch\"\n\t\t\t/>\n\t\t</div>\n\t\t<button\n\t\t\tv-if=\"!onSearchPage\"\n\t\t\tclass=\"search\"\n\t\t\ttype=\"button\"\n\t\t\taria-label=\"Search messages in this channel\"\n\t\t\t@mousedown.prevent=\"toggleSearch\"\n\t\t/>\n\t</form>\n</template>\n\n<style>\nform.message-search {\n\tdisplay: flex;\n}\n\nform.message-search .input-wrapper {\n\tdisplay: flex;\n}\n\nform.message-search input {\n\twidth: 100%;\n\theight: auto !important;\n\tmargin: 7px 0;\n\tborder: 0;\n\tcolor: inherit;\n\tbackground-color: #fafafa;\n\tappearance: none;\n}\n\nform.message-search input::placeholder {\n\tcolor: rgba(0, 0, 0, 0.35);\n}\n\n@media (min-width: 480px) {\n\tform.message-search input {\n\t\tmin-width: 140px;\n\t}\n\n\tform.message-search input:focus {\n\t\tmin-width: 220px;\n\t}\n}\n\nform.message-search .input-wrapper {\n\tposition: absolute;\n\ttop: 45px;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n\theight: 0;\n\toverflow: hidden;\n\tbackground: var(--window-bg-color);\n}\n\nform.message-search .input-wrapper input {\n\tmargin: 7px;\n}\n\nform.message-search.opened .input-wrapper {\n\theight: 50px;\n}\n\n#chat form.message-search button {\n\tdisplay: flex;\n\tcolor: #607992;\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, onMounted, PropType, ref, watch} from \"vue\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageSearchForm\",\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst searchOpened = ref(false);\n\t\tconst searchInput = ref(\"\");\n\t\tconst router = useRouter();\n\t\tconst route = useRoute();\n\n\t\tconst searchInputField = ref<HTMLInputElement | null>(null);\n\n\t\tconst onSearchPage = computed(() => {\n\t\t\treturn route.name === \"SearchResults\";\n\t\t});\n\n\t\twatch(route, (newValue) => {\n\t\t\tif (newValue.query.q) {\n\t\t\t\tsearchInput.value = String(newValue.query.q);\n\t\t\t}\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsearchInput.value = String(route.query.q || \"\");\n\t\t\tsearchOpened.value = onSearchPage.value;\n\n\t\t\tif (searchInputField.value && !searchInput.value && searchOpened.value) {\n\t\t\t\tsearchInputField.value.focus();\n\t\t\t}\n\t\t});\n\n\t\tconst closeSearch = () => {\n\t\t\tif (!onSearchPage.value) {\n\t\t\t\tsearchInput.value = \"\";\n\t\t\t\tsearchOpened.value = false;\n\t\t\t}\n\t\t};\n\n\t\tconst toggleSearch = () => {\n\t\t\tif (searchOpened.value) {\n\t\t\t\tsearchInputField.value?.blur();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsearchOpened.value = true;\n\t\t\tsearchInputField.value?.focus();\n\t\t};\n\n\t\tconst searchMessages = (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!searchInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trouter\n\t\t\t\t.push({\n\t\t\t\t\tname: \"SearchResults\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tid: props.channel.id,\n\t\t\t\t\t},\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tq: searchInput.value,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (err.name === \"NavigationDuplicated\") {\n\t\t\t\t\t\t// Search for the same query again\n\t\t\t\t\t\teventbus.emit(\"re-search\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tsearchOpened,\n\t\t\tsearchInput,\n\t\t\tsearchInputField,\n\t\t\tcloseSearch,\n\t\t\ttoggleSearch,\n\t\t\tsearchMessages,\n\t\t\tonSearchPage,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./MessageSearchForm.vue?vue&type=template&id=7f7156c0&ts=true\"\nimport script from \"./MessageSearchForm.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageSearchForm.vue?vue&type=script&lang=ts\"\n\nimport \"./MessageSearchForm.vue?vue&type=style&index=0&id=7f7156c0&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div :aria-label=\"localeDate\" class=\"date-marker-container tooltipped tooltipped-s\">\n\t\t<div class=\"date-marker\">\n\t\t\t<span :aria-label=\"friendlyDate()\" class=\"date-marker-text\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport dayjs from \"dayjs\";\nimport calendar from \"dayjs/plugin/calendar\";\nimport {computed, defineComponent, onBeforeUnmount, onMounted, PropType} from \"vue\";\nimport eventbus from \"../js/eventbus\";\nimport type {ClientMessage} from \"../js/types\";\n\ndayjs.extend(calendar);\n\nexport default defineComponent({\n\tname: \"DateMarker\",\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst localeDate = computed(() => dayjs(props.message.time).format(\"D MMMM YYYY\"));\n\n\t\tconst hoursPassed = () => {\n\t\t\treturn (Date.now() - Date.parse(props.message.time.toString())) / 3600000;\n\t\t};\n\n\t\tconst dayChange = () => {\n\t\t\tif (hoursPassed() >= 48) {\n\t\t\t\teventbus.off(\"daychange\", dayChange);\n\t\t\t}\n\t\t};\n\n\t\tconst friendlyDate = () => {\n\t\t\t// See http://momentjs.com/docs/#/displaying/calendar-time/\n\t\t\treturn dayjs(props.message.time).calendar(null, {\n\t\t\t\tsameDay: \"[Today]\",\n\t\t\t\tlastDay: \"[Yesterday]\",\n\t\t\t\tlastWeek: \"D MMMM YYYY\",\n\t\t\t\tsameElse: \"D MMMM YYYY\",\n\t\t\t});\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (hoursPassed() < 48) {\n\t\t\t\teventbus.on(\"daychange\", dayChange);\n\t\t\t}\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"daychange\", dayChange);\n\t\t});\n\n\t\treturn {\n\t\t\tlocaleDate,\n\t\t\tfriendlyDate,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./DateMarker.vue?vue&type=template&id=97dda32c&ts=true\"\nimport script from \"./DateMarker.vue?vue&type=script&lang=ts\"\nexport * from \"./DateMarker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SearchResults.vue?vue&type=template&id=f577812e&ts=true\"\nimport script from \"./SearchResults.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchResults.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchResults.vue?vue&type=style&index=0&id=f577812e&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"chat-container\" class=\"window\" :data-current-channel=\"channel.name\" lang=\"\">\n\t\t<div\n\t\t\tid=\"chat\"\n\t\t\t:class=\"{\n\t\t\t\t'hide-motd': !store.state.settings.motd,\n\t\t\t\t'time-seconds': store.state.settings.showSeconds,\n\t\t\t\t'time-12h': store.state.settings.use12hClock,\n\t\t\t\t'colored-nicks': true, // TODO temporarily fixes themes, to be removed in next major version\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\t:id=\"'chan-' + channel.id\"\n\t\t\t\tclass=\"chat-view\"\n\t\t\t\t:data-type=\"channel.type\"\n\t\t\t\t:aria-label=\"channel.name\"\n\t\t\t\trole=\"tabpanel\"\n\t\t\t>\n\t\t\t\t<div class=\"header\">\n\t\t\t\t\t<SidebarToggle />\n\t\t\t\t\t<span class=\"title\" :aria-label=\"'Currently open ' + channel.type\">{{\n\t\t\t\t\t\tchannel.name\n\t\t\t\t\t}}</span>\n\t\t\t\t\t<div v-if=\"channel.editTopic === true\" class=\"topic-container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref=\"topicInput\"\n\t\t\t\t\t\t\t:value=\"channel.topic\"\n\t\t\t\t\t\t\tclass=\"topic-input\"\n\t\t\t\t\t\t\tplaceholder=\"Set channel topic\"\n\t\t\t\t\t\t\tenterkeyhint=\"done\"\n\t\t\t\t\t\t\t@keyup.enter=\"saveTopic\"\n\t\t\t\t\t\t\t@keyup.esc=\"channel.editTopic = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span aria-label=\"Save topic\" class=\"save-topic\" @click=\"saveTopic\">\n\t\t\t\t\t\t\t<span type=\"button\" aria-label=\"Save topic\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:title=\"channel.topic\"\n\t\t\t\t\t\t:class=\"{topic: true, empty: !channel.topic}\"\n\t\t\t\t\t\t@dblclick=\"editTopic\"\n\t\t\t\t\t\t><ParsedMessage\n\t\t\t\t\t\t\tv-if=\"channel.topic\"\n\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t:text=\"channel.topic\"\n\t\t\t\t\t/></span>\n\t\t\t\t\t<MessageSearchForm\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tstore.state.settings.searchEnabled &&\n\t\t\t\t\t\t\t['channel', 'query'].includes(channel.type)\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"mentions\"\n\t\t\t\t\t\taria-label=\"Open your mentions\"\n\t\t\t\t\t\t@click=\"openMentions\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"menu\"\n\t\t\t\t\t\taria-label=\"Open the context menu\"\n\t\t\t\t\t\t@click=\"openContextMenu\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"channel.type === 'channel'\"\n\t\t\t\t\t\tclass=\"rt-tooltip tooltipped tooltipped-w\"\n\t\t\t\t\t\taria-label=\"Toggle user list\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"rt\"\n\t\t\t\t\t\t\taria-label=\"Toggle user list\"\n\t\t\t\t\t\t\t@click=\"store.commit('toggleUserlist')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"channel.type === 'special'\" class=\"chat-content\">\n\t\t\t\t\t<div class=\"chat\">\n\t\t\t\t\t\t<div class=\"messages\">\n\t\t\t\t\t\t\t<div class=\"msg\">\n\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\t:is=\"specialComponent\"\n\t\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"chat-content\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'scroll-down tooltipped tooltipped-w tooltipped-no-touch',\n\t\t\t\t\t\t\t{'scroll-down-shown': !channel.scrolledToBottom},\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\taria-label=\"Jump to recent messages\"\n\t\t\t\t\t\t@click=\"messageList?.jumpToBottom()\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"scroll-down-arrow\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChatUserList v-if=\"channel.type === 'channel'\" :channel=\"channel\" />\n\t\t\t\t\t<MessageList\n\t\t\t\t\t\tref=\"messageList\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t:focused=\"focused\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-if=\"store.state.currentUserVisibleError\"\n\t\t\tid=\"user-visible-error\"\n\t\t\t@click=\"hideUserVisibleError\"\n\t\t>\n\t\t\t{{ store.state.currentUserVisibleError }}\n\t\t</div>\n\t\t<ChatInput :network=\"network\" :channel=\"channel\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport socket from \"../js/socket\";\nimport eventbus from \"../js/eventbus\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport MessageList from \"./MessageList.vue\";\nimport ChatInput from \"./ChatInput.vue\";\nimport ChatUserList from \"./ChatUserList.vue\";\nimport SidebarToggle from \"./SidebarToggle.vue\";\nimport MessageSearchForm from \"./MessageSearchForm.vue\";\nimport ListBans from \"./Special/ListBans.vue\";\nimport ListInvites from \"./Special/ListInvites.vue\";\nimport ListChannels from \"./Special/ListChannels.vue\";\nimport ListIgnored from \"./Special/ListIgnored.vue\";\nimport {defineComponent, PropType, ref, computed, watch, nextTick, onMounted, Component} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"Chat\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tMessageList,\n\t\tChatInput,\n\t\tChatUserList,\n\t\tSidebarToggle,\n\t\tMessageSearchForm,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t\tfocused: Number,\n\t},\n\temits: [\"channel-changed\"],\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\n\t\tconst messageList = ref<typeof MessageList>();\n\t\tconst topicInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst specialComponent = computed(() => {\n\t\t\tswitch (props.channel.special) {\n\t\t\t\tcase \"list_bans\":\n\t\t\t\t\treturn ListBans as Component;\n\t\t\t\tcase \"list_invites\":\n\t\t\t\t\treturn ListInvites as Component;\n\t\t\t\tcase \"list_channels\":\n\t\t\t\t\treturn ListChannels as Component;\n\t\t\t\tcase \"list_ignored\":\n\t\t\t\t\treturn ListIgnored as Component;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\n\t\tconst channelChanged = () => {\n\t\t\t// Triggered when active channel is set or changed\n\t\t\temit(\"channel-changed\", props.channel);\n\n\t\t\tsocket.emit(\"open\", props.channel.id);\n\n\t\t\tif (props.channel.usersOutdated) {\n\t\t\t\tprops.channel.usersOutdated = false;\n\n\t\t\t\tsocket.emit(\"names\", {\n\t\t\t\t\ttarget: props.channel.id,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst hideUserVisibleError = () => {\n\t\t\tstore.commit(\"currentUserVisibleError\", null);\n\t\t};\n\n\t\tconst editTopic = () => {\n\t\t\tif (props.channel.type === \"channel\") {\n\t\t\t\tprops.channel.editTopic = true;\n\t\t\t}\n\t\t};\n\n\t\tconst saveTopic = () => {\n\t\t\tprops.channel.editTopic = false;\n\n\t\t\tif (!topicInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newTopic = topicInput.value.value;\n\n\t\t\tif (props.channel.topic !== newTopic) {\n\t\t\t\tconst target = props.channel.id;\n\t\t\t\tconst text = `/raw TOPIC ${props.channel.name} :${newTopic}`;\n\t\t\t\tsocket.emit(\"input\", {target, text});\n\t\t\t}\n\t\t};\n\n\t\tconst openContextMenu = (event: any) => {\n\t\t\teventbus.emit(\"contextmenu:channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t\tnetwork: props.network,\n\t\t\t});\n\t\t};\n\n\t\tconst openMentions = (event: any) => {\n\t\t\teventbus.emit(\"mentions:toggle\", {\n\t\t\t\tevent: event,\n\t\t\t});\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.channel,\n\t\t\t() => {\n\t\t\t\tchannelChanged();\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.editTopic,\n\t\t\t(newTopic) => {\n\t\t\t\tif (newTopic) {\n\t\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\t\ttopicInput.value?.focus();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\tchannelChanged();\n\n\t\t\tif (props.channel.editTopic) {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\ttopicInput.value?.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tmessageList,\n\t\t\ttopicInput,\n\t\t\tspecialComponent,\n\t\t\thideUserVisibleError,\n\t\t\teditTopic,\n\t\t\tsaveTopic,\n\t\t\topenContextMenu,\n\t\t\topenMentions,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div ref=\"chat\" class=\"chat\" tabindex=\"-1\">\n\t\t<div v-show=\"channel.moreHistoryAvailable\" class=\"show-more\">\n\t\t\t<button\n\t\t\t\tref=\"loadMoreButton\"\n\t\t\t\t:disabled=\"channel.historyLoading || !store.state.isConnected\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click=\"onShowMoreClick\"\n\t\t\t>\n\t\t\t\t<span v-if=\"channel.historyLoading\">Loading…</span>\n\t\t\t\t<span v-else>Show older messages</span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div\n\t\t\tclass=\"messages\"\n\t\t\trole=\"log\"\n\t\t\taria-live=\"polite\"\n\t\t\taria-relevant=\"additions\"\n\t\t\t@copy=\"onCopy\"\n\t\t>\n\t\t\t<template v-for=\"(message, id) in condensedMessages\">\n\t\t\t\t<DateMarker\n\t\t\t\t\tv-if=\"shouldDisplayDateMarker(message, id)\"\n\t\t\t\t\t:key=\"message.id + '-date'\"\n\t\t\t\t\t:message=\"message as any\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"shouldDisplayUnreadMarker(Number(message.id))\"\n\t\t\t\t\t:key=\"message.id + '-unread'\"\n\t\t\t\t\tclass=\"unread-marker\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"unread-marker-text\" />\n\t\t\t\t</div>\n\n\t\t\t\t<MessageCondensed\n\t\t\t\t\tv-if=\"message.type === 'condensed'\"\n\t\t\t\t\t:key=\"message.messages[0].id\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:messages=\"message.messages\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t/>\n\t\t\t\t<Message\n\t\t\t\t\tv-else\n\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:is-previous-source=\"isPreviousSource(message, id)\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t\t@toggle-link-preview=\"onLinkPreviewToggle\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {condensedTypes} from \"../../shared/irc\";\nimport eventbus from \"../js/eventbus\";\nimport clipboard from \"../js/clipboard\";\nimport socket from \"../js/socket\";\nimport Message from \"./Message.vue\";\nimport MessageCondensed from \"./MessageCondensed.vue\";\nimport DateMarker from \"./DateMarker.vue\";\nimport {\n\tcomputed,\n\tdefineComponent,\n\tnextTick,\n\tonBeforeUnmount,\n\tonBeforeUpdate,\n\tonMounted,\n\tonUnmounted,\n\tPropType,\n\tref,\n\twatch,\n} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientChan, ClientMessage, ClientNetwork, ClientLinkPreview} from \"../js/types\";\nimport Msg from \"../../server/models/msg\";\n\ntype CondensedMessageContainer = {\n\ttype: \"condensed\";\n\ttime: Date;\n\tmessages: ClientMessage[];\n\tid?: number;\n};\n\n// TODO; move into component\nlet unreadMarkerShown = false;\n\nexport default defineComponent({\n\tname: \"MessageList\",\n\tcomponents: {\n\t\tMessage,\n\t\tMessageCondensed,\n\t\tDateMarker,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t\tfocused: Number,\n\t},\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\n\t\tconst chat = ref<HTMLDivElement | null>(null);\n\t\tconst loadMoreButton = ref<HTMLButtonElement | null>(null);\n\t\tconst historyObserver = ref<IntersectionObserver | null>(null);\n\t\tconst skipNextScrollEvent = ref(false);\n\n\t\tconst isWaitingForNextTick = ref(false);\n\n\t\tconst jumpToBottom = () => {\n\t\t\tskipNextScrollEvent.value = true;\n\t\t\tprops.channel.scrolledToBottom = true;\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (el) {\n\t\t\t\tel.scrollTop = el.scrollHeight;\n\t\t\t}\n\t\t};\n\n\t\tconst onShowMoreClick = () => {\n\t\t\tif (!store.state.isConnected) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet lastMessage = -1;\n\n\t\t\t// Find the id of first message that isn't showInActive\n\t\t\t// If showInActive is set, this message is actually in another channel\n\t\t\tfor (const message of props.channel.messages) {\n\t\t\t\tif (!message.showInActive) {\n\t\t\t\t\tlastMessage = message.id;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprops.channel.historyLoading = true;\n\n\t\t\tsocket.emit(\"more\", {\n\t\t\t\ttarget: props.channel.id,\n\t\t\t\tlastId: lastMessage,\n\t\t\t\tcondensed: store.state.settings.statusMessages !== \"shown\",\n\t\t\t});\n\t\t};\n\n\t\tconst onLoadButtonObserved = (entries: IntersectionObserverEntry[]) => {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (!entry.isIntersecting) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tonShowMoreClick();\n\t\t\t});\n\t\t};\n\n\t\tnextTick(() => {\n\t\t\tif (!chat.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (window.IntersectionObserver) {\n\t\t\t\thistoryObserver.value = new window.IntersectionObserver(onLoadButtonObserved, {\n\t\t\t\t\troot: chat.value,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tjumpToBottom();\n\t\t}).catch((e) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Error in new IntersectionObserver\", e);\n\t\t});\n\n\t\tconst condensedMessages = computed(() => {\n\t\t\tif (props.channel.type !== \"channel\" && props.channel.type !== \"query\") {\n\t\t\t\treturn props.channel.messages;\n\t\t\t}\n\n\t\t\t// If actions are hidden, just return a message list with them excluded\n\t\t\tif (store.state.settings.statusMessages === \"hidden\") {\n\t\t\t\treturn props.channel.messages.filter(\n\t\t\t\t\t(message) => !condensedTypes.has(message.type)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// If actions are not condensed, just return raw message list\n\t\t\tif (store.state.settings.statusMessages !== \"condensed\") {\n\t\t\t\treturn props.channel.messages;\n\t\t\t}\n\n\t\t\tlet lastCondensedContainer: CondensedMessageContainer | null = null;\n\n\t\t\tconst condensed: (ClientMessage | CondensedMessageContainer)[] = [];\n\n\t\t\tfor (const message of props.channel.messages) {\n\t\t\t\t// If this message is not condensable, or its an action affecting our user,\n\t\t\t\t// then just append the message to container and be done with it\n\t\t\t\tif (message.self || message.highlight || !condensedTypes.has(message.type)) {\n\t\t\t\t\tlastCondensedContainer = null;\n\n\t\t\t\t\tcondensed.push(message);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!lastCondensedContainer) {\n\t\t\t\t\tlastCondensedContainer = {\n\t\t\t\t\t\ttime: message.time,\n\t\t\t\t\t\ttype: \"condensed\",\n\t\t\t\t\t\tmessages: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tcondensed.push(lastCondensedContainer);\n\t\t\t\t}\n\n\t\t\t\tlastCondensedContainer!.messages.push(message);\n\n\t\t\t\t// Set id of the condensed container to last message id,\n\t\t\t\t// which is required for the unread marker to work correctly\n\t\t\t\tlastCondensedContainer!.id = message.id;\n\n\t\t\t\t// If this message is the unread boundary, create a split condensed container\n\t\t\t\tif (message.id === props.channel.firstUnread) {\n\t\t\t\t\tlastCondensedContainer = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn condensed.map((message) => {\n\t\t\t\t// Skip condensing single messages, it doesn't save any\n\t\t\t\t// space but makes useful information harder to see\n\t\t\t\tif (message.type === \"condensed\" && message.messages.length === 1) {\n\t\t\t\t\treturn message.messages[0];\n\t\t\t\t}\n\n\t\t\t\treturn message;\n\t\t\t});\n\t\t});\n\n\t\tconst shouldDisplayDateMarker = (\n\t\t\tmessage: Msg | ClientMessage | CondensedMessageContainer,\n\t\t\tid: number\n\t\t) => {\n\t\t\tconst previousMessage = condensedMessages.value[id - 1];\n\n\t\t\tif (!previousMessage) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst oldDate = new Date(previousMessage.time);\n\t\t\tconst newDate = new Date(message.time);\n\n\t\t\treturn (\n\t\t\t\toldDate.getDate() !== newDate.getDate() ||\n\t\t\t\toldDate.getMonth() !== newDate.getMonth() ||\n\t\t\t\toldDate.getFullYear() !== newDate.getFullYear()\n\t\t\t);\n\t\t};\n\n\t\tconst shouldDisplayUnreadMarker = (id: number) => {\n\t\t\tif (!unreadMarkerShown && id > props.channel.firstUnread) {\n\t\t\t\tunreadMarkerShown = true;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst isPreviousSource = (currentMessage: ClientMessage | Msg, id: number) => {\n\t\t\tconst previousMessage = condensedMessages.value[id - 1];\n\t\t\treturn !!(\n\t\t\t\tpreviousMessage &&\n\t\t\t\tcurrentMessage.type === \"message\" &&\n\t\t\t\tpreviousMessage.type === \"message\" &&\n\t\t\t\tpreviousMessage.from &&\n\t\t\t\tcurrentMessage.from.nick === previousMessage.from.nick\n\t\t\t);\n\t\t};\n\n\t\tconst onCopy = () => {\n\t\t\tif (chat.value) {\n\t\t\t\tclipboard(chat.value);\n\t\t\t}\n\t\t};\n\n\t\tconst keepScrollPosition = async () => {\n\t\t\t// If we are already waiting for the next tick to force scroll position,\n\t\t\t// we have no reason to perform more checks and set it again in the next tick\n\t\t\tif (isWaitingForNextTick.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!props.channel.scrolledToBottom) {\n\t\t\t\tif (props.channel.historyLoading) {\n\t\t\t\t\tconst heightOld = el.scrollHeight - el.scrollTop;\n\n\t\t\t\t\tisWaitingForNextTick.value = true;\n\n\t\t\t\t\tawait nextTick();\n\n\t\t\t\t\tisWaitingForNextTick.value = false;\n\t\t\t\t\tskipNextScrollEvent.value = true;\n\n\t\t\t\t\tel.scrollTop = el.scrollHeight - heightOld;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisWaitingForNextTick.value = true;\n\t\t\tawait nextTick();\n\t\t\tisWaitingForNextTick.value = false;\n\n\t\t\tjumpToBottom();\n\t\t};\n\n\t\tconst onLinkPreviewToggle = async (preview: ClientLinkPreview, message: ClientMessage) => {\n\t\t\tawait keepScrollPosition();\n\n\t\t\t// Tell the server we're toggling so it remembers at page reload\n\t\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\t\ttarget: props.channel.id,\n\t\t\t\tmsgId: message.id,\n\t\t\t\tlink: preview.link,\n\t\t\t\tshown: preview.shown,\n\t\t\t});\n\t\t};\n\n\t\tconst handleScroll = () => {\n\t\t\t// Setting scrollTop also triggers scroll event\n\t\t\t// We don't want to perform calculations for that\n\t\t\tif (skipNextScrollEvent.value) {\n\t\t\t\tskipNextScrollEvent.value = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprops.channel.scrolledToBottom = el.scrollHeight - el.scrollTop - el.offsetHeight <= 30;\n\t\t};\n\n\t\tconst handleResize = () => {\n\t\t\t// Keep message list scrolled to bottom on resize\n\t\t\tif (props.channel.scrolledToBottom) {\n\t\t\t\tjumpToBottom();\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tchat.value?.addEventListener(\"scroll\", handleScroll, {passive: true});\n\n\t\t\teventbus.on(\"resize\", handleResize);\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (historyObserver.value && loadMoreButton.value) {\n\t\t\t\t\thistoryObserver.value.observe(loadMoreButton.value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\twatch(\n\t\t\t() => props.channel.id,\n\t\t\t() => {\n\t\t\t\tprops.channel.scrolledToBottom = true;\n\n\t\t\t\t// Re-add the intersection observer to trigger the check again on channel switch\n\t\t\t\t// Otherwise if last channel had the button visible, switching to a new channel won't trigger the history\n\t\t\t\tif (historyObserver.value && loadMoreButton.value) {\n\t\t\t\t\thistoryObserver.value.unobserve(loadMoreButton.value);\n\t\t\t\t\thistoryObserver.value.observe(loadMoreButton.value);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.messages,\n\t\t\tasync () => {\n\t\t\t\tawait keepScrollPosition();\n\t\t\t},\n\t\t\t{\n\t\t\t\tdeep: true,\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.pendingMessage,\n\t\t\tasync () => {\n\t\t\t\t// Keep the scroll stuck when input gets resized while typing\n\t\t\t\tawait keepScrollPosition();\n\t\t\t}\n\t\t);\n\n\t\tonBeforeUpdate(() => {\n\t\t\tunreadMarkerShown = false;\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"resize\", handleResize);\n\t\t\tchat.value?.removeEventListener(\"scroll\", handleScroll);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tif (historyObserver.value) {\n\t\t\t\thistoryObserver.value.disconnect();\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tchat,\n\t\t\tstore,\n\t\t\tonShowMoreClick,\n\t\t\tloadMoreButton,\n\t\t\tonCopy,\n\t\t\tcondensedMessages,\n\t\t\tshouldDisplayDateMarker,\n\t\t\tshouldDisplayUnreadMarker,\n\t\t\tkeepScrollPosition,\n\t\t\tisPreviousSource,\n\t\t\tjumpToBottom,\n\t\t\tonLinkPreviewToggle,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div :class=\"['msg', {closed: isCollapsed}]\" data-type=\"condensed\">\n\t\t<div class=\"condensed-summary\">\n\t\t\t<span class=\"time\" />\n\t\t\t<span class=\"from\" />\n\t\t\t<span class=\"content\" @click=\"onCollapseClick\"\n\t\t\t\t>{{ condensedText\n\t\t\t\t}}<button class=\"toggle-button\" aria-label=\"Toggle status messages\"\n\t\t\t/></span>\n\t\t</div>\n\t\t<Message\n\t\t\tv-for=\"message in messages\"\n\t\t\t:key=\"message.id\"\n\t\t\t:network=\"network\"\n\t\t\t:message=\"message\"\n\t\t/>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType, ref} from \"vue\";\nimport {condensedTypes} from \"../../shared/irc\";\nimport {ClientMessage, ClientNetwork} from \"../js/types\";\nimport Message from \"./Message.vue\";\n\nexport default defineComponent({\n\tname: \"MessageCondensed\",\n\tcomponents: {\n\t\tMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tmessages: {\n\t\t\ttype: Array as PropType<ClientMessage[]>,\n\t\t\trequired: true,\n\t\t},\n\t\tkeepScrollPosition: {\n\t\t\ttype: Function as PropType<() => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst isCollapsed = ref(true);\n\n\t\tconst onCollapseClick = () => {\n\t\t\tisCollapsed.value = !isCollapsed.value;\n\t\t\tprops.keepScrollPosition();\n\t\t};\n\n\t\tconst condensedText = computed(() => {\n\t\t\tconst obj: Record<string, number> = {};\n\n\t\t\tcondensedTypes.forEach((type) => {\n\t\t\t\tobj[type] = 0;\n\t\t\t});\n\n\t\t\tfor (const message of props.messages) {\n\t\t\t\t// special case since one MODE message can change multiple modes\n\t\t\t\tif (message.type === \"mode\") {\n\t\t\t\t\t// syntax: +vv-t maybe-some targets\n\t\t\t\t\t// we want the number of mode changes in the message, so count the\n\t\t\t\t\t// number of chars other than + and - before the first space\n\t\t\t\t\tconst modeChangesCount = message.text\n\t\t\t\t\t\t.split(\" \")[0]\n\t\t\t\t\t\t.split(\"\")\n\t\t\t\t\t\t.filter((char) => char !== \"+\" && char !== \"-\").length;\n\t\t\t\t\tobj[message.type] += modeChangesCount;\n\t\t\t\t} else {\n\t\t\t\t\tobj[message.type]++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Count quits as parts in condensed messages to reduce information density\n\t\t\tobj.part += obj.quit;\n\n\t\t\tconst strings: string[] = [];\n\t\t\tcondensedTypes.forEach((type) => {\n\t\t\t\tif (obj[type]) {\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase \"chghost\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1\n\t\t\t\t\t\t\t\t\t\t? \" users have changed hostname\"\n\t\t\t\t\t\t\t\t\t\t: \" user has changed hostname\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"join\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users have joined\" : \" user has joined\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"part\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users have left\" : \" user has left\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"nick\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1\n\t\t\t\t\t\t\t\t\t\t? \" users have changed nick\"\n\t\t\t\t\t\t\t\t\t\t: \" user has changed nick\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"kick\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users were kicked\" : \" user was kicked\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"mode\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" modes were set\" : \" mode was set\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"away\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\t\"marked away \" +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? String(obj[type]) + \" times\" : \"once\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"back\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\t\"marked back \" +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? String(obj[type]) + \" times\" : \"once\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (strings.length) {\n\t\t\t\tlet text = strings.pop();\n\n\t\t\t\tif (strings.length) {\n\t\t\t\t\ttext = strings.join(\", \") + \", and \" + text!;\n\t\t\t\t}\n\n\t\t\t\treturn text;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t});\n\n\t\treturn {\n\t\t\tisCollapsed,\n\t\t\tcondensedText,\n\t\t\tonCollapseClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./MessageCondensed.vue?vue&type=template&id=41ebb2a0&ts=true\"\nimport script from \"./MessageCondensed.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageCondensed.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export default function (chat: HTMLDivElement) {\n\t// Disable in Firefox as it already copies flex text correctly\n\t// @ts-expect-error Property 'InstallTrigger' does not exist on type 'Window & typeof globalThis'.ts(2339)\n\tif (typeof window.InstallTrigger !== \"undefined\") {\n\t\treturn;\n\t}\n\n\tconst selection = window.getSelection();\n\n\tif (!selection) {\n\t\treturn;\n\t}\n\n\t// If selection does not span multiple elements, do nothing\n\tif (selection.anchorNode === selection.focusNode) {\n\t\treturn;\n\t}\n\n\tconst range = selection.getRangeAt(0);\n\tconst documentFragment = range.cloneContents();\n\tconst div = document.createElement(\"div\");\n\n\tdiv.id = \"js-copy-hack\";\n\tdiv.appendChild(documentFragment);\n\tchat.appendChild(div);\n\n\tselection.selectAllChildren(div);\n\n\twindow.setTimeout(() => {\n\t\tchat.removeChild(div);\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\t}, 0);\n}\n","import { render } from \"./MessageList.vue?vue&type=template&id=70fab858&ts=true\"\nimport script from \"./MessageList.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form id=\"form\" method=\"post\" action=\"\" @submit.prevent=\"onSubmit\">\n\t\t<span id=\"upload-progressbar\" />\n\t\t<span id=\"nick\">{{ network.nick }}</span>\n\t\t<textarea\n\t\t\tid=\"input\"\n\t\t\tref=\"input\"\n\t\t\tdir=\"auto\"\n\t\t\tclass=\"mousetrap\"\n\t\t\tenterkeyhint=\"send\"\n\t\t\t:value=\"channel.pendingMessage\"\n\t\t\t:placeholder=\"getInputPlaceholder(channel)\"\n\t\t\t:aria-label=\"getInputPlaceholder(channel)\"\n\t\t\t@input=\"setPendingMessage\"\n\t\t\t@keypress.enter.exact.prevent=\"onSubmit\"\n\t\t\t@blur=\"onBlur\"\n\t\t/>\n\t\t<span\n\t\t\tv-if=\"store.state.serverConfiguration?.fileUpload\"\n\t\t\tid=\"upload-tooltip\"\n\t\t\tclass=\"tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t\taria-label=\"Upload file\"\n\t\t\t@click=\"openFileUpload\"\n\t\t>\n\t\t\t<input\n\t\t\t\tid=\"upload-input\"\n\t\t\t\tref=\"uploadInput\"\n\t\t\t\ttype=\"file\"\n\t\t\t\taria-labelledby=\"upload\"\n\t\t\t\tmultiple\n\t\t\t\t@change=\"onUploadInputChange\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tid=\"upload\"\n\t\t\t\ttype=\"button\"\n\t\t\t\taria-label=\"Upload file\"\n\t\t\t\t:disabled=\"!store.state.isConnected\"\n\t\t\t/>\n\t\t</span>\n\t\t<span\n\t\t\tid=\"submit-tooltip\"\n\t\t\tclass=\"tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t\taria-label=\"Send message\"\n\t\t>\n\t\t\t<button\n\t\t\t\tid=\"submit\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\taria-label=\"Send message\"\n\t\t\t\t:disabled=\"!store.state.isConnected\"\n\t\t\t/>\n\t\t</span>\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport Mousetrap from \"mousetrap\";\nimport {wrapCursor} from \"undate\";\nimport autocompletion from \"../js/autocompletion\";\nimport commands from \"../js/commands/index\";\nimport socket from \"../js/socket\";\nimport upload from \"../js/upload\";\nimport eventbus from \"../js/eventbus\";\nimport {watch, defineComponent, nextTick, onMounted, PropType, ref, onUnmounted} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nconst formattingHotkeys = {\n\t\"mod+k\": \"\\x03\",\n\t\"mod+b\": \"\\x02\",\n\t\"mod+u\": \"\\x1F\",\n\t\"mod+i\": \"\\x1D\",\n\t\"mod+o\": \"\\x0F\",\n\t\"mod+s\": \"\\x1e\",\n\t\"mod+m\": \"\\x11\",\n};\n\n// Autocomplete bracket and quote characters like in a modern IDE\n// For example, select `text`, press `[` key, and it becomes `[text]`\nconst bracketWraps = {\n\t'\"': '\"',\n\t\"'\": \"'\",\n\t\"(\": \")\",\n\t\"<\": \">\",\n\t\"[\": \"]\",\n\t\"{\": \"}\",\n\t\"*\": \"*\",\n\t\"`\": \"`\",\n\t\"~\": \"~\",\n\t_: \"_\",\n};\n\nexport default defineComponent({\n\tname: \"ChatInput\",\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst input = ref<HTMLTextAreaElement>();\n\t\tconst uploadInput = ref<HTMLInputElement>();\n\t\tconst autocompletionRef = ref<ReturnType<typeof autocompletion>>();\n\n\t\tconst setInputSize = () => {\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst style = window.getComputedStyle(input.value);\n\t\t\t\tconst lineHeight = parseFloat(style.lineHeight) || 1;\n\n\t\t\t\t// Start by resetting height before computing as scrollHeight does not\n\t\t\t\t// decrease when deleting characters\n\t\t\t\tinput.value.style.height = \"\";\n\n\t\t\t\t// Use scrollHeight to calculate how many lines there are in input, and ceil the value\n\t\t\t\t// because some browsers tend to incorrently round the values when using high density\n\t\t\t\t// displays or using page zoom feature\n\t\t\t\tinput.value.style.height = `${\n\t\t\t\t\tMath.ceil(input.value.scrollHeight / lineHeight) * lineHeight\n\t\t\t\t}px`;\n\t\t\t});\n\t\t};\n\n\t\tconst setPendingMessage = (e: Event) => {\n\t\t\tprops.channel.pendingMessage = (e.target as HTMLInputElement).value;\n\t\t\tprops.channel.inputHistoryPosition = 0;\n\t\t\tsetInputSize();\n\t\t};\n\n\t\tconst getInputPlaceholder = (channel: ClientChan) => {\n\t\t\tif (channel.type === \"channel\" || channel.type === \"query\") {\n\t\t\t\treturn `Write to ${channel.name}`;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t};\n\n\t\tconst onSubmit = () => {\n\t\t\tif (!input.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Triggering click event opens the virtual keyboard on mobile\n\t\t\t// This can only be called from another interactive event (e.g. button click)\n\t\t\tinput.value.click();\n\t\t\tinput.value.focus();\n\n\t\t\tif (!store.state.isConnected) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst target = props.channel.id;\n\t\t\tconst text = props.channel.pendingMessage;\n\n\t\t\tif (text.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.hide();\n\t\t\t}\n\n\t\t\tprops.channel.inputHistoryPosition = 0;\n\t\t\tprops.channel.pendingMessage = \"\";\n\t\t\tinput.value.value = \"\";\n\t\t\tsetInputSize();\n\n\t\t\t// Store new message in history if last message isn't already equal\n\t\t\tif (props.channel.inputHistory[1] !== text) {\n\t\t\t\tprops.channel.inputHistory.splice(1, 0, text);\n\t\t\t}\n\n\t\t\t// Limit input history to a 100 entries\n\t\t\tif (props.channel.inputHistory.length > 100) {\n\t\t\t\tprops.channel.inputHistory.pop();\n\t\t\t}\n\n\t\t\tif (text[0] === \"/\") {\n\t\t\t\tconst args = text.substring(1).split(\" \");\n\t\t\t\tconst cmd = args.shift()?.toLowerCase();\n\n\t\t\t\tif (!cmd) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tObject.prototype.hasOwnProperty.call(commands, cmd) &&\n\t\t\t\t\tcommands[cmd].input(args)\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsocket.emit(\"input\", {target, text});\n\t\t};\n\n\t\tconst onUploadInputChange = () => {\n\t\t\tif (!uploadInput.value || !uploadInput.value.files) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst files = Array.from(uploadInput.value.files);\n\t\t\tupload.triggerUpload(files);\n\t\t\tuploadInput.value.value = \"\"; // Reset <input> element so you can upload the same file\n\t\t};\n\n\t\tconst openFileUpload = () => {\n\t\t\tuploadInput.value?.click();\n\t\t};\n\n\t\tconst blurInput = () => {\n\t\t\tinput.value?.blur();\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.hide();\n\t\t\t}\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.channel.id,\n\t\t\t() => {\n\t\t\t\tif (autocompletionRef.value) {\n\t\t\t\t\tautocompletionRef.value.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.pendingMessage,\n\t\t\t() => {\n\t\t\t\tsetInputSize();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", blurInput);\n\n\t\t\tif (store.state.settings.autocomplete) {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\tthrow new Error(\"ChatInput autocomplete: input element is not available\");\n\t\t\t\t}\n\n\t\t\t\tautocompletionRef.value = autocompletion(input.value);\n\t\t\t}\n\n\t\t\tconst inputTrap = Mousetrap(input.value);\n\n\t\t\tinputTrap.bind(Object.keys(formattingHotkeys), function (e, key) {\n\t\t\t\tconst modifier = formattingHotkeys[key];\n\n\t\t\t\tif (!e.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twrapCursor(\n\t\t\t\t\te.target as HTMLTextAreaElement,\n\t\t\t\t\tmodifier,\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionStart ===\n\t\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd\n\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t: modifier\n\t\t\t\t);\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tinputTrap.bind(Object.keys(bracketWraps), function (e, key) {\n\t\t\t\tif (\n\t\t\t\t\t(e.target as HTMLTextAreaElement)?.selectionStart !==\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd\n\t\t\t\t) {\n\t\t\t\t\twrapCursor(e.target as HTMLTextAreaElement, key, bracketWraps[key]);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinputTrap.bind([\"up\", \"down\"], (e, key) => {\n\t\t\t\tif (\n\t\t\t\t\tstore.state.isAutoCompleting ||\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionStart !==\n\t\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd ||\n\t\t\t\t\t!input.value\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst onRow = (\n\t\t\t\t\tinput.value.value.slice(undefined, input.value.selectionStart).match(/\\n/g) ||\n\t\t\t\t\t[]\n\t\t\t\t).length;\n\t\t\t\tconst totalRows = (input.value.value.match(/\\n/g) || []).length;\n\n\t\t\t\tconst {channel} = props;\n\n\t\t\t\tif (channel.inputHistoryPosition === 0) {\n\t\t\t\t\tchannel.inputHistory[channel.inputHistoryPosition] = channel.pendingMessage;\n\t\t\t\t}\n\n\t\t\t\tif (key === \"up\" && onRow === 0) {\n\t\t\t\t\tif (channel.inputHistoryPosition < channel.inputHistory.length - 1) {\n\t\t\t\t\t\tchannel.inputHistoryPosition++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\tkey === \"down\" &&\n\t\t\t\t\tchannel.inputHistoryPosition > 0 &&\n\t\t\t\t\tonRow === totalRows\n\t\t\t\t) {\n\t\t\t\t\tchannel.inputHistoryPosition--;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tchannel.pendingMessage = channel.inputHistory[channel.inputHistoryPosition];\n\t\t\t\tinput.value.value = channel.pendingMessage;\n\t\t\t\tsetInputSize();\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (store.state.serverConfiguration?.fileUpload) {\n\t\t\t\tupload.mounted();\n\t\t\t}\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", blurInput);\n\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.destroy();\n\t\t\t\tautocompletionRef.value = undefined;\n\t\t\t}\n\n\t\t\tupload.unmounted();\n\t\t\tupload.abort();\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tinput,\n\t\t\tuploadInput,\n\t\t\tonUploadInputChange,\n\t\t\topenFileUpload,\n\t\t\tblurInput,\n\t\t\tonBlur,\n\t\t\tsetInputSize,\n\t\t\tupload,\n\t\t\tgetInputPlaceholder,\n\t\t\tonSubmit,\n\t\t\tsetPendingMessage,\n\t\t};\n\t},\n});\n</script>\n","import constants from \"./constants\";\n\nimport Mousetrap from \"mousetrap\";\nimport {Strategy, Textcomplete, StrategyProps} from \"@textcomplete/core\";\nimport {TextareaEditor} from \"@textcomplete/textarea\";\n\nimport fuzzy from \"fuzzy\";\n\nimport emojiMap from \"./helpers/simplemap.json\";\nimport {store} from \"./store\";\n\nexport default enableAutocomplete;\n\nconst emojiSearchTerms = Object.keys(emojiMap);\nconst emojiStrategy: StrategyProps = {\n\tid: \"emoji\",\n\tmatch: /(^|\\s):([-+\\w:?]{2,}):?$/,\n\tsearch(term: string, callback: (matches) => void) {\n\t\t// Trim colon from the matched term,\n\t\t// as we are unable to get a clean string from match regex\n\t\tterm = term.replace(/:$/, \"\");\n\t\tcallback(fuzzyGrep(term, emojiSearchTerms));\n\t},\n\ttemplate([string, original]: [string, string]) {\n\t\treturn `<span class=\"emoji\">${String(emojiMap[original])}</span> ${string}`;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + String(emojiMap[original]);\n\t},\n\tindex: 2,\n};\n\nconst nicksStrategy: StrategyProps = {\n\tid: \"nicks\",\n\tmatch: /(^|\\s)(@([a-zA-Z_[\\]\\\\^{}|`@][a-zA-Z0-9_[\\]\\\\^{}|`-]*)?)$/,\n\tsearch(term: string, callback: (matches: string[] | string[][]) => void) {\n\t\tterm = term.slice(1);\n\n\t\tif (term[0] === \"@\") {\n\t\t\t// TODO: type\n\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n\t\t\tcallback(completeNicks(term.slice(1), true).map((val) => [\"@\" + val[0], \"@\" + val[1]]));\n\t\t} else {\n\t\t\tcallback(completeNicks(term, true));\n\t\t}\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + replaceNick(original);\n\t},\n\tindex: 2,\n};\n\nconst chanStrategy: StrategyProps = {\n\tid: \"chans\",\n\tmatch: /(^|\\s)((?:#|\\+|&|![A-Z0-9]{5})(?:[^\\s]+)?)$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tcallback(completeChans(term));\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + original;\n\t},\n\tindex: 2,\n};\n\nconst commandStrategy: StrategyProps = {\n\tid: \"commands\",\n\tmatch: /^\\/(\\w*)$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tcallback(completeCommands(\"/\" + term));\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn original;\n\t},\n\tindex: 1,\n};\n\nconst foregroundColorStrategy: StrategyProps = {\n\tid: \"foreground-colors\",\n\tmatch: /\\x03(\\d{0,2}|[A-Za-z ]{0,10})$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tterm = term.toLowerCase();\n\n\t\tconst matchingColorCodes = constants.colorCodeMap\n\t\t\t.filter((i) => fuzzy.test(term, i[0]) || fuzzy.test(term, i[1]))\n\t\t\t.map((i) => {\n\t\t\t\tif (fuzzy.test(term, i[1])) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ti[0],\n\t\t\t\t\t\tfuzzy.match(term, i[1], {\n\t\t\t\t\t\t\tpre: \"<b>\",\n\t\t\t\t\t\t\tpost: \"</b>\",\n\t\t\t\t\t\t}).rendered,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn i;\n\t\t\t});\n\n\t\tcallback(matchingColorCodes);\n\t},\n\ttemplate(value: string[]) {\n\t\treturn `<span class=\"irc-fg${parseInt(value[0], 10)}\">${value[1]}</span>`;\n\t},\n\treplace(value: string) {\n\t\treturn \"\\x03\" + value[0];\n\t},\n\tindex: 1,\n};\n\nconst backgroundColorStrategy: StrategyProps = {\n\tid: \"background-colors\",\n\tmatch: /\\x03(\\d{2}),(\\d{0,2}|[A-Za-z ]{0,10})$/,\n\tsearch(term: string, callback: (matchingColorCodes: string[][]) => void, match: string[]) {\n\t\tterm = term.toLowerCase();\n\t\tconst matchingColorCodes = constants.colorCodeMap\n\t\t\t.filter((i) => fuzzy.test(term, i[0]) || fuzzy.test(term, i[1]))\n\t\t\t.map((pair) => {\n\t\t\t\tif (fuzzy.test(term, pair[1])) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\tpair[0],\n\t\t\t\t\t\tfuzzy.match(term, pair[1], {\n\t\t\t\t\t\t\tpre: \"<b>\",\n\t\t\t\t\t\t\tpost: \"</b>\",\n\t\t\t\t\t\t}).rendered,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn pair;\n\t\t\t})\n\t\t\t.map((pair) => pair.concat(match[1])); // Needed to pass fg color to `template`...\n\n\t\tcallback(matchingColorCodes);\n\t},\n\ttemplate(value: string[]) {\n\t\treturn `<span class=\"irc-fg${parseInt(value[2], 10)} irc-bg irc-bg${parseInt(\n\t\t\tvalue[0],\n\t\t\t10\n\t\t)}\">${value[1]}</span>`;\n\t},\n\treplace(value: string[]) {\n\t\treturn \"\\x03$1,\" + value[0];\n\t},\n\tindex: 2,\n};\n\nfunction enableAutocomplete(input: HTMLTextAreaElement) {\n\tlet tabCount = 0;\n\tlet lastMatch = \"\";\n\tlet currentMatches: string[] | string[][] = [];\n\n\tinput.addEventListener(\"input\", (e) => {\n\t\tif ((e as CustomEvent).detail === \"autocomplete\") {\n\t\t\treturn;\n\t\t}\n\n\t\ttabCount = 0;\n\t\tcurrentMatches = [];\n\t\tlastMatch = \"\";\n\t});\n\n\tMousetrap(input).bind(\n\t\t\"tab\",\n\t\t(e) => {\n\t\t\tif (store.state.isAutoCompleting) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tconst text = input.value;\n\n\t\t\tif (tabCount === 0) {\n\t\t\t\tlastMatch = text.substring(0, input.selectionStart).split(/\\s/).pop() || \"\";\n\n\t\t\t\tif (lastMatch.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcurrentMatches = completeNicks(lastMatch, false);\n\n\t\t\t\tif (currentMatches.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst position = input.selectionStart - lastMatch.length;\n\t\t\tconst newMatch = replaceNick(\n\t\t\t\t// TODO: type this properly\n\t\t\t\tString(currentMatches[tabCount % currentMatches.length]),\n\t\t\t\tposition\n\t\t\t);\n\t\t\tconst remainder = text.substring(input.selectionStart);\n\n\t\t\tinput.value = text.substr(0, position) + newMatch + remainder;\n\n\t\t\tinput.selectionStart -= remainder.length;\n\t\t\tinput.selectionEnd = input.selectionStart;\n\n\t\t\t// Propagate change to Vue model\n\t\t\tinput.dispatchEvent(\n\t\t\t\tnew CustomEvent(\"input\", {\n\t\t\t\t\tdetail: \"autocomplete\",\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tlastMatch = newMatch;\n\t\t\ttabCount++;\n\t\t},\n\t\t\"keydown\"\n\t);\n\n\tconst strategies = [\n\t\temojiStrategy,\n\t\tnicksStrategy,\n\t\tchanStrategy,\n\t\tcommandStrategy,\n\t\tforegroundColorStrategy,\n\t\tbackgroundColorStrategy,\n\t];\n\n\tconst editor = new TextareaEditor(input);\n\tconst textcomplete = new Textcomplete(editor, strategies, {\n\t\tdropdown: {\n\t\t\tclassName: \"textcomplete-menu\",\n\t\t\tplacement: \"top\",\n\t\t},\n\t});\n\n\ttextcomplete.on(\"show\", () => {\n\t\tstore.commit(\"isAutoCompleting\", true);\n\t});\n\n\ttextcomplete.on(\"hidden\", () => {\n\t\tstore.commit(\"isAutoCompleting\", false);\n\t});\n\n\treturn {\n\t\thide() {\n\t\t\ttextcomplete.hide();\n\t\t},\n\t\tdestroy() {\n\t\t\ttextcomplete.destroy();\n\t\t\tstore.commit(\"isAutoCompleting\", false);\n\t\t},\n\t};\n}\n\nfunction replaceNick(original: string, position = 1) {\n\t// If no postfix specified, return autocompleted nick as-is\n\tif (!store.state.settings.nickPostfix) {\n\t\treturn original;\n\t}\n\n\t// If there is whitespace in the input already, append space to nick\n\tif (position > 0 && /\\s/.test(store.state.activeChannel?.channel.pendingMessage || \"\")) {\n\t\treturn original + \" \";\n\t}\n\n\t// If nick is first in the input, append specified postfix\n\treturn original + store.state.settings.nickPostfix;\n}\n\nfunction fuzzyGrep<T>(term: string, array: Array<T>) {\n\tconst results = fuzzy.filter(term, array, {\n\t\tpre: \"<b>\",\n\t\tpost: \"</b>\",\n\t});\n\treturn results.map((el) => [el.string, el.original]);\n}\n\nfunction rawNicks() {\n\tif (!store.state.activeChannel) {\n\t\treturn [];\n\t}\n\n\tif (store.state.activeChannel.channel.users.length > 0) {\n\t\tconst users = store.state.activeChannel.channel.users.slice();\n\n\t\treturn users.sort((a, b) => b.lastMessage - a.lastMessage).map((u) => u.nick);\n\t}\n\n\tconst me = store.state.activeChannel.network.nick;\n\tconst otherUser = store.state.activeChannel.channel.name;\n\n\t// If this is a query, add their name to autocomplete\n\tif (me !== otherUser && store.state.activeChannel.channel.type === \"query\") {\n\t\treturn [otherUser, me];\n\t}\n\n\t// Return our own name by default for anything that isn't a channel or query\n\treturn [me];\n}\n\nfunction completeNicks(word: string, isFuzzy: boolean) {\n\tconst users = rawNicks();\n\tword = word.toLowerCase();\n\n\tif (isFuzzy) {\n\t\treturn fuzzyGrep(word, users);\n\t}\n\n\treturn users.filter((w) => !w.toLowerCase().indexOf(word));\n}\n\nfunction getCommands() {\n\tlet cmds = constants.commands.slice();\n\n\tif (!store.state.settings.searchEnabled) {\n\t\tcmds = cmds.filter((c) => c !== \"/search\");\n\t}\n\n\treturn cmds;\n}\n\nfunction completeCommands(word: string) {\n\tconst commands = getCommands();\n\treturn fuzzyGrep(word, commands);\n}\n\nfunction completeChans(word: string) {\n\tconst words: string[] = [];\n\n\tif (store.state.activeChannel) {\n\t\tfor (const channel of store.state.activeChannel.network.channels) {\n\t\t\t// Push all channels that start with the same CHANTYPE\n\t\t\tif (channel.type === \"channel\" && channel.name[0] === word[0]) {\n\t\t\t\twords.push(channel.name);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fuzzyGrep(word, words);\n}\n","import { render } from \"./ChatInput.vue?vue&type=template&id=027606da&ts=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<aside\n\t\tref=\"userlist\"\n\t\tclass=\"userlist\"\n\t\t:aria-label=\"'User list for ' + channel.name\"\n\t\t@mouseleave=\"removeHoverUser\"\n\t>\n\t\t<div class=\"count\">\n\t\t\t<input\n\t\t\t\tref=\"input\"\n\t\t\t\t:value=\"userSearchInput\"\n\t\t\t\t:placeholder=\"\n\t\t\t\t\tchannel.users.length + ' user' + (channel.users.length === 1 ? '' : 's')\n\t\t\t\t\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tclass=\"search\"\n\t\t\t\taria-label=\"Search among the user list\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\t@input=\"setUserSearchInput\"\n\t\t\t\t@keydown.up=\"navigateUserList($event, -1)\"\n\t\t\t\t@keydown.down=\"navigateUserList($event, 1)\"\n\t\t\t\t@keydown.page-up=\"navigateUserList($event, -10)\"\n\t\t\t\t@keydown.page-down=\"navigateUserList($event, 10)\"\n\t\t\t\t@keydown.enter=\"selectUser\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"names\">\n\t\t\t<div\n\t\t\t\tv-for=\"(users, mode) in groupedUsers\"\n\t\t\t\t:key=\"mode\"\n\t\t\t\t:class=\"['user-mode', getModeClass(String(mode))]\"\n\t\t\t>\n\t\t\t\t<template v-if=\"userSearchInput.length > 0\">\n\t\t\t\t\t<!-- eslint-disable vue/no-v-text-v-html-on-component -->\n\t\t\t\t\t<Username\n\t\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\t\t:key=\"user.original.nick + '-search'\"\n\t\t\t\t\t\t:on-hover=\"hoverUser\"\n\t\t\t\t\t\t:active=\"user.original === activeUser\"\n\t\t\t\t\t\t:user=\"user.original\"\n\t\t\t\t\t\tv-html=\"user.string\"\n\t\t\t\t\t/>\n\t\t\t\t\t<!-- eslint-enable -->\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Username\n\t\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\t\t:key=\"user.nick\"\n\t\t\t\t\t\t:on-hover=\"hoverUser\"\n\t\t\t\t\t\t:active=\"user === activeUser\"\n\t\t\t\t\t\t:user=\"user\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t</aside>\n</template>\n\n<script lang=\"ts\">\nimport {filter as fuzzyFilter} from \"fuzzy\";\nimport {computed, defineComponent, nextTick, PropType, ref} from \"vue\";\nimport type {UserInMessage} from \"../../server/models/msg\";\nimport type {ClientChan, ClientUser} from \"../js/types\";\nimport Username from \"./Username.vue\";\n\nconst modes = {\n\t\"~\": \"owner\",\n\t\"&\": \"admin\",\n\t\"!\": \"admin\",\n\t\"@\": \"op\",\n\t\"%\": \"half-op\",\n\t\"+\": \"voice\",\n\t\"\": \"normal\",\n};\n\nexport default defineComponent({\n\tname: \"ChatUserList\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst userSearchInput = ref(\"\");\n\t\tconst activeUser = ref<UserInMessage | null>();\n\t\tconst userlist = ref<HTMLDivElement>();\n\t\tconst filteredUsers = computed(() => {\n\t\t\tif (!userSearchInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn fuzzyFilter(userSearchInput.value, props.channel.users, {\n\t\t\t\tpre: \"<b>\",\n\t\t\t\tpost: \"</b>\",\n\t\t\t\textract: (u) => u.nick,\n\t\t\t});\n\t\t});\n\n\t\tconst groupedUsers = computed(() => {\n\t\t\tconst groups = {};\n\n\t\t\tif (userSearchInput.value && filteredUsers.value) {\n\t\t\t\tconst result = filteredUsers.value;\n\n\t\t\t\tfor (const user of result) {\n\t\t\t\t\tconst mode = user.original.modes[0] || \"\";\n\n\t\t\t\t\tif (!groups[mode]) {\n\t\t\t\t\t\tgroups[mode] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prepend user mode to search result\n\t\t\t\t\tuser.string = mode + user.string;\n\n\t\t\t\t\tgroups[mode].push(user);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const user of props.channel.users) {\n\t\t\t\t\tconst mode = user.modes[0] || \"\";\n\n\t\t\t\t\tif (!groups[mode]) {\n\t\t\t\t\t\tgroups[mode] = [user];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgroups[mode].push(user);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn groups as {\n\t\t\t\t[mode: string]: (ClientUser & {\n\t\t\t\t\toriginal: UserInMessage;\n\t\t\t\t\tstring: string;\n\t\t\t\t})[];\n\t\t\t};\n\t\t});\n\n\t\tconst setUserSearchInput = (e: Event) => {\n\t\t\tuserSearchInput.value = (e.target as HTMLInputElement).value;\n\t\t};\n\n\t\tconst getModeClass = (mode: string) => {\n\t\t\treturn modes[mode] as typeof modes;\n\t\t};\n\n\t\tconst selectUser = () => {\n\t\t\t// Simulate a click on the active user to open the context menu.\n\t\t\t// Coordinates are provided to position the menu correctly.\n\t\t\tif (!activeUser.value || !userlist.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = userlist.value.querySelector(\".active\");\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rect = el.getBoundingClientRect();\n\t\t\tconst ev = new MouseEvent(\"click\", {\n\t\t\t\tview: window,\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true,\n\t\t\t\tclientX: rect.left,\n\t\t\t\tclientY: rect.top + rect.height,\n\t\t\t});\n\t\t\tel.dispatchEvent(ev);\n\t\t};\n\n\t\tconst hoverUser = (user: UserInMessage) => {\n\t\t\tactiveUser.value = user;\n\t\t};\n\n\t\tconst removeHoverUser = () => {\n\t\t\tactiveUser.value = null;\n\t\t};\n\n\t\tconst scrollToActiveUser = () => {\n\t\t\t// Scroll the list if needed after the active class is applied\n\t\t\tvoid nextTick(() => {\n\t\t\t\tconst el = userlist.value?.querySelector(\".active\");\n\t\t\t\tel?.scrollIntoView({block: \"nearest\", inline: \"nearest\"});\n\t\t\t});\n\t\t};\n\n\t\tconst navigateUserList = (event: Event, direction: number) => {\n\t\t\t// Prevent propagation to stop global keybind handler from capturing pagedown/pageup\n\t\t\t// and redirecting it to the message list container for scrolling\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tlet users = props.channel.users;\n\n\t\t\t// Only using filteredUsers when we have to avoids filtering when it's not needed\n\t\t\tif (userSearchInput.value && filteredUsers.value) {\n\t\t\t\tusers = filteredUsers.value.map((result) => result.original);\n\t\t\t}\n\n\t\t\t// Bail out if there's no users to select\n\t\t\tif (!users.length) {\n\t\t\t\tactiveUser.value = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst abort = () => {\n\t\t\t\tactiveUser.value = direction ? users[0] : users[users.length - 1];\n\t\t\t\tscrollToActiveUser();\n\t\t\t};\n\n\t\t\t// If there's no active user select the first or last one depending on direction\n\t\t\tif (!activeUser.value) {\n\t\t\t\tabort();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet currentIndex = users.indexOf(activeUser.value as ClientUser);\n\n\t\t\tif (currentIndex === -1) {\n\t\t\t\tabort();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\t// Wrap around the list if necessary. Normaly each loop iterates once at most,\n\t\t\t// but might iterate more often if pgup or pgdown are used in a very short user list\n\t\t\twhile (currentIndex < 0) {\n\t\t\t\tcurrentIndex += users.length;\n\t\t\t}\n\n\t\t\twhile (currentIndex > users.length - 1) {\n\t\t\t\tcurrentIndex -= users.length;\n\t\t\t}\n\n\t\t\tactiveUser.value = users[currentIndex];\n\t\t\tscrollToActiveUser();\n\t\t};\n\n\t\treturn {\n\t\t\tfilteredUsers,\n\t\t\tgroupedUsers,\n\t\t\tuserSearchInput,\n\t\t\tactiveUser,\n\t\t\tuserlist,\n\n\t\t\tsetUserSearchInput,\n\t\t\tgetModeClass,\n\t\t\tselectUser,\n\t\t\thoverUser,\n\t\t\tremoveHoverUser,\n\t\t\tnavigateUserList,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ChatUserList.vue?vue&type=template&id=709fe8dc&ts=true\"\nimport script from \"./ChatUserList.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatUserList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"ban-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Banned</th>\n\t\t\t\t<th class=\"banned_by\">Banned By</th>\n\t\t\t\t<th class=\"banned_at\">Banned At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"ban in channel.data\" :key=\"ban.hostmask\">\n\t\t\t\t<td class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"ban.hostmask\" /></td>\n\t\t\t\t<td class=\"banned_by\">{{ ban.banned_by }}</td>\n\t\t\t\t<td class=\"banned_at\">{{ localetime(ban.banned_at) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localeTime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListBans\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\tconst localetime = (date: number | Date) => {\n\t\t\treturn localeTime(date);\n\t\t};\n\n\t\treturn {\n\t\t\tlocaletime,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListBans.vue?vue&type=template&id=43e48268&ts=true\"\nimport script from \"./ListBans.vue?vue&type=script&lang=ts\"\nexport * from \"./ListBans.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"invite-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Invited</th>\n\t\t\t\t<th class=\"invitened_by\">Invited By</th>\n\t\t\t\t<th class=\"invitened_at\">Invited At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"invite in channel.data\" :key=\"invite.hostmask\">\n\t\t\t\t<td class=\"hostmask\">\n\t\t\t\t\t<ParsedMessage :network=\"network\" :text=\"invite.hostmask\" />\n\t\t\t\t</td>\n\t\t\t\t<td class=\"invitened_by\">{{ invite.invited_by }}</td>\n\t\t\t\t<td class=\"invitened_at\">{{ localetime(invite.invited_at) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListInvites\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime: (date: Date) => localetime(date),\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListInvites.vue?vue&type=template&id=47fd21b2&ts=true\"\nimport script from \"./ListInvites.vue?vue&type=script&lang=ts\"\nexport * from \"./ListInvites.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span v-if=\"channel.data.text\">{{ channel.data.text }}</span>\n\t<table v-else class=\"channel-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"channel\">Channel</th>\n\t\t\t\t<th class=\"users\">Users</th>\n\t\t\t\t<th class=\"topic\">Topic</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"chan in channel.data\" :key=\"chan.channel\">\n\t\t\t\t<td class=\"channel\"><ParsedMessage :network=\"network\" :text=\"chan.channel\" /></td>\n\t\t\t\t<td class=\"users\">{{ chan.num_users }}</td>\n\t\t\t\t<td class=\"topic\"><ParsedMessage :network=\"network\" :text=\"chan.topic\" /></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientChan, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\n\nexport default defineComponent({\n\tname: \"ListChannels\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n});\n</script>\n","import { render } from \"./ListChannels.vue?vue&type=template&id=5b94c3e8&ts=true\"\nimport script from \"./ListChannels.vue?vue&type=script&lang=ts\"\nexport * from \"./ListChannels.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"ignore-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Hostmask</th>\n\t\t\t\t<th class=\"when\">Ignored At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"user in channel.data\" :key=\"user.hostmask\">\n\t\t\t\t<td class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"user.hostmask\" /></td>\n\t\t\t\t<td class=\"when\">{{ localetime(user.when) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListIgnored\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListIgnored.vue?vue&type=template&id=78be79d2&ts=true\"\nimport script from \"./ListIgnored.vue?vue&type=script&lang=ts\"\nexport * from \"./ListIgnored.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Chat.vue?vue&type=template&id=2d7e1755&ts=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=ts\"\nexport * from \"./Chat.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<Chat\n\t\tv-if=\"activeChannel\"\n\t\t:network=\"activeChannel.network\"\n\t\t:channel=\"activeChannel.channel\"\n\t\t:focused=\"parseInt(String(route.query.focused), 10)\"\n\t\t@channel-changed=\"channelChanged\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {watch, computed, defineComponent, onMounted} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"../js/store\";\nimport {ClientChan} from \"../js/types\";\n\n// Temporary component for routing channels and lobbies\nimport Chat from \"./Chat.vue\";\n\nexport default defineComponent({\n\tname: \"RoutedChat\",\n\tcomponents: {\n\t\tChat,\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\t\tconst store = useStore();\n\n\t\tconst activeChannel = computed(() => {\n\t\t\tconst chanId = parseInt(String(route.params.id || \"\"), 10);\n\t\t\tconst channel = store.getters.findChannel(chanId);\n\t\t\treturn channel;\n\t\t});\n\n\t\tconst setActiveChannel = () => {\n\t\t\tif (activeChannel.value) {\n\t\t\t\tstore.commit(\"activeChannel\", activeChannel.value);\n\t\t\t}\n\t\t};\n\n\t\twatch(activeChannel, () => {\n\t\t\tsetActiveChannel();\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsetActiveChannel();\n\t\t});\n\n\t\tconst channelChanged = (channel: ClientChan) => {\n\t\t\tconst chanId = channel.id;\n\t\t\tconst chanInStore = store.getters.findChannel(chanId);\n\n\t\t\tif (chanInStore?.channel) {\n\t\t\t\tchanInStore.channel.unread = 0;\n\t\t\t\tchanInStore.channel.highlight = 0;\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\troute,\n\t\t\tactiveChannel,\n\t\t\tchannelChanged,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./RoutedChat.vue?vue&type=template&id=2cf5ac90&ts=true\"\nimport script from \"./RoutedChat.vue?vue&type=script&lang=ts\"\nexport * from \"./RoutedChat.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<h2>Messages</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input :checked=\"store.state.settings.motd\" type=\"checkbox\" name=\"motd\" />\n\t\t\t\tShow <abbr title=\"Message Of The Day\">MOTD</abbr>\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.showSeconds\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"showSeconds\"\n\t\t\t\t/>\n\t\t\t\tInclude seconds in timestamp\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.use12hClock\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"use12hClock\"\n\t\t\t\t/>\n\t\t\t\tUse 12-hour timestamps\n\t\t\t</label>\n\t\t</div>\n\t\t<template v-if=\"store.state.serverConfiguration?.prefetch\">\n\t\t\t<h2>Link previews</h2>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input :checked=\"store.state.settings.media\" type=\"checkbox\" name=\"media\" />\n\t\t\t\t\tAuto-expand media\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input :checked=\"store.state.settings.links\" type=\"checkbox\" name=\"links\" />\n\t\t\t\t\tAuto-expand websites\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</template>\n\t\t<h2 id=\"label-status-messages\">\n\t\t\tStatus messages\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\taria-label=\"Joins, parts, quits, kicks, nick changes, and mode changes\"\n\t\t\t>\n\t\t\t\t<button class=\"extra-help\" />\n\t\t\t</span>\n\t\t</h2>\n\t\t<div role=\"group\" aria-labelledby=\"label-status-messages\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'shown'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"shown\"\n\t\t\t\t/>\n\t\t\t\tShow all status messages individually\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'condensed'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"condensed\"\n\t\t\t\t/>\n\t\t\t\tCondense status messages together\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'hidden'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"hidden\"\n\t\t\t\t/>\n\t\t\t\tHide all status messages\n\t\t\t</label>\n\t\t</div>\n\t\t<h2>Visual Aids</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.coloredNicks\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"coloredNicks\"\n\t\t\t\t/>\n\t\t\t\tEnable colored nicknames\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.autocomplete\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"autocomplete\"\n\t\t\t\t/>\n\t\t\t\tEnable autocomplete\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"nickPostfix\" class=\"opt\">\n\t\t\t\t\tNick autocomplete postfix\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"Nick autocomplete postfix (for example a comma)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"nickPostfix\"\n\t\t\t\t\t:value=\"store.state.settings.nickPostfix\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"nickPostfix\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tplaceholder=\"Nick autocomplete postfix (e.g. ', ')\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<h2>Theme</h2>\n\t\t<div>\n\t\t\t<label for=\"theme-select\" class=\"sr-only\">Theme</label>\n\t\t\t<select\n\t\t\t\tid=\"theme-select\"\n\t\t\t\t:value=\"store.state.settings.theme\"\n\t\t\t\tname=\"theme\"\n\t\t\t\tclass=\"input\"\n\t\t\t>\n\t\t\t\t<option\n\t\t\t\t\tv-for=\"theme in store.state.serverConfiguration?.themes\"\n\t\t\t\t\t:key=\"theme.name\"\n\t\t\t\t\t:value=\"theme.name\"\n\t\t\t\t>\n\t\t\t\t\t{{ theme.displayName }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<h2>Custom Stylesheet</h2>\n\t\t\t<label for=\"user-specified-css-input\" class=\"sr-only\">\n\t\t\t\tCustom stylesheet. You can override any style with CSS here.\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"user-specified-css-input\"\n\t\t\t\t:value=\"store.state.settings.userStyles\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tname=\"userStyles\"\n\t\t\t\tplaceholder=\"/* You can override any style with CSS here */\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\ntextarea#user-specified-css-input {\n\theight: 100px;\n}\n</style>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"AppearanceSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Appearance.vue?vue&type=template&id=6afb0861&ts=true\"\nimport script from \"./Appearance.vue?vue&type=script&lang=ts\"\nexport * from \"./Appearance.vue?vue&type=script&lang=ts\"\n\nimport \"./Appearance.vue?vue&type=style&index=0&id=6afb0861&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<div v-if=\"canRegisterProtocol || hasInstallPromptEvent\">\n\t\t\t<h2>Native app</h2>\n\t\t\t<button\n\t\t\t\tv-if=\"hasInstallPromptEvent\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click.prevent=\"nativeInstallPrompt\"\n\t\t\t>\n\t\t\t\tAdd The Lounge to Home screen\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tv-if=\"canRegisterProtocol\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click.prevent=\"registerProtocol\"\n\t\t\t>\n\t\t\t\tOpen irc:// URLs with The Lounge\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-if=\"store.state.serverConfiguration?.fileUpload\">\n\t\t\t<h2>File uploads</h2>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input\n\t\t\t\t\t\t:checked=\"store.state.settings.uploadCanvas\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"uploadCanvas\"\n\t\t\t\t\t/>\n\t\t\t\t\tAttempt to remove metadata from images before uploading\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"This option renders the image into a canvas element to remove metadata from the image.\n\tThis may break orientation if your browser does not support that.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Settings synchronisation</h2>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.syncSettings\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"syncSettings\"\n\t\t\t\t/>\n\t\t\t\tSynchronize settings with other clients\n\t\t\t</label>\n\t\t\t<template v-if=\"!store.state.settings.syncSettings\">\n\t\t\t\t<div v-if=\"store.state.serverHasSettings\" class=\"settings-sync-panel\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Warning:</strong> Checking this box will override the settings of\n\t\t\t\t\t\tthis client with those stored on the server.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUse the button below to enable synchronization, and override any settings\n\t\t\t\t\t\talready synced to the server.\n\t\t\t\t\t</p>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-small\" @click=\"onForceSyncClick\">\n\t\t\t\t\t\tSync settings and enable\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"settings-sync-panel\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Warning:</strong> No settings have been synced before. Enabling this\n\t\t\t\t\t\twill sync all settings of this client as the base for other clients.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Automatic away message</h2>\n\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"awayMessage\" class=\"sr-only\">Automatic away message</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"awayMessage\"\n\t\t\t\t\t:value=\"store.state.settings.awayMessage\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"awayMessage\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tplaceholder=\"Away message if The Lounge is not open\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</template>\n\n<style></style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, onMounted, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport {BeforeInstallPromptEvent} from \"../../js/types\";\n\nlet installPromptEvent: BeforeInstallPromptEvent | null = null;\n\nwindow.addEventListener(\"beforeinstallprompt\", (e) => {\n\te.preventDefault();\n\tinstallPromptEvent = e as BeforeInstallPromptEvent;\n});\n\nexport default defineComponent({\n\tname: \"GeneralSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst canRegisterProtocol = ref(false);\n\n\t\tconst hasInstallPromptEvent = computed(() => {\n\t\t\t// TODO: This doesn't hide the button after clicking\n\t\t\treturn installPromptEvent !== null;\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\t// Enable protocol handler registration if supported,\n\t\t\t// and the network configuration is not locked\n\t\t\tcanRegisterProtocol.value =\n\t\t\t\t!!window.navigator.registerProtocolHandler &&\n\t\t\t\t!store.state.serverConfiguration?.lockNetwork;\n\t\t});\n\n\t\tconst nativeInstallPrompt = () => {\n\t\t\tif (!installPromptEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstallPromptEvent.prompt().catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\n\t\t\tinstallPromptEvent = null;\n\t\t};\n\n\t\tconst onForceSyncClick = () => {\n\t\t\tstore.dispatch(\"settings/syncAll\", true).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\n\t\t\tstore\n\t\t\t\t.dispatch(\"settings/update\", {\n\t\t\t\t\tname: \"syncSettings\",\n\t\t\t\t\tvalue: true,\n\t\t\t\t\tsync: true,\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t};\n\n\t\tconst registerProtocol = () => {\n\t\t\tconst uri = document.location.origin + document.location.pathname + \"?uri=%s\";\n\t\t\t// @ts-expect-error\n\t\t\t// the third argument is deprecated but recommended for compatibility: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/registerProtocolHandler\n\t\t\twindow.navigator.registerProtocolHandler(\"irc\", uri, \"The Lounge\");\n\t\t\t// @ts-expect-error\n\t\t\twindow.navigator.registerProtocolHandler(\"ircs\", uri, \"The Lounge\");\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tcanRegisterProtocol,\n\t\t\thasInstallPromptEvent,\n\t\t\tnativeInstallPrompt,\n\t\t\tonForceSyncClick,\n\t\t\tregisterProtocol,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./General.vue?vue&type=template&id=0fee67e4&ts=true\"\nimport script from \"./General.vue?vue&type=script&lang=ts\"\nexport * from \"./General.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<div\n\t\t\tv-if=\"\n\t\t\t\t!store.state.serverConfiguration?.public &&\n\t\t\t\t!store.state.serverConfiguration?.ldapEnabled\n\t\t\t\"\n\t\t\tid=\"change-password\"\n\t\t\trole=\"group\"\n\t\t\taria-labelledby=\"label-change-password\"\n\t\t>\n\t\t\t<h2 id=\"label-change-password\">Change password</h2>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"current-password\" class=\"sr-only\"> Enter current password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"current-password\"\n\t\t\t\t\t\tv-model=\"old_password\"\n\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"old_password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Enter current password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"new-password\" class=\"sr-only\"> Enter desired new password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"new-password\"\n\t\t\t\t\t\tv-model=\"new_password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"new_password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Enter desired new password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"new-password-verify\" class=\"sr-only\"> Repeat new password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"new-password-verify\"\n\t\t\t\t\t\tv-model=\"verify_password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"verify_password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Repeat new password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"passwordChangeStatus && passwordChangeStatus.success\"\n\t\t\t\tclass=\"feedback success\"\n\t\t\t>\n\t\t\t\tSuccessfully updated your password\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"passwordChangeStatus && passwordChangeStatus.error\"\n\t\t\t\tclass=\"feedback error\"\n\t\t\t>\n\t\t\t\t{{ passwordErrors[passwordChangeStatus.error] }}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" class=\"btn\" @click.prevent=\"changePassword\">\n\t\t\t\t\tChange password\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\" class=\"session-list\" role=\"group\">\n\t\t\t<h2>Sessions</h2>\n\n\t\t\t<h3>Current session</h3>\n\t\t\t<Session v-if=\"currentSession\" :session=\"currentSession\" />\n\n\t\t\t<template v-if=\"activeSessions.length > 0\">\n\t\t\t\t<h3>Active sessions</h3>\n\t\t\t\t<Session\n\t\t\t\t\tv-for=\"session in activeSessions\"\n\t\t\t\t\t:key=\"session.token\"\n\t\t\t\t\t:session=\"session\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<h3>Other sessions</h3>\n\t\t\t<p v-if=\"store.state.sessions.length === 0\">Loading…</p>\n\t\t\t<p v-else-if=\"otherSessions.length === 0\">\n\t\t\t\t<em>You are not currently logged in to any other device.</em>\n\t\t\t</p>\n\t\t\t<Session\n\t\t\t\tv-for=\"session in otherSessions\"\n\t\t\t\tv-else\n\t\t\t\t:key=\"session.token\"\n\t\t\t\t:session=\"session\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport socket from \"../../js/socket\";\nimport RevealPassword from \"../RevealPassword.vue\";\nimport Session from \"../Session.vue\";\nimport {computed, defineComponent, onMounted, PropType, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"UserSettings\",\n\tcomponents: {\n\t\tRevealPassword,\n\t\tSession,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst passwordErrors = {\n\t\t\tmissing_fields: \"Please fill in all fields\",\n\t\t\tpassword_mismatch: \"Both new password fields must match\",\n\t\t\tpassword_incorrect: \"The current password field does not match your account password\",\n\t\t\tupdate_failed: \"Failed to update your password\",\n\t\t};\n\n\t\tconst passwordChangeStatus = ref<{\n\t\t\tsuccess: boolean;\n\t\t\terror: keyof typeof passwordErrors;\n\t\t}>();\n\n\t\tconst old_password = ref(\"\");\n\t\tconst new_password = ref(\"\");\n\t\tconst verify_password = ref(\"\");\n\n\t\tconst currentSession = computed(() => {\n\t\t\treturn store.state.sessions.find((item) => item.current);\n\t\t});\n\n\t\tconst activeSessions = computed(() => {\n\t\t\treturn store.state.sessions.filter((item) => !item.current && item.active > 0);\n\t\t});\n\n\t\tconst otherSessions = computed(() => {\n\t\t\treturn store.state.sessions.filter((item) => !item.current && !item.active);\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsocket.emit(\"sessions:get\");\n\t\t});\n\n\t\tconst changePassword = () => {\n\t\t\tconst data = {\n\t\t\t\told_password: old_password.value,\n\t\t\t\tnew_password: new_password.value,\n\t\t\t\tverify_password: verify_password.value,\n\t\t\t};\n\n\t\t\tif (!data.old_password || !data.new_password || !data.verify_password) {\n\t\t\t\tpasswordChangeStatus.value = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: \"missing_fields\",\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (data.new_password !== data.verify_password) {\n\t\t\t\tpasswordChangeStatus.value = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: \"password_mismatch\",\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsocket.once(\"change-password\", (response) => {\n\t\t\t\t// TODO type\n\t\t\t\tpasswordChangeStatus.value = response as any;\n\t\t\t});\n\n\t\t\tsocket.emit(\"change-password\", data);\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tpasswordChangeStatus,\n\t\t\tpasswordErrors,\n\t\t\tcurrentSession,\n\t\t\tactiveSessions,\n\t\t\totherSessions,\n\t\t\tchangePassword,\n\t\t\told_password,\n\t\t\tnew_password,\n\t\t\tverify_password,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div class=\"session-item\">\n\t\t<div class=\"session-item-info\">\n\t\t\t<strong>{{ session.agent }}</strong>\n\n\t\t\t<a :href=\"'https://ipinfo.io/' + session.ip\" target=\"_blank\" rel=\"noopener\">{{\n\t\t\t\tsession.ip\n\t\t\t}}</a>\n\n\t\t\t<p v-if=\"session.active > 1\" class=\"session-usage\">\n\t\t\t\tActive in {{ session.active }} browsers\n\t\t\t</p>\n\t\t\t<p v-else-if=\"!session.current && !session.active\" class=\"session-usage\">\n\t\t\t\tLast used on <time>{{ lastUse }}</time>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class=\"session-item-btn\">\n\t\t\t<button class=\"btn\" @click.prevent=\"signOut\">\n\t\t\t\t<template v-if=\"session.current\">Sign out</template>\n\t\t\t\t<template v-else>Revoke</template>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n.session-list .session-item {\n\tdisplay: flex;\n\tfont-size: 14px;\n}\n\n.session-list .session-item-info {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.session-list .session-item-btn {\n\tflex-shrink: 0;\n}\n\n.session-list .session-usage {\n\tfont-style: italic;\n\tcolor: var(--body-color-muted);\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport localetime from \"../js/helpers/localetime\";\nimport Auth from \"../js/auth\";\nimport socket from \"../js/socket\";\nimport {ClientSession} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"Session\",\n\tprops: {\n\t\tsession: {\n\t\t\ttype: Object as PropType<ClientSession>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst lastUse = computed(() => {\n\t\t\treturn localetime(props.session.lastUse);\n\t\t});\n\n\t\tconst signOut = () => {\n\t\t\tif (!props.session.current) {\n\t\t\t\tsocket.emit(\"sign-out\", props.session.token);\n\t\t\t} else {\n\t\t\t\tsocket.emit(\"sign-out\");\n\t\t\t\tAuth.signout();\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tlastUse,\n\t\t\tsignOut,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Session.vue?vue&type=template&id=7c65ee22&ts=true\"\nimport script from \"./Session.vue?vue&type=script&lang=ts\"\nexport * from \"./Session.vue?vue&type=script&lang=ts\"\n\nimport \"./Session.vue?vue&type=style&index=0&id=7c65ee22&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Account.vue?vue&type=template&id=a2967c1c&ts=true\"\nimport script from \"./Account.vue?vue&type=script&lang=ts\"\nexport * from \"./Account.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<template v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Push Notifications</h2>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tid=\"pushNotifications\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:disabled=\"\n\t\t\t\t\t\tstore.state.pushNotificationState !== 'supported' &&\n\t\t\t\t\t\tstore.state.pushNotificationState !== 'subscribed'\n\t\t\t\t\t\"\n\t\t\t\t\t@click=\"onPushButtonClick\"\n\t\t\t\t>\n\t\t\t\t\t<template v-if=\"store.state.pushNotificationState === 'subscribed'\">\n\t\t\t\t\t\tUnsubscribe from push notifications\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"store.state.pushNotificationState === 'loading'\">\n\t\t\t\t\t\tLoading…\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else> Subscribe to push notifications </template>\n\t\t\t\t</button>\n\t\t\t\t<div v-if=\"store.state.pushNotificationState === 'nohttps'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>: Push notifications are only supported over HTTPS\n\t\t\t\t\tconnections.\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"store.state.pushNotificationState === 'unsupported'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>:\n\t\t\t\t\t<span>Push notifications are not supported by your browser.</span>\n\n\t\t\t\t\t<div v-if=\"isIOS\" class=\"apple-push-unsupported\">\n\t\t\t\t\t\tSafari does\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://bugs.webkit.org/show_bug.cgi?id=182566\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>not support the web push notification specification</a\n\t\t\t\t\t\t>, and because all browsers on iOS use Safari under the hood, The Lounge is\n\t\t\t\t\t\tunable to provide push notifications on iOS devices.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\n\t\t<h2>Browser Notifications</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"desktopNotifications\"\n\t\t\t\t\t:checked=\"store.state.settings.desktopNotifications\"\n\t\t\t\t\t:disabled=\"store.state.desktopNotificationState === 'nohttps'\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"desktopNotifications\"\n\t\t\t\t/>\n\t\t\t\tEnable browser notifications<br />\n\t\t\t\t<div v-if=\"store.state.desktopNotificationState === 'unsupported'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>: Notifications are not supported by your browser.\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"store.state.desktopNotificationState === 'nohttps'\"\n\t\t\t\t\tid=\"warnBlockedDesktopNotifications\"\n\t\t\t\t\tclass=\"error\"\n\t\t\t\t>\n\t\t\t\t\t<strong>Warning</strong>: Notifications are only supported over HTTPS\n\t\t\t\t\tconnections.\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"store.state.desktopNotificationState === 'blocked'\"\n\t\t\t\t\tid=\"warnBlockedDesktopNotifications\"\n\t\t\t\t\tclass=\"error\"\n\t\t\t\t>\n\t\t\t\t\t<strong>Warning</strong>: Notifications are blocked by your browser.\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.notification\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"notification\"\n\t\t\t\t/>\n\t\t\t\tEnable notification sound\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<div class=\"opt\">\n\t\t\t\t<button id=\"play\" @click.prevent=\"playNotification\">Play sound</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.notifyAllMessages\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"notifyAllMessages\"\n\t\t\t\t/>\n\t\t\t\tEnable notification for all messages\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"highlights\" class=\"opt\">\n\t\t\t\t\tCustom highlights\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"If a message contains any of these comma-separated\nexpressions, it will trigger a highlight.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"highlights\"\n\t\t\t\t\t:value=\"store.state.settings.highlights\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"highlights\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tplaceholder=\"Comma-separated, e.g.: word, some more words, anotherword\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"highlightExceptions\" class=\"opt\">\n\t\t\t\t\tHighlight exceptions\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"If a message contains any of these comma-separated\nexpressions, it will not trigger a highlight even if it contains\nyour nickname or expressions defined in custom highlights.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"highlightExceptions\"\n\t\t\t\t\t:value=\"store.state.settings.highlightExceptions\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"highlightExceptions\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tplaceholder=\"Comma-separated, e.g.: word, some more words, anotherword\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport webpush from \"../../js/webpush\";\n\nexport default defineComponent({\n\tname: \"NotificationSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst isIOS = computed(\n\t\t\t() =>\n\t\t\t\t[\n\t\t\t\t\t\"iPad Simulator\",\n\t\t\t\t\t\"iPhone Simulator\",\n\t\t\t\t\t\"iPod Simulator\",\n\t\t\t\t\t\"iPad\",\n\t\t\t\t\t\"iPhone\",\n\t\t\t\t\t\"iPod\",\n\t\t\t\t].includes(navigator.platform) ||\n\t\t\t\t// iPad on iOS 13 detection\n\t\t\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t\t);\n\n\t\tconst playNotification = () => {\n\t\t\tconst pop = new Audio();\n\t\t\tpop.src = \"audio/pop.wav\";\n\n\t\t\t// eslint-disable-next-line\n\t\t\tpop.play();\n\t\t};\n\n\t\tconst onPushButtonClick = () => {\n\t\t\twebpush.togglePushSubscription();\n\t\t};\n\n\t\treturn {\n\t\t\tisIOS,\n\t\t\tstore,\n\t\t\tplayNotification,\n\t\t\tonPushButtonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Notifications.vue?vue&type=template&id=045eeb5c&ts=true\"\nimport script from \"./Notifications.vue?vue&type=script&lang=ts\"\nexport * from \"./Notifications.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import constants from \"./constants\";\n\nimport {createRouter, createWebHashHistory} from \"vue-router\";\nimport SignIn from \"../components/Windows/SignIn.vue\";\nimport Connect from \"../components/Windows/Connect.vue\";\nimport Settings from \"../components/Windows/Settings.vue\";\nimport Help from \"../components/Windows/Help.vue\";\nimport Changelog from \"../components/Windows/Changelog.vue\";\nimport NetworkEdit from \"../components/Windows/NetworkEdit.vue\";\nimport SearchResults from \"../components/Windows/SearchResults.vue\";\nimport RoutedChat from \"../components/RoutedChat.vue\";\nimport {store} from \"./store\";\n\nimport AppearanceSettings from \"../components/Settings/Appearance.vue\";\nimport GeneralSettings from \"../components/Settings/General.vue\";\nimport AccountSettings from \"../components/Settings/Account.vue\";\nimport NotificationSettings from \"../components/Settings/Notifications.vue\";\nimport {ClientChan} from \"./types\";\n\nconst router = createRouter({\n\thistory: createWebHashHistory(),\n\troutes: [\n\t\t{\n\t\t\tname: \"SignIn\",\n\t\t\tpath: \"/sign-in\",\n\t\t\tcomponent: SignIn,\n\t\t\tbeforeEnter(to, from, next) {\n\t\t\t\t// Prevent navigating to sign-in when already signed in\n\t\t\t\tif (store.state.appLoaded) {\n\t\t\t\t\tnext(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnext();\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"Connect\",\n\t\t\tpath: \"/connect\",\n\t\t\tcomponent: Connect,\n\t\t\tprops: (route) => ({queryParams: route.query}),\n\t\t},\n\t\t{\n\t\t\tpath: \"/settings\",\n\t\t\tcomponent: Settings,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tname: \"General\",\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tcomponent: GeneralSettings,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Appearance\",\n\t\t\t\t\tpath: \"appearance\",\n\t\t\t\t\tcomponent: AppearanceSettings,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Account\",\n\t\t\t\t\tpath: \"account\",\n\t\t\t\t\tcomponent: AccountSettings,\n\t\t\t\t\tprops: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Notifications\",\n\t\t\t\t\tpath: \"notifications\",\n\t\t\t\t\tcomponent: NotificationSettings,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tname: \"Help\",\n\t\t\tpath: \"/help\",\n\t\t\tcomponent: Help,\n\t\t},\n\t\t{\n\t\t\tname: \"Changelog\",\n\t\t\tpath: \"/changelog\",\n\t\t\tcomponent: Changelog,\n\t\t},\n\t\t{\n\t\t\tname: \"NetworkEdit\",\n\t\t\tpath: \"/edit-network/:uuid\",\n\t\t\tcomponent: NetworkEdit,\n\t\t},\n\t\t{\n\t\t\tname: \"RoutedChat\",\n\t\t\tpath: \"/chan-:id\",\n\t\t\tcomponent: RoutedChat,\n\t\t},\n\t\t{\n\t\t\tname: \"SearchResults\",\n\t\t\tpath: \"/chan-:id/search\",\n\t\t\tcomponent: SearchResults,\n\t\t},\n\t],\n});\n\nrouter.beforeEach((to, from, next) => {\n\t// If user is not yet signed in, wait for appLoaded state to change\n\t// unless they are trying to open SignIn (which can be triggered in auth.js)\n\tif (!store.state.appLoaded && to.name !== \"SignIn\") {\n\t\tstore.watch(\n\t\t\t(state) => state.appLoaded,\n\t\t\t() => next()\n\t\t);\n\n\t\treturn;\n\t}\n\n\tnext();\n});\n\nrouter.beforeEach((to, from, next) => {\n\t// Disallow navigating to non-existing routes\n\tif (!to.matched.length) {\n\t\tnext(false);\n\t\treturn;\n\t}\n\n\t// Disallow navigating to invalid channels\n\tif (to.name === \"RoutedChat\" && !store.getters.findChannel(Number(to.params.id))) {\n\t\tnext(false);\n\t\treturn;\n\t}\n\n\t// Disallow navigating to invalid networks\n\tif (to.name === \"NetworkEdit\" && !store.getters.findNetwork(String(to.params.uuid))) {\n\t\tnext(false);\n\t\treturn;\n\t}\n\n\tnext();\n});\n\nrouter.afterEach((to) => {\n\tif (store.state.appLoaded) {\n\t\tif (window.innerWidth <= constants.mobileViewportPixels) {\n\t\t\tstore.commit(\"sidebarOpen\", false);\n\t\t}\n\t}\n\n\tif (store.state.activeChannel) {\n\t\tconst channel = store.state.activeChannel.channel;\n\n\t\tif (to.name !== \"RoutedChat\") {\n\t\t\tstore.commit(\"activeChannel\", undefined);\n\t\t}\n\n\t\t// When switching out of a channel, mark everything as read\n\t\tif (channel.messages?.length > 0) {\n\t\t\tchannel.firstUnread = channel.messages[channel.messages.length - 1].id;\n\t\t}\n\n\t\tif (channel.messages?.length > 100) {\n\t\t\tchannel.messages.splice(0, channel.messages.length - 100);\n\t\t\tchannel.moreHistoryAvailable = true;\n\t\t}\n\t}\n});\n\nasync function navigate(routeName: string, params: any = {}) {\n\tif (router.currentRoute.value.name) {\n\t\tawait router.push({name: routeName, params});\n\t} else {\n\t\t// If current route is null, replace the history entry\n\t\t// This prevents invalid entries from lingering in history,\n\t\t// and then the route guard preventing proper navigation\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tawait router.replace({name: routeName, params}).catch(() => {});\n\t}\n}\n\nfunction switchToChannel(channel: ClientChan) {\n\tvoid navigate(\"RoutedChat\", {id: channel.id});\n}\n\nif (\"serviceWorker\" in navigator) {\n\tnavigator.serviceWorker.addEventListener(\"message\", (event) => {\n\t\tif (event.data && event.data.type === \"open\") {\n\t\t\tconst id = parseInt(event.data.channel.substring(5), 10); // remove \"chan-\" prefix\n\n\t\t\tconst channelTarget = store.getters.findChannel(id);\n\n\t\t\tif (channelTarget) {\n\t\t\t\tswitchToChannel(channelTarget.channel);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport {router, navigate, switchToChannel};\n","import io, {Socket} from \"socket.io-client\";\nimport type {ServerToClientEvents, ClientToServerEvents} from \"../../server/types/socket-events\";\n\nconst socket: Socket<ServerToClientEvents, ClientToServerEvents> = io({\n\ttransports: JSON.parse(document.body.dataset.transports || \"['polling', 'websocket']\"),\n\tpath: window.location.pathname + \"socket.io/\",\n\tautoConnect: false,\n\treconnection: !document.body.classList.contains(\"public\"),\n});\n\n// Ease debugging socket during development\nif (process.env.NODE_ENV === \"development\") {\n\twindow.socket = socket;\n}\n\ndeclare global {\n\tinterface Window {\n\t\tsocket: Socket;\n\t}\n}\n\nexport default socket;\n","import socket from \"./socket\";\nimport type {TypedStore} from \"./store\";\n\nconst defaultSettingConfig = {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tapply() {},\n\tdefault: null,\n\tsync: null,\n};\n\nconst defaultConfig = {\n\tsyncSettings: {\n\t\tdefault: true,\n\t\tsync: \"never\",\n\t\tapply(store: TypedStore, value: boolean, auto = false) {\n\t\t\t// If applied by settings/applyAll, do not emit to server\n\t\t\tif (value && !auto) {\n\t\t\t\tsocket.emit(\"setting:get\");\n\t\t\t}\n\t\t},\n\t},\n\tadvanced: {\n\t\tdefault: false,\n\t},\n\tautocomplete: {\n\t\tdefault: true,\n\t},\n\tnickPostfix: {\n\t\tdefault: \"\",\n\t},\n\tcoloredNicks: {\n\t\tdefault: true,\n\t},\n\tdesktopNotifications: {\n\t\tdefault: false,\n\t\tsync: \"never\",\n\t\tapply(store: TypedStore, value: boolean) {\n\t\t\t// Commit a mutation. options can have root: true that allows to commit root mutations in namespaced modules.\n\t\t\t// https://vuex.vuejs.org/api/#store-instance-methods. not typed?\n\t\t\tstore.commit(\"refreshDesktopNotificationState\", null, {root: true});\n\n\t\t\tif (\"Notification\" in window && value && Notification.permission !== \"granted\") {\n\t\t\t\tNotification.requestPermission(() =>\n\t\t\t\t\tstore.commit(\"refreshDesktopNotificationState\", null, {root: true})\n\t\t\t\t).catch((e) => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\thighlights: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\thighlightExceptions: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\tawayMessage: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\tlinks: {\n\t\tdefault: true,\n\t},\n\tmotd: {\n\t\tdefault: true,\n\t},\n\tnotification: {\n\t\tdefault: true,\n\t\tsync: \"never\",\n\t},\n\tnotifyAllMessages: {\n\t\tdefault: false,\n\t},\n\tshowSeconds: {\n\t\tdefault: false,\n\t},\n\tuse12hClock: {\n\t\tdefault: false,\n\t},\n\tstatusMessages: {\n\t\tdefault: \"condensed\",\n\t},\n\ttheme: {\n\t\tdefault: document.getElementById(\"theme\")?.dataset.serverTheme,\n\t\tapply(store: TypedStore, value: string) {\n\t\t\tconst themeEl = document.getElementById(\"theme\");\n\t\t\tconst themeUrl = `themes/${value}.css`;\n\n\t\t\tif (!(themeEl instanceof HTMLLinkElement)) {\n\t\t\t\tthrow new Error(\"theme element is not a link\");\n\t\t\t}\n\n\t\t\tconst hrefAttr = themeEl.attributes.getNamedItem(\"href\");\n\n\t\t\tif (!hrefAttr) {\n\t\t\t\tthrow new Error(\"theme is missing href attribute\");\n\t\t\t}\n\n\t\t\tif (hrefAttr.value === themeUrl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\threfAttr.value = themeUrl;\n\n\t\t\tif (!store.state.serverConfiguration) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newTheme = store.state.serverConfiguration?.themes.filter(\n\t\t\t\t(theme) => theme.name === value\n\t\t\t)[0];\n\n\t\t\tconst metaSelector = document.querySelector('meta[name=\"theme-color\"]');\n\n\t\t\tif (!(metaSelector instanceof HTMLMetaElement)) {\n\t\t\t\tthrow new Error(\"theme meta element is not a meta element\");\n\t\t\t}\n\n\t\t\tif (metaSelector) {\n\t\t\t\tconst themeColor = newTheme.themeColor || metaSelector.content;\n\t\t\t\tmetaSelector.content = themeColor;\n\t\t\t}\n\t\t},\n\t},\n\tmedia: {\n\t\tdefault: true,\n\t},\n\tuploadCanvas: {\n\t\tdefault: true,\n\t},\n\tuserStyles: {\n\t\tdefault: \"\",\n\t\tapply(store: TypedStore, value: string) {\n\t\t\tif (!/[?&]nocss/.test(window.location.search)) {\n\t\t\t\tconst element = document.getElementById(\"user-specified-css\");\n\n\t\t\t\tif (element) {\n\t\t\t\t\telement.innerHTML = value;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\tsearchEnabled: {\n\t\tdefault: false,\n\t},\n};\n\nexport const config = normalizeConfig(defaultConfig);\n\nexport function createState() {\n\tconst state = {};\n\n\tfor (const settingName in config) {\n\t\tstate[settingName] = config[settingName].default;\n\t}\n\n\treturn state;\n}\n\nfunction normalizeConfig(obj: any) {\n\tconst newConfig: Partial<typeof defaultConfig> = {};\n\n\tfor (const settingName in obj) {\n\t\tnewConfig[settingName] = {...defaultSettingConfig, ...obj[settingName]};\n\t}\n\n\treturn newConfig as typeof defaultConfig;\n}\n\n// flatten to type of default\nexport type SettingsState = {\n\t[key in keyof typeof defaultConfig]: typeof defaultConfig[key][\"default\"];\n};\n","import storage from \"./localStorage\";\nimport socket from \"./socket\";\nimport {config, createState} from \"./settings\";\nimport {Store} from \"vuex\";\nimport {State} from \"./store\";\n\nexport function createSettingsStore(store: Store<State>) {\n\treturn {\n\t\tnamespaced: true,\n\t\tstate: assignStoredSettings(createState(), loadFromLocalStorage()),\n\t\tmutations: {\n\t\t\tset(state, {name, value}) {\n\t\t\t\tstate[name] = value;\n\t\t\t},\n\t\t},\n\t\tactions: {\n\t\t\tsyncAll({state}, force = false) {\n\t\t\t\tif (state.syncSettings === false && force === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstore.commit(\"serverHasSettings\", true);\n\n\t\t\t\tfor (const name in state) {\n\t\t\t\t\tif (config[name].sync !== \"never\" || config[name].sync === \"always\") {\n\t\t\t\t\t\tsocket.emit(\"setting:set\", {name, value: state[name]});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tapplyAll({state}) {\n\t\t\t\tfor (const settingName in config) {\n\t\t\t\t\tconfig[settingName].apply(store, state[settingName], true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate({state, commit}, {name, value, sync = false}) {\n\t\t\t\tif (state[name] === value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst settingConfig = config[name];\n\n\t\t\t\t// Trying to update a non existing setting (e.g. server has an old key)\n\t\t\t\tif (!settingConfig) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tsync === false &&\n\t\t\t\t\t(state.syncSettings === false || settingConfig.sync === \"never\")\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcommit(\"set\", {name, value});\n\t\t\t\tstorage.set(\"settings\", JSON.stringify(state));\n\t\t\t\tsettingConfig.apply(store, value);\n\n\t\t\t\tif (!sync) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(state.syncSettings && settingConfig.sync !== \"never\") ||\n\t\t\t\t\tsettingConfig.sync === \"always\"\n\t\t\t\t) {\n\t\t\t\t\tsocket.emit(\"setting:set\", {name, value});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n}\n\nfunction loadFromLocalStorage() {\n\tlet storedSettings: Record<string, any> = {};\n\n\ttry {\n\t\tstoredSettings = JSON.parse(storage.get(\"settings\") || \"{}\");\n\t} catch (e) {\n\t\tstorage.remove(\"settings\");\n\t}\n\n\tif (!storedSettings) {\n\t\treturn {};\n\t}\n\n\t// Older The Lounge versions converted highlights to an array, turn it back into a string\n\tif (storedSettings.highlights !== null && typeof storedSettings.highlights === \"object\") {\n\t\tstoredSettings.highlights = storedSettings.highlights.join(\", \");\n\t}\n\n\treturn storedSettings;\n}\n\n/**\n * Essentially Object.assign but does not overwrite and only assigns\n * if key exists in both supplied objects and types match\n *\n * @param {object} defaultSettings\n * @param {object} storedSettings\n */\nfunction assignStoredSettings(\n\tdefaultSettings: Record<string, any>,\n\tstoredSettings: Record<string, any>\n) {\n\tconst newSettings = {...defaultSettings};\n\n\tfor (const key in defaultSettings) {\n\t\t// Make sure the setting in local storage has the same type that the code expects\n\t\tif (\n\t\t\ttypeof storedSettings[key] !== \"undefined\" &&\n\t\t\ttypeof defaultSettings[key] === typeof storedSettings[key]\n\t\t) {\n\t\t\tnewSettings[key] = storedSettings[key];\n\t\t}\n\t}\n\n\treturn newSettings;\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\n\nimport {ActionContext, createStore, Store, useStore as baseUseStore} from \"vuex\";\nimport {createSettingsStore} from \"./store-settings\";\nimport storage from \"./localStorage\";\nimport type {\n\tClientChan,\n\tClientConfiguration,\n\tClientNetwork,\n\tInitClientChan,\n\tNetChan,\n\tClientMessage,\n\tClientMention,\n} from \"./types\";\nimport type {InjectionKey} from \"vue\";\n\nimport {SettingsState} from \"./settings\";\nimport {SearchQuery} from \"../../server/plugins/messageStorage/types\";\n\nconst appName = document.title;\n\nenum DesktopNotificationState {\n\tUnsupported = \"unsupported\",\n\tBlocked = \"blocked\",\n\tNoHttps = \"nohttps\",\n\tGranted = \"granted\",\n}\n\nfunction detectDesktopNotificationState(): DesktopNotificationState {\n\tif (!(\"Notification\" in window)) {\n\t\treturn DesktopNotificationState.Unsupported;\n\t} else if (Notification.permission === DesktopNotificationState.Granted) {\n\t\treturn DesktopNotificationState.Granted;\n\t} else if (!window.isSecureContext) {\n\t\treturn DesktopNotificationState.NoHttps;\n\t}\n\n\treturn DesktopNotificationState.Blocked;\n}\n\nexport type ClientSession = {\n\tcurrent: boolean;\n\tactive: number;\n\tlastUse: number;\n\tip: string;\n\tagent: string;\n\ttoken: string;\n};\n\nexport type State = {\n\tappLoaded: boolean;\n\tactiveChannel?: NetChan;\n\tcurrentUserVisibleError: string | null;\n\tdesktopNotificationState: DesktopNotificationState;\n\tisAutoCompleting: boolean;\n\tisConnected: boolean;\n\tnetworks: ClientNetwork[];\n\t// TODO: type\n\tmentions: ClientMention[];\n\thasServiceWorker: boolean;\n\tpushNotificationState: string;\n\tserverConfiguration: ClientConfiguration | null;\n\tsessions: ClientSession[];\n\tsidebarOpen: boolean;\n\tsidebarDragging: boolean;\n\tuserlistOpen: boolean;\n\tversionData:\n\t\t| null\n\t\t| undefined\n\t\t| {\n\t\t\t\tlatest?: {\n\t\t\t\t\tversion: string;\n\t\t\t\t\tprerelease: boolean;\n\t\t\t\t\turl: string;\n\t\t\t\t};\n\t\t\t\tcurrent?: {\n\t\t\t\t\tversion: string;\n\t\t\t\t\tprerelease: boolean;\n\t\t\t\t\turl: string;\n\t\t\t\t\tchangelog?: string;\n\t\t\t\t};\n\t\t  };\n\tversionStatus: \"loading\" | \"new-version\" | \"new-packages\" | \"up-to-date\" | \"error\";\n\tversionDataExpired: boolean;\n\tserverHasSettings: boolean;\n\tmessageSearchResults: {\n\t\tresults: ClientMessage[];\n\t} | null;\n\tmessageSearchPendingQuery: SearchQuery | null;\n\tsearchEnabled: boolean;\n};\n\nconst state = () =>\n\t({\n\t\tappLoaded: false,\n\t\tactiveChannel: undefined,\n\t\tcurrentUserVisibleError: null,\n\t\tdesktopNotificationState: detectDesktopNotificationState(),\n\t\tisAutoCompleting: false,\n\t\tisConnected: false,\n\t\tnetworks: [],\n\t\tmentions: [],\n\t\thasServiceWorker: false,\n\t\tpushNotificationState: \"unsupported\",\n\t\tserverConfiguration: null,\n\t\tsessions: [],\n\t\tsidebarOpen: false,\n\t\tsidebarDragging: false,\n\t\tuserlistOpen: storage.get(\"thelounge.state.userlist\") !== \"false\",\n\t\tversionData: null,\n\t\tversionStatus: \"loading\",\n\t\tversionDataExpired: false,\n\t\tserverHasSettings: false,\n\t\tmessageSearchResults: null,\n\t\tmessageSearchPendingQuery: null,\n\t\tsearchEnabled: false,\n\t} as State);\n\ntype Getters = {\n\tfindChannelOnCurrentNetwork: (state: State) => (name: string) => ClientChan | undefined;\n\tfindChannelOnNetwork: (state: State) => (\n\t\tnetworkUuid: string,\n\t\tchannelName: string\n\t) => {\n\t\tnetwork: ClientNetwork;\n\t\tchannel: ClientChan;\n\t} | null;\n\tfindChannel: (state: State) => (id: number) => {\n\t\tnetwork: ClientNetwork;\n\t\tchannel: ClientChan;\n\t} | null;\n\tfindNetwork: (state: State) => (uuid: string) => ClientNetwork | null;\n\thighlightCount(state: State): number;\n\ttitle(state: State, getters: Omit<Getters, \"title\">): string;\n\tinitChannel: () => (channel: InitClientChan) => ClientChan;\n};\n\n// getters without the state argument\nexport type CallableGetters = {\n\t[K in keyof Getters]: ReturnType<Getters[K]>;\n};\n\nconst getters: Getters = {\n\tfindChannelOnCurrentNetwork: (state) => (name: string) => {\n\t\tname = name.toLowerCase();\n\t\treturn state.activeChannel?.network.channels.find((c) => c.name.toLowerCase() === name);\n\t},\n\tfindChannelOnNetwork: (state) => (networkUuid: string, channelName: string) => {\n\t\tfor (const network of state.networks) {\n\t\t\tif (network.uuid !== networkUuid) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.name === channelName) {\n\t\t\t\t\treturn {network, channel};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tfindChannel: (state) => (id: number) => {\n\t\tfor (const network of state.networks) {\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.id === id) {\n\t\t\t\t\treturn {network, channel};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tfindNetwork: (state) => (uuid: string) => {\n\t\tfor (const network of state.networks) {\n\t\t\tif (network.uuid === uuid) {\n\t\t\t\treturn network;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\thighlightCount(state) {\n\t\tlet highlightCount = 0;\n\n\t\tfor (const network of state.networks) {\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.muted) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\thighlightCount += channel.highlight;\n\t\t\t}\n\t\t}\n\n\t\treturn highlightCount;\n\t},\n\ttitle(state, getters) {\n\t\tconst alertEventCount = getters.highlightCount\n\t\t\t? `(${getters.highlightCount.toString()}) `\n\t\t\t: \"\";\n\t\tconst channelname = state.activeChannel ? `${state.activeChannel.channel.name} — ` : \"\";\n\n\t\treturn alertEventCount + channelname + appName;\n\t},\n\tinitChannel: () => (channel: InitClientChan) => {\n\t\t// TODO: This should be a mutation\n\t\tchannel.pendingMessage = \"\";\n\t\tchannel.inputHistoryPosition = 0;\n\n\t\tchannel.inputHistory = [\"\"].concat(\n\t\t\tchannel.messages\n\t\t\t\t.filter((m) => m.self && m.text && m.type === \"message\")\n\t\t\t\t.map((m) => m.text)\n\t\t\t\t.reverse()\n\t\t\t\t.slice(0, 99)\n\t\t);\n\t\tchannel.historyLoading = false;\n\t\tchannel.scrolledToBottom = true;\n\t\tchannel.editTopic = false;\n\n\t\tchannel.moreHistoryAvailable = channel.totalMessages! > channel.messages.length;\n\t\tdelete channel.totalMessages;\n\n\t\tif (channel.type === \"channel\") {\n\t\t\tchannel.usersOutdated = true;\n\t\t}\n\n\t\treturn channel as ClientChan;\n\t},\n};\n\ntype Mutations = {\n\tappLoaded(state: State): void;\n\tactiveChannel(state: State, netChan: State[\"activeChannel\"]): void;\n\tcurrentUserVisibleError(state: State, error: State[\"currentUserVisibleError\"]): void;\n\trefreshDesktopNotificationState(state: State): void;\n\tisAutoCompleting(state: State, isAutoCompleting: State[\"isAutoCompleting\"]): void;\n\tisConnected(state: State, payload: State[\"isConnected\"]): void;\n\tnetworks(state: State, networks: State[\"networks\"]): void;\n\tmentions(state: State, mentions: State[\"mentions\"]): void;\n\n\tremoveNetwork(state: State, networkUuid: string): void;\n\tsortNetworks(\n\t\tstate: State,\n\t\tsortFn: (a: State[\"networks\"][0], b: State[\"networks\"][0]) => number\n\t): void;\n\thasServiceWorker(state: State): void;\n\tpushNotificationState(\n\t\tstate: State,\n\t\tpushNotificationState: State[\"pushNotificationState\"]\n\t): void;\n\tserverConfiguration(state: State, serverConfiguration: State[\"serverConfiguration\"]): void;\n\tsessions(state: State, payload: State[\"sessions\"]): void;\n\tsidebarOpen(state: State, payload: State[\"sidebarOpen\"]): void;\n\tsidebarDragging(state: State, payload: State[\"sidebarDragging\"]): void;\n\ttoggleSidebar(state: State): void;\n\ttoggleUserlist(state: State): void;\n\tuserlistOpen(state: State, payload: State[\"userlistOpen\"]): void;\n\tversionData(state: State, payload: State[\"versionData\"]): void;\n\tversionStatus(state: State, payload: State[\"versionStatus\"]): void;\n\tversionDataExpired(state: State, payload: State[\"versionDataExpired\"]): void;\n\tserverHasSettings(state: State, value: State[\"serverHasSettings\"]): void;\n\tmessageSearchPendingQuery(state: State, value: State[\"messageSearchPendingQuery\"]): void;\n\tmessageSearchResults(state: State, value: State[\"messageSearchResults\"]): void;\n\taddMessageSearchResults(state: State, value: NonNullable<State[\"messageSearchResults\"]>): void;\n};\n\nconst mutations: Mutations = {\n\tappLoaded(state) {\n\t\tstate.appLoaded = true;\n\t},\n\tactiveChannel(state, netChan) {\n\t\tstate.activeChannel = netChan;\n\t},\n\tcurrentUserVisibleError(state, error) {\n\t\tstate.currentUserVisibleError = error;\n\t},\n\trefreshDesktopNotificationState(state) {\n\t\tstate.desktopNotificationState = detectDesktopNotificationState();\n\t},\n\tisAutoCompleting(state, isAutoCompleting) {\n\t\tstate.isAutoCompleting = isAutoCompleting;\n\t},\n\tisConnected(state, payload) {\n\t\tstate.isConnected = payload;\n\t},\n\tnetworks(state, networks) {\n\t\tstate.networks = networks;\n\t},\n\tmentions(state, mentions) {\n\t\tstate.mentions = mentions;\n\t},\n\tremoveNetwork(state, networkId) {\n\t\tstate.networks.splice(\n\t\t\tstate.networks.findIndex((n) => n.uuid === networkId),\n\t\t\t1\n\t\t);\n\t},\n\tsortNetworks(state, sortFn) {\n\t\tstate.networks.sort(sortFn);\n\t},\n\thasServiceWorker(state) {\n\t\tstate.hasServiceWorker = true;\n\t},\n\tpushNotificationState(state, pushNotificationState) {\n\t\tstate.pushNotificationState = pushNotificationState;\n\t},\n\tserverConfiguration(state, serverConfiguration) {\n\t\tstate.serverConfiguration = serverConfiguration;\n\t},\n\tsessions(state, payload) {\n\t\tstate.sessions = payload;\n\t},\n\tsidebarOpen(state, payload) {\n\t\tstate.sidebarOpen = payload;\n\t},\n\tsidebarDragging(state, payload) {\n\t\tstate.sidebarDragging = payload;\n\t},\n\ttoggleSidebar(state) {\n\t\tstate.sidebarOpen = !state.sidebarOpen;\n\t},\n\ttoggleUserlist(state) {\n\t\tstate.userlistOpen = !state.userlistOpen;\n\t},\n\tuserlistOpen(state, payload) {\n\t\tstate.userlistOpen = payload;\n\t},\n\tversionData(state, payload) {\n\t\tstate.versionData = payload;\n\t},\n\tversionStatus(state, payload) {\n\t\tstate.versionStatus = payload;\n\t},\n\tversionDataExpired(state, payload) {\n\t\tstate.versionDataExpired = payload;\n\t},\n\tserverHasSettings(state, value) {\n\t\tstate.serverHasSettings = value;\n\t},\n\tmessageSearchPendingQuery(state, value) {\n\t\tstate.messageSearchPendingQuery = value;\n\t},\n\tmessageSearchResults(state, value) {\n\t\tstate.messageSearchResults = value;\n\t},\n\taddMessageSearchResults(state, value) {\n\t\t// Append the search results and add networks and channels to new messages\n\t\tif (!state.messageSearchResults) {\n\t\t\tstate.messageSearchResults = {results: []};\n\t\t}\n\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst results = [...value.results, ...state.messageSearchResults.results];\n\n\t\tstate.messageSearchResults = {\n\t\t\tresults,\n\t\t};\n\t},\n};\n\nexport type TypedCommit = <T extends keyof Mutations>(\n\ttype: T,\n\tpayload?: Parameters<Mutations[T]>[1] | null,\n\toptions?: {root?: boolean}\n) => ReturnType<Mutations[T]>;\ntype TypedActionContext = Omit<ActionContext<State, State>, \"commit\"> & {\n\tcommit: TypedCommit;\n};\n\ntype Actions = {\n\tpartChannel(context: TypedActionContext, payload: NetChan): void;\n};\n\nconst actions: Actions = {\n\tpartChannel({commit, state}, netChan) {\n\t\tconst mentions = state.mentions.filter((msg) => !(msg.chanId === netChan.channel.id));\n\t\tcommit(\"mentions\", mentions);\n\t},\n};\n\nconst storePattern = {\n\tstate,\n\tmutations,\n\tactions,\n\tgetters,\n};\n\n// https://vuex.vuejs.org/guide/typescript-support.html#typing-usestore-composition-function\nexport const key: InjectionKey<Store<State>> = Symbol();\n\n// vuex types getters as any\nexport type TypedStore = Omit<Store<State>, \"getters\" | \"commit\"> & {\n\tgetters: CallableGetters;\n\tcommit: TypedCommit;\n\tstate: State & {\n\t\tsettings: SettingsState;\n\t};\n};\n\nexport const store = createStore(storePattern) as TypedStore;\n\nconst settingsStore = createSettingsStore(store);\n\n// Settings module is registered dynamically because it benefits\n// from a direct reference to the store\nstore.registerModule(\"settings\", settingsStore);\n\nexport function useStore() {\n\treturn baseUseStore(key) as TypedStore;\n}\n","import {update as updateCursor} from \"undate\";\n\nimport socket from \"./socket\";\nimport {store} from \"./store\";\n\nclass Uploader {\n\txhr: XMLHttpRequest | null = null;\n\tfileQueue: File[] = [];\n\ttokenKeepAlive: NodeJS.Timeout | null = null;\n\n\toverlay: HTMLDivElement | null = null;\n\tuploadProgressbar: HTMLSpanElement | null = null;\n\n\tonDragEnter = (e: DragEvent) => this.dragEnter(e);\n\tonDragOver = (e: DragEvent) => this.dragOver(e);\n\tonDragLeave = (e: DragEvent) => this.dragLeave(e);\n\tonDrop = (e: DragEvent) => this.drop(e);\n\tonPaste = (e: ClipboardEvent) => this.paste(e);\n\n\tinit() {\n\t\tsocket.on(\"upload:auth\", (token) => this.uploadNextFileInQueue(token));\n\t}\n\n\tmounted() {\n\t\tthis.overlay = document.getElementById(\"upload-overlay\") as HTMLDivElement;\n\t\tthis.uploadProgressbar = document.getElementById(\"upload-progressbar\") as HTMLSpanElement;\n\n\t\tdocument.addEventListener(\"dragenter\", this.onDragEnter);\n\t\tdocument.addEventListener(\"dragover\", this.onDragOver);\n\t\tdocument.addEventListener(\"dragleave\", this.onDragLeave);\n\t\tdocument.addEventListener(\"drop\", this.onDrop);\n\t\tdocument.addEventListener(\"paste\", this.onPaste);\n\t}\n\n\tunmounted() {\n\t\tdocument.removeEventListener(\"dragenter\", this.onDragEnter);\n\t\tdocument.removeEventListener(\"dragover\", this.onDragOver);\n\t\tdocument.removeEventListener(\"dragleave\", this.onDragLeave);\n\t\tdocument.removeEventListener(\"drop\", this.onDrop);\n\t\tdocument.removeEventListener(\"paste\", this.onPaste);\n\t}\n\n\tdragOver(event: DragEvent) {\n\t\tif (event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\t// Prevent dragover event completely and do nothing with it\n\t\t\t// This stops the browser from trying to guess which cursor to show\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tdragEnter(event: DragEvent) {\n\t\t// relatedTarget is the target where we entered the drag from\n\t\t// when dragging from another window, the target is null, otherwise its a DOM element\n\t\tif (!event.relatedTarget && event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.overlay?.classList.add(\"is-dragover\");\n\t\t}\n\t}\n\n\tdragLeave(event: DragEvent) {\n\t\t// If relatedTarget is null, that means we are no longer dragging over the page\n\t\tif (!event.relatedTarget) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.overlay?.classList.remove(\"is-dragover\");\n\t\t}\n\t}\n\n\tdrop(event: DragEvent) {\n\t\tif (!event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tthis.overlay?.classList.remove(\"is-dragover\");\n\n\t\tlet files: (File | null)[];\n\n\t\tif (event.dataTransfer.items) {\n\t\t\tfiles = Array.from(event.dataTransfer.items)\n\t\t\t\t.filter((item) => item.kind === \"file\")\n\t\t\t\t.map((item) => item.getAsFile());\n\t\t} else {\n\t\t\tfiles = Array.from(event.dataTransfer.files);\n\t\t}\n\n\t\tthis.triggerUpload(files);\n\t}\n\n\tpaste(event: ClipboardEvent) {\n\t\tconst items = event.clipboardData?.items;\n\t\tconst files: (File | null)[] = [];\n\n\t\tif (!items) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].kind === \"file\") {\n\t\t\t\tfiles.push(items[i].getAsFile());\n\t\t\t}\n\t\t}\n\n\t\tif (files.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tthis.triggerUpload(files);\n\t}\n\n\ttriggerUpload(files: (File | null)[]) {\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!store.state.isConnected) {\n\t\t\tthis.handleResponse({\n\t\t\t\terror: `You are currently disconnected, unable to initiate upload process.`,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst wasQueueEmpty = this.fileQueue.length === 0;\n\t\tconst maxFileSize = store.state.serverConfiguration?.fileUploadMaxFileSize || 0;\n\n\t\tfor (const file of files) {\n\t\t\tif (!file) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (maxFileSize > 0 && file.size > maxFileSize) {\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\terror: `File ${file.name} is over the maximum allowed size`,\n\t\t\t\t});\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.fileQueue.push(file);\n\t\t}\n\n\t\t// if the queue was empty and we added some files to it, and there currently\n\t\t// is no upload in process, request a token to start the upload process\n\t\tif (wasQueueEmpty && this.xhr === null && this.fileQueue.length > 0) {\n\t\t\tthis.requestToken();\n\t\t}\n\t}\n\n\trequestToken() {\n\t\tsocket.emit(\"upload:auth\");\n\t}\n\n\tsetProgress(value: number) {\n\t\tif (!this.uploadProgressbar) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.uploadProgressbar.classList.toggle(\"upload-progressbar-visible\", value > 0);\n\t\tthis.uploadProgressbar.style.width = `${value}%`;\n\t}\n\n\tuploadNextFileInQueue(token: string) {\n\t\tconst file = this.fileQueue.shift();\n\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Tell the server that we are still upload to this token\n\t\t// so it does not become invalidated and fail the upload.\n\t\t// This issue only happens if The Lounge is proxied through other software\n\t\t// as it may buffer the upload before the upload request will be processed by The Lounge.\n\t\tthis.tokenKeepAlive = setInterval(() => socket.emit(\"upload:ping\", token), 40 * 1000);\n\n\t\tif (\n\t\t\tstore.state.settings.uploadCanvas &&\n\t\t\tfile.type.startsWith(\"image/\") &&\n\t\t\t!file.type.includes(\"svg\") &&\n\t\t\tfile.type !== \"image/gif\"\n\t\t) {\n\t\t\tthis.renderImage(file, (newFile) => this.performUpload(token, newFile));\n\t\t} else {\n\t\t\tthis.performUpload(token, file);\n\t\t}\n\t}\n\n\trenderImage(file: File, callback: (file: File) => void) {\n\t\tconst fileReader = new FileReader();\n\n\t\tfileReader.onabort = () => callback(file);\n\t\tfileReader.onerror = () => fileReader.abort();\n\n\t\tfileReader.onload = () => {\n\t\t\tconst img = new Image();\n\n\t\t\timg.onerror = () => callback(file);\n\n\t\t\timg.onload = () => {\n\t\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = img.width;\n\t\t\t\tcanvas.height = img.height;\n\t\t\t\tconst ctx = canvas.getContext(\"2d\");\n\n\t\t\t\tif (!ctx) {\n\t\t\t\t\tthrow new Error(\"Could not get canvas context in upload\");\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage(img, 0, 0);\n\n\t\t\t\tcanvas.toBlob((blob) => {\n\t\t\t\t\tcallback(new File([blob!], file.name));\n\t\t\t\t}, file.type);\n\t\t\t};\n\n\t\t\timg.src = String(fileReader.result);\n\t\t};\n\n\t\tfileReader.readAsDataURL(file);\n\t}\n\n\tperformUpload(token: string, file: File) {\n\t\tthis.xhr = new XMLHttpRequest();\n\n\t\tthis.xhr.upload.addEventListener(\n\t\t\t\"progress\",\n\t\t\t(e) => {\n\t\t\t\tconst percent = Math.floor((e.loaded / e.total) * 1000) / 10;\n\t\t\t\tthis.setProgress(percent);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tthis.xhr.onreadystatechange = () => {\n\t\t\tif (this.xhr?.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tlet response;\n\n\t\t\t\ttry {\n\t\t\t\t\tresponse = JSON.parse(this.xhr.responseText);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// This is just a safe guard and should not happen if server doesn't throw any errors.\n\t\t\t\t\t// Browsers break the HTTP spec by aborting the request without reading any response data,\n\t\t\t\t\t// if there is still data to be uploaded. Servers will only error in extreme cases like bad\n\t\t\t\t\t// authentication or server-side errors.\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\terror: `Upload aborted: ${this.xhr.statusText} (HTTP ${this.xhr.status})`,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis.handleResponse(response);\n\n\t\t\t\tthis.xhr = null;\n\n\t\t\t\t// this file was processed, if we still have files in the queue, upload the next one\n\t\t\t\tif (this.fileQueue.length > 0) {\n\t\t\t\t\tthis.requestToken();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst formData = new FormData();\n\t\tformData.append(\"file\", file);\n\t\tthis.xhr.open(\"POST\", `uploads/new/${token}`);\n\t\tthis.xhr.send(formData);\n\t}\n\n\thandleResponse(response: {error?: string; url?: string}) {\n\t\tthis.setProgress(0);\n\n\t\tif (this.tokenKeepAlive) {\n\t\t\tclearInterval(this.tokenKeepAlive);\n\t\t\tthis.tokenKeepAlive = null;\n\t\t}\n\n\t\tif (response.error) {\n\t\t\tstore.commit(\"currentUserVisibleError\", response.error);\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.url) {\n\t\t\tthis.insertUploadUrl(response.url);\n\t\t}\n\t}\n\n\tinsertUploadUrl(url: string) {\n\t\tconst fullURL = new URL(url, location.toString()).toString();\n\t\tconst textbox = document.getElementById(\"input\");\n\n\t\tif (!(textbox instanceof HTMLTextAreaElement)) {\n\t\t\tthrow new Error(\"Could not find textbox in upload\");\n\t\t}\n\n\t\tconst initStart = textbox.selectionStart;\n\n\t\t// Get the text before the cursor, and add a space if it's not in the beginning\n\t\tconst headToCursor = initStart > 0 ? textbox.value.substring(0, initStart) + \" \" : \"\";\n\n\t\t// Get the remaining text after the cursor\n\t\tconst cursorToTail = textbox.value.substring(initStart);\n\n\t\t// Construct the value until the point where we want the cursor to be\n\t\tconst textBeforeTail = headToCursor + fullURL + \" \";\n\n\t\tupdateCursor(textbox, textBeforeTail + cursorToTail);\n\n\t\t// Set the cursor after the link and a space\n\t\ttextbox.selectionStart = textbox.selectionEnd = textBeforeTail.length;\n\t}\n\n\t// TODO: This is a temporary hack while Vue porting is finalized\n\tabort() {\n\t\tthis.fileQueue = [];\n\n\t\tif (this.xhr) {\n\t\t\tthis.xhr.abort();\n\t\t\tthis.xhr = null;\n\t\t}\n\t}\n}\n\nconst instance = new Uploader();\n\nexport default {\n\tabort: () => instance.abort(),\n\tinitialize: () => instance.init(),\n\tmounted: () => instance.mounted(),\n\tunmounted: () => instance.unmounted(),\n\ttriggerUpload: (files) => instance.triggerUpload(files),\n};\n","import {store} from \"../store\";\nimport socket from \"../socket\";\n\nsocket.on(\"disconnect\", handleDisconnect);\nsocket.on(\"connect_error\", handleDisconnect);\nsocket.on(\"error\", handleDisconnect);\n\nsocket.io.on(\"reconnect_attempt\", function (attempt) {\n\tstore.commit(\"currentUserVisibleError\", `Reconnecting… (attempt ${attempt})`);\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"connecting\", function () {\n\tstore.commit(\"currentUserVisibleError\", \"Connecting…\");\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"connect\", function () {\n\t// Clear send buffer when reconnecting, socket.io would emit these\n\t// immediately upon connection and it will have no effect, so we ensure\n\t// nothing is sent to the server that might have happened.\n\tsocket.sendBuffer = [];\n\n\tstore.commit(\"currentUserVisibleError\", \"Finalizing connection…\");\n\tupdateLoadingMessage();\n});\n\nfunction handleDisconnect(data) {\n\tconst message = String(data.message || data);\n\n\tstore.commit(\"isConnected\", false);\n\n\tif (!socket.io.reconnection()) {\n\t\tstore.commit(\n\t\t\t\"currentUserVisibleError\",\n\t\t\t`Disconnected from the server (${message}), The Lounge does not reconnect in public mode.`\n\t\t);\n\t\tupdateLoadingMessage();\n\t\treturn;\n\t}\n\n\tstore.commit(\"currentUserVisibleError\", `Waiting to reconnect… (${message})`);\n\tupdateLoadingMessage();\n\n\t// If the server shuts down, socket.io skips reconnection\n\t// and we have to manually call connect to start the process\n\t// However, do not reconnect if TL client manually closed the connection\n\t// @ts-expect-error Property 'skipReconnect' is private and only accessible within class 'Manager<ListenEvents, EmitEvents>'.ts(2341)\n\tif (socket.io.skipReconnect && message !== \"io client disconnect\") {\n\t\trequestIdleCallback(() => socket.connect(), 2000);\n\t}\n}\n\nfunction requestIdleCallback(callback, timeout) {\n\tif (window.requestIdleCallback) {\n\t\t// During an idle period the user agent will run idle callbacks in FIFO order\n\t\t// until either the idle period ends or there are no more idle callbacks eligible to be run.\n\t\twindow.requestIdleCallback(callback, {timeout});\n\t} else {\n\t\tcallback();\n\t}\n}\n\nfunction updateLoadingMessage() {\n\tconst loading = document.getElementById(\"loading-page-message\");\n\n\tif (loading) {\n\t\tloading.textContent = store.state.currentUserVisibleError;\n\t}\n}\n","import socket from \"../socket\";\nimport storage from \"../localStorage\";\nimport {router, navigate} from \"../router\";\nimport {store} from \"../store\";\nimport location from \"../location\";\nlet lastServerHash: number | null = null;\n\ndeclare global {\n\tinterface Window {\n\t\tg_TheLoungeRemoveLoading?: () => void;\n\t}\n}\n\nsocket.on(\"auth:success\", function () {\n\tstore.commit(\"currentUserVisibleError\", \"Loading messages…\");\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"auth:failed\", async function () {\n\tstorage.remove(\"token\");\n\n\tif (store.state.appLoaded) {\n\t\treturn reloadPage(\"Authentication failed, reloading…\");\n\t}\n\n\tawait showSignIn();\n});\n\nsocket.on(\"auth:start\", async function (serverHash) {\n\t// If we reconnected and serverHash differs, that means the server restarted\n\t// And we will reload the page to grab the latest version\n\tif (lastServerHash && serverHash !== lastServerHash) {\n\t\treturn reloadPage(\"Server restarted, reloading…\");\n\t}\n\n\tlastServerHash = serverHash;\n\n\tconst user = storage.get(\"user\");\n\tconst token = storage.get(\"token\");\n\tconst doFastAuth = user && token;\n\n\t// If we reconnect and no longer have a stored token, reload the page\n\tif (store.state.appLoaded && !doFastAuth) {\n\t\treturn reloadPage(\"Authentication failed, reloading…\");\n\t}\n\n\t// If we have user and token stored, perform auth without showing sign-in first\n\tif (doFastAuth) {\n\t\tstore.commit(\"currentUserVisibleError\", \"Authorizing…\");\n\t\tupdateLoadingMessage();\n\n\t\tlet lastMessage = -1;\n\n\t\tfor (const network of store.state.networks) {\n\t\t\tfor (const chan of network.channels) {\n\t\t\t\tif (chan.messages.length > 0) {\n\t\t\t\t\tconst id = chan.messages[chan.messages.length - 1].id;\n\n\t\t\t\t\tif (lastMessage < id) {\n\t\t\t\t\t\tlastMessage = id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst openChannel =\n\t\t\t(store.state.activeChannel && store.state.activeChannel.channel.id) || null;\n\n\t\tsocket.emit(\"auth:perform\", {\n\t\t\tuser,\n\t\t\ttoken,\n\t\t\tlastMessage,\n\t\t\topenChannel,\n\t\t\thasConfig: store.state.serverConfiguration !== null,\n\t\t});\n\t} else {\n\t\tawait showSignIn();\n\t}\n});\n\nasync function showSignIn() {\n\t// TODO: this flashes grey background because it takes a little time for vue to mount signin\n\tif (window.g_TheLoungeRemoveLoading) {\n\t\twindow.g_TheLoungeRemoveLoading();\n\t}\n\n\tif (router.currentRoute.value.name !== \"SignIn\") {\n\t\tawait navigate(\"SignIn\");\n\t}\n}\n\nfunction reloadPage(message: string) {\n\tsocket.disconnect();\n\tstore.commit(\"currentUserVisibleError\", message);\n\tlocation.reload();\n}\n\nfunction updateLoadingMessage() {\n\tconst loading = document.getElementById(\"loading-page-message\");\n\n\tif (loading) {\n\t\tloading.textContent = store.state.currentUserVisibleError;\n\t}\n}\n","import {nextTick} from \"vue\";\nimport socket from \"../socket\";\nimport storage from \"../localStorage\";\nimport {router, switchToChannel, navigate} from \"../router\";\nimport {store} from \"../store\";\nimport parseIrcUri from \"../helpers/parseIrcUri\";\nimport {ClientNetwork, InitClientChan} from \"../types\";\n\nsocket.on(\"init\", async function (data) {\n\tstore.commit(\"networks\", mergeNetworkData(data.networks));\n\tstore.commit(\"isConnected\", true);\n\tstore.commit(\"currentUserVisibleError\", null);\n\n\tif (data.token) {\n\t\tstorage.set(\"token\", data.token);\n\t}\n\n\tif (!store.state.appLoaded) {\n\t\tstore.commit(\"appLoaded\");\n\n\t\tsocket.emit(\"setting:get\");\n\n\t\ttry {\n\t\t\tawait router.isReady();\n\t\t} catch (e: any) {\n\t\t\t// if the router throws an error, it means the route isn't matched,\n\t\t\t// so we can continue on.\n\t\t}\n\n\t\tif (window.g_TheLoungeRemoveLoading) {\n\t\t\twindow.g_TheLoungeRemoveLoading();\n\t\t}\n\n\t\tconst handledQuery = await handleQueryParams();\n\n\t\t// If we handled query parameters like irc:// links or just general\n\t\t// connect parameters in public mode, then nothing to do here\n\t\tif (!handledQuery) {\n\t\t\t// If we are on an unknown route or still on SignIn component\n\t\t\t// then we can open last known channel on server, or Connect window if none\n\t\t\tif (\n\t\t\t\t!router.currentRoute?.value?.name ||\n\t\t\t\trouter.currentRoute?.value?.name === \"SignIn\"\n\t\t\t) {\n\t\t\t\tconst channel = store.getters.findChannel(data.active);\n\n\t\t\t\tif (channel) {\n\t\t\t\t\tswitchToChannel(channel.channel);\n\t\t\t\t} else if (store.state.networks.length > 0) {\n\t\t\t\t\t// Server is telling us to open a channel that does not exist\n\t\t\t\t\t// For example, it can be unset if you first open the page after server start\n\t\t\t\t\tswitchToChannel(store.state.networks[0].channels[0]);\n\t\t\t\t} else {\n\t\t\t\t\tawait navigate(\"Connect\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nfunction mergeNetworkData(newNetworks: ClientNetwork[]) {\n\tconst stored = storage.get(\"thelounge.networks.collapsed\");\n\tconst collapsedNetworks = stored ? new Set(JSON.parse(stored)) : new Set();\n\n\tfor (let n = 0; n < newNetworks.length; n++) {\n\t\tconst network = newNetworks[n];\n\t\tconst currentNetwork = store.getters.findNetwork(network.uuid);\n\n\t\t// If this network is new, set some default variables and initalize channel variables\n\t\tif (!currentNetwork) {\n\t\t\tnetwork.isJoinChannelShown = false;\n\t\t\tnetwork.isCollapsed = collapsedNetworks.has(network.uuid);\n\t\t\tnetwork.channels.forEach(store.getters.initChannel);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge received network object into existing network object on the client\n\t\t// so the object reference stays the same (e.g. for currentChannel state)\n\t\tfor (const key in network) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(network, key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Channels require extra care to be merged correctly\n\t\t\tif (key === \"channels\") {\n\t\t\t\tcurrentNetwork.channels = mergeChannelData(\n\t\t\t\t\tcurrentNetwork.channels,\n\t\t\t\t\tnetwork.channels as InitClientChan[]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcurrentNetwork[key] = network[key];\n\t\t\t}\n\t\t}\n\n\t\tnewNetworks[n] = currentNetwork;\n\t}\n\n\treturn newNetworks;\n}\n\nfunction mergeChannelData(oldChannels: InitClientChan[], newChannels: InitClientChan[]) {\n\tfor (let c = 0; c < newChannels.length; c++) {\n\t\tconst channel = newChannels[c];\n\t\tconst currentChannel = oldChannels.find((chan) => chan.id === channel.id);\n\n\t\t// This is a new channel that was joined while client was disconnected, initialize it\n\t\tif (!currentChannel) {\n\t\t\tstore.getters.initChannel(channel);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge received channel object into existing currentChannel\n\t\t// so the object references are exactly the same (e.g. in store.state.activeChannel)\n\t\tfor (const key in channel) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(channel, key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Server sends an empty users array, client requests it whenever needed\n\t\t\tif (key === \"users\") {\n\t\t\t\tif (channel.type === \"channel\") {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\tstore.state.activeChannel.channel === currentChannel\n\t\t\t\t\t) {\n\t\t\t\t\t\t// For currently open channel, request the user list straight away\n\t\t\t\t\t\tsocket.emit(\"names\", {\n\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// For all other channels, mark the user list as outdated\n\t\t\t\t\t\t// so an update will be requested whenever user switches to these channels\n\t\t\t\t\t\tcurrentChannel.usersOutdated = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Server sends total count of messages in memory, we compare it to amount of messages\n\t\t\t// on the client, and decide whether theres more messages to load from server\n\t\t\tif (key === \"totalMessages\") {\n\t\t\t\tcurrentChannel.moreHistoryAvailable =\n\t\t\t\t\tchannel.totalMessages! > currentChannel.messages.length;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Reconnection only sends new messages, so merge it on the client\n\t\t\t// Only concat if server sent us less than 100 messages so we don't introduce gaps\n\t\t\tif (key === \"messages\" && currentChannel.messages && channel.messages.length < 100) {\n\t\t\t\tcurrentChannel.messages = currentChannel.messages.concat(channel.messages);\n\t\t\t} else {\n\t\t\t\tcurrentChannel[key] = channel[key];\n\t\t\t}\n\t\t}\n\n\t\tnewChannels[c] = currentChannel;\n\t}\n\n\treturn newChannels;\n}\n\nasync function handleQueryParams() {\n\tif (!(\"URLSearchParams\" in window)) {\n\t\treturn false;\n\t}\n\n\tconst params = new URLSearchParams(document.location.search);\n\n\tconst cleanParams = () => {\n\t\t// Remove query parameters from url without reloading the page\n\t\tconst cleanUri = window.location.origin + window.location.pathname + window.location.hash;\n\t\twindow.history.replaceState({}, document.title, cleanUri);\n\t};\n\n\tif (params.has(\"uri\")) {\n\t\t// Set default connection settings from IRC protocol links\n\t\tconst uri = params.get(\"uri\");\n\t\tconst queryParams = parseIrcUri(String(uri));\n\n\t\tcleanParams();\n\t\tawait router.push({name: \"Connect\", query: queryParams});\n\n\t\treturn true;\n\t} else if (document.body.classList.contains(\"public\") && document.location.search) {\n\t\t// Set default connection settings from url params\n\t\tconst queryParams = Object.fromEntries(params.entries());\n\n\t\tcleanParams();\n\t\tawait router.push({name: \"Connect\", query: queryParams});\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","import constants from \"../constants\";\nimport socket from \"../socket\";\n\nsocket.on(\"commands\", function (commands) {\n\tif (commands) {\n\t\tconstants.commands = commands;\n\t}\n});\n","export default (stringUri: string) => {\n\tconst data = {\n\t\tname: \"\",\n\t\thost: \"\",\n\t\tport: \"\",\n\t\tjoin: \"\",\n\t\ttls: false,\n\t};\n\n\ttry {\n\t\t// https://tools.ietf.org/html/draft-butcher-irc-url-04\n\t\tconst uri = new URL(stringUri);\n\n\t\t// Replace protocol with a \"special protocol\" (that's what it's called in WHATWG spec)\n\t\t// So that the uri can be properly parsed\n\t\tif (uri.protocol === \"irc:\") {\n\t\t\turi.protocol = \"http:\";\n\n\t\t\tif (!uri.port) {\n\t\t\t\turi.port = \"6667\";\n\t\t\t}\n\t\t} else if (uri.protocol === \"ircs:\") {\n\t\t\turi.protocol = \"https:\";\n\n\t\t\tif (!uri.port) {\n\t\t\t\turi.port = \"6697\";\n\t\t\t}\n\n\t\t\tdata.tls = true;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!uri.hostname) {\n\t\t\treturn {};\n\t\t}\n\n\t\tdata.host = data.name = uri.hostname;\n\t\tdata.port = uri.port;\n\n\t\tlet channel = \"\";\n\n\t\tif (uri.pathname.length > 1) {\n\t\t\tchannel = uri.pathname.substr(1); // Remove slash\n\t\t}\n\n\t\tif (uri.hash.length > 1) {\n\t\t\tchannel += uri.hash;\n\t\t}\n\n\t\t// We don't split channels or append # here because the connect window takes care of that\n\t\tdata.join = channel;\n\t} catch (e) {\n\t\t// do nothing on invalid uri\n\t}\n\n\treturn data;\n};\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"join\", function (data) {\n\tstore.getters.initChannel(data.chan);\n\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tnetwork.channels.splice(data.index || -1, 0, data.chan);\n\n\t// Queries do not automatically focus, unless the user did a whois\n\tif (data.chan.type === \"query\" && !data.shouldOpen) {\n\t\treturn;\n\t}\n\n\tconst chan = store.getters.findChannel(data.chan.id);\n\n\tif (chan) {\n\t\tswitchToChannel(chan.channel);\n\t} else {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(\"Could not find channel\", data.chan.id);\n\t}\n});\n","import {nextTick} from \"vue\";\n\nimport socket from \"../socket\";\nimport {store} from \"../store\";\nimport {ClientMessage} from \"../types\";\n\nsocket.on(\"more\", async (data) => {\n\tconst channel = store.getters.findChannel(data.chan)?.channel;\n\n\tif (!channel) {\n\t\treturn;\n\t}\n\n\tchannel.inputHistory = channel.inputHistory.concat(\n\t\tdata.messages\n\t\t\t.filter((m) => m.self && m.text && m.type === \"message\")\n\t\t\t.map((m) => m.text)\n\t\t\t.reverse()\n\t\t\t.slice(0, 100 - channel.inputHistory.length)\n\t);\n\tchannel.moreHistoryAvailable =\n\t\tdata.totalMessages > channel.messages.length + data.messages.length;\n\tchannel.messages.unshift(...(data.messages as ClientMessage[]));\n\n\tawait nextTick();\n\tchannel.historyLoading = false;\n});\n","/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport socket from \"../socket\";\nimport {cleanIrcMessage} from \"../../../shared/irc\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\nimport {ClientChan, ClientMention, ClientMessage, NetChan} from \"../types\";\n\nlet pop;\n\ntry {\n\tpop = new Audio();\n\tpop.src = \"audio/pop.wav\";\n} catch (e) {\n\tpop = {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tplay() {},\n\t};\n}\n\nsocket.on(\"msg\", function (data) {\n\tconst receivingChannel = store.getters.findChannel(data.chan);\n\n\tif (!receivingChannel) {\n\t\treturn;\n\t}\n\n\tlet channel = receivingChannel.channel;\n\tlet isActiveChannel =\n\t\tstore.state.activeChannel && store.state.activeChannel.channel === channel;\n\n\t// Display received notices and errors in currently active channel.\n\t// Reloading the page will put them back into the lobby window.\n\tif (data.msg.showInActive) {\n\t\t// We only want to put errors/notices in active channel if they arrive on the same network\n\t\tif (\n\t\t\tstore.state.activeChannel &&\n\t\t\tstore.state.activeChannel.network === receivingChannel.network\n\t\t) {\n\t\t\tchannel = store.state.activeChannel.channel;\n\n\t\t\t// Do not update unread/highlight counters for this channel\n\t\t\t// as we are putting this message in the active channel\n\t\t\tisActiveChannel = true;\n\n\t\t\tif (data.chan === channel.id) {\n\t\t\t\t// If active channel is the intended channel for this message,\n\t\t\t\t// remove the showInActive flag\n\t\t\t\tdelete data.msg.showInActive;\n\t\t\t} else {\n\t\t\t\tdata.chan = channel.id;\n\t\t\t}\n\t\t} else {\n\t\t\tdelete data.msg.showInActive;\n\t\t}\n\t}\n\n\t// Do not set unread counter for channel if it is currently active on this client\n\t// It may increase on the server before it processes channel open event from this client\n\tif (!isActiveChannel) {\n\t\tif (typeof data.highlight !== \"undefined\") {\n\t\t\tchannel.highlight = data.highlight;\n\t\t}\n\n\t\tif (typeof data.unread !== \"undefined\") {\n\t\t\tchannel.unread = data.unread;\n\t\t}\n\t}\n\n\tchannel.messages.push(data.msg);\n\n\tif (data.msg.self) {\n\t\tchannel.firstUnread = data.msg.id;\n\t} else {\n\t\tnotifyMessage(data.chan, channel, store.state.activeChannel, data.msg);\n\t}\n\n\tlet messageLimit = 0;\n\n\tif (!isActiveChannel) {\n\t\t// If message arrives in non active channel, keep only 100 messages\n\t\tmessageLimit = 100;\n\t} else if (channel.scrolledToBottom) {\n\t\t// If message arrives in active channel, keep 1500 messages if scroll is currently at the bottom\n\t\t// One history load may load up to 1000 messages at once if condendesed or hidden events are enabled\n\t\tmessageLimit = 1500;\n\t}\n\n\tif (messageLimit > 0 && channel.messages.length > messageLimit) {\n\t\tchannel.messages.splice(0, channel.messages.length - messageLimit);\n\t\tchannel.moreHistoryAvailable = true;\n\t}\n\n\tif (channel.type === \"channel\") {\n\t\tupdateUserList(channel, data.msg);\n\t}\n});\n\nfunction notifyMessage(\n\ttargetId: number,\n\tchannel: ClientChan,\n\tactiveChannel: NetChan | undefined,\n\tmsg: ClientMessage\n) {\n\tif (channel.muted) {\n\t\treturn;\n\t}\n\n\tif (msg.highlight || (store.state.settings.notifyAllMessages && msg.type === \"message\")) {\n\t\tif (!document.hasFocus() || !activeChannel || activeChannel.channel !== channel) {\n\t\t\tif (store.state.settings.notification) {\n\t\t\t\ttry {\n\t\t\t\t\tpop.play();\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// On mobile, sounds can not be played without user interaction.\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tstore.state.settings.desktopNotifications &&\n\t\t\t\t\"Notification\" in window &&\n\t\t\t\tNotification.permission === \"granted\"\n\t\t\t) {\n\t\t\t\tlet title: string;\n\t\t\t\tlet body: string;\n\n\t\t\t\tif (msg.type === \"invite\") {\n\t\t\t\t\ttitle = \"New channel invite:\";\n\t\t\t\t\tbody = msg.from.nick + \" invited you to \" + msg.channel;\n\t\t\t\t} else {\n\t\t\t\t\ttitle = String(msg.from.nick);\n\n\t\t\t\t\tif (channel.type !== \"query\") {\n\t\t\t\t\t\ttitle += ` (${channel.name})`;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (msg.type === \"message\") {\n\t\t\t\t\t\ttitle += \" says:\";\n\t\t\t\t\t}\n\n\t\t\t\t\tbody = cleanIrcMessage(msg.text);\n\t\t\t\t}\n\n\t\t\t\tconst timestamp = Date.parse(String(msg.time));\n\n\t\t\t\ttry {\n\t\t\t\t\tif (store.state.hasServiceWorker) {\n\t\t\t\t\t\tnavigator.serviceWorker.ready\n\t\t\t\t\t\t\t.then((registration) => {\n\t\t\t\t\t\t\t\tregistration.active?.postMessage({\n\t\t\t\t\t\t\t\t\ttype: \"notification\",\n\t\t\t\t\t\t\t\t\tchanId: targetId,\n\t\t\t\t\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t// no-op\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst notify = new Notification(title, {\n\t\t\t\t\t\t\ttag: `chan-${targetId}`,\n\t\t\t\t\t\t\tbadge: \"img/icon-alerted-black-transparent-bg-72x72px.png\",\n\t\t\t\t\t\t\ticon: \"img/icon-alerted-grey-bg-192x192px.png\",\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnotify.addEventListener(\"click\", function () {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\twindow.focus();\n\n\t\t\t\t\t\t\tconst channelTarget = store.getters.findChannel(targetId);\n\n\t\t\t\t\t\t\tif (channelTarget) {\n\t\t\t\t\t\t\t\tswitchToChannel(channelTarget.channel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// `new Notification(...)` is not supported and should be silenced.\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateUserList(channel, msg) {\n\tif (msg.type === \"message\" || msg.type === \"action\") {\n\t\tconst user = channel.users.find((u) => u.nick === msg.from.nick);\n\n\t\tif (user) {\n\t\t\tuser.lastMessage = new Date(msg.time).getTime() || Date.now();\n\t\t}\n\t} else if (msg.type === \"quit\" || msg.type === \"part\") {\n\t\tconst idx = channel.users.findIndex((u) => u.nick === msg.from.nick);\n\n\t\tif (idx > -1) {\n\t\t\tchannel.users.splice(idx, 1);\n\t\t}\n\t} else if (msg.type === \"kick\") {\n\t\tconst idx = channel.users.findIndex((u) => u.nick === msg.target.nick);\n\n\t\tif (idx > -1) {\n\t\t\tchannel.users.splice(idx, 1);\n\t\t}\n\t}\n}\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"msg:preview\", function (data) {\n\tconst netChan = store.getters.findChannel(data.chan);\n\tconst message = netChan?.channel.messages.find((m) => m.id === data.id);\n\n\tif (!message) {\n\t\treturn;\n\t}\n\n\tconst previewIndex = message.previews.findIndex((m) => m.link === data.preview.link);\n\n\tif (previewIndex > -1) {\n\t\tmessage.previews[previewIndex] = data.preview;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"msg:special\", function (data) {\n\tconst netChan = store.getters.findChannel(data.chan);\n\n\tif (!netChan) {\n\t\treturn;\n\t}\n\n\tnetChan.channel.data = data.data;\n\tswitchToChannel(netChan.channel);\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"names\", function (data) {\n\tconst netChan = store.getters.findChannel(data.id);\n\n\tif (netChan) {\n\t\tnetChan.channel.users = data.users;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"network\", function (data) {\n\tconst network = data.networks[0];\n\n\tnetwork.isJoinChannelShown = false;\n\tnetwork.isCollapsed = false;\n\tnetwork.channels.forEach(store.getters.initChannel);\n\n\tstore.commit(\"networks\", [...store.state.networks, network]);\n\n\t// Open last channel specified in `join`\n\tswitchToChannel(network.channels[network.channels.length - 1]);\n});\n\nsocket.on(\"network:options\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (network) {\n\t\tnetwork.serverOptions = data.serverOptions as typeof network.serverOptions;\n\t}\n});\n\nsocket.on(\"network:status\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tnetwork.status.connected = data.connected;\n\tnetwork.status.secure = data.secure;\n\n\tif (!data.connected) {\n\t\tnetwork.channels.forEach((channel) => {\n\t\t\tchannel.users = [];\n\t\t\tchannel.state = 0;\n\t\t});\n\t}\n});\n\nsocket.on(\"channel:state\", function (data) {\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.state = data.state;\n\t}\n});\n\nsocket.on(\"network:info\", function (data) {\n\tconst network = store.getters.findNetwork(data.uuid);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tfor (const key in data) {\n\t\tnetwork[key] = data[key];\n\t}\n});\n\nsocket.on(\"network:name\", function (data) {\n\tconst network = store.getters.findNetwork(data.uuid);\n\n\tif (network) {\n\t\tnetwork.name = network.channels[0].name = data.name;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"nick\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (network) {\n\t\tnetwork.nick = data.nick;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\n// Sync unread badge and marker when other clients open a channel\nsocket.on(\"open\", function (id) {\n\tif (id < 1) {\n\t\treturn;\n\t}\n\n\t// Don't do anything if the channel is active on this client\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === id) {\n\t\treturn;\n\t}\n\n\t// Clear the unread badge\n\tconst channel = store.getters.findChannel(id);\n\n\tif (channel) {\n\t\tchannel.channel.highlight = 0;\n\t\tchannel.channel.unread = 0;\n\n\t\tif (channel.channel.messages.length > 0) {\n\t\t\tchannel.channel.firstUnread =\n\t\t\t\tchannel.channel.messages[channel.channel.messages.length - 1].id;\n\t\t}\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"part\", async function (data) {\n\t// When parting from the active channel/query, jump to the network's lobby\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === data.chan) {\n\t\tswitchToChannel(store.state.activeChannel.network.channels[0]);\n\t}\n\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (!channel) {\n\t\treturn;\n\t}\n\n\tchannel.network.channels.splice(\n\t\tchannel.network.channels.findIndex((c) => c.id === data.chan),\n\t\t1\n\t);\n\n\tawait store.dispatch(\"partChannel\", channel);\n});\n","import socket from \"../socket\";\nimport {switchToChannel, navigate} from \"../router\";\nimport {store} from \"../store\";\n\nsocket.on(\"quit\", async function (data) {\n\t// If we're in a channel, and it's on the network that is being removed,\n\t// then open another channel window\n\tconst isCurrentNetworkBeingRemoved =\n\t\tstore.state.activeChannel && store.state.activeChannel.network.uuid === data.network;\n\n\tstore.commit(\"removeNetwork\", data.network);\n\n\tif (!isCurrentNetworkBeingRemoved) {\n\t\treturn;\n\t}\n\n\tif (store.state.networks.length > 0) {\n\t\tswitchToChannel(store.state.networks[0].channels[0]);\n\t} else {\n\t\tawait navigate(\"Connect\");\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"sync_sort\", function (data) {\n\tconst order = data.order;\n\n\tswitch (data.type) {\n\t\tcase \"networks\":\n\t\t\tstore.commit(\n\t\t\t\t\"sortNetworks\",\n\t\t\t\t(a, b) => (order as string[]).indexOf(a.uuid) - (order as string[]).indexOf(b.uuid)\n\t\t\t);\n\n\t\t\tbreak;\n\n\t\tcase \"channels\": {\n\t\t\tconst network = store.getters.findNetwork(data.target);\n\n\t\t\tif (!network) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnetwork.channels.sort(\n\t\t\t\t(a, b) => (order as number[]).indexOf(a.id) - (order as number[]).indexOf(b.id)\n\t\t\t);\n\n\t\t\tbreak;\n\t\t}\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"topic\", function (data) {\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.topic = data.topic;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"users\", function (data) {\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === data.chan) {\n\t\treturn socket.emit(\"names\", {\n\t\t\ttarget: data.chan,\n\t\t});\n\t}\n\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.usersOutdated = true;\n\t}\n});\n","import socket from \"../socket\";\nimport Auth from \"../auth\";\n\nsocket.on(\"sign-out\", function () {\n\tAuth.signout();\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"sessions:list\", function (data) {\n\tdata.sort((a, b) => b.lastUse - a.lastUse);\n\tstore.commit(\"sessions\", data);\n});\n","import socket from \"../socket\";\nimport upload from \"../upload\";\nimport {store} from \"../store\";\n\nsocket.once(\"configuration\", function (data) {\n\tstore.commit(\"serverConfiguration\", data);\n\n\t// 'theme' setting depends on serverConfiguration.themes so\n\t// settings cannot be applied before this point\n\tvoid store.dispatch(\"settings/applyAll\");\n\n\tif (data.fileUpload) {\n\t\tupload.initialize();\n\t}\n\n\t// If localStorage contains a theme that does not exist on this server, switch\n\t// back to its default theme.\n\tconst currentTheme = data.themes.find((t) => t.name === store.state.settings.theme);\n\n\tif (currentTheme === undefined) {\n\t\tvoid store.dispatch(\"settings/update\", {\n\t\t\tname: \"theme\",\n\t\t\tvalue: data.defaultTheme,\n\t\t\tsync: true,\n\t\t});\n\t} else if (currentTheme.themeColor) {\n\t\t(document.querySelector('meta[name=\"theme-color\"]') as HTMLMetaElement).content =\n\t\t\tcurrentTheme.themeColor;\n\t}\n\n\tif (document.body.classList.contains(\"public\")) {\n\t\twindow.addEventListener(\"beforeunload\", (e) => {\n\t\t\te.preventDefault();\n\t\t\te.returnValue = \"Are you sure you want to navigate away from this page?\";\n\t\t});\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"changelog\", function (data) {\n\tstore.commit(\"versionData\", data);\n\tstore.commit(\"versionDataExpired\", false);\n\n\tlet status;\n\n\tif (data.latest) {\n\t\tstatus = \"new-version\";\n\t} else if (data.packages) {\n\t\tstatus = \"new-packages\";\n\t} else if (data.current.changelog) {\n\t\tstatus = \"up-to-date\";\n\t} else {\n\t\tstatus = \"error\";\n\t}\n\n\tstore.commit(\"versionStatus\", status);\n\n\t// When there is a button to refresh the checker available, display it when\n\t// data is expired. Before that, server would return same information anyway.\n\tif (data.expiresAt) {\n\t\tconst expires = data.expiresAt - Date.now();\n\n\t\tif (expires > 0) {\n\t\t\tsetTimeout(() => store.commit(\"versionDataExpired\", true), expires);\n\t\t} else {\n\t\t\tstore.commit(\"versionDataExpired\", true);\n\t\t}\n\t}\n});\n\nsocket.on(\"changelog:newversion\", () => {\n\tif (!store.state.serverConfiguration) {\n\t\treturn;\n\t}\n\n\tstore.state.serverConfiguration.isUpdateAvailable = true;\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"setting:new\", async function (data) {\n\tconst name = data.name;\n\tconst value = data.value;\n\tawait store.dispatch(\"settings/update\", {name, value, sync: false});\n});\n\nsocket.on(\"setting:all\", async function (settings) {\n\tconst serverHasSettings = Object.keys(settings).length > 0;\n\n\tstore.commit(\"serverHasSettings\", serverHasSettings);\n\n\tif (serverHasSettings) {\n\t\tfor (const name in settings) {\n\t\t\tawait store.dispatch(\"settings/update\", {name, value: settings[name], sync: false});\n\t\t}\n\t} else {\n\t\tawait store.dispatch(\"settings/syncAll\");\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"history:clear\", function (data) {\n\tconst netChan = store.getters.findChannel(data.target);\n\n\tif (netChan?.channel) {\n\t\tnetChan.channel.messages = [];\n\t\tnetChan.channel.unread = 0;\n\t\tnetChan.channel.highlight = 0;\n\t\tnetChan.channel.firstUnread = 0;\n\t\tnetChan.channel.moreHistoryAvailable = false;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {ClientMention} from \"../types\";\n\nsocket.on(\"mentions:list\", function (data) {\n\tstore.commit(\"mentions\", data as ClientMention[]);\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"search:results\", (response) => {\n\tconst pendingQuery = store.state.messageSearchPendingQuery;\n\n\tif (\n\t\t!pendingQuery ||\n\t\tpendingQuery.channelName !== response.channelName ||\n\t\tpendingQuery.networkUuid !== response.networkUuid ||\n\t\tpendingQuery.offset !== response.offset ||\n\t\tpendingQuery.searchTerm !== response.searchTerm\n\t) {\n\t\t// This is a response from a search that we are not interested in.\n\t\t// The user may have entered a different search while one was still in flight.\n\t\t// We can simply drop it on the floor.\n\t\treturn;\n\t}\n\n\tstore.commit(\"messageSearchPendingQuery\", null);\n\n\tif (store.state.messageSearchResults) {\n\t\tstore.commit(\"addMessageSearchResults\", response);\n\t\treturn;\n\t}\n\n\tstore.commit(\"messageSearchResults\", {results: response.results});\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"mute:changed\", (response) => {\n\tconst {target, status} = response;\n\n\tconst netChan = store.getters.findChannel(target);\n\n\tif (netChan?.channel.type === \"lobby\") {\n\t\tfor (const chan of netChan.network.channels) {\n\t\t\tif (chan.type !== \"special\") {\n\t\t\t\tchan.muted = status;\n\t\t\t}\n\t\t}\n\t} else if (netChan) {\n\t\tnetChan.channel.muted = status;\n\t}\n});\n","import Mousetrap from \"mousetrap\";\n\nimport {store} from \"./store\";\nimport {switchToChannel, router, navigate} from \"./router\";\nimport isChannelCollapsed from \"./helpers/isChannelCollapsed\";\nimport isIgnoredKeybind from \"./helpers/isIgnoredKeybind\";\nimport listenForTwoFingerSwipes from \"./helpers/listenForTwoFingerSwipes\";\nimport {ClientChan} from \"./types\";\n\n// Switch to the next/previous window in the channel list.\nMousetrap.bind([\"alt+up\", \"alt+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tnavigateWindow(keys.split(\"+\").pop() === \"up\" ? -1 : 1);\n\n\treturn false;\n});\n\nlistenForTwoFingerSwipes(function (cardinalDirection: string) {\n\tif (cardinalDirection === \"e\" || cardinalDirection === \"w\") {\n\t\tnavigateWindow(cardinalDirection === \"e\" ? -1 : 1);\n\t}\n});\n\nfunction navigateWindow(direction: number) {\n\tif (store.state.networks.length === 0) {\n\t\treturn;\n\t}\n\n\tconst flatChannels: ClientChan[] = [];\n\tlet index = -1;\n\n\tfor (const network of store.state.networks) {\n\t\tfor (const channel of network.channels) {\n\t\t\tif (isChannelCollapsed(network, channel)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (index === -1 && store.state.activeChannel?.channel === channel) {\n\t\t\t\tindex = flatChannels.length;\n\t\t\t}\n\n\t\t\tflatChannels.push(channel);\n\t\t}\n\t}\n\n\t// Circular array, and a modulo bug workaround because in JS it stays negative\n\tconst length = flatChannels.length;\n\tindex = (((index + direction) % length) + length) % length;\n\n\tjumpToChannel(flatChannels[index]);\n}\n\n// Switch to the next/previous lobby in the channel list\nMousetrap.bind([\"alt+shift+up\", \"alt+shift+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tconst length = store.state.networks.length;\n\n\tif (length === 0) {\n\t\treturn false;\n\t}\n\n\tconst direction = keys.split(\"+\").pop() === \"up\" ? -1 : 1;\n\tlet index = 0;\n\n\t// If we're in another window, jump to first lobby\n\tif (store.state.activeChannel) {\n\t\tindex = store.state.networks.findIndex((n) => n === store.state.activeChannel?.network);\n\n\t\t// If we're in a channel, and it's not the lobby, jump to lobby of this network when going up\n\t\tif (direction !== -1 || store.state.activeChannel?.channel.type === \"lobby\") {\n\t\t\tindex = (((index + direction) % length) + length) % length;\n\t\t}\n\t}\n\n\tjumpToChannel(store.state.networks[index].channels[0]);\n\n\treturn false;\n});\n\n// Jump to the first window with a highlight in it, or the first with unread\n// activity if there are none with highlights.\nMousetrap.bind([\"alt+a\"], function (e) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tlet targetChannel;\n\n\touter_loop: for (const network of store.state.networks) {\n\t\tfor (const chan of network.channels) {\n\t\t\tif (chan.highlight) {\n\t\t\t\ttargetChannel = chan;\n\t\t\t\tbreak outer_loop;\n\t\t\t}\n\n\t\t\tif (chan.unread && !targetChannel) {\n\t\t\t\ttargetChannel = chan;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (targetChannel) {\n\t\tjumpToChannel(targetChannel);\n\t}\n\n\treturn false;\n});\n\n// Show the help menu.\nMousetrap.bind([\"alt+/\"], function (e) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\t/* eslint-disable no-console */\n\tnavigate(\"Help\").catch((err) => console.log(err));\n\treturn false;\n});\n\nfunction jumpToChannel(targetChannel: ClientChan) {\n\tswitchToChannel(targetChannel);\n\n\tconst element = document.querySelector(\n\t\t`#sidebar .channel-list-item[aria-controls=\"#chan-${targetChannel.id}\"]`\n\t);\n\n\tif (element) {\n\t\tscrollIntoViewNicely(element);\n\t}\n}\n\n// Ignored keys which should not automatically focus the input bar\nconst ignoredKeys = {\n\t8: true, // Backspace\n\t9: true, // Tab\n\t12: true, // Clear\n\t16: true, // Shift\n\t17: true, // Control\n\t18: true, // Alt\n\t19: true, // Pause\n\t20: true, // CapsLock\n\t27: true, // Escape\n\t35: true, // End\n\t36: true, // Home\n\t37: true, // ArrowLeft\n\t38: true, // ArrowUp\n\t39: true, // ArrowRight\n\t40: true, // ArrowDown\n\t45: true, // Insert\n\t46: true, // Delete\n\t112: true, // F1\n\t113: true, // F2\n\t114: true, // F3\n\t115: true, // F4\n\t116: true, // F5\n\t117: true, // F6\n\t118: true, // F7\n\t119: true, // F8\n\t120: true, // F9\n\t121: true, // F10\n\t122: true, // F11\n\t123: true, // F12\n\t144: true, // NumLock\n\t145: true, // ScrollLock\n\t224: true, // Meta\n};\n\ndocument.addEventListener(\"keydown\", (e) => {\n\t// Allow navigating back to the previous page when on the help screen.\n\tif (e.key === \"Escape\" && router.currentRoute.value.name === \"Help\") {\n\t\trouter.go(-1);\n\t\treturn;\n\t}\n\n\t// Ignore any key that uses alt modifier\n\t// Ignore keys defined above\n\tif (e.altKey || ignoredKeys[e.which]) {\n\t\treturn;\n\t}\n\n\t// Ignore all ctrl keys except for ctrl+v to allow pasting\n\tif ((e.ctrlKey || e.metaKey) && e.which !== 86) {\n\t\treturn;\n\t}\n\n\t// Redirect pagedown/pageup keys to messages container so it scrolls\n\tif (e.which === 33 || e.which === 34) {\n\t\tconst chat = document.querySelector(\".window .chat-content .chat\");\n\n\t\tif (chat) {\n\t\t\t(chat as HTMLDivElement).focus();\n\t\t}\n\n\t\treturn;\n\t}\n\n\tconst tagName = (e.target as HTMLElement).tagName;\n\n\t// Ignore if we're already typing into <input> or <textarea>\n\tif (tagName === \"INPUT\" || tagName === \"TEXTAREA\") {\n\t\treturn;\n\t}\n\n\tconst input = document.getElementById(\"input\");\n\n\tif (!input) {\n\t\treturn;\n\t}\n\n\tinput.focus();\n\n\t// On enter, focus the input but do not propagate the event\n\t// This way, a new line is not inserted\n\tif (e.which === 13) {\n\t\te.preventDefault();\n\t}\n});\n\nfunction scrollIntoViewNicely(el) {\n\t// Ideally this would use behavior: \"smooth\", but that does not consistently work in e.g. Chrome\n\t// https://github.com/iamdustan/smoothscroll/issues/28#issuecomment-364061459\n\tel.scrollIntoView({block: \"center\", inline: \"nearest\"});\n}\n","import distance from \"./distance\";\n\n// onTwoFingerSwipe will be called with a cardinal direction (\"n\", \"e\", \"s\" or\n// \"w\") as its only argument.\nfunction listenForTwoFingerSwipes(onTwoFingerSwipe) {\n\tlet history: {\n\t\tcenter: number[];\n\t\ttimestamp: number;\n\t}[] = [];\n\n\tdocument.body.addEventListener(\n\t\t\"touchmove\",\n\t\tfunction (event) {\n\t\t\tif (event.touches.length !== 2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst a = event.touches.item(0);\n\t\t\tconst b = event.touches.item(1);\n\n\t\t\tif (!a || !b) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timestamp = window.performance.now();\n\t\t\tconst center = [(a.screenX + b.screenX) / 2, (a.screenY + b.screenY) / 2];\n\n\t\t\tif (history.length > 0) {\n\t\t\t\tconst last = history[history.length - 1];\n\t\t\t\tconst centersAreEqual =\n\t\t\t\t\tlast.center[0] === center[0] && last.center[1] === center[1];\n\n\t\t\t\tif (last.timestamp === timestamp || centersAreEqual) {\n\t\t\t\t\t// Touches with the same timestamps or center don't help us\n\t\t\t\t\t// see the speed of movement. Ignore them.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thistory.push({timestamp, center});\n\t\t},\n\t\t{passive: true}\n\t);\n\n\tdocument.body.addEventListener(\n\t\t\"touchend\",\n\t\tfunction (event) {\n\t\t\tif (event.touches.length >= 2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst direction = getSwipe(history);\n\n\t\t\t\tif (direction) {\n\t\t\t\t\tonTwoFingerSwipe(direction);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\thistory = [];\n\t\t\t}\n\t\t},\n\t\t{passive: true}\n\t);\n\n\tdocument.body.addEventListener(\n\t\t\"touchcancel\",\n\t\tfunction () {\n\t\t\thistory = [];\n\t\t},\n\t\t{passive: true}\n\t);\n}\n\n// Returns the cardinal direction of the swipe or null if there is no swipe.\nfunction getSwipe(hist) {\n\t// Speed is in pixels/millisecond. Must be maintained throughout swipe.\n\tconst MIN_SWIPE_SPEED = 0.2;\n\n\tif (hist.length < 2) {\n\t\treturn null;\n\t}\n\n\tfor (let i = 1; i < hist.length; ++i) {\n\t\tconst previous = hist[i - 1];\n\t\tconst current = hist[i];\n\n\t\tconst speed =\n\t\t\tdistance(previous.center, current.center) /\n\t\t\tMath.abs(previous.timestamp - current.timestamp);\n\n\t\tif (speed < MIN_SWIPE_SPEED) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn getCardinalDirection(hist[0].center, hist[hist.length - 1].center);\n}\n\nfunction getCardinalDirection([x1, y1], [x2, y2]) {\n\t// If θ is the angle of the vector then this is tan(θ)\n\tconst tangent = (y2 - y1) / (x2 - x1);\n\n\t// All values of |tan(-45° to 45°)| are less than 1, same for 145° to 225°\n\tif (Math.abs(tangent) < 1) {\n\t\treturn x1 < x2 ? \"e\" : \"w\";\n\t}\n\n\treturn y1 < y2 ? \"s\" : \"n\";\n}\n\nexport default listenForTwoFingerSwipes;\n","import constants from \"./constants\";\n\nimport \"../css/style.css\";\nimport {createApp} from \"vue\";\nimport {store, CallableGetters, key} from \"./store\";\nimport App from \"../components/App.vue\";\nimport storage from \"./localStorage\";\nimport {router} from \"./router\";\nimport socket from \"./socket\";\nimport eventbus from \"./eventbus\";\n\nimport \"./socket-events\";\nimport \"./webpush\";\nimport \"./keybinds\";\nimport {LoungeWindow} from \"./types\";\n\nconst favicon = document.getElementById(\"favicon\");\nconst faviconNormal = favicon?.getAttribute(\"href\") || \"\";\nconst faviconAlerted = favicon?.dataset.other || \"\";\n\nexport const VueApp = createApp(App);\n\nVueApp.use(router);\nVueApp.use(store, key);\n\nVueApp.mount(\"#app\");\nsocket.open();\n\nstore.watch(\n\t(state) => state.sidebarOpen,\n\t(sidebarOpen) => {\n\t\tif (window.innerWidth > constants.mobileViewportPixels) {\n\t\t\tstorage.set(\"thelounge.state.sidebar\", sidebarOpen.toString());\n\t\t\teventbus.emit(\"resize\");\n\t\t}\n\t}\n);\n\nstore.watch(\n\t(state) => state.userlistOpen,\n\t(userlistOpen) => {\n\t\tstorage.set(\"thelounge.state.userlist\", userlistOpen.toString());\n\t\teventbus.emit(\"resize\");\n\t}\n);\n\nstore.watch(\n\t(_, getters: CallableGetters) => getters.title,\n\t(title) => {\n\t\tdocument.title = title;\n\t}\n);\n\n// Toggles the favicon to red when there are unread notifications\nstore.watch(\n\t(_, getters: CallableGetters) => getters.highlightCount,\n\t(highlightCount) => {\n\t\tfavicon?.setAttribute(\"href\", highlightCount > 0 ? faviconAlerted : faviconNormal);\n\n\t\tconst nav: LoungeWindow[\"navigator\"] = window.navigator;\n\n\t\tif (nav.setAppBadge) {\n\t\t\tif (highlightCount > 0) {\n\t\t\t\tnav.setAppBadge(highlightCount);\n\t\t\t} else {\n\t\t\t\tif (nav.clearAppBadge) {\n\t\t\t\t\tnav.clearAppBadge();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n);\n\nVueApp.config.errorHandler = function (e) {\n\tif (e instanceof Error) {\n\t\tstore.commit(\"currentUserVisibleError\", `Vue error: ${e.message}`);\n\t} else {\n\t\tstore.commit(\"currentUserVisibleError\", `Vue error: ${String(e)}`);\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.error(e);\n};\n","import socket from \"./socket\";\nimport {store} from \"./store\";\n\nexport default {togglePushSubscription};\n\nsocket.once(\"push:issubscribed\", function (hasSubscriptionOnServer) {\n\tif (!isAllowedServiceWorkersHost()) {\n\t\tstore.commit(\"pushNotificationState\", \"nohttps\");\n\t\treturn;\n\t}\n\n\tif (!(\"serviceWorker\" in navigator)) {\n\t\treturn;\n\t}\n\n\tnavigator.serviceWorker\n\t\t.register(\"service-worker.js\")\n\t\t.then((registration) => {\n\t\t\tstore.commit(\"hasServiceWorker\");\n\n\t\t\tif (!registration.pushManager) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn registration.pushManager.getSubscription().then((subscription) => {\n\t\t\t\t// If client has push registration but the server knows nothing about it,\n\t\t\t\t// this subscription is broken and client has to register again\n\t\t\t\tif (subscription && hasSubscriptionOnServer === false) {\n\t\t\t\t\tvoid subscription.unsubscribe().then((successful) => {\n\t\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\t\tsuccessful ? \"supported\" : \"unsupported\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\tsubscription ? \"subscribed\" : \"supported\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.catch((err) => {\n\t\t\tstore.commit(\"pushNotificationState\", \"unsupported\");\n\t\t\tconsole.error(err); // eslint-disable-line no-console\n\t\t});\n});\n\nfunction togglePushSubscription() {\n\tstore.commit(\"pushNotificationState\", \"loading\");\n\n\tnavigator.serviceWorker.ready\n\t\t.then((registration) =>\n\t\t\tregistration.pushManager.getSubscription().then((existingSubscription) => {\n\t\t\t\tif (existingSubscription) {\n\t\t\t\t\tsocket.emit(\"push:unregister\");\n\n\t\t\t\t\treturn existingSubscription.unsubscribe().then((successful) => {\n\t\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\t\tsuccessful ? \"supported\" : \"unsupported\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn registration.pushManager\n\t\t\t\t\t.subscribe({\n\t\t\t\t\t\tapplicationServerKey: store.state.serverConfiguration?.applicationServerKey,\n\t\t\t\t\t\tuserVisibleOnly: true,\n\t\t\t\t\t})\n\t\t\t\t\t.then((subscription) => {\n\t\t\t\t\t\tsocket.emit(\"push:register\", subscription.toJSON());\n\t\t\t\t\t\tstore.commit(\"pushNotificationState\", \"subscribed\");\n\t\t\t\t\t\tstore.commit(\"refreshDesktopNotificationState\");\n\t\t\t\t\t});\n\t\t\t})\n\t\t)\n\t\t.catch((err) => {\n\t\t\tstore.commit(\"pushNotificationState\", \"unsupported\");\n\t\t\tstore.commit(\"refreshDesktopNotificationState\");\n\t\t\tconsole.error(err); // eslint-disable-line no-console\n\t\t});\n}\n\nfunction isAllowedServiceWorkersHost() {\n\treturn (\n\t\tlocation.protocol === \"https:\" ||\n\t\tlocation.hostname === \"localhost\" ||\n\t\tlocation.hostname === \"127.0.0.1\"\n\t);\n}\n","const matchFormatting =\n\t/\\x02|\\x1D|\\x1F|\\x16|\\x0F|\\x11|\\x1E|\\x03(?:[0-9]{1,2}(?:,[0-9]{1,2})?)?|\\x04(?:[0-9a-f]{6}(?:,[0-9a-f]{6})?)?/gi;\n\nexport function cleanIrcMessage(message: string) {\n\treturn message.replace(matchFormatting, \"\").trim();\n}\n\nexport const condensedTypes = new Set([\n\t\"away\",\n\t\"back\",\n\t\"chghost\",\n\t\"join\",\n\t\"kick\",\n\t\"mode\",\n\t\"nick\",\n\t\"part\",\n\t\"quit\",\n]);\n","<template>\n\t<div id=\"viewport\" :class=\"viewportClasses\" role=\"tablist\">\n\t\t<Sidebar v-if=\"store.state.appLoaded\" :overlay=\"overlay\" />\n\t\t<div\n\t\t\tid=\"sidebar-overlay\"\n\t\t\tref=\"overlay\"\n\t\t\taria-hidden=\"true\"\n\t\t\t@click=\"store.commit('sidebarOpen', false)\"\n\t\t/>\n\t\t<router-view ref=\"loungeWindow\"></router-view>\n\t\t<Mentions />\n\t\t<ImageViewer ref=\"imageViewer\" />\n\t\t<ContextMenu ref=\"contextMenu\" />\n\t\t<ConfirmDialog ref=\"confirmDialog\" />\n\t\t<div id=\"upload-overlay\"></div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport constants from \"../js/constants\";\nimport eventbus from \"../js/eventbus\";\nimport Mousetrap, {ExtendedKeyboardEvent} from \"mousetrap\";\nimport throttle from \"lodash/throttle\";\nimport storage from \"../js/localStorage\";\nimport isIgnoredKeybind from \"../js/helpers/isIgnoredKeybind\";\n\nimport Sidebar from \"./Sidebar.vue\";\nimport ImageViewer from \"./ImageViewer.vue\";\nimport ContextMenu from \"./ContextMenu.vue\";\nimport ConfirmDialog from \"./ConfirmDialog.vue\";\nimport Mentions from \"./Mentions.vue\";\nimport {\n\tcomputed,\n\tprovide,\n\tdefineComponent,\n\tonBeforeUnmount,\n\tonMounted,\n\tref,\n\tRef,\n\tInjectionKey,\n} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport type {DebouncedFunc} from \"lodash\";\n\nexport const imageViewerKey = Symbol() as InjectionKey<Ref<typeof ImageViewer | null>>;\nconst contextMenuKey = Symbol() as InjectionKey<Ref<typeof ContextMenu | null>>;\nconst confirmDialogKey = Symbol() as InjectionKey<Ref<typeof ConfirmDialog | null>>;\n\nexport default defineComponent({\n\tname: \"App\",\n\tcomponents: {\n\t\tSidebar,\n\t\tImageViewer,\n\t\tContextMenu,\n\t\tConfirmDialog,\n\t\tMentions,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst overlay = ref(null);\n\t\tconst loungeWindow = ref(null);\n\t\tconst imageViewer = ref(null);\n\t\tconst contextMenu = ref(null);\n\t\tconst confirmDialog = ref(null);\n\n\t\tprovide(imageViewerKey, imageViewer);\n\t\tprovide(contextMenuKey, contextMenu);\n\t\tprovide(confirmDialogKey, confirmDialog);\n\n\t\tconst viewportClasses = computed(() => {\n\t\t\treturn {\n\t\t\t\tnotified: store.getters.highlightCount > 0,\n\t\t\t\t\"menu-open\": store.state.appLoaded && store.state.sidebarOpen,\n\t\t\t\t\"menu-dragging\": store.state.sidebarDragging,\n\t\t\t\t\"userlist-open\": store.state.userlistOpen,\n\t\t\t};\n\t\t});\n\n\t\tconst debouncedResize = ref<DebouncedFunc<() => void>>();\n\t\tconst dayChangeTimeout = ref<any>();\n\n\t\tconst escapeKey = () => {\n\t\t\teventbus.emit(\"escapekey\");\n\t\t};\n\n\t\tconst toggleSidebar = (e: ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tstore.commit(\"toggleSidebar\");\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst toggleUserList = (e: ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tstore.commit(\"toggleUserlist\");\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst toggleMentions = () => {\n\t\t\tif (store.state.networks.length !== 0) {\n\t\t\t\teventbus.emit(\"mentions:toggle\");\n\t\t\t}\n\t\t};\n\n\t\tconst msUntilNextDay = () => {\n\t\t\t// Compute how many milliseconds are remaining until the next day starts\n\t\t\tconst today = new Date();\n\t\t\tconst tommorow = new Date(\n\t\t\t\ttoday.getFullYear(),\n\t\t\t\ttoday.getMonth(),\n\t\t\t\ttoday.getDate() + 1\n\t\t\t).getTime();\n\n\t\t\treturn tommorow - today.getTime();\n\t\t};\n\n\t\tconst prepareOpenStates = () => {\n\t\t\tconst viewportWidth = window.innerWidth;\n\t\t\tlet isUserlistOpen = storage.get(\"thelounge.state.userlist\");\n\n\t\t\tif (viewportWidth > constants.mobileViewportPixels) {\n\t\t\t\tstore.commit(\"sidebarOpen\", storage.get(\"thelounge.state.sidebar\") !== \"false\");\n\t\t\t}\n\n\t\t\t// If The Lounge is opened on a small screen (less than 1024px), and we don't have stored\n\t\t\t// user list state, close it by default\n\t\t\tif (viewportWidth >= 1024 && isUserlistOpen !== \"true\" && isUserlistOpen !== \"false\") {\n\t\t\t\tisUserlistOpen = \"true\";\n\t\t\t}\n\n\t\t\tstore.commit(\"userlistOpen\", isUserlistOpen === \"true\");\n\t\t};\n\n\t\tprepareOpenStates();\n\n\t\tonMounted(() => {\n\t\t\tMousetrap.bind(\"esc\", escapeKey);\n\t\t\tMousetrap.bind(\"alt+u\", toggleUserList);\n\t\t\tMousetrap.bind(\"alt+s\", toggleSidebar);\n\t\t\tMousetrap.bind(\"alt+m\", toggleMentions);\n\n\t\t\tdebouncedResize.value = throttle(() => {\n\t\t\t\teventbus.emit(\"resize\");\n\t\t\t}, 100);\n\n\t\t\twindow.addEventListener(\"resize\", debouncedResize.value, {passive: true});\n\n\t\t\t// Emit a daychange event every time the day changes so date markers know when to update themselves\n\t\t\tconst emitDayChange = () => {\n\t\t\t\teventbus.emit(\"daychange\");\n\t\t\t\t// This should always be 24h later but re-computing exact value just in case\n\t\t\t\tdayChangeTimeout.value = setTimeout(emitDayChange, msUntilNextDay());\n\t\t\t};\n\n\t\t\tdayChangeTimeout.value = setTimeout(emitDayChange, msUntilNextDay());\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tMousetrap.unbind(\"esc\");\n\t\t\tMousetrap.unbind(\"alt+u\");\n\t\t\tMousetrap.unbind(\"alt+s\");\n\t\t\tMousetrap.unbind(\"alt+m\");\n\n\t\t\tif (debouncedResize.value) {\n\t\t\t\twindow.removeEventListener(\"resize\", debouncedResize.value);\n\t\t\t}\n\n\t\t\tif (dayChangeTimeout.value) {\n\t\t\t\tclearTimeout(dayChangeTimeout.value);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tviewportClasses,\n\t\t\tescapeKey,\n\t\t\ttoggleSidebar,\n\t\t\ttoggleUserList,\n\t\t\ttoggleMentions,\n\t\t\tstore,\n\t\t\toverlay,\n\t\t\tloungeWindow,\n\t\t\timageViewer,\n\t\t\tcontextMenu,\n\t\t\tconfirmDialog,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<aside id=\"sidebar\" ref=\"sidebar\">\n\t\t<div class=\"scrollable-area\">\n\t\t\t<div class=\"logo-container\">\n\t\t\t\t<img\n\t\t\t\t\t:src=\"`img/logo-${isPublic() ? 'horizontal-' : ''}transparent-bg.svg`\"\n\t\t\t\t\tclass=\"logo\"\n\t\t\t\t\talt=\"The Lounge\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t/>\n\t\t\t\t<img\n\t\t\t\t\t:src=\"`img/logo-${isPublic() ? 'horizontal-' : ''}transparent-bg-inverted.svg`\"\n\t\t\t\t\tclass=\"logo-inverted\"\n\t\t\t\t\talt=\"The Lounge\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t/>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"isDevelopment\"\n\t\t\t\t\ttitle=\"The Lounge has been built in development mode\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: '#ff9e18',\n\t\t\t\t\t\tcolor: '#000',\n\t\t\t\t\t\tpadding: '2px',\n\t\t\t\t\t\tborderRadius: '4px',\n\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t}\"\n\t\t\t\t\t>DEVELOPER</span\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<NetworkList />\n\t\t</div>\n\t\t<footer id=\"footer\">\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-touch\"\n\t\t\t\taria-label=\"Connect to network\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/connect\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"connect\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:class=\"['icon', 'connect', {active: isActive}]\"\n\t\t\t\t\t\t:aria-selected=\"isActive\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t/> </router-link\n\t\t\t></span>\n\t\t\t<span class=\"tooltipped tooltipped-n tooltipped-no-touch\" aria-label=\"Settings\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/settings\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"settings\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:class=\"['icon', 'settings', {active: isActive}]\"\n\t\t\t\t\t\t:aria-selected=\"isActive\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t></button> </router-link\n\t\t\t></span>\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-touch\"\n\t\t\t\t:aria-label=\"\n\t\t\t\t\tstore.state.serverConfiguration?.isUpdateAvailable\n\t\t\t\t\t\t? 'Help\\n(update available)'\n\t\t\t\t\t\t: 'Help'\n\t\t\t\t\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/help\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"help\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:aria-selected=\"route.name === 'Help'\"\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'icon',\n\t\t\t\t\t\t\t'help',\n\t\t\t\t\t\t\t{notified: store.state.serverConfiguration?.isUpdateAvailable},\n\t\t\t\t\t\t\t{active: isActive},\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t></button> </router-link\n\t\t\t></span>\n\t\t</footer>\n\t</aside>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, nextTick, onMounted, onUnmounted, PropType, ref} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"../js/store\";\nimport NetworkList from \"./NetworkList.vue\";\n\nexport default defineComponent({\n\tname: \"Sidebar\",\n\tcomponents: {\n\t\tNetworkList,\n\t},\n\tprops: {\n\t\toverlay: {type: Object as PropType<HTMLElement | null>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst isDevelopment = process.env.NODE_ENV !== \"production\";\n\n\t\tconst store = useStore();\n\t\tconst route = useRoute();\n\n\t\tconst touchStartPos = ref<Touch | null>();\n\t\tconst touchCurPos = ref<Touch | null>();\n\t\tconst touchStartTime = ref<number>(0);\n\t\tconst menuWidth = ref<number>(0);\n\t\tconst menuIsMoving = ref<boolean>(false);\n\t\tconst menuIsAbsolute = ref<boolean>(false);\n\n\t\tconst sidebar = ref<HTMLElement | null>(null);\n\n\t\tconst toggle = (state: boolean) => {\n\t\t\tstore.commit(\"sidebarOpen\", state);\n\t\t};\n\n\t\tconst onTouchMove = (e: TouchEvent) => {\n\t\t\tconst touch = (touchCurPos.value = e.touches.item(0));\n\n\t\t\tif (\n\t\t\t\t!touch ||\n\t\t\t\t!touchStartPos.value ||\n\t\t\t\t!touchStartPos.value.screenX ||\n\t\t\t\t!touchStartPos.value.screenY\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet distX = touch.screenX - touchStartPos.value.screenX;\n\t\t\tconst distY = touch.screenY - touchStartPos.value.screenY;\n\n\t\t\tif (!menuIsMoving.value) {\n\t\t\t\t// tan(45°) is 1. Gestures in 0°-45° (< 1) are considered horizontal, so\n\t\t\t\t// menu must be open; gestures in 45°-90° (>1) are considered vertical, so\n\t\t\t\t// chat windows must be scrolled.\n\t\t\t\tif (Math.abs(distY / distX) >= 1) {\n\t\t\t\t\t// eslint-disable-next-line no-use-before-define\n\t\t\t\t\tonTouchEnd();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst devicePixelRatio = window.devicePixelRatio || 2;\n\n\t\t\t\tif (Math.abs(distX) > devicePixelRatio) {\n\t\t\t\t\tstore.commit(\"sidebarDragging\", true);\n\t\t\t\t\tmenuIsMoving.value = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do not animate the menu on desktop view\n\t\t\tif (!menuIsAbsolute.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (store.state.sidebarOpen) {\n\t\t\t\tdistX += menuWidth.value;\n\t\t\t}\n\n\t\t\tif (distX > menuWidth.value) {\n\t\t\t\tdistX = menuWidth.value;\n\t\t\t} else if (distX < 0) {\n\t\t\t\tdistX = 0;\n\t\t\t}\n\n\t\t\tif (sidebar.value) {\n\t\t\t\tsidebar.value.style.transform = \"translate3d(\" + distX.toString() + \"px, 0, 0)\";\n\t\t\t}\n\n\t\t\tif (props.overlay) {\n\t\t\t\tprops.overlay.style.opacity = `${distX / menuWidth.value}`;\n\t\t\t}\n\t\t};\n\n\t\tconst onTouchEnd = () => {\n\t\t\tif (!touchStartPos.value?.screenX || !touchCurPos.value?.screenX) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst diff = touchCurPos.value.screenX - touchStartPos.value.screenX;\n\t\t\tconst absDiff = Math.abs(diff);\n\n\t\t\tif (\n\t\t\t\tabsDiff > menuWidth.value / 2 ||\n\t\t\t\t(Date.now() - touchStartTime.value < 180 && absDiff > 50)\n\t\t\t) {\n\t\t\t\ttoggle(diff > 0);\n\t\t\t}\n\n\t\t\tdocument.body.removeEventListener(\"touchmove\", onTouchMove);\n\t\t\tdocument.body.removeEventListener(\"touchend\", onTouchEnd);\n\n\t\t\tstore.commit(\"sidebarDragging\", false);\n\n\t\t\ttouchStartPos.value = null;\n\t\t\ttouchCurPos.value = null;\n\t\t\ttouchStartTime.value = 0;\n\t\t\tmenuIsMoving.value = false;\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (sidebar.value) {\n\t\t\t\t\tsidebar.value.style.transform = \"\";\n\t\t\t\t}\n\n\t\t\t\tif (props.overlay) {\n\t\t\t\t\tprops.overlay.style.opacity = \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tconst onTouchStart = (e: TouchEvent) => {\n\t\t\tif (!sidebar.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttouchStartPos.value = touchCurPos.value = e.touches.item(0);\n\n\t\t\tif (e.touches.length !== 1) {\n\t\t\t\tonTouchEnd();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst styles = window.getComputedStyle(sidebar.value);\n\n\t\t\tmenuWidth.value = parseFloat(styles.width);\n\t\t\tmenuIsAbsolute.value = styles.position === \"absolute\";\n\n\t\t\tif (\n\t\t\t\t!store.state.sidebarOpen ||\n\t\t\t\t(touchStartPos.value?.screenX && touchStartPos.value.screenX > menuWidth.value)\n\t\t\t) {\n\t\t\t\ttouchStartTime.value = Date.now();\n\n\t\t\t\tdocument.body.addEventListener(\"touchmove\", onTouchMove, {passive: true});\n\t\t\t\tdocument.body.addEventListener(\"touchend\", onTouchEnd, {passive: true});\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tdocument.body.addEventListener(\"touchstart\", onTouchStart, {passive: true});\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tdocument.body.removeEventListener(\"touchstart\", onTouchStart);\n\t\t});\n\n\t\tconst isPublic = () => document.body.classList.contains(\"public\");\n\n\t\treturn {\n\t\t\tisDevelopment,\n\t\t\tstore,\n\t\t\troute,\n\t\t\tsidebar,\n\t\t\ttoggle,\n\t\t\tonTouchStart,\n\t\t\tonTouchMove,\n\t\t\tonTouchEnd,\n\t\t\tisPublic,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\tv-if=\"store.state.networks.length === 0\"\n\t\tclass=\"empty\"\n\t\trole=\"navigation\"\n\t\taria-label=\"Network and Channel list\"\n\t>\n\t\tYou are not connected to any networks yet.\n\t</div>\n\t<div v-else ref=\"networklist\" role=\"navigation\" aria-label=\"Network and Channel list\">\n\t\t<div class=\"jump-to-input\">\n\t\t\t<input\n\t\t\t\tref=\"searchInput\"\n\t\t\t\t:value=\"searchText\"\n\t\t\t\tplaceholder=\"Jump to...\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tclass=\"search input mousetrap\"\n\t\t\t\taria-label=\"Search among the channel list\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\t@input=\"setSearchText\"\n\t\t\t\t@keydown.up=\"navigateResults($event, -1)\"\n\t\t\t\t@keydown.down=\"navigateResults($event, 1)\"\n\t\t\t\t@keydown.page-up=\"navigateResults($event, -10)\"\n\t\t\t\t@keydown.page-down=\"navigateResults($event, 10)\"\n\t\t\t\t@keydown.enter=\"selectResult\"\n\t\t\t\t@keydown.escape=\"deactivateSearch\"\n\t\t\t\t@focus=\"activateSearch\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-if=\"searchText\" class=\"jump-to-results\">\n\t\t\t<div v-if=\"results.length\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"item in results\"\n\t\t\t\t\t:key=\"item.channel.id\"\n\t\t\t\t\t@mouseenter=\"setActiveSearchItem(item.channel)\"\n\t\t\t\t\t@click.prevent=\"selectResult\"\n\t\t\t\t>\n\t\t\t\t\t<Channel\n\t\t\t\t\t\tv-if=\"item.channel.type !== 'lobby'\"\n\t\t\t\t\t\t:channel=\"item.channel\"\n\t\t\t\t\t\t:network=\"item.network\"\n\t\t\t\t\t\t:active=\"item.channel === activeSearchItem\"\n\t\t\t\t\t\t:is-filtering=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t\t<NetworkLobby\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:channel=\"item.channel\"\n\t\t\t\t\t\t:network=\"item.network\"\n\t\t\t\t\t\t:active=\"item.channel === activeSearchItem\"\n\t\t\t\t\t\t:is-filtering=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"no-results\">No results found.</div>\n\t\t</div>\n\t\t<Draggable\n\t\t\tv-else\n\t\t\t:list=\"store.state.networks\"\n\t\t\t:delay=\"LONG_TOUCH_DURATION\"\n\t\t\t:delay-on-touch-only=\"true\"\n\t\t\t:touch-start-threshold=\"10\"\n\t\t\thandle=\".channel-list-item[data-type='lobby']\"\n\t\t\tdraggable=\".network\"\n\t\t\tghost-class=\"ui-sortable-ghost\"\n\t\t\tdrag-class=\"ui-sortable-dragging\"\n\t\t\tgroup=\"networks\"\n\t\t\tclass=\"networks\"\n\t\t\titem-key=\"uuid\"\n\t\t\t@change=\"onNetworkSort\"\n\t\t\t@choose=\"onDraggableChoose\"\n\t\t\t@unchoose=\"onDraggableUnchoose\"\n\t\t>\n\t\t\t<template v-slot:item=\"{element: network}\">\n\t\t\t\t<div\n\t\t\t\t\t:id=\"'network-' + network.uuid\"\n\t\t\t\t\t:key=\"network.uuid\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\tcollapsed: network.isCollapsed,\n\t\t\t\t\t\t'not-connected': !network.status.connected,\n\t\t\t\t\t\t'not-secure': !network.status.secure,\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"network\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t@touchstart=\"onDraggableTouchStart\"\n\t\t\t\t\t@touchmove=\"onDraggableTouchMove\"\n\t\t\t\t\t@touchend=\"onDraggableTouchEnd\"\n\t\t\t\t\t@touchcancel=\"onDraggableTouchEnd\"\n\t\t\t\t>\n\t\t\t\t\t<NetworkLobby\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:is-join-channel-shown=\"network.isJoinChannelShown\"\n\t\t\t\t\t\t:active=\"\n\t\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\t\tnetwork.channels[0] === store.state.activeChannel.channel\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@toggle-join-channel=\"\n\t\t\t\t\t\t\tnetwork.isJoinChannelShown = !network.isJoinChannelShown\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<JoinChannel\n\t\t\t\t\t\tv-if=\"network.isJoinChannelShown\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"network.channels[0]\"\n\t\t\t\t\t\t@toggle-join-channel=\"\n\t\t\t\t\t\t\tnetwork.isJoinChannelShown = !network.isJoinChannelShown\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Draggable\n\t\t\t\t\t\tdraggable=\".channel-list-item\"\n\t\t\t\t\t\tghost-class=\"ui-sortable-ghost\"\n\t\t\t\t\t\tdrag-class=\"ui-sortable-dragging\"\n\t\t\t\t\t\t:group=\"network.uuid\"\n\t\t\t\t\t\t:list=\"network.channels\"\n\t\t\t\t\t\t:delay=\"LONG_TOUCH_DURATION\"\n\t\t\t\t\t\t:delay-on-touch-only=\"true\"\n\t\t\t\t\t\t:touch-start-threshold=\"10\"\n\t\t\t\t\t\tclass=\"channels\"\n\t\t\t\t\t\titem-key=\"name\"\n\t\t\t\t\t\t@change=\"onChannelSort\"\n\t\t\t\t\t\t@choose=\"onDraggableChoose\"\n\t\t\t\t\t\t@unchoose=\"onDraggableUnchoose\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot:item=\"{element: channel, index}\">\n\t\t\t\t\t\t\t<Channel\n\t\t\t\t\t\t\t\tv-if=\"index > 0\"\n\t\t\t\t\t\t\t\t:key=\"channel.id\"\n\t\t\t\t\t\t\t\t:data-item=\"channel.id\"\n\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t:active=\"\n\t\t\t\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\t\t\t\tchannel === store.state.activeChannel.channel\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Draggable>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Draggable>\n\t</div>\n</template>\n\n<style>\n.jump-to-input {\n\tmargin: 8px;\n\tposition: relative;\n}\n\n.jump-to-input .input {\n\tmargin: 0;\n\twidth: 100%;\n\tborder: 0;\n\tcolor: #fff;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tpadding-right: 35px;\n\tappearance: none;\n}\n\n.jump-to-input .input::placeholder {\n\tcolor: rgba(255, 255, 255, 0.35);\n}\n\n.jump-to-input::before {\n\tcontent: \"\\f002\"; /* http://fontawesome.io/icon/search/ */\n\tcolor: rgba(255, 255, 255, 0.35);\n\tposition: absolute;\n\tright: 8px;\n\ttop: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\tline-height: 35px !important;\n}\n\n.jump-to-results {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\toverflow: auto;\n}\n\n.jump-to-results .no-results {\n\tmargin: 14px 8px;\n\ttext-align: center;\n}\n\n.jump-to-results .channel-list-item.active {\n\tcursor: pointer;\n}\n\n.jump-to-results .channel-list-item .add-channel,\n.jump-to-results .channel-list-item .close-tooltip {\n\tdisplay: none;\n}\n\n.jump-to-results .channel-list-item[data-type=\"lobby\"] {\n\tpadding: 8px 14px;\n}\n\n.jump-to-results .channel-list-item[data-type=\"lobby\"]::before {\n\tcontent: \"\\f233\";\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, watch, defineComponent, nextTick, onBeforeUnmount, onMounted, ref} from \"vue\";\n\nimport Mousetrap from \"mousetrap\";\nimport Draggable from \"./Draggable.vue\";\nimport {filter as fuzzyFilter} from \"fuzzy\";\nimport NetworkLobby from \"./NetworkLobby.vue\";\nimport Channel from \"./Channel.vue\";\nimport JoinChannel from \"./JoinChannel.vue\";\n\nimport socket from \"../js/socket\";\nimport collapseNetworkHelper from \"../js/helpers/collapseNetwork\";\nimport isIgnoredKeybind from \"../js/helpers/isIgnoredKeybind\";\nimport distance from \"../js/helpers/distance\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientChan, NetChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\nimport {switchToChannel} from \"../js/router\";\nimport Sortable from \"sortablejs\";\n\nexport default defineComponent({\n\tname: \"NetworkList\",\n\tcomponents: {\n\t\tJoinChannel,\n\t\tNetworkLobby,\n\t\tChannel,\n\t\tDraggable,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst searchText = ref(\"\");\n\t\tconst activeSearchItem = ref<ClientChan | null>();\n\t\t// Number of milliseconds a touch has to last to be considered long\n\t\tconst LONG_TOUCH_DURATION = 500;\n\n\t\tconst startDrag = ref<[number, number] | null>();\n\t\tconst searchInput = ref<HTMLInputElement | null>(null);\n\t\tconst networklist = ref<HTMLDivElement | null>(null);\n\n\t\tconst sidebarWasClosed = ref(false);\n\n\t\tconst moveItemInArray = <T>(array: T[], from: number, to: number) => {\n\t\t\tconst item = array.splice(from, 1)[0];\n\t\t\tarray.splice(to, 0, item);\n\t\t};\n\n\t\tconst items = computed(() => {\n\t\t\tconst newItems: NetChan[] = [];\n\n\t\t\tfor (const network of store.state.networks) {\n\t\t\t\tfor (const channel of network.channels) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\tchannel === store.state.activeChannel.channel\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewItems.push({network, channel});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newItems;\n\t\t});\n\n\t\tconst results = computed(() => {\n\t\t\tconst newResults = fuzzyFilter(searchText.value, items.value, {\n\t\t\t\textract: (item) => item.channel.name,\n\t\t\t}).map((item) => item.original);\n\n\t\t\treturn newResults;\n\t\t});\n\n\t\tconst collapseNetwork = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (store.state.activeChannel) {\n\t\t\t\tcollapseNetworkHelper(store.state.activeChannel.network, true);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst expandNetwork = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (store.state.activeChannel) {\n\t\t\t\tcollapseNetworkHelper(store.state.activeChannel.network, false);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst onNetworkSort = (e: Sortable.SortableEvent) => {\n\t\t\tconst {oldIndex, newIndex} = e;\n\n\t\t\tif (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveItemInArray(store.state.networks, oldIndex, newIndex);\n\n\t\t\tsocket.emit(\"sort\", {\n\t\t\t\ttype: \"networks\",\n\t\t\t\torder: store.state.networks.map((n) => n.uuid),\n\t\t\t});\n\t\t};\n\n\t\tconst onChannelSort = (e: Sortable.SortableEvent) => {\n\t\t\tlet {oldIndex, newIndex} = e;\n\n\t\t\tif (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Indexes are offset by one due to the lobby\n\t\t\toldIndex += 1;\n\t\t\tnewIndex += 1;\n\n\t\t\tconst unparsedId = e.item.getAttribute(\"data-item\");\n\n\t\t\tif (!unparsedId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst id = parseInt(unparsedId);\n\t\t\tconst netChan = store.getters.findChannel(id);\n\n\t\t\tif (!netChan) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveItemInArray(netChan.network.channels, oldIndex, newIndex);\n\n\t\t\tsocket.emit(\"sort\", {\n\t\t\t\ttype: \"channels\",\n\t\t\t\ttarget: netChan.network.uuid,\n\t\t\t\torder: netChan.network.channels.map((c) => c.id),\n\t\t\t});\n\t\t};\n\n\t\tconst isTouchEvent = (event: any): boolean => {\n\t\t\t// This is the same way Sortable.js detects a touch event. See\n\t\t\t// SortableJS/Sortable@daaefeda:/src/Sortable.js#L465\n\n\t\t\treturn !!(\n\t\t\t\t(event.touches && event.touches[0]) ||\n\t\t\t\t(event.pointerType && event.pointerType === \"touch\")\n\t\t\t);\n\t\t};\n\n\t\tconst onDraggableChoose = (event: any) => {\n\t\t\tconst original = event.originalEvent;\n\n\t\t\tif (isTouchEvent(original)) {\n\t\t\t\t// onDrag is only triggered when the user actually moves the\n\t\t\t\t// dragged object but onChoose is triggered as soon as the\n\t\t\t\t// item is eligible for dragging. This gives us an opportunity\n\t\t\t\t// to tell the user they've held the touch long enough.\n\t\t\t\tevent.item.classList.add(\"ui-sortable-dragging-touch-cue\");\n\n\t\t\t\tif (original instanceof TouchEvent && original.touches.length > 0) {\n\t\t\t\t\tstartDrag.value = [original.touches[0].clientX, original.touches[0].clientY];\n\t\t\t\t} else if (original instanceof PointerEvent) {\n\t\t\t\t\tstartDrag.value = [original.clientX, original.clientY];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableUnchoose = (event: any) => {\n\t\t\tevent.item.classList.remove(\"ui-sortable-dragging-touch-cue\");\n\t\t\tstartDrag.value = null;\n\t\t};\n\n\t\tconst onDraggableTouchStart = (event: TouchEvent) => {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\t// This prevents an iOS long touch default behavior: selecting\n\t\t\t\t// the nearest selectable text.\n\t\t\t\tdocument.body.classList.add(\"force-no-select\");\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableTouchMove = (event: TouchEvent) => {\n\t\t\tif (startDrag.value && event.touches.length > 0) {\n\t\t\t\tconst touch = event.touches[0];\n\t\t\t\tconst currentPosition = [touch.clientX, touch.clientY];\n\n\t\t\t\tif (distance(startDrag.value, currentPosition as [number, number]) > 10) {\n\t\t\t\t\t// Context menu is shown on Android after long touch.\n\t\t\t\t\t// Dismiss it now that we're sure the user is dragging.\n\t\t\t\t\teventbus.emit(\"contextmenu:cancel\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableTouchEnd = (event: TouchEvent) => {\n\t\t\tif (event.touches.length === 0) {\n\t\t\t\tdocument.body.classList.remove(\"force-no-select\");\n\t\t\t}\n\t\t};\n\n\t\tconst activateSearch = () => {\n\t\t\tif (searchInput.value === document.activeElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsidebarWasClosed.value = store.state.sidebarOpen ? false : true;\n\t\t\tstore.commit(\"sidebarOpen\", true);\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tsearchInput.value?.focus();\n\t\t\t});\n\t\t};\n\n\t\tconst deactivateSearch = () => {\n\t\t\tactiveSearchItem.value = null;\n\t\t\tsearchText.value = \"\";\n\t\t\tsearchInput.value?.blur();\n\n\t\t\tif (sidebarWasClosed.value) {\n\t\t\t\tstore.commit(\"sidebarOpen\", false);\n\t\t\t}\n\t\t};\n\n\t\tconst toggleSearch = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (searchInput.value === document.activeElement) {\n\t\t\t\tdeactivateSearch();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tactivateSearch();\n\t\t\treturn false;\n\t\t};\n\n\t\tconst setSearchText = (e: Event) => {\n\t\t\tsearchText.value = (e.target as HTMLInputElement).value;\n\t\t};\n\n\t\tconst setActiveSearchItem = (channel?: ClientChan) => {\n\t\t\tif (!results.value.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!channel) {\n\t\t\t\tchannel = results.value[0].channel;\n\t\t\t}\n\n\t\t\tactiveSearchItem.value = channel;\n\t\t};\n\n\t\tconst scrollToActive = () => {\n\t\t\t// Scroll the list if needed after the active class is applied\n\t\t\tvoid nextTick(() => {\n\t\t\t\tconst el = networklist.value?.querySelector(\".channel-list-item.active\");\n\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({block: \"nearest\", inline: \"nearest\"});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tconst selectResult = () => {\n\t\t\tif (!searchText.value || !results.value.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (activeSearchItem.value) {\n\t\t\t\tswitchToChannel(activeSearchItem.value);\n\t\t\t\tdeactivateSearch();\n\t\t\t\tscrollToActive();\n\t\t\t}\n\t\t};\n\n\t\tconst navigateResults = (event: Event, direction: number) => {\n\t\t\t// Prevent propagation to stop global keybind handler from capturing pagedown/pageup\n\t\t\t// and redirecting it to the message list container for scrolling\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!searchText.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst channels = results.value.map((r) => r.channel);\n\n\t\t\t// Bail out if there's no channels to select\n\t\t\tif (!channels.length) {\n\t\t\t\tactiveSearchItem.value = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet currentIndex = activeSearchItem.value\n\t\t\t\t? channels.indexOf(activeSearchItem.value)\n\t\t\t\t: -1;\n\n\t\t\t// If there's no active channel select the first or last one depending on direction\n\t\t\tif (!activeSearchItem.value || currentIndex === -1) {\n\t\t\t\tactiveSearchItem.value = direction ? channels[0] : channels[channels.length - 1];\n\t\t\t\tscrollToActive();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\t// Wrap around the list if necessary. Normaly each loop iterates once at most,\n\t\t\t// but might iterate more often if pgup or pgdown are used in a very short list\n\t\t\twhile (currentIndex < 0) {\n\t\t\t\tcurrentIndex += channels.length;\n\t\t\t}\n\n\t\t\twhile (currentIndex > channels.length - 1) {\n\t\t\t\tcurrentIndex -= channels.length;\n\t\t\t}\n\n\t\t\tactiveSearchItem.value = channels[currentIndex];\n\t\t\tscrollToActive();\n\t\t};\n\n\t\twatch(searchText, () => {\n\t\t\tsetActiveSearchItem();\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tMousetrap.bind(\"alt+shift+right\", expandNetwork);\n\t\t\tMousetrap.bind(\"alt+shift+left\", collapseNetwork);\n\t\t\tMousetrap.bind(\"alt+j\", toggleSearch);\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tMousetrap.unbind(\"alt+shift+right\");\n\t\t\tMousetrap.unbind(\"alt+shift+left\");\n\t\t\tMousetrap.unbind(\"alt+j\");\n\t\t});\n\n\t\tconst networkContainerRef = ref<HTMLDivElement>();\n\t\tconst channelRefs = ref<{[key: string]: HTMLDivElement}>({});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tnetworklist,\n\t\t\tsearchInput,\n\t\t\tsearchText,\n\t\t\tresults,\n\t\t\tactiveSearchItem,\n\t\t\tLONG_TOUCH_DURATION,\n\n\t\t\tactivateSearch,\n\t\t\tdeactivateSearch,\n\t\t\ttoggleSearch,\n\t\t\tsetSearchText,\n\t\t\tsetActiveSearchItem,\n\t\t\tscrollToActive,\n\t\t\tselectResult,\n\t\t\tnavigateResults,\n\t\t\tonChannelSort,\n\t\t\tonNetworkSort,\n\t\t\tonDraggableTouchStart,\n\t\t\tonDraggableTouchMove,\n\t\t\tonDraggableTouchEnd,\n\t\t\tonDraggableChoose,\n\t\t\tonDraggableUnchoose,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div ref=\"containerRef\" :class=\"$props.class\">\n\t\t<slot\n\t\t\tv-for=\"(item, index) of list\"\n\t\t\t:key=\"item[itemKey]\"\n\t\t\t:element=\"item\"\n\t\t\t:index=\"index\"\n\t\t\tname=\"item\"\n\t\t></slot>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref, PropType, watch, onUnmounted, onBeforeUnmount} from \"vue\";\nimport Sortable from \"sortablejs\";\n\nconst Props = {\n\tdelay: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t\trequired: false,\n\t},\n\tdelayOnTouchOnly: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t\trequired: false,\n\t},\n\ttouchStartThreshold: {\n\t\ttype: Number,\n\t\tdefault: 10,\n\t\trequired: false,\n\t},\n\thandle: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tdraggable: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tghostClass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tdragClass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tgroup: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tclass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\titemKey: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: true,\n\t},\n\tlist: {\n\t\ttype: Array as PropType<any[]>,\n\t\tdefault: [],\n\t\trequired: true,\n\t},\n\tfilter: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n};\n\nexport default defineComponent({\n\tname: \"Draggable\",\n\tprops: Props,\n\temits: [\"change\", \"choose\", \"unchoose\"],\n\tsetup(props, {emit}) {\n\t\tconst containerRef = ref<HTMLElement | null>(null);\n\t\tconst sortable = ref<Sortable | null>(null);\n\n\t\twatch(containerRef, (newDraggable) => {\n\t\t\tif (newDraggable) {\n\t\t\t\tsortable.value = new Sortable(newDraggable, {\n\t\t\t\t\t...props,\n\n\t\t\t\t\tonChoose(event) {\n\t\t\t\t\t\temit(\"choose\", event);\n\t\t\t\t\t},\n\n\t\t\t\t\tonUnchoose(event) {\n\t\t\t\t\t\temit(\"unchoose\", event);\n\t\t\t\t\t},\n\n\t\t\t\t\tonEnd(event) {\n\t\t\t\t\t\temit(\"change\", event);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tif (sortable.value) {\n\t\t\t\tsortable.value.destroy();\n\t\t\t\tcontainerRef.value = null;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tcontainerRef,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Draggable.vue?vue&type=template&id=09d4f527&ts=true\"\nimport script from \"./Draggable.vue?vue&type=script&lang=ts\"\nexport * from \"./Draggable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<ChannelWrapper v-bind=\"$props\" :channel=\"channel\">\n\t\t<button\n\t\t\tv-if=\"network.channels.length > 1\"\n\t\t\t:aria-controls=\"'network-' + network.uuid\"\n\t\t\t:aria-label=\"getExpandLabel(network)\"\n\t\t\t:aria-expanded=\"!network.isCollapsed\"\n\t\t\tclass=\"collapse-network\"\n\t\t\t@click.stop=\"onCollapseClick\"\n\t\t>\n\t\t\t<span class=\"collapse-network-icon\" />\n\t\t</button>\n\t\t<span v-else class=\"collapse-network\" />\n\t\t<div class=\"lobby-wrap\">\n\t\t\t<span :title=\"channel.name\" class=\"name\">{{ channel.name }}</span>\n\t\t\t<span\n\t\t\t\tv-if=\"network.status.connected && !network.status.secure\"\n\t\t\t\tclass=\"not-secure-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Insecure connection\"\n\t\t\t>\n\t\t\t\t<span class=\"not-secure-icon\" />\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"!network.status.connected\"\n\t\t\t\tclass=\"not-connected-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Disconnected\"\n\t\t\t>\n\t\t\t\t<span class=\"not-connected-icon\" />\n\t\t\t</span>\n\t\t\t<span v-if=\"channel.unread\" :class=\"{highlight: channel.highlight}\" class=\"badge\">{{\n\t\t\t\tunreadCount\n\t\t\t}}</span>\n\t\t</div>\n\t\t<span\n\t\t\t:aria-label=\"joinChannelLabel\"\n\t\t\tclass=\"add-channel-tooltip tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t>\n\t\t\t<button\n\t\t\t\t:class=\"['add-channel', {opened: isJoinChannelShown}]\"\n\t\t\t\t:aria-controls=\"'join-channel-' + channel.id\"\n\t\t\t\t:aria-label=\"joinChannelLabel\"\n\t\t\t\t@click.stop=\"$emit('toggle-join-channel')\"\n\t\t\t/>\n\t\t</span>\n\t</ChannelWrapper>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport collapseNetwork from \"../js/helpers/collapseNetwork\";\nimport roundBadgeNumber from \"../js/helpers/roundBadgeNumber\";\nimport ChannelWrapper from \"./ChannelWrapper.vue\";\n\nimport type {ClientChan, ClientNetwork} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"Channel\",\n\tcomponents: {\n\t\tChannelWrapper,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tisJoinChannelShown: Boolean,\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\temits: [\"toggle-join-channel\"],\n\tsetup(props) {\n\t\tconst channel = computed(() => {\n\t\t\treturn props.network.channels[0];\n\t\t});\n\n\t\tconst joinChannelLabel = computed(() => {\n\t\t\treturn props.isJoinChannelShown ? \"Cancel\" : \"Join a channel…\";\n\t\t});\n\n\t\tconst unreadCount = computed(() => {\n\t\t\treturn roundBadgeNumber(channel.value.unread);\n\t\t});\n\n\t\tconst onCollapseClick = () => {\n\t\t\tcollapseNetwork(props.network, !props.network.isCollapsed);\n\t\t};\n\n\t\tconst getExpandLabel = (network: ClientNetwork) => {\n\t\t\treturn network.isCollapsed ? \"Expand\" : \"Collapse\";\n\t\t};\n\n\t\treturn {\n\t\t\tchannel,\n\t\t\tjoinChannelLabel,\n\t\t\tunreadCount,\n\t\t\tonCollapseClick,\n\t\t\tgetExpandLabel,\n\t\t};\n\t},\n});\n</script>\n","import storage from \"../localStorage\";\n\nexport default (network, isCollapsed) => {\n\tconst stored = storage.get(\"thelounge.networks.collapsed\");\n\tconst networks = stored ? new Set(JSON.parse(stored)) : new Set();\n\n\tnetwork.isCollapsed = isCollapsed;\n\n\tif (isCollapsed) {\n\t\tnetworks.add(network.uuid);\n\t} else {\n\t\tnetworks.delete(network.uuid);\n\t}\n\n\tstorage.set(\"thelounge.networks.collapsed\", JSON.stringify([...networks]));\n};\n","export default (count: number) => {\n\tif (count < 1000) {\n\t\treturn count.toString();\n\t}\n\n\treturn (count / 1000).toFixed(2).slice(0, -1) + \"k\";\n};\n","<template>\n\t<!-- TODO: move closed style to it's own class -->\n\t<div\n\t\tv-if=\"isChannelVisible\"\n\t\tref=\"element\"\n\t\t:class=\"[\n\t\t\t'channel-list-item',\n\t\t\t{active: active},\n\t\t\t{'parted-channel': channel.type === 'channel' && channel.state === 0},\n\t\t\t{'has-draft': channel.pendingMessage},\n\t\t\t{'has-unread': channel.unread},\n\t\t\t{'has-highlight': channel.highlight},\n\t\t\t{\n\t\t\t\t'not-secure':\n\t\t\t\t\tchannel.type === 'lobby' && network.status.connected && !network.status.secure,\n\t\t\t},\n\t\t\t{'not-connected': channel.type === 'lobby' && !network.status.connected},\n\t\t\t{'is-muted': channel.muted},\n\t\t]\"\n\t\t:aria-label=\"getAriaLabel()\"\n\t\t:title=\"getAriaLabel()\"\n\t\t:data-name=\"channel.name\"\n\t\t:data-type=\"channel.type\"\n\t\t:aria-controls=\"'#chan-' + channel.id\"\n\t\t:aria-selected=\"active\"\n\t\t:style=\"channel.closed ? {transition: 'none', opacity: 0.4} : undefined\"\n\t\trole=\"tab\"\n\t\t@click=\"click\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t>\n\t\t<slot :network=\"network\" :channel=\"channel\" :active-channel=\"activeChannel\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport eventbus from \"../js/eventbus\";\nimport isChannelCollapsed from \"../js/helpers/isChannelCollapsed\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {switchToChannel} from \"../js/router\";\n\nexport default defineComponent({\n\tname: \"ChannelWrapper\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {\n\t\t\ttype: Object as PropType<ClientChan>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst activeChannel = computed(() => store.state.activeChannel);\n\t\tconst isChannelVisible = computed(\n\t\t\t() => props.isFiltering || !isChannelCollapsed(props.network, props.channel)\n\t\t);\n\n\t\tconst getAriaLabel = () => {\n\t\t\tconst extra: string[] = [];\n\t\t\tconst type = props.channel.type;\n\n\t\t\tif (props.channel.unread > 0) {\n\t\t\t\tif (props.channel.unread > 1) {\n\t\t\t\t\textra.push(`${props.channel.unread} unread messages`);\n\t\t\t\t} else {\n\t\t\t\t\textra.push(`${props.channel.unread} unread message`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (props.channel.highlight > 0) {\n\t\t\t\tif (props.channel.highlight > 1) {\n\t\t\t\t\textra.push(`${props.channel.highlight} mentions`);\n\t\t\t\t} else {\n\t\t\t\t\textra.push(`${props.channel.highlight} mention`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn `${type}: ${props.channel.name} ${extra.length ? `(${extra.join(\", \")})` : \"\"}`;\n\t\t};\n\n\t\tconst click = () => {\n\t\t\tif (props.isFiltering) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitchToChannel(props.channel);\n\t\t};\n\n\t\tconst openContextMenu = (event: MouseEvent) => {\n\t\t\teventbus.emit(\"contextmenu:channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t\tnetwork: props.network,\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tactiveChannel,\n\t\t\tisChannelVisible,\n\t\t\tgetAriaLabel,\n\t\t\tclick,\n\t\t\topenContextMenu,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ChannelWrapper.vue?vue&type=template&id=27b55c3c&ts=true\"\nimport script from \"./ChannelWrapper.vue?vue&type=script&lang=ts\"\nexport * from \"./ChannelWrapper.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkLobby.vue?vue&type=template&id=0ca1e50b&ts=true\"\nimport script from \"./NetworkLobby.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkLobby.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<!-- TODO: investigate -->\n\t<ChannelWrapper ref=\"wrapper\" v-bind=\"$props\">\n\t\t<span class=\"name\">{{ channel.name }}</span>\n\t\t<span\n\t\t\tv-if=\"channel.unread\"\n\t\t\t:class=\"{highlight: channel.highlight && !channel.muted}\"\n\t\t\tclass=\"badge\"\n\t\t\t>{{ unreadCount }}</span\n\t\t>\n\t\t<template v-if=\"channel.type === 'channel'\">\n\t\t\t<span\n\t\t\t\tv-if=\"channel.state === 0\"\n\t\t\t\tclass=\"parted-channel-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Not currently joined\"\n\t\t\t>\n\t\t\t\t<span class=\"parted-channel-icon\" />\n\t\t\t</span>\n\t\t\t<span class=\"close-tooltip tooltipped tooltipped-w\" aria-label=\"Leave\">\n\t\t\t\t<button class=\"close\" aria-label=\"Leave\" @click.stop=\"close\" />\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<span class=\"close-tooltip tooltipped tooltipped-w\" aria-label=\"Close\">\n\t\t\t\t<button class=\"close\" aria-label=\"Close\" @click.stop=\"close\" />\n\t\t\t</span>\n\t\t</template>\n\t</ChannelWrapper>\n</template>\n\n<script lang=\"ts\">\nimport {PropType, defineComponent, computed} from \"vue\";\nimport roundBadgeNumber from \"../js/helpers/roundBadgeNumber\";\nimport useCloseChannel from \"../js/hooks/use-close-channel\";\nimport {ClientChan, ClientNetwork} from \"../js/types\";\nimport ChannelWrapper from \"./ChannelWrapper.vue\";\n\nexport default defineComponent({\n\tname: \"Channel\",\n\tcomponents: {\n\t\tChannelWrapper,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {\n\t\t\ttype: Object as PropType<ClientChan>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst unreadCount = computed(() => roundBadgeNumber(props.channel.unread));\n\t\tconst close = useCloseChannel(props.channel);\n\n\t\treturn {\n\t\t\tunreadCount,\n\t\t\tclose,\n\t\t};\n\t},\n});\n</script>\n","import eventbus from \"../eventbus\";\nimport socket from \"../socket\";\nimport {ClientChan} from \"../types\";\n\nexport default function useCloseChannel(channel: ClientChan) {\n\treturn () => {\n\t\tif (channel.type === \"lobby\") {\n\t\t\teventbus.emit(\n\t\t\t\t\"confirm-dialog\",\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Remove network\",\n\t\t\t\t\ttext: `Are you sure you want to quit and remove ${channel.name}? This cannot be undone.`,\n\t\t\t\t\tbutton: \"Remove network\",\n\t\t\t\t},\n\t\t\t\t(result: boolean) => {\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tchannel.closed = true;\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: Number(channel.id),\n\t\t\t\t\t\ttext: \"/quit\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tchannel.closed = true;\n\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: Number(channel.id),\n\t\t\ttext: \"/close\",\n\t\t});\n\t};\n}\n","import { render } from \"./Channel.vue?vue&type=template&id=27e62c21&ts=true\"\nimport script from \"./Channel.vue?vue&type=script&lang=ts\"\nexport * from \"./Channel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form\n\t\t:id=\"'join-channel-' + channel.id\"\n\t\tclass=\"join-form\"\n\t\tmethod=\"post\"\n\t\taction=\"\"\n\t\tautocomplete=\"off\"\n\t\t@keydown.esc.prevent=\"$emit('toggle-join-channel')\"\n\t\t@submit.prevent=\"onSubmit\"\n\t>\n\t\t<input\n\t\t\tv-model=\"inputChannel\"\n\t\t\tv-focus\n\t\t\ttype=\"text\"\n\t\t\tclass=\"input\"\n\t\t\tname=\"channel\"\n\t\t\tplaceholder=\"Channel\"\n\t\t\tpattern=\"[^\\s]+\"\n\t\t\tmaxlength=\"200\"\n\t\t\ttitle=\"The channel name may not contain spaces\"\n\t\t\trequired\n\t\t/>\n\t\t<input\n\t\t\tv-model=\"inputPassword\"\n\t\t\ttype=\"password\"\n\t\t\tclass=\"input\"\n\t\t\tname=\"key\"\n\t\t\tplaceholder=\"Password (optional)\"\n\t\t\tpattern=\"[^\\s]+\"\n\t\t\tmaxlength=\"200\"\n\t\t\ttitle=\"The channel password may not contain spaces\"\n\t\t\tautocomplete=\"new-password\"\n\t\t/>\n\t\t<button type=\"submit\" class=\"btn btn-small\">Join</button>\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType, ref} from \"vue\";\nimport {switchToChannel} from \"../js/router\";\nimport socket from \"../js/socket\";\nimport {useStore} from \"../js/store\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"JoinChannel\",\n\tdirectives: {\n\t\tfocus: {\n\t\t\tmounted: (el: HTMLFormElement) => el.focus(),\n\t\t},\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\temits: [\"toggle-join-channel\"],\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\t\tconst inputChannel = ref(\"\");\n\t\tconst inputPassword = ref(\"\");\n\n\t\tconst onSubmit = () => {\n\t\t\tconst existingChannel = store.getters.findChannelOnCurrentNetwork(inputChannel.value);\n\n\t\t\tif (existingChannel) {\n\t\t\t\tswitchToChannel(existingChannel);\n\t\t\t} else {\n\t\t\t\tconst chanTypes = props.network.serverOptions.CHANTYPES;\n\t\t\t\tlet channel = inputChannel.value;\n\n\t\t\t\tif (chanTypes && chanTypes.length > 0 && !chanTypes.includes(channel[0])) {\n\t\t\t\t\tchannel = chanTypes[0] + channel;\n\t\t\t\t}\n\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttext: `/join ${channel} ${inputPassword.value}`,\n\t\t\t\t\ttarget: props.channel.id,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinputChannel.value = \"\";\n\t\t\tinputPassword.value = \"\";\n\t\t\temit(\"toggle-join-channel\");\n\t\t};\n\n\t\treturn {\n\t\t\tinputChannel,\n\t\t\tinputPassword,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./JoinChannel.vue?vue&type=template&id=310e4234&ts=true\"\nimport script from \"./JoinChannel.vue?vue&type=script&lang=ts\"\nexport * from \"./JoinChannel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkList.vue?vue&type=template&id=bbdaacae&ts=true\"\nimport script from \"./NetworkList.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkList.vue?vue&type=script&lang=ts\"\n\nimport \"./NetworkList.vue?vue&type=style&index=0&id=bbdaacae&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Sidebar.vue?vue&type=template&id=f5fb6afa&ts=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div\n\t\tid=\"image-viewer\"\n\t\tref=\"viewer\"\n\t\t:class=\"{opened: link !== null}\"\n\t\t@wheel=\"onMouseWheel\"\n\t\t@touchstart.passive=\"onTouchStart\"\n\t\t@click=\"onClick\"\n\t>\n\t\t<template v-if=\"link !== null\">\n\t\t\t<button class=\"close-btn\" aria-label=\"Close\"></button>\n\n\t\t\t<button\n\t\t\t\tv-if=\"previousImage\"\n\t\t\t\tclass=\"previous-image-btn\"\n\t\t\t\taria-label=\"Previous image\"\n\t\t\t\t@click.stop=\"previous\"\n\t\t\t></button>\n\t\t\t<button\n\t\t\t\tv-if=\"nextImage\"\n\t\t\t\tclass=\"next-image-btn\"\n\t\t\t\taria-label=\"Next image\"\n\t\t\t\t@click.stop=\"next\"\n\t\t\t></button>\n\n\t\t\t<a class=\"open-btn\" :href=\"link.link\" target=\"_blank\" rel=\"noopener\"></a>\n\n\t\t\t<img\n\t\t\t\tref=\"image\"\n\t\t\t\t:src=\"link.thumb\"\n\t\t\t\talt=\"\"\n\t\t\t\t:style=\"computeImageStyles\"\n\t\t\t\t@load=\"onImageLoad\"\n\t\t\t\t@mousedown=\"onImageMouseDown\"\n\t\t\t\t@touchstart.passive=\"onImageTouchStart\"\n\t\t\t/>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport Mousetrap from \"mousetrap\";\nimport {computed, defineComponent, ref, watch} from \"vue\";\nimport {onBeforeRouteLeave, onBeforeRouteUpdate} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientChan, ClientMessage, ClientLinkPreview} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"ImageViewer\",\n\tsetup() {\n\t\tconst viewer = ref<HTMLDivElement>();\n\t\tconst image = ref<HTMLImageElement>();\n\n\t\tconst link = ref<ClientLinkPreview | null>(null);\n\t\tconst previousImage = ref<ClientLinkPreview | null>();\n\t\tconst nextImage = ref<ClientLinkPreview | null>();\n\t\tconst channel = ref<ClientChan | null>();\n\n\t\tconst position = ref<{\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t}>({\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst transform = ref<{\n\t\t\tscale: number;\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t}>({\n\t\t\tscale: 1,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst computeImageStyles = computed(() => {\n\t\t\t// Sub pixels may cause the image to blur in certain browsers\n\t\t\t// round it down to prevent that\n\t\t\tconst transformX = Math.floor(transform.value.x);\n\t\t\tconst transformY = Math.floor(transform.value.y);\n\n\t\t\treturn {\n\t\t\t\tleft: `${position.value.x}px`,\n\t\t\t\ttop: `${position.value.y}px`,\n\t\t\t\ttransform: `translate3d(${transformX}px, ${transformY}px, 0) scale3d(${transform.value.scale}, ${transform.value.scale}, 1)`,\n\t\t\t};\n\t\t});\n\n\t\tconst closeViewer = () => {\n\t\t\tif (link.value === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchannel.value = null;\n\t\t\tpreviousImage.value = null;\n\t\t\tnextImage.value = null;\n\t\t\tlink.value = null;\n\t\t};\n\n\t\tconst setPrevNextImages = () => {\n\t\t\tif (!channel.value || !link.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst links = channel.value.messages\n\t\t\t\t.map((msg) => msg.previews)\n\t\t\t\t.flat()\n\t\t\t\t.filter((preview) => preview.thumb);\n\n\t\t\tconst currentIndex = links.indexOf(link.value);\n\n\t\t\tpreviousImage.value = links[currentIndex - 1] || null;\n\t\t\tnextImage.value = links[currentIndex + 1] || null;\n\t\t};\n\n\t\tconst previous = () => {\n\t\t\tif (previousImage.value) {\n\t\t\t\tlink.value = previousImage.value;\n\t\t\t}\n\t\t};\n\n\t\tconst next = () => {\n\t\t\tif (nextImage.value) {\n\t\t\t\tlink.value = nextImage.value;\n\t\t\t}\n\t\t};\n\n\t\tconst prepareImage = () => {\n\t\t\tconst viewerEl = viewer.value;\n\t\t\tconst imageEl = image.value;\n\n\t\t\tif (!viewerEl || !imageEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst width = viewerEl.offsetWidth;\n\t\t\tconst height = viewerEl.offsetHeight;\n\t\t\tconst scale = Math.min(1, width / imageEl.width, height / imageEl.height);\n\n\t\t\tposition.value.x = Math.floor(-image.value!.naturalWidth / 2);\n\t\t\tposition.value.y = Math.floor(-image.value!.naturalHeight / 2);\n\t\t\ttransform.value.scale = Math.max(scale, 0.1);\n\t\t\ttransform.value.x = width / 2;\n\t\t\ttransform.value.y = height / 2;\n\t\t};\n\n\t\tconst onImageLoad = () => {\n\t\t\tprepareImage();\n\t\t};\n\n\t\tconst calculateZoomShift = (newScale: number, x: number, y: number, oldScale: number) => {\n\t\t\tif (!image.value || !viewer.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst imageWidth = image.value.width;\n\t\t\tconst centerX = viewer.value.offsetWidth / 2;\n\t\t\tconst centerY = viewer.value.offsetHeight / 2;\n\n\t\t\treturn {\n\t\t\t\tx:\n\t\t\t\t\tcenterX -\n\t\t\t\t\t((centerX - (y - (imageWidth * x) / 2)) / x) * newScale +\n\t\t\t\t\t(imageWidth * newScale) / 2,\n\t\t\t\ty:\n\t\t\t\t\tcenterY -\n\t\t\t\t\t((centerY - (oldScale - (imageWidth * x) / 2)) / x) * newScale +\n\t\t\t\t\t(imageWidth * newScale) / 2,\n\t\t\t};\n\t\t};\n\n\t\tconst correctPosition = () => {\n\t\t\tconst imageEl = image.value;\n\t\t\tconst viewerEl = viewer.value;\n\n\t\t\tif (!imageEl || !viewerEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst widthScaled = imageEl.width * transform.value.scale;\n\t\t\tconst heightScaled = imageEl.height * transform.value.scale;\n\t\t\tconst containerWidth = viewerEl.offsetWidth;\n\t\t\tconst containerHeight = viewerEl.offsetHeight;\n\n\t\t\tif (widthScaled < containerWidth) {\n\t\t\t\ttransform.value.x = containerWidth / 2;\n\t\t\t} else if (transform.value.x - widthScaled / 2 > 0) {\n\t\t\t\ttransform.value.x = widthScaled / 2;\n\t\t\t} else if (transform.value.x + widthScaled / 2 < containerWidth) {\n\t\t\t\ttransform.value.x = containerWidth - widthScaled / 2;\n\t\t\t}\n\n\t\t\tif (heightScaled < containerHeight) {\n\t\t\t\ttransform.value.y = containerHeight / 2;\n\t\t\t} else if (transform.value.y - heightScaled / 2 > 0) {\n\t\t\t\ttransform.value.y = heightScaled / 2;\n\t\t\t} else if (transform.value.y + heightScaled / 2 < containerHeight) {\n\t\t\t\ttransform.value.y = containerHeight - heightScaled / 2;\n\t\t\t}\n\t\t};\n\n\t\t// Reduce multiple touch points into a single x/y/scale\n\t\tconst reduceTouches = (touches: TouchList) => {\n\t\t\tlet totalX = 0;\n\t\t\tlet totalY = 0;\n\t\t\tlet totalScale = 0;\n\n\t\t\tfor (let i = 0; i < touches.length; i++) {\n\t\t\t\tconst x = touches[i].clientX;\n\t\t\t\tconst y = touches[i].clientY;\n\n\t\t\t\ttotalX += x;\n\t\t\t\ttotalY += y;\n\n\t\t\t\tfor (let i2 = 0; i2 < touches.length; i2++) {\n\t\t\t\t\tif (i !== i2) {\n\t\t\t\t\t\tconst x2 = touches[i2].clientX;\n\t\t\t\t\t\tconst y2 = touches[i2].clientY;\n\t\t\t\t\t\ttotalScale += Math.sqrt((x - x2) * (x - x2) + (y - y2) * (y - y2));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (totalScale === 0) {\n\t\t\t\ttotalScale = 1;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx: totalX / touches.length,\n\t\t\t\ty: totalY / touches.length,\n\t\t\t\tscale: totalScale / touches.length,\n\t\t\t};\n\t\t};\n\n\t\tconst onTouchStart = (e: TouchEvent) => {\n\t\t\t// prevent sidebar touchstart event, we don't want to interact with sidebar while in image viewer\n\t\t\te.stopImmediatePropagation();\n\t\t};\n\n\t\t// Touch image manipulation:\n\t\t// 1. Move around by dragging it with one finger\n\t\t// 2. Change image scale by using two fingers\n\t\tconst onImageTouchStart = (e: TouchEvent) => {\n\t\t\tconst img = image.value;\n\t\t\tlet touch = reduceTouches(e.touches);\n\t\t\tlet currentTouches = e.touches;\n\t\t\tlet touchEndFingers = 0;\n\n\t\t\tconst currentTransform = {\n\t\t\t\tx: touch.x,\n\t\t\t\ty: touch.y,\n\t\t\t\tscale: touch.scale,\n\t\t\t};\n\n\t\t\tconst startTransform = {\n\t\t\t\tx: transform.value.x,\n\t\t\t\ty: transform.value.y,\n\t\t\t\tscale: transform.value.scale,\n\t\t\t};\n\n\t\t\tconst touchMove = (moveEvent) => {\n\t\t\t\ttouch = reduceTouches(moveEvent.touches);\n\n\t\t\t\tif (currentTouches.length !== moveEvent.touches.length) {\n\t\t\t\t\tcurrentTransform.x = touch.x;\n\t\t\t\t\tcurrentTransform.y = touch.y;\n\t\t\t\t\tcurrentTransform.scale = touch.scale;\n\t\t\t\t\tstartTransform.x = transform.value.x;\n\t\t\t\t\tstartTransform.y = transform.value.y;\n\t\t\t\t\tstartTransform.scale = transform.value.scale;\n\t\t\t\t}\n\n\t\t\t\tconst deltaX = touch.x - currentTransform.x;\n\t\t\t\tconst deltaY = touch.y - currentTransform.y;\n\t\t\t\tconst deltaScale = touch.scale / currentTransform.scale;\n\t\t\t\tcurrentTouches = moveEvent.touches;\n\t\t\t\ttouchEndFingers = 0;\n\n\t\t\t\tconst newScale = Math.min(3, Math.max(0.1, startTransform.scale * deltaScale));\n\n\t\t\t\tconst fixedPosition = calculateZoomShift(\n\t\t\t\t\tnewScale,\n\t\t\t\t\tstartTransform.scale,\n\t\t\t\t\tstartTransform.x,\n\t\t\t\t\tstartTransform.y\n\t\t\t\t);\n\n\t\t\t\tif (!fixedPosition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttransform.value.x = fixedPosition.x + deltaX;\n\t\t\t\ttransform.value.y = fixedPosition.y + deltaY;\n\t\t\t\ttransform.value.scale = newScale;\n\t\t\t\tcorrectPosition();\n\t\t\t};\n\n\t\t\tconst touchEnd = (endEvent: TouchEvent) => {\n\t\t\t\tconst changedTouches = endEvent.changedTouches.length;\n\n\t\t\t\tif (currentTouches.length > changedTouches + touchEndFingers) {\n\t\t\t\t\ttouchEndFingers += changedTouches;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// todo: this is swipe to close, but it's not working very well due to unfinished delta calculation\n\t\t\t\t/* if (\n\t\t\t\t\ttransform.value.scale <= 1 &&\n\t\t\t\t\tendEvent.changedTouches[0].clientY - startTransform.y <= -70\n\t\t\t\t) {\n\t\t\t\t\treturn this.closeViewer();\n\t\t\t\t}*/\n\n\t\t\t\tcorrectPosition();\n\n\t\t\t\timg?.removeEventListener(\"touchmove\", touchMove);\n\t\t\t\timg?.removeEventListener(\"touchend\", touchEnd);\n\t\t\t};\n\n\t\t\timg?.addEventListener(\"touchmove\", touchMove, {passive: true});\n\t\t\timg?.addEventListener(\"touchend\", touchEnd, {passive: true});\n\t\t};\n\n\t\t// Image mouse manipulation:\n\t\t// 1. Mouse wheel scrolling will zoom in and out\n\t\t// 2. If image is zoomed in, simply dragging it will move it around\n\t\tconst onImageMouseDown = (e: MouseEvent) => {\n\t\t\t// todo: ignore if in touch event currently?\n\n\t\t\t// only left mouse\n\t\t\t// TODO: e.buttons?\n\t\t\tif (e.which !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst viewerEl = viewer.value;\n\t\t\tconst imageEl = image.value;\n\n\t\t\tif (!viewerEl || !imageEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst startX = e.clientX;\n\t\t\tconst startY = e.clientY;\n\t\t\tconst startTransformX = transform.value.x;\n\t\t\tconst startTransformY = transform.value.y;\n\t\t\tconst widthScaled = imageEl.width * transform.value.scale;\n\t\t\tconst heightScaled = imageEl.height * transform.value.scale;\n\t\t\tconst containerWidth = viewerEl.offsetWidth;\n\t\t\tconst containerHeight = viewerEl.offsetHeight;\n\t\t\tconst centerX = transform.value.x - widthScaled / 2;\n\t\t\tconst centerY = transform.value.y - heightScaled / 2;\n\t\t\tlet movedDistance = 0;\n\n\t\t\tconst mouseMove = (moveEvent: MouseEvent) => {\n\t\t\t\tmoveEvent.stopPropagation();\n\t\t\t\tmoveEvent.preventDefault();\n\n\t\t\t\tconst newX = moveEvent.clientX - startX;\n\t\t\t\tconst newY = moveEvent.clientY - startY;\n\n\t\t\t\tmovedDistance = Math.max(movedDistance, Math.abs(newX), Math.abs(newY));\n\n\t\t\t\tif (centerX < 0 || widthScaled + centerX > containerWidth) {\n\t\t\t\t\ttransform.value.x = startTransformX + newX;\n\t\t\t\t}\n\n\t\t\t\tif (centerY < 0 || heightScaled + centerY > containerHeight) {\n\t\t\t\t\ttransform.value.y = startTransformY + newY;\n\t\t\t\t}\n\n\t\t\t\tcorrectPosition();\n\t\t\t};\n\n\t\t\tconst mouseUp = (upEvent: MouseEvent) => {\n\t\t\t\tcorrectPosition();\n\n\t\t\t\tif (movedDistance < 2 && upEvent.button === 0) {\n\t\t\t\t\tcloseViewer();\n\t\t\t\t}\n\n\t\t\t\timage.value?.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\timage.value?.removeEventListener(\"mouseup\", mouseUp);\n\t\t\t};\n\n\t\t\timage.value?.addEventListener(\"mousemove\", mouseMove);\n\t\t\timage.value?.addEventListener(\"mouseup\", mouseUp);\n\t\t};\n\n\t\t// If image is zoomed in, holding ctrl while scrolling will move the image up and down\n\t\tconst onMouseWheel = (e: WheelEvent) => {\n\t\t\t// if image viewer is closing (css animation), you can still trigger mousewheel\n\t\t\t// TODO: Figure out a better fix for this\n\t\t\tif (link.value === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault(); // TODO: Can this be passive?\n\n\t\t\tif (e.ctrlKey) {\n\t\t\t\ttransform.value.y += e.deltaY;\n\t\t\t} else {\n\t\t\t\tconst delta = e.deltaY > 0 ? 0.1 : -0.1;\n\t\t\t\tconst newScale = Math.min(3, Math.max(0.1, transform.value.scale + delta));\n\t\t\t\tconst fixedPosition = calculateZoomShift(\n\t\t\t\t\tnewScale,\n\t\t\t\t\ttransform.value.scale,\n\t\t\t\t\ttransform.value.x,\n\t\t\t\t\ttransform.value.y\n\t\t\t\t);\n\n\t\t\t\tif (!fixedPosition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttransform.value.scale = newScale;\n\t\t\t\ttransform.value.x = fixedPosition.x;\n\t\t\t\ttransform.value.y = fixedPosition.y;\n\t\t\t}\n\n\t\t\tcorrectPosition();\n\t\t};\n\n\t\tconst onClick = (e: Event) => {\n\t\t\t// If click triggers on the image, ignore it\n\t\t\tif (e.target === image.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcloseViewer();\n\t\t};\n\n\t\twatch(link, (newLink, oldLink) => {\n\t\t\t// TODO: history.pushState\n\t\t\tif (newLink === null) {\n\t\t\t\teventbus.off(\"escapekey\", closeViewer);\n\t\t\t\teventbus.off(\"resize\", correctPosition);\n\t\t\t\tMousetrap.unbind(\"left\");\n\t\t\t\tMousetrap.unbind(\"right\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetPrevNextImages();\n\n\t\t\tif (!oldLink) {\n\t\t\t\teventbus.on(\"escapekey\", closeViewer);\n\t\t\t\teventbus.on(\"resize\", correctPosition);\n\t\t\t\tMousetrap.bind(\"left\", previous);\n\t\t\t\tMousetrap.bind(\"right\", next);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tlink,\n\t\t\tchannel,\n\t\t\timage,\n\t\t\ttransform,\n\t\t\tcloseViewer,\n\t\t\tnext,\n\t\t\tprevious,\n\t\t\tonImageLoad,\n\t\t\tonImageMouseDown,\n\t\t\tonMouseWheel,\n\t\t\tonClick,\n\t\t\tonTouchStart,\n\t\t\tpreviousImage,\n\t\t\tnextImage,\n\t\t\tonImageTouchStart,\n\t\t\tcomputeImageStyles,\n\t\t\tviewer,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ImageViewer.vue?vue&type=template&id=76497373&ts=true\"\nimport script from \"./ImageViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageViewer.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import socket from \"../socket\";\nimport eventbus from \"../eventbus\";\nimport type {ClientChan, ClientNetwork, ClientUser} from \"../types\";\nimport {switchToChannel} from \"../router\";\nimport {TypedStore} from \"../store\";\nimport useCloseChannel from \"../hooks/use-close-channel\";\n\ntype BaseContextMenuItem = {\n\tlabel: string;\n\ttype: string;\n\tclass: string;\n};\n\ntype ContextMenuItemWithAction = BaseContextMenuItem & {\n\taction: () => void;\n};\n\ntype ContextMenuItemWithLink = BaseContextMenuItem & {\n\tlink?: string;\n};\n\ntype ContextMenuDividerItem = {\n\ttype: \"divider\";\n};\n\nexport type ContextMenuItem =\n\t| ContextMenuItemWithAction\n\t| ContextMenuItemWithLink\n\t| ContextMenuDividerItem;\n\nexport function generateChannelContextMenu(\n\tchannel: ClientChan,\n\tnetwork: ClientNetwork\n): ContextMenuItem[] {\n\tconst closeChannel = useCloseChannel(channel);\n\n\tconst typeMap = {\n\t\tlobby: \"network\",\n\t\tchannel: \"chan\",\n\t\tquery: \"query\",\n\t\tspecial: \"chan\",\n\t};\n\n\tconst closeMap = {\n\t\tlobby: \"Remove\",\n\t\tchannel: \"Leave\",\n\t\tquery: \"Close\",\n\t\tspecial: \"Close\",\n\t};\n\n\tlet items: ContextMenuItem[] = [\n\t\t{\n\t\t\tlabel: channel.name,\n\t\t\ttype: \"item\",\n\t\t\tclass: typeMap[channel.type],\n\t\t\tlink: `/chan-${channel.id}`,\n\t\t},\n\t\t{\n\t\t\ttype: \"divider\",\n\t\t},\n\t];\n\n\t// Add menu items for lobbies\n\tif (channel.type === \"lobby\") {\n\t\titems = [\n\t\t\t...items,\n\t\t\t{\n\t\t\t\tlabel: \"Edit this network…\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"edit\",\n\t\t\t\tlink: `/edit-network/${network.uuid}`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Join a channel…\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"join\",\n\t\t\t\taction: () => (network.isJoinChannelShown = true),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"List all channels\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"list\",\n\t\t\t\taction: () =>\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/list\",\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"List ignored users\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"list\",\n\t\t\t\taction: () =>\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/ignorelist\",\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\tnetwork.status.connected\n\t\t\t\t? {\n\t\t\t\t\t\tlabel: \"Disconnect\",\n\t\t\t\t\t\ttype: \"item\",\n\t\t\t\t\t\tclass: \"disconnect\",\n\t\t\t\t\t\taction: () =>\n\t\t\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t\t\ttext: \"/disconnect\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tlabel: \"Connect\",\n\t\t\t\t\t\ttype: \"item\",\n\t\t\t\t\t\tclass: \"connect\",\n\t\t\t\t\t\taction: () =>\n\t\t\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t\t\ttext: \"/connect\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t  },\n\t\t];\n\t}\n\n\t// Add menu items for channels\n\tif (channel.type === \"channel\") {\n\t\titems.push({\n\t\t\tlabel: \"Edit topic\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"edit\",\n\t\t\taction() {\n\t\t\t\tchannel.editTopic = true;\n\t\t\t\tswitchToChannel(channel);\n\t\t\t},\n\t\t});\n\t\titems.push({\n\t\t\tlabel: \"List banned users\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"list\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/banlist\",\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// Add menu items for queries\n\tif (channel.type === \"query\") {\n\t\titems.push(\n\t\t\t{\n\t\t\t\tlabel: \"User information\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-whois\",\n\t\t\t\taction() {\n\t\t\t\t\tswitchToChannel(channel);\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/whois \" + channel.name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Ignore user\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-ignore\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/ignore \" + channel.name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\tif (channel.type === \"channel\" || channel.type === \"query\") {\n\t\titems.push({\n\t\t\tlabel: \"Clear history\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"clear-history\",\n\t\t\taction() {\n\t\t\t\teventbus.emit(\n\t\t\t\t\t\"confirm-dialog\",\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Clear history\",\n\t\t\t\t\t\ttext: `Are you sure you want to clear history for ${channel.name}? This cannot be undone.`,\n\t\t\t\t\t\tbutton: \"Clear history\",\n\t\t\t\t\t},\n\t\t\t\t\t(result) => {\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsocket.emit(\"history:clear\", {\n\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tconst humanFriendlyChanTypeMap: Record<string, string> = {\n\t\tlobby: \"network\",\n\t\tchannel: \"channel\",\n\t\tquery: \"conversation\",\n\t};\n\n\t// We don't allow the muting of ChanType.SPECIAL channels\n\tconst mutableChanTypes = Object.keys(humanFriendlyChanTypeMap);\n\n\tif (mutableChanTypes.includes(channel.type)) {\n\t\tconst chanType = humanFriendlyChanTypeMap[channel.type];\n\n\t\titems.push({\n\t\t\tlabel: channel.muted ? `Unmute ${chanType}` : `Mute ${chanType}`,\n\t\t\ttype: \"item\",\n\t\t\tclass: \"mute\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"mute:change\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\tsetMutedTo: !channel.muted,\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// Add close menu item\n\titems.push({\n\t\tlabel: closeMap[channel.type],\n\t\ttype: \"item\",\n\t\tclass: \"close\",\n\t\taction() {\n\t\t\tcloseChannel();\n\t\t},\n\t});\n\n\treturn items;\n}\n\nexport function generateInlineChannelContextMenu(\n\tstore: TypedStore,\n\tchan: string,\n\tnetwork: ClientNetwork\n): ContextMenuItem[] {\n\tconst join = () => {\n\t\tconst channel = network.channels.find((c) => c.name === chan);\n\n\t\tif (channel) {\n\t\t\tswitchToChannel(channel);\n\t\t}\n\n\t\tif (store.state.activeChannel) {\n\t\t\tsocket.emit(\"input\", {\n\t\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\t\ttext: \"/join \" + chan,\n\t\t\t});\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Unable to join channel: activeChannel is undefined\");\n\t\t}\n\t};\n\n\tconst channel = network.channels.find((c) => c.name === chan);\n\n\tif (channel) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: \"Go to channel\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"chan\",\n\t\t\t\tlink: `/chan-${channel.id}`,\n\t\t\t},\n\t\t];\n\t}\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Join channel\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"join\",\n\t\t\taction: join,\n\t\t},\n\t];\n}\n\nexport function generateUserContextMenu(\n\tstore: TypedStore,\n\tchannel: ClientChan,\n\tnetwork: ClientNetwork,\n\tuser: Pick<ClientUser, \"nick\" | \"modes\">\n): ContextMenuItem[] {\n\tconst currentChannelUser: ClientUser | Record<string, never> = channel\n\t\t? channel.users.find((u) => u.nick === network.nick) || {}\n\t\t: {};\n\n\tconst whois = () => {\n\t\tconst chan = network.channels.find((c) => c.name === user.nick);\n\n\t\tif (chan) {\n\t\t\tswitchToChannel(chan);\n\t\t}\n\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: channel.id,\n\t\t\ttext: \"/whois \" + user.nick,\n\t\t});\n\t};\n\n\tconst items: ContextMenuItem[] = [\n\t\t{\n\t\t\tlabel: user.nick,\n\t\t\ttype: \"item\",\n\t\t\tclass: \"user\",\n\t\t\taction: whois,\n\t\t},\n\t\t{\n\t\t\ttype: \"divider\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"User information\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-whois\",\n\t\t\taction: whois,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Ignore user\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-ignore\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/ignore \" + user.nick,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Direct messages\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-query\",\n\t\t\taction() {\n\t\t\t\tconst chan = store.getters.findChannelOnCurrentNetwork(user.nick);\n\n\t\t\t\tif (chan) {\n\t\t\t\t\tswitchToChannel(chan);\n\t\t\t\t}\n\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/query \" + user.nick,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t];\n\n\t// Bail because we're in a query or we don't have a special mode.\n\tif (!currentChannelUser.modes || currentChannelUser.modes.length < 1) {\n\t\treturn items;\n\t}\n\n\t// Names of the standard modes we are able to change\n\tconst modeCharToName = {\n\t\t\"~\": \"owner\",\n\t\t\"&\": \"admin\",\n\t\t\"@\": \"operator\",\n\t\t\"%\": \"half-op\",\n\t\t\"+\": \"voice\",\n\t};\n\n\t// Labels for the mode changes.  For example .rev({mode: \"a\", symbol: \"&\"}) => 'Revoke admin (-a)'\n\tconst modeTextTemplate = {\n\t\trevoke(m: {symbol: string; mode: string}) {\n\t\t\tconst name = modeCharToName[m.symbol];\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst res = name ? `Revoke ${name} (-${m.mode})` : `Mode -${m.mode}`;\n\t\t\treturn res;\n\t\t},\n\t\tgive(m: {symbol: string; mode: string}) {\n\t\t\tconst name = modeCharToName[m.symbol];\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst res = name ? `Give ${name} (+${m.mode})` : `Mode +${m.mode}`;\n\t\t\treturn res;\n\t\t},\n\t};\n\n\tconst networkModeSymbols = network.serverOptions.PREFIX.symbols;\n\n\t/**\n\t * Determine whether the prefix of mode p1 has access to perform actions on p2.\n\t *\n\t * EXAMPLE:\n\t *    compare('@', '@') => true\n\t *    compare('&', '@') => true\n\t *    compare('+', '~') => false\n\t * @param {string} p1 The mode performing an action\n\t * @param {string} p2 The target mode\n\t *\n\t * @return {boolean} whether p1 can perform an action on p2\n\t */\n\tfunction compare(p1: string, p2: string): boolean {\n\t\t// The modes ~ and @ can perform actions on their own mode.  The others on modes below.\n\t\treturn \"~@\".indexOf(p1) > -1\n\t\t\t? networkModeSymbols.indexOf(p1) <= networkModeSymbols.indexOf(p2)\n\t\t\t: networkModeSymbols.indexOf(p1) < networkModeSymbols.indexOf(p2);\n\t}\n\n\tnetwork.serverOptions.PREFIX.prefix.forEach((mode) => {\n\t\tif (!compare(currentChannelUser.modes[0], mode.symbol)) {\n\t\t\t// Our highest mode is below the current mode.  Bail.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!user.modes.includes(mode.symbol)) {\n\t\t\t// The target doesn't already have this mode, therefore we can set it.\n\t\t\titems.push({\n\t\t\t\tlabel: modeTextTemplate.give(mode),\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-set-mode\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/mode +\" + mode.mode + \" \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\titems.push({\n\t\t\t\tlabel: modeTextTemplate.revoke(mode),\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-revoke-mode\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/mode -\" + mode.mode + \" \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n\n\t// Determine if we are half-op or op depending on the network modes so we can kick.\n\tif (!compare(networkModeSymbols.indexOf(\"%\") > -1 ? \"%\" : \"@\", currentChannelUser.modes[0])) {\n\t\t// Check if the target user has no mode or a mode lower than ours.\n\t\tif (user.modes.length === 0 || compare(currentChannelUser.modes[0], user.modes[0])) {\n\t\t\titems.push({\n\t\t\t\tlabel: \"Kick\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-kick\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/kick \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\treturn items;\n}\n","<template>\n\t<div\n\t\tv-if=\"isOpen\"\n\t\tid=\"context-menu-container\"\n\t\t:class=\"{passthrough}\"\n\t\t@click=\"containerClick\"\n\t\t@contextmenu.prevent=\"containerClick\"\n\t\t@keydown.exact.up.prevent=\"navigateMenu(-1)\"\n\t\t@keydown.exact.down.prevent=\"navigateMenu(1)\"\n\t\t@keydown.exact.tab.prevent=\"navigateMenu(1)\"\n\t\t@keydown.shift.tab.prevent=\"navigateMenu(-1)\"\n\t>\n\t\t<ul\n\t\t\tid=\"context-menu\"\n\t\t\tref=\"contextMenu\"\n\t\t\trole=\"menu\"\n\t\t\t:style=\"{\n\t\t\t\ttop: style.top + 'px',\n\t\t\t\tleft: style.left + 'px',\n\t\t\t}\"\n\t\t\ttabindex=\"-1\"\n\t\t\t@mouseleave=\"activeItem = -1\"\n\t\t\t@keydown.enter.prevent=\"clickActiveItem\"\n\t\t>\n\t\t\t<!-- TODO: type -->\n\t\t\t<template v-for=\"(item, id) of (items as any)\" :key=\"item.name\">\n\t\t\t\t<li\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'context-menu-' + item.type,\n\t\t\t\t\t\titem.class ? 'context-menu-' + item.class : null,\n\t\t\t\t\t\t{active: id === activeItem},\n\t\t\t\t\t]\"\n\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t@mouseenter=\"hoverItem(id)\"\n\t\t\t\t\t@click=\"clickItem(item)\"\n\t\t\t\t>\n\t\t\t\t\t{{ item.label }}\n\t\t\t\t</li>\n\t\t\t</template>\n\t\t</ul>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tgenerateUserContextMenu,\n\tgenerateChannelContextMenu,\n\tgenerateInlineChannelContextMenu,\n\tContextMenuItem,\n} from \"../js/helpers/contextMenu\";\nimport eventbus from \"../js/eventbus\";\nimport {defineComponent, nextTick, onMounted, onUnmounted, PropType, ref} from \"vue\";\nimport {ClientChan, ClientMessage, ClientNetwork, ClientUser} from \"../js/types\";\nimport {useStore} from \"../js/store\";\nimport {useRouter} from \"vue-router\";\n\nexport default defineComponent({\n\tname: \"ContextMenu\",\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: false,\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst router = useRouter();\n\n\t\tconst isOpen = ref(false);\n\t\tconst passthrough = ref(false);\n\n\t\tconst contextMenu = ref<HTMLUListElement | null>();\n\t\tconst previousActiveElement = ref<HTMLElement | null>();\n\t\tconst items = ref<ContextMenuItem[]>([]);\n\t\tconst activeItem = ref(-1);\n\t\tconst style = ref({\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t});\n\n\t\tconst close = () => {\n\t\t\tif (!isOpen.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisOpen.value = false;\n\t\t\titems.value = [];\n\n\t\t\tif (previousActiveElement.value) {\n\t\t\t\tpreviousActiveElement.value.focus();\n\t\t\t\tpreviousActiveElement.value = null;\n\t\t\t}\n\t\t};\n\n\t\tconst enablePointerEvents = () => {\n\t\t\tpassthrough.value = false;\n\t\t\tdocument.body.removeEventListener(\"pointerup\", enablePointerEvents);\n\t\t};\n\n\t\tconst containerClick = (event: MouseEvent) => {\n\t\t\tif (event.currentTarget === event.target) {\n\t\t\t\tclose();\n\t\t\t}\n\t\t};\n\n\t\tconst positionContextMenu = (event: MouseEvent) => {\n\t\t\tconst element = event.target as HTMLElement;\n\n\t\t\tif (!contextMenu.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuWidth = contextMenu.value?.offsetWidth;\n\t\t\tconst menuHeight = contextMenu.value?.offsetHeight;\n\n\t\t\tif (element && element.classList.contains(\"menu\")) {\n\t\t\t\treturn {\n\t\t\t\t\tleft: element.getBoundingClientRect().left - (menuWidth - element.offsetWidth),\n\t\t\t\t\ttop: element.getBoundingClientRect().top + element.offsetHeight,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst offset = {left: event.pageX, top: event.pageY};\n\n\t\t\tif (window.innerWidth - offset.left < menuWidth) {\n\t\t\t\toffset.left = window.innerWidth - menuWidth;\n\t\t\t}\n\n\t\t\tif (window.innerHeight - offset.top < menuHeight) {\n\t\t\t\toffset.top = window.innerHeight - menuHeight;\n\t\t\t}\n\n\t\t\treturn offset;\n\t\t};\n\n\t\tconst hoverItem = (id: number) => {\n\t\t\tactiveItem.value = id;\n\t\t};\n\n\t\tconst clickItem = (item: ContextMenuItem) => {\n\t\t\tclose();\n\n\t\t\tif (\"action\" in item && item.action) {\n\t\t\t\titem.action();\n\t\t\t} else if (\"link\" in item && item.link) {\n\t\t\t\trouter.push(item.link).catch(() => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(\"Failed to navigate to\", item.link);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst clickActiveItem = () => {\n\t\t\tif (items.value[activeItem.value]) {\n\t\t\t\tclickItem(items.value[activeItem.value]);\n\t\t\t}\n\t\t};\n\n\t\tconst open = (event: MouseEvent, newItems: ContextMenuItem[]) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tpreviousActiveElement.value = document.activeElement as HTMLElement;\n\t\t\titems.value = newItems;\n\t\t\tactiveItem.value = 0;\n\t\t\tisOpen.value = true;\n\n\t\t\t// Position the menu and set the focus on the first item after it's size has updated\n\t\t\tnextTick(() => {\n\t\t\t\tconst pos = positionContextMenu(event);\n\n\t\t\t\tif (!pos) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstyle.value.left = pos.left;\n\t\t\t\tstyle.value.top = pos.top;\n\t\t\t\tcontextMenu.value?.focus();\n\t\t\t}).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\t\t};\n\n\t\tconst openChannelContextMenu = (data: {\n\t\t\tevent: MouseEvent;\n\t\t\tchannel: ClientChan;\n\t\t\tnetwork: ClientNetwork;\n\t\t}) => {\n\t\t\tif (data.event.type === \"contextmenu\") {\n\t\t\t\t// Pass through all pointer events to allow the network list's\n\t\t\t\t// dragging events to continue triggering.\n\t\t\t\tpassthrough.value = true;\n\t\t\t\tdocument.body.addEventListener(\"pointerup\", enablePointerEvents, {\n\t\t\t\t\tpassive: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst newItems = generateChannelContextMenu(data.channel, data.network);\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst openInlineChannelContextMenu = (data: {channel: string; event: MouseEvent}) => {\n\t\t\tconst {network} = store.state.activeChannel;\n\t\t\tconst newItems = generateInlineChannelContextMenu(store, data.channel, network);\n\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst openUserContextMenu = (data: {\n\t\t\tuser: Pick<ClientUser, \"nick\" | \"modes\">;\n\t\t\tevent: MouseEvent;\n\t\t}) => {\n\t\t\tconst {network, channel} = store.state.activeChannel;\n\n\t\t\tconst newItems = generateUserContextMenu(\n\t\t\t\tstore,\n\t\t\t\tchannel,\n\t\t\t\tnetwork,\n\t\t\t\tchannel.users.find((u) => u.nick === data.user.nick) || {\n\t\t\t\t\tnick: data.user.nick,\n\t\t\t\t\tmodes: [],\n\t\t\t\t}\n\t\t\t);\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst navigateMenu = (direction: number) => {\n\t\t\tlet currentIndex = activeItem.value;\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\tconst nextItem = items.value[currentIndex];\n\n\t\t\t// If the next item we would select is a divider, skip over it\n\t\t\tif (nextItem && \"type\" in nextItem && nextItem.type === \"divider\") {\n\t\t\t\tcurrentIndex += direction;\n\t\t\t}\n\n\t\t\tif (currentIndex < 0) {\n\t\t\t\tcurrentIndex += items.value.length;\n\t\t\t}\n\n\t\t\tif (currentIndex > items.value.length - 1) {\n\t\t\t\tcurrentIndex -= items.value.length;\n\t\t\t}\n\n\t\t\tactiveItem.value = currentIndex;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", close);\n\t\t\teventbus.on(\"contextmenu:cancel\", close);\n\t\t\teventbus.on(\"contextmenu:user\", openUserContextMenu);\n\t\t\teventbus.on(\"contextmenu:channel\", openChannelContextMenu);\n\t\t\teventbus.on(\"contextmenu:inline-channel\", openInlineChannelContextMenu);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", close);\n\t\t\teventbus.off(\"contextmenu:cancel\", close);\n\t\t\teventbus.off(\"contextmenu:user\", openUserContextMenu);\n\t\t\teventbus.off(\"contextmenu:channel\", openChannelContextMenu);\n\t\t\teventbus.off(\"contextmenu:inline-channel\", openInlineChannelContextMenu);\n\n\t\t\tclose();\n\t\t});\n\n\t\treturn {\n\t\t\tisOpen,\n\t\t\titems,\n\t\t\tactiveItem,\n\t\t\tstyle,\n\t\t\tcontextMenu,\n\t\t\tpassthrough,\n\t\t\tclose,\n\t\t\tcontainerClick,\n\t\t\tnavigateMenu,\n\t\t\thoverItem,\n\t\t\tclickItem,\n\t\t\tclickActiveItem,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ContextMenu.vue?vue&type=template&id=7e7c47de&ts=true\"\nimport script from \"./ContextMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./ContextMenu.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"confirm-dialog-overlay\" :class=\"{opened: !!data}\">\n\t\t<div v-if=\"data !== null\" id=\"confirm-dialog\">\n\t\t\t<div class=\"confirm-text\">\n\t\t\t\t<div class=\"confirm-text-title\">{{ data?.title }}</div>\n\t\t\t\t<p>{{ data?.text }}</p>\n\t\t\t</div>\n\t\t\t<div class=\"confirm-buttons\">\n\t\t\t\t<button class=\"btn btn-cancel\" @click=\"close(false)\">Cancel</button>\n\t\t\t\t<button class=\"btn btn-danger\" @click=\"close(true)\">{{ data?.button }}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n#confirm-dialog {\n\tbackground: var(--body-bg-color);\n\tcolor: #fff;\n\tmargin: 10px;\n\tborder-radius: 5px;\n\tmax-width: 500px;\n}\n\n#confirm-dialog .confirm-text {\n\tpadding: 15px;\n\tuser-select: text;\n}\n\n#confirm-dialog .confirm-text-title {\n\tfont-size: 20px;\n\tfont-weight: 700;\n\tmargin-bottom: 10px;\n}\n\n#confirm-dialog .confirm-buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding: 15px;\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n#confirm-dialog .confirm-buttons .btn {\n\tmargin-bottom: 0;\n\tmargin-left: 10px;\n}\n\n#confirm-dialog .confirm-buttons .btn-cancel {\n\tborder-color: transparent;\n}\n</style>\n\n<script lang=\"ts\">\nimport eventbus from \"../js/eventbus\";\nimport {defineComponent, onMounted, onUnmounted, ref} from \"vue\";\n\ntype ConfirmDialogData = {\n\ttitle: string;\n\ttext: string;\n\tbutton: string;\n};\n\ntype ConfirmDialogCallback = {\n\t(confirmed: boolean): void;\n};\n\nexport default defineComponent({\n\tname: \"ConfirmDialog\",\n\tsetup() {\n\t\tconst data = ref<ConfirmDialogData>();\n\t\tconst callback = ref<ConfirmDialogCallback>();\n\n\t\tconst open = (incoming: ConfirmDialogData, cb: ConfirmDialogCallback) => {\n\t\t\tdata.value = incoming;\n\t\t\tcallback.value = cb;\n\t\t};\n\n\t\tconst close = (result: boolean) => {\n\t\t\tdata.value = undefined;\n\n\t\t\tif (callback.value) {\n\t\t\t\tcallback.value(!!result);\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", close);\n\t\t\teventbus.on(\"confirm-dialog\", open);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", close);\n\t\t\teventbus.off(\"confirm-dialog\", open);\n\t\t});\n\n\t\treturn {\n\t\t\tdata,\n\t\t\tclose,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=8ac89b86&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ConfirmDialog.vue?vue&type=style&index=0&id=8ac89b86&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div\n\t\tv-if=\"isOpen\"\n\t\tid=\"mentions-popup-container\"\n\t\t@click=\"containerClick\"\n\t\t@contextmenu=\"containerClick\"\n\t>\n\t\t<div class=\"mentions-popup\">\n\t\t\t<div class=\"mentions-popup-title\">\n\t\t\t\tRecent mentions\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"resolvedMessages.length\"\n\t\t\t\t\tclass=\"btn dismiss-all-mentions\"\n\t\t\t\t\t@click=\"dismissAllMentions()\"\n\t\t\t\t>\n\t\t\t\t\tDismiss all\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<template v-if=\"resolvedMessages.length === 0\">\n\t\t\t\t<p v-if=\"isLoading\">Loading…</p>\n\t\t\t\t<p v-else>You have no recent mentions.</p>\n\t\t\t</template>\n\t\t\t<template v-for=\"message in resolvedMessages\" v-else :key=\"message.msgId\">\n\t\t\t\t<div :class=\"['msg', message.type]\">\n\t\t\t\t\t<div class=\"mentions-info\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class=\"from\">\n\t\t\t\t\t\t\t\t<Username :user=\"(message.from as any)\" />\n\t\t\t\t\t\t\t\t<template v-if=\"message.channel\">\n\t\t\t\t\t\t\t\t\tin {{ message.channel.channel.name }} on\n\t\t\t\t\t\t\t\t\t{{ message.channel.network.name }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else> in unknown channel </template> </span\n\t\t\t\t\t\t\t>{{ ` ` }}\n\t\t\t\t\t\t\t<span :title=\"message.localetime\" class=\"time\">\n\t\t\t\t\t\t\t\t{{ messageTime(message.time.toString()) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"close-tooltip tooltipped tooltipped-w\"\n\t\t\t\t\t\t\t\taria-label=\"Dismiss this mention\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"msg-dismiss\"\n\t\t\t\t\t\t\t\t\taria-label=\"Dismiss this mention\"\n\t\t\t\t\t\t\t\t\t@click=\"dismissMention(message)\"\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"content\" dir=\"auto\">\n\t\t\t\t\t\t<ParsedMessage :message=\"(message as any)\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n#mentions-popup-container {\n\tz-index: 8;\n}\n\n.mentions-popup {\n\tbackground-color: var(--window-bg-color);\n\tposition: absolute;\n\twidth: 400px;\n\tright: 80px;\n\ttop: 55px;\n\tmax-height: 400px;\n\toverflow-y: auto;\n\tz-index: 2;\n\tpadding: 10px;\n}\n\n.mentions-popup > .mentions-popup-title {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-bottom: 10px;\n\tfont-size: 20px;\n}\n\n.mentions-popup .mentions-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.mentions-popup .msg {\n\tmargin-bottom: 15px;\n\tuser-select: text;\n}\n\n.mentions-popup .msg:last-child {\n\tmargin-bottom: 0;\n}\n\n.mentions-popup .msg .content {\n\tbackground-color: var(--highlight-bg-color);\n\tborder-radius: 5px;\n\tpadding: 6px;\n\tmargin-top: 2px;\n\tword-wrap: break-word;\n\tword-break: break-word; /* Webkit-specific */\n}\n\n.mentions-popup .msg-dismiss::before {\n\tfont-size: 20px;\n\tfont-weight: normal;\n\tdisplay: inline-block;\n\tline-height: 16px;\n\ttext-align: center;\n\tcontent: \"×\";\n}\n\n.mentions-popup .msg-dismiss:hover {\n\tcolor: var(--link-color);\n}\n\n.mentions-popup .dismiss-all-mentions {\n\tmargin: 0;\n\tpadding: 4px 6px;\n}\n\n@media (min-height: 500px) {\n\t.mentions-popup {\n\t\tmax-height: 60vh;\n\t}\n}\n\n@media (max-width: 768px) {\n\t.mentions-popup {\n\t\tborder-radius: 0;\n\t\tborder: 0;\n\t\tbox-shadow: none;\n\t\twidth: 100%;\n\t\tmax-height: none;\n\t\tright: 0;\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\ttop: 45px; /* header height */\n\t}\n}\n</style>\n\n<script lang=\"ts\">\nimport Username from \"./Username.vue\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport socket from \"../js/socket\";\nimport eventbus from \"../js/eventbus\";\nimport localetime from \"../js/helpers/localetime\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\nimport {computed, watch, defineComponent, ref, onMounted, onUnmounted} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientMention} from \"../js/types\";\n\ndayjs.extend(relativeTime);\n\nexport default defineComponent({\n\tname: \"Mentions\",\n\tcomponents: {\n\t\tUsername,\n\t\tParsedMessage,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst isOpen = ref(false);\n\t\tconst isLoading = ref(false);\n\t\tconst resolvedMessages = computed(() => {\n\t\t\tconst messages = store.state.mentions.slice().reverse();\n\n\t\t\tfor (const message of messages) {\n\t\t\t\tmessage.localetime = localetime(message.time);\n\t\t\t\tmessage.channel = store.getters.findChannel(message.chanId);\n\t\t\t}\n\n\t\t\treturn messages.filter((message) => !message.channel?.channel.muted);\n\t\t});\n\n\t\twatch(\n\t\t\t() => store.state.mentions,\n\t\t\t() => {\n\t\t\t\tisLoading.value = false;\n\t\t\t}\n\t\t);\n\n\t\tconst messageTime = (time: string) => {\n\t\t\treturn dayjs(time).fromNow();\n\t\t};\n\n\t\tconst dismissMention = (message: ClientMention) => {\n\t\t\tstore.state.mentions.splice(\n\t\t\t\tstore.state.mentions.findIndex((m) => m.msgId === message.msgId),\n\t\t\t\t1\n\t\t\t);\n\n\t\t\tsocket.emit(\"mentions:dismiss\", message.msgId);\n\t\t};\n\n\t\tconst dismissAllMentions = () => {\n\t\t\tstore.state.mentions = [];\n\t\t\tsocket.emit(\"mentions:dismiss_all\");\n\t\t};\n\n\t\tconst containerClick = (event: Event) => {\n\t\t\tif (event.currentTarget === event.target) {\n\t\t\t\tisOpen.value = false;\n\t\t\t}\n\t\t};\n\n\t\tconst togglePopup = () => {\n\t\t\tisOpen.value = !isOpen.value;\n\n\t\t\tif (isOpen.value) {\n\t\t\t\tisLoading.value = true;\n\t\t\t\tsocket.emit(\"mentions:get\");\n\t\t\t}\n\t\t};\n\n\t\tconst closePopup = () => {\n\t\t\tisOpen.value = false;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"mentions:toggle\", togglePopup);\n\t\t\teventbus.on(\"escapekey\", closePopup);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"mentions:toggle\", togglePopup);\n\t\t\teventbus.off(\"escapekey\", closePopup);\n\t\t});\n\n\t\treturn {\n\t\t\tisOpen,\n\t\t\tisLoading,\n\t\t\tresolvedMessages,\n\t\t\tmessageTime,\n\t\t\tdismissMention,\n\t\t\tdismissAllMentions,\n\t\t\tcontainerClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Mentions.vue?vue&type=template&id=66358ddb&ts=true\"\nimport script from \"./Mentions.vue?vue&type=script&lang=ts\"\nexport * from \"./Mentions.vue?vue&type=script&lang=ts\"\n\nimport \"./Mentions.vue?vue&type=style&index=0&id=66358ddb&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=6141956a&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage v-if=\"message.self\" :network=\"network\" :message=\"message\" />\n\t\t<template v-else>\n\t\t\t<Username :user=\"message.from\" />\n\t\t\tis away\n\t\t\t<i class=\"away-message\">(<ParsedMessage :network=\"network\" :message=\"message\" />)</i>\n\t\t</template>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeAway\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./away.vue?vue&type=template&id=37f2356a&ts=true\"\nimport script from \"./away.vue?vue&type=script&lang=ts\"\nexport * from \"./away.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage v-if=\"message.self\" :network=\"network\" :message=\"message\" />\n\t\t<template v-else>\n\t\t\t<Username :user=\"message.from\" />\n\t\t\tis back\n\t\t</template>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeBack\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./back.vue?vue&type=template&id=0565b0a1&ts=true\"\nimport script from \"./back.vue?vue&type=script&lang=ts\"\nexport * from \"./back.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\thas changed\n\t\t<span v-if=\"message.new_ident\"\n\t\t\t>username to <b>{{ message.new_ident }}</b></span\n\t\t>\n\t\t<span v-if=\"message.new_host\"\n\t\t\t>hostname to\n\t\t\t<i class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"message.new_host\" /></i\n\t\t></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeChangeHost\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./chghost.vue?vue&type=template&id=043797b3&ts=true\"\nimport script from \"./chghost.vue?vue&type=script&lang=ts\"\nexport * from \"./chghost.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t{{ `&#32;` }}<span class=\"ctcp-message\"><ParsedMessage :text=\"message.ctcpMessage\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeCTCP\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./ctcp.vue?vue&type=template&id=ab415664&ts=true\"\nimport script from \"./ctcp.vue?vue&type=script&lang=ts\"\nexport * from \"./ctcp.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tsent a <abbr title=\"Client-to-client protocol\">CTCP</abbr> request:\n\t\t<span class=\"ctcp-message\"><ParsedMessage :text=\"message.ctcpMessage\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeRequestCTCP\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./ctcp_request.vue?vue&type=template&id=c34ff826&ts=true\"\nimport script from \"./ctcp_request.vue?vue&type=script&lang=ts\"\nexport * from \"./ctcp_request.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage :network=\"network\" :message=\"message\" :text=\"errorMessage\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageTypeError\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst errorMessage = computed(() => {\n\t\t\tswitch (props.message.error) {\n\t\t\t\tcase \"bad_channel_key\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Bad channel key.`;\n\t\t\t\tcase \"banned_from_channel\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - You have been banned from the channel.`;\n\t\t\t\tcase \"cannot_send_to_channel\":\n\t\t\t\t\treturn `Cannot send to channel ${props.message.channel}`;\n\t\t\t\tcase \"channel_is_full\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Channel is full.`;\n\t\t\t\tcase \"chanop_privs_needed\":\n\t\t\t\t\treturn \"Cannot perform action: You're not a channel operator.\";\n\t\t\t\tcase \"invite_only_channel\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Channel is invite only.`;\n\t\t\t\tcase \"no_such_nick\":\n\t\t\t\t\treturn `User ${props.message.nick} hasn't logged in or does not exist.`;\n\t\t\t\tcase \"not_on_channel\":\n\t\t\t\t\treturn \"Cannot perform action: You're not on the channel.\";\n\t\t\t\tcase \"password_mismatch\":\n\t\t\t\t\treturn \"Password mismatch.\";\n\t\t\t\tcase \"too_many_channels\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - You've already reached the maximum number of channels allowed.`;\n\t\t\t\tcase \"unknown_command\":\n\t\t\t\t\treturn `Unknown command: ${props.message.command}`;\n\t\t\t\tcase \"user_not_in_channel\":\n\t\t\t\t\treturn `User ${props.message.nick} is not on the channel.`;\n\t\t\t\tcase \"user_on_channel\":\n\t\t\t\t\treturn `User ${props.message.nick} is already on the channel.`;\n\t\t\t\tdefault:\n\t\t\t\t\tif (props.message.reason) {\n\t\t\t\t\t\treturn `${props.message.reason} (${props.message.error})`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn props.message.error;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\terrorMessage,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./error.vue?vue&type=template&id=169919be&ts=true\"\nimport script from \"./error.vue?vue&type=script&lang=ts\"\nexport * from \"./error.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tinvited\n\t\t<span v-if=\"message.invitedYou\">you</span>\n\t\t<Username v-else :user=\"message.target\" />\n\t\tto <ParsedMessage :network=\"network\" :text=\"message.channel\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeInvite\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./invite.vue?vue&type=template&id=fd8bd00a&ts=true\"\nimport script from \"./invite.vue?vue&type=script&lang=ts\"\nexport * from \"./invite.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\">&#32;(<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i>\n\t\t<template v-if=\"message.account\">\n\t\t\t<i class=\"account\">&#32;[{{ message.account }}]</i>\n\t\t</template>\n\t\t<template v-if=\"message.gecos\">\n\t\t\t<i class=\"realname\">&#32;({{ message.gecos }})</i>\n\t\t</template>\n\t\thas joined the channel\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeJoin\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./join.vue?vue&type=template&id=c3614ec6&ts=true\"\nimport script from \"./join.vue?vue&type=script&lang=ts\"\nexport * from \"./join.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\thas kicked\n\t\t<Username :user=\"message.target\" />\n\t\t<i v-if=\"message.text\" class=\"part-reason\"\n\t\t\t>&#32;(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeKick\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./kick.vue?vue&type=template&id=7faf3aa9&ts=true\"\nimport script from \"./kick.vue?vue&type=script&lang=ts\"\nexport * from \"./kick.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tsets mode\n\t\t<ParsedMessage :message=\"message\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeMode\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode.vue?vue&type=template&id=3559c152&ts=true\"\nimport script from \"./mode.vue?vue&type=script&lang=ts\"\nexport * from \"./mode.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tChannel mode is <b>{{ message.text }}</b>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageChannelMode\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode_channel.vue?vue&type=template&id=3108ddfa&ts=true\"\nimport script from \"./mode_channel.vue?vue&type=script&lang=ts\"\nexport * from \"./mode_channel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tYour user mode is <b>{{ message.raw_modes }}</b>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageChannelMode\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode_user.vue?vue&type=template&id=0ca28805&ts=true\"\nimport script from \"./mode_user.vue?vue&type=script&lang=ts\"\nexport * from \"./mode_user.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<span class=\"text\"><ParsedMessage :network=\"network\" :text=\"cleanText\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeMonospaceBlock\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst cleanText = computed(() => {\n\t\t\tlet lines = props.message.text.split(\"\\n\");\n\n\t\t\t// If all non-empty lines of the MOTD start with a hyphen (which is common\n\t\t\t// across MOTDs), remove all the leading hyphens.\n\t\t\tif (lines.every((line) => line === \"\" || line[0] === \"-\")) {\n\t\t\t\tlines = lines.map((line) => line.substring(2));\n\t\t\t}\n\n\t\t\t// Remove empty lines around the MOTD (but not within it)\n\t\t\treturn lines\n\t\t\t\t.map((line) => line.replace(/\\s*$/, \"\"))\n\t\t\t\t.join(\"\\n\")\n\t\t\t\t.replace(/^[\\r\\n]+|[\\r\\n]+$/g, \"\");\n\t\t});\n\n\t\treturn {\n\t\t\tcleanText,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./monospace_block.vue?vue&type=template&id=b335516c&ts=true\"\nimport script from \"./monospace_block.vue?vue&type=script&lang=ts\"\nexport * from \"./monospace_block.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tis now known as\n\t\t<Username :user=\"{nick: message.new_nick, mode: message.from.mode}\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeNick\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./nick.vue?vue&type=template&id=1bd5b554&ts=true\"\nimport script from \"./nick.vue?vue&type=script&lang=ts\"\nexport * from \"./nick.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\"> (<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i> has\n\t\tleft the channel\n\t\t<i v-if=\"message.text\" class=\"part-reason\"\n\t\t\t>(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypePart\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./part.vue?vue&type=template&id=5211b675&ts=true\"\nimport script from \"./part.vue?vue&type=script&lang=ts\"\nexport * from \"./part.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\"> (<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i> has\n\t\tquit\n\t\t<i v-if=\"message.text\" class=\"quit-reason\"\n\t\t\t>(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientMessage, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeQuit\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./quit.vue?vue&type=template&id=4ba7f0ef&ts=true\"\nimport script from \"./quit.vue?vue&type=script&lang=ts\"\nexport * from \"./quit.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">{{ message.text }}</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageTypeRaw\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./raw.vue?vue&type=template&id=5174cd16&ts=true\"\nimport script from \"./raw.vue?vue&type=script&lang=ts\"\nexport * from \"./raw.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<template v-if=\"message.from && message.from.nick\"\n\t\t\t><Username :user=\"message.from\" /> has changed the topic to:\n\t\t</template>\n\t\t<template v-else>The topic is: </template>\n\t\t<span v-if=\"message.text\" class=\"new-topic\"\n\t\t\t><ParsedMessage :network=\"network\" :message=\"message\"\n\t\t/></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientMessage, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeTopic\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./topic.vue?vue&type=template&id=fd1370ea&ts=true\"\nimport script from \"./topic.vue?vue&type=script&lang=ts\"\nexport * from \"./topic.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tTopic set by\n\t\t<Username :user=\"message.from\" />\n\t\ton {{ messageTimeLocale }}\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport localetime from \"../../js/helpers/localetime\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeTopicSetBy\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst messageTimeLocale = computed(() => localetime(props.message.when));\n\n\t\treturn {\n\t\t\tmessageTimeLocale,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./topic_set_by.vue?vue&type=template&id=1224346e&ts=true\"\nimport script from \"./topic_set_by.vue?vue&type=script&lang=ts\"\nexport * from \"./topic_set_by.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<p>\n\t\t\t<Username :user=\"{nick: message.whois.nick}\" />\n\t\t\t<span v-if=\"message.whois.whowas\"> is offline, last information:</span>\n\t\t</p>\n\n\t\t<dl class=\"whois\">\n\t\t\t<template v-if=\"message.whois.account\">\n\t\t\t\t<dt>Logged in as:</dt>\n\t\t\t\t<dd>{{ message.whois.account }}</dd>\n\t\t\t</template>\n\n\t\t\t<dt>Host mask:</dt>\n\t\t\t<dd class=\"hostmask\">\n\t\t\t\t<ParsedMessage\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:text=\"message.whois.ident + '@' + message.whois.hostname\"\n\t\t\t\t/>\n\t\t\t</dd>\n\n\t\t\t<template v-if=\"message.whois.actual_hostname\">\n\t\t\t\t<dt>Actual host:</dt>\n\t\t\t\t<dd class=\"hostmask\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t:href=\"'https://ipinfo.io/' + message.whois.actual_ip\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t>{{ message.whois.actual_ip }}</a\n\t\t\t\t\t>\n\t\t\t\t\t<i v-if=\"message.whois.actual_hostname != message.whois.actual_ip\">\n\t\t\t\t\t\t({{ message.whois.actual_hostname }})</i\n\t\t\t\t\t>\n\t\t\t\t</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.real_name\">\n\t\t\t\t<dt>Real name:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.real_name\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.registered_nick\">\n\t\t\t\t<dt>Registered nick:</dt>\n\t\t\t\t<dd>{{ message.whois.registered_nick }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.channels\">\n\t\t\t\t<dt>Channels:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.channels\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.modes\">\n\t\t\t\t<dt>Modes:</dt>\n\t\t\t\t<dd>{{ message.whois.modes }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.special\">\n\t\t\t\t<template v-for=\"special in message.whois.special\" :key=\"special\">\n\t\t\t\t\t<dt>Special:</dt>\n\t\t\t\t\t<dd>{{ special }}</dd>\n\t\t\t\t</template>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.operator\">\n\t\t\t\t<dt>Operator:</dt>\n\t\t\t\t<dd>{{ message.whois.operator }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.helpop\">\n\t\t\t\t<dt>Available for help:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.bot\">\n\t\t\t\t<dt>Is a bot:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.away\">\n\t\t\t\t<dt>Away:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.away\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.secure\">\n\t\t\t\t<dt>Secure connection:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.certfp\">\n\t\t\t\t<dt>Certificate:</dt>\n\t\t\t\t<dd>{{ message.whois.certfp }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.server\">\n\t\t\t\t<dt>Connected to:</dt>\n\t\t\t\t<dd>\n\t\t\t\t\t{{ message.whois.server }} <i>({{ message.whois.server_info }})</i>\n\t\t\t\t</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.logonTime\">\n\t\t\t\t<dt>Connected at:</dt>\n\t\t\t\t<dd>{{ localetime(message.whois.logonTime) }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.idle\">\n\t\t\t\t<dt>Idle since:</dt>\n\t\t\t\t<dd>{{ localetime(message.whois.idleTime) }}</dd>\n\t\t\t</template>\n\t\t</dl>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeWhois\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime: (date: Date) => localetime(date),\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./whois.vue?vue&type=template&id=2a3c4c38&ts=true\"\nimport script from \"./whois.vue?vue&type=script&lang=ts\"\nexport * from \"./whois.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Styling control codes\nconst BOLD = \"\\x02\";\nconst COLOR = \"\\x03\";\nconst HEX_COLOR = \"\\x04\";\nconst RESET = \"\\x0f\";\nconst REVERSE = \"\\x16\";\nconst ITALIC = \"\\x1d\";\nconst UNDERLINE = \"\\x1f\";\nconst STRIKETHROUGH = \"\\x1e\";\nconst MONOSPACE = \"\\x11\";\n\nexport type ParsedStyle = {\n\tbold?: boolean;\n\ttextColor?: string;\n\tbgColor?: string;\n\thexColor?: string;\n\thexBgColor?: string;\n\titalic?: boolean;\n\tunderline?: boolean;\n\tstrikethrough?: boolean;\n\tmonospace?: boolean;\n\ttext: string;\n\tstart: number;\n\tend: number;\n};\n\n// Color code matcher, with format `XX,YY` where both `XX` and `YY` are\n// integers, `XX` is the text color and `YY` is an optional background color.\nconst colorRx = /^(\\d{1,2})(?:,(\\d{1,2}))?/;\n\n// 6-char Hex color code matcher\nconst hexColorRx = /^([0-9a-f]{6})(?:,([0-9a-f]{6}))?/i;\n\n// Represents all other control codes that to be ignored/filtered from the text\n// This regex allows line feed character\nconst controlCodesRx = /[\\u0000-\\u0009\\u000B-\\u001F]/g;\n\n// Converts a given text into an array of objects, each of them representing a\n// similarly styled section of the text. Each object carries the `text`, style\n// information (`bold`, `textColor`, `bgcolor`, `italic`,\n// `underline`, `strikethrough`, `monospace`), and `start`/`end` cursors.\nfunction parseStyle(text: string) {\n\tconst result: ParsedStyle[] = [];\n\tlet start = 0;\n\tlet position = 0;\n\n\t// At any given time, these carry style information since last time a styling\n\t// control code was met.\n\tlet colorCodes,\n\t\tbold,\n\t\ttextColor,\n\t\tbgColor,\n\t\thexColor,\n\t\thexBgColor,\n\t\titalic,\n\t\tunderline,\n\t\tstrikethrough,\n\t\tmonospace;\n\n\tconst resetStyle = () => {\n\t\tbold = false;\n\t\ttextColor = undefined;\n\t\tbgColor = undefined;\n\t\thexColor = undefined;\n\t\thexBgColor = undefined;\n\t\titalic = false;\n\t\tunderline = false;\n\t\tstrikethrough = false;\n\t\tmonospace = false;\n\t};\n\n\tresetStyle();\n\n\t// When called, this \"closes\" the current fragment by adding an entry to the\n\t// `result` array using the styling information set last time a control code\n\t// was met.\n\tconst emitFragment = () => {\n\t\t// Uses the text fragment starting from the last control code position up to\n\t\t// the current position\n\t\tconst textPart = text.slice(start, position);\n\n\t\t// Filters out all non-style related control codes present in this text\n\t\tconst processedText = textPart.replace(controlCodesRx, \" \");\n\n\t\tif (processedText.length) {\n\t\t\t// Current fragment starts where the previous one ends, or at 0 if none\n\t\t\tconst fragmentStart = result.length ? result[result.length - 1].end : 0;\n\n\t\t\tresult.push({\n\t\t\t\tbold,\n\t\t\t\ttextColor,\n\t\t\t\tbgColor,\n\t\t\t\thexColor,\n\t\t\t\thexBgColor,\n\t\t\t\titalic,\n\t\t\t\tunderline,\n\t\t\t\tstrikethrough,\n\t\t\t\tmonospace,\n\t\t\t\ttext: processedText,\n\t\t\t\tstart: fragmentStart,\n\t\t\t\tend: fragmentStart + processedText.length,\n\t\t\t});\n\t\t}\n\n\t\t// Now that a fragment has been \"closed\", the next one will start after that\n\t\tstart = position + 1;\n\t};\n\n\t// This loop goes through each character of the given text one by one by\n\t// bumping the `position` cursor. Every time a new special \"styling\" character\n\t// is met, an object gets created (with `emitFragment()`)information on text\n\t// encountered since the previous styling character.\n\twhile (position < text.length) {\n\t\tswitch (text[position]) {\n\t\t\tcase RESET:\n\t\t\t\temitFragment();\n\t\t\t\tresetStyle();\n\t\t\t\tbreak;\n\n\t\t\t// Meeting a BOLD character means that the ongoing text is either going to\n\t\t\t// be in bold or that the previous one was in bold and the following one\n\t\t\t// must be reset.\n\t\t\t// This same behavior applies to COLOR, REVERSE, ITALIC, and UNDERLINE.\n\t\t\tcase BOLD:\n\t\t\t\temitFragment();\n\t\t\t\tbold = !bold;\n\t\t\t\tbreak;\n\n\t\t\tcase COLOR:\n\t\t\t\temitFragment();\n\n\t\t\t\t// Go one step further to find the corresponding color\n\t\t\t\tcolorCodes = text.slice(position + 1).match(colorRx);\n\n\t\t\t\tif (colorCodes) {\n\t\t\t\t\ttextColor = Number(colorCodes[1]);\n\n\t\t\t\t\tif (colorCodes[2]) {\n\t\t\t\t\t\tbgColor = Number(colorCodes[2]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Color code length is > 1, so bump the current position cursor by as\n\t\t\t\t\t// much (and reset the start cursor for the current text block as well)\n\t\t\t\t\tposition += colorCodes[0].length;\n\t\t\t\t\tstart = position + 1;\n\t\t\t\t} else {\n\t\t\t\t\t// If no color codes were found, toggles back to no colors (like BOLD).\n\t\t\t\t\ttextColor = undefined;\n\t\t\t\t\tbgColor = undefined;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase HEX_COLOR:\n\t\t\t\temitFragment();\n\n\t\t\t\tcolorCodes = text.slice(position + 1).match(hexColorRx);\n\n\t\t\t\tif (colorCodes) {\n\t\t\t\t\thexColor = colorCodes[1].toUpperCase();\n\n\t\t\t\t\tif (colorCodes[2]) {\n\t\t\t\t\t\thexBgColor = colorCodes[2].toUpperCase();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Color code length is > 1, so bump the current position cursor by as\n\t\t\t\t\t// much (and reset the start cursor for the current text block as well)\n\t\t\t\t\tposition += colorCodes[0].length;\n\t\t\t\t\tstart = position + 1;\n\t\t\t\t} else {\n\t\t\t\t\t// If no color codes were found, toggles back to no colors (like BOLD).\n\t\t\t\t\thexColor = undefined;\n\t\t\t\t\thexBgColor = undefined;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase REVERSE: {\n\t\t\t\temitFragment();\n\t\t\t\tconst tmp = bgColor;\n\t\t\t\tbgColor = textColor;\n\t\t\t\ttextColor = tmp;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase ITALIC:\n\t\t\t\temitFragment();\n\t\t\t\titalic = !italic;\n\t\t\t\tbreak;\n\n\t\t\tcase UNDERLINE:\n\t\t\t\temitFragment();\n\t\t\t\tunderline = !underline;\n\t\t\t\tbreak;\n\n\t\t\tcase STRIKETHROUGH:\n\t\t\t\temitFragment();\n\t\t\t\tstrikethrough = !strikethrough;\n\t\t\t\tbreak;\n\n\t\t\tcase MONOSPACE:\n\t\t\t\temitFragment();\n\t\t\t\tmonospace = !monospace;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Evaluate the next character at the next iteration\n\t\tposition += 1;\n\t}\n\n\t// The entire text has been parsed, so we finalize the current text fragment.\n\temitFragment();\n\n\treturn result;\n}\n\nconst properties = [\n\t\"bold\",\n\t\"textColor\",\n\t\"bgColor\",\n\t\"hexColor\",\n\t\"hexBgColor\",\n\t\"italic\",\n\t\"underline\",\n\t\"strikethrough\",\n\t\"monospace\",\n];\n\nfunction prepare(text: string) {\n\treturn (\n\t\tparseStyle(text)\n\t\t\t// This optimizes fragments by combining them together when all their values\n\t\t\t// for the properties defined above are equal.\n\t\t\t.reduce((prev: ParsedStyle[], curr) => {\n\t\t\t\tif (prev.length) {\n\t\t\t\t\tconst lastEntry = prev[prev.length - 1];\n\n\t\t\t\t\tif (properties.every((key) => curr[key] === lastEntry[key])) {\n\t\t\t\t\t\tlastEntry.text += curr.text;\n\t\t\t\t\t\tlastEntry.end += curr.text.length;\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn prev.concat([curr]);\n\t\t\t}, [])\n\t);\n}\n\nexport default prepare;\n","// Escapes the RegExp special characters \"^\", \"$\", \"\", \".\", \"*\", \"+\", \"?\", \"(\",\n// \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in string.\n// See https://lodash.com/docs/#escapeRegExp\nimport escapeRegExp from \"lodash/escapeRegExp\";\nimport {Part} from \"./merge\";\n\nexport type ChannelPart = Part & {\n\tchannel: string;\n};\n\n// escapes a regex in a way that's compatible to shove it in\n// a regex char set (meaning it also escapes -)\nfunction escapeRegExpCharSet(raw: string): string {\n\tconst escaped: string = escapeRegExp(raw);\n\treturn escaped.replace(\"-\", \"\\\\-\");\n}\n\n// Given an array of channel prefixes (such as \"#\" and \"&\") and an array of user\n// modes (such as \"@\" and \"+\"), this function extracts channels and nicks from a\n// text.\n// It returns an array of objects for each channel found with their start index,\n// end index and channel name.\nfunction findChannels(text: string, channelPrefixes: string[], userModes: string[]) {\n\t// `userModePattern` is necessary to ignore user modes in /whois responses.\n\t// For example, a voiced user in #thelounge will have a /whois response of:\n\t// > foo is on the following channels: +#thelounge\n\t// We need to explicitly ignore user modes to parse such channels correctly.\n\tconst userModePattern = userModes.map(escapeRegExpCharSet).join(\"\");\n\tconst channelPrefixPattern = channelPrefixes.map(escapeRegExpCharSet).join(\"\");\n\tconst channelPattern = `(?:^|\\\\s)[${userModePattern}]*([${channelPrefixPattern}][^ \\u0007]+)`;\n\tconst channelRegExp = new RegExp(channelPattern, \"g\");\n\n\tconst result: ChannelPart[] = [];\n\tlet match: RegExpExecArray | null;\n\n\tdo {\n\t\t// With global (\"g\") regexes, calling `exec` multiple times will find\n\t\t// successive matches in the same string.\n\t\tmatch = channelRegExp.exec(text);\n\n\t\tif (match) {\n\t\t\tresult.push({\n\t\t\t\tstart: match.index + match[0].length - match[1].length,\n\t\t\t\tend: match.index + match[0].length,\n\t\t\t\tchannel: match[1],\n\t\t\t});\n\t\t}\n\t} while (match);\n\n\treturn result;\n}\n\nexport default findChannels;\n","import LinkifyIt, {Match} from \"linkify-it\";\nimport tlds from \"tlds\";\n\nexport type NoSchemaMatch = Match & {\n\tnoschema: boolean;\n};\n\nexport type LinkPart = {\n\tstart: number;\n\tend: number;\n\tlink: string;\n};\n\nLinkifyIt.prototype.normalize = function normalize(match: NoSchemaMatch) {\n\tmatch.noschema = false;\n\n\tif (!match.schema) {\n\t\tmatch.schema = \"http:\";\n\t\tmatch.url = \"http://\" + match.url;\n\t\tmatch.noschema = true;\n\t}\n\n\tif (match.schema === \"//\") {\n\t\tmatch.schema = \"http:\";\n\t\tmatch.url = \"http:\" + match.url;\n\t\tmatch.noschema = true;\n\t}\n\n\tif (match.schema === \"mailto:\" && !/^mailto:/i.test(match.url)) {\n\t\tmatch.url = \"mailto:\" + match.url;\n\t}\n};\n\nconst linkify = LinkifyIt().tlds(tlds).tlds(\"onion\", true);\n\n// Known schemes to detect in text\nconst commonSchemes = [\n\t\"sftp\",\n\t\"smb\",\n\t\"file\",\n\t\"irc\",\n\t\"ircs\",\n\t\"svn\",\n\t\"git\",\n\t\"steam\",\n\t\"mumble\",\n\t\"ts3server\",\n\t\"svn+ssh\",\n\t\"ssh\",\n\t\"gopher\",\n\t\"gemini\",\n];\n\nfor (const schema of commonSchemes) {\n\tlinkify.add(schema + \":\", \"http:\");\n}\n\nexport function findLinks(text: string) {\n\tconst matches = linkify.match(text) as NoSchemaMatch[];\n\n\tif (!matches) {\n\t\treturn [];\n\t}\n\n\treturn matches.map(makeLinkPart);\n}\n\nexport function findLinksWithSchema(text: string) {\n\tconst matches = linkify.match(text) as NoSchemaMatch[];\n\n\tif (!matches) {\n\t\treturn [];\n\t}\n\n\treturn matches.filter((url) => !url.noschema).map(makeLinkPart);\n}\n\nfunction makeLinkPart(url: NoSchemaMatch): LinkPart {\n\treturn {\n\t\tstart: url.index,\n\t\tend: url.lastIndex,\n\t\tlink: url.url,\n\t};\n}\n","import emojiRegExp from \"emoji-regex\";\nimport {Part} from \"./merge\";\n\nconst regExp = emojiRegExp();\n\nexport type EmojiPart = Part & {\n\temoji: string;\n};\n\nfunction findEmoji(text: string) {\n\tconst result: EmojiPart[] = [];\n\tlet match: RegExpExecArray | null;\n\n\twhile ((match = regExp.exec(text))) {\n\t\tresult.push({\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length,\n\t\t\temoji: match[0],\n\t\t});\n\t}\n\n\treturn result;\n}\n\nexport default findEmoji;\n","import {Part} from \"./merge\";\n\nconst nickRegExp = /([\\w[\\]\\\\`^{|}-]+)/g;\n\nexport type NamePart = Part & {\n\tnick: string;\n};\n\nfunction findNames(text: string, nicks: string[]): NamePart[] {\n\tconst result: NamePart[] = [];\n\n\t// Return early if we don't have any nicknames to find\n\tif (nicks.length === 0) {\n\t\treturn result;\n\t}\n\n\tlet match: RegExpExecArray | null;\n\n\twhile ((match = nickRegExp.exec(text))) {\n\t\tif (nicks.indexOf(match[1]) > -1) {\n\t\t\tresult.push({\n\t\t\t\tstart: match.index,\n\t\t\t\tend: match.index + match[1].length,\n\t\t\t\tnick: match[1],\n\t\t\t});\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport default findNames;\n","// Return true if any section of \"a\" or \"b\" parts (defined by their start/end\n\nimport {Part} from \"./merge\";\n\n// markers) intersect each other, false otherwise.\nfunction anyIntersection(a: Part, b: Part) {\n\treturn (\n\t\t(a.start <= b.start && b.start < a.end) ||\n\t\t(a.start < b.end && b.end <= a.end) ||\n\t\t(b.start <= a.start && a.start < b.end) ||\n\t\t(b.start < a.end && a.end <= b.end)\n\t);\n}\n\nexport default anyIntersection;\n","import anyIntersection from \"./anyIntersection\";\nimport fill from \"./fill\";\nimport {ChannelPart} from \"./findChannels\";\nimport {EmojiPart} from \"./findEmoji\";\nimport {LinkPart} from \"../../../../shared/linkify\";\nimport {NamePart} from \"./findNames\";\n\nexport type Part = {\n\tstart: number;\n\tend: number;\n};\n\ntype TextPart = Part & {\n\ttext: string;\n};\n\ntype Fragment = {\n\tstart: number;\n\tend: number;\n\ttext: string;\n};\n\ntype PartWithFragments = Part & {\n\tfragments: Fragment[];\n};\n\n// Merge text part information within a styling fragment\nfunction assign(textPart: Part, fragment: Fragment) {\n\tconst fragStart = fragment.start;\n\tconst start = Math.max(fragment.start, textPart.start);\n\tconst end = Math.min(fragment.end, textPart.end);\n\tconst text = fragment.text.slice(start - fragStart, end - fragStart);\n\n\treturn Object.assign({}, fragment, {start, end, text});\n}\n\nfunction sortParts(a: Part, b: Part) {\n\treturn a.start - b.start || b.end - a.end;\n}\n\nexport type MergedParts = (TextPart | NamePart | EmojiPart | ChannelPart | LinkPart)[];\n\n// Merge the style fragments within the text parts, taking into account\n// boundaries and text sections that have not matched to links or channels.\n// For example, given a string \"foobar\" where \"foo\" and \"bar\" have been\n// identified as parts (channels, links, etc.) and \"fo\", \"ob\" and \"ar\" have 3\n// different styles, the first resulting part will contain fragments \"fo\" and\n// \"o\", and the second resulting part will contain \"b\" and \"ar\". \"o\" and \"b\"\n// fragments will contain duplicate styling attributes.\nfunction merge(\n\tparts: MergedParts,\n\tstyleFragments: Fragment[],\n\tcleanText: string\n): PartWithFragments[] {\n\t// Remove overlapping parts\n\tparts = parts.sort(sortParts).reduce<MergedParts>((prev, curr) => {\n\t\tconst intersection = prev.some((p) => anyIntersection(p, curr));\n\n\t\tif (intersection) {\n\t\t\treturn prev;\n\t\t}\n\n\t\treturn prev.concat([curr]);\n\t}, []);\n\n\t// Every section of the original text that has not been captured in a \"part\"\n\t// is filled with \"text\" parts, dummy objects with start/end but no extra\n\t// metadata.\n\n\tconst filled = fill(parts, cleanText) as TextPart[];\n\tconst allParts: MergedParts = [...parts, ...filled].sort(sortParts); // Sort all parts identified based on their position in the original text\n\n\t// Distribute the style fragments within the text parts\n\treturn allParts.map((part: any) => {\n\t\tpart.fragments = styleFragments\n\t\t\t.filter((fragment) => anyIntersection(part, fragment))\n\t\t\t.map((fragment) => assign(part, fragment));\n\n\t\treturn part as PartWithFragments;\n\t});\n}\n\nexport default merge;\n","<template>\n\t<button\n\t\tv-if=\"link.type !== 'loading'\"\n\t\t:class=\"['toggle-button', 'toggle-preview', {opened: link.shown}]\"\n\t\t:aria-label=\"ariaLabel\"\n\t\t@click=\"onClick\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientMessage, ClientLinkPreview} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"LinkPreviewToggle\",\n\tprops: {\n\t\tlink: {type: Object as PropType<ClientLinkPreview>, required: true},\n\t\tmessage: {type: Object as PropType<ClientMessage>, required: true},\n\t},\n\temits: [\"toggle-link-preview\"],\n\tsetup(props, {emit}) {\n\t\tconst ariaLabel = computed(() => {\n\t\t\treturn props.link.shown ? \"Collapse preview\" : \"Expand preview\";\n\t\t});\n\n\t\tconst onClick = () => {\n\t\t\tprops.link.shown = !props.link.shown;\n\t\t\temit(\"toggle-link-preview\", props.link, props.message);\n\t\t};\n\n\t\treturn {\n\t\t\tariaLabel,\n\t\t\tonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreviewToggle.vue?vue&type=template&id=1ba6c5b8&ts=true\"\nimport script from \"./LinkPreviewToggle.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreviewToggle.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"preview-size\">({{ previewSize }})</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport friendlysize from \"../js/helpers/friendlysize\";\n\nexport default defineComponent({\n\tname: \"LinkPreviewFileSize\",\n\tprops: {\n\t\tsize: {type: Number, required: true},\n\t},\n\tsetup(props) {\n\t\tconst previewSize = friendlysize(props.size);\n\n\t\treturn {\n\t\t\tpreviewSize,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreviewFileSize.vue?vue&type=template&id=19e7dc56&ts=true\"\nimport script from \"./LinkPreviewFileSize.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreviewFileSize.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span\n\t\tclass=\"inline-channel\"\n\t\tdir=\"auto\"\n\t\trole=\"button\"\n\t\ttabindex=\"0\"\n\t\t@click.prevent=\"openContextMenu\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t\t><slot></slot\n\t></span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport eventbus from \"../js/eventbus\";\n\nexport default defineComponent({\n\tname: \"InlineChannel\",\n\tprops: {\n\t\tchannel: String,\n\t},\n\tsetup(props) {\n\t\tconst openContextMenu = (event) => {\n\t\t\teventbus.emit(\"contextmenu:inline-channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\topenContextMenu,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./InlineChannel.vue?vue&type=template&id=e318f974&ts=true\"\nimport script from \"./InlineChannel.vue?vue&type=script&lang=ts\"\nexport * from \"./InlineChannel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// TODO: type\n// @ts-nocheck\n\nimport {h as createElement, VNode} from \"vue\";\nimport parseStyle from \"./ircmessageparser/parseStyle\";\nimport findChannels from \"./ircmessageparser/findChannels\";\nimport {findLinks} from \"../../../shared/linkify\";\nimport findEmoji from \"./ircmessageparser/findEmoji\";\nimport findNames from \"./ircmessageparser/findNames\";\nimport merge, {MergedParts} from \"./ircmessageparser/merge\";\nimport emojiMap from \"./fullnamemap.json\";\nimport LinkPreviewToggle from \"../../components/LinkPreviewToggle.vue\";\nimport LinkPreviewFileSize from \"../../components/LinkPreviewFileSize.vue\";\nimport InlineChannel from \"../../components/InlineChannel.vue\";\nimport Username from \"../../components/Username.vue\";\nimport {ClientMessage, ClientNetwork} from \"../types\";\n\nconst emojiModifiersRegex = /[\\u{1f3fb}-\\u{1f3ff}]|\\u{fe0f}/gu;\n\ntype Fragment = {\n\tclass?: string[];\n\ttext?: string;\n};\n\ntype StyledFragment = Fragment & {\n\ttextColor?: string;\n\tbgColor?: string;\n\thexColor?: string;\n\thexBgColor?: string;\n\n\tbold?: boolean;\n\titalic?: boolean;\n\tunderline?: boolean;\n\tmonospace?: boolean;\n\tstrikethrough?: boolean;\n};\n\n// Create an HTML `span` with styling information for a given fragment\nfunction createFragment(fragment: StyledFragment): VNode | string | undefined {\n\tconst classes: string[] = [];\n\n\tif (fragment.bold) {\n\t\tclasses.push(\"irc-bold\");\n\t}\n\n\tif (fragment.textColor !== undefined) {\n\t\tclasses.push(\"irc-fg\" + fragment.textColor);\n\t}\n\n\tif (fragment.bgColor !== undefined) {\n\t\tclasses.push(\"irc-bg\" + fragment.bgColor);\n\t}\n\n\tif (fragment.italic) {\n\t\tclasses.push(\"irc-italic\");\n\t}\n\n\tif (fragment.underline) {\n\t\tclasses.push(\"irc-underline\");\n\t}\n\n\tif (fragment.strikethrough) {\n\t\tclasses.push(\"irc-strikethrough\");\n\t}\n\n\tif (fragment.monospace) {\n\t\tclasses.push(\"irc-monospace\");\n\t}\n\n\tconst data: {\n\t\tclass?: string[];\n\t\tstyle?: Record<string, string>;\n\t} = {\n\t\tclass: undefined,\n\t\tstyle: undefined,\n\t};\n\n\tlet hasData = false;\n\n\tif (classes.length > 0) {\n\t\thasData = true;\n\t\tdata.class = classes;\n\t}\n\n\tif (fragment.hexColor) {\n\t\thasData = true;\n\t\tdata.style = {\n\t\t\tcolor: `#${fragment.hexColor}`,\n\t\t};\n\n\t\tif (fragment.hexBgColor) {\n\t\t\tdata.style[\"background-color\"] = `#${fragment.hexBgColor}`;\n\t\t}\n\t}\n\n\treturn hasData ? createElement(\"span\", data, fragment.text) : fragment.text;\n}\n\n// Transform an IRC message potentially filled with styling control codes, URLs,\n// nicknames, and channels into a string of HTML elements to display on the client.\nfunction parse(text: string, message?: ClientMessage, network?: ClientNetwork) {\n\t// Extract the styling information and get the plain text version from it\n\tconst styleFragments = parseStyle(text);\n\tconst cleanText = styleFragments.map((fragment) => fragment.text).join(\"\");\n\n\t// On the plain text, find channels and URLs, returned as \"parts\". Parts are\n\t// arrays of objects containing start and end markers, as well as metadata\n\t// depending on what was found (channel or link).\n\tconst channelPrefixes = network ? network.serverOptions.CHANTYPES : [\"#\", \"&\"];\n\tconst userModes = network\n\t\t? network.serverOptions.PREFIX?.prefix?.map((pref) => pref.symbol)\n\t\t: [\"!\", \"@\", \"%\", \"+\"];\n\tconst channelParts = findChannels(cleanText, channelPrefixes, userModes);\n\tconst linkParts = findLinks(cleanText);\n\tconst emojiParts = findEmoji(cleanText);\n\tconst nameParts = findNames(cleanText, message ? message.users || [] : []);\n\n\tconst parts = (channelParts as MergedParts)\n\t\t.concat(linkParts)\n\t\t.concat(emojiParts)\n\t\t.concat(nameParts);\n\n\t// Merge the styling information with the channels / URLs / nicks / text objects and\n\t// generate HTML strings with the resulting fragments\n\treturn merge(parts, styleFragments, cleanText).map((textPart) => {\n\t\tconst fragments = textPart.fragments.map((fragment) => createFragment(fragment));\n\n\t\t// Wrap these potentially styled fragments with links and channel buttons\n\t\tif (textPart.link) {\n\t\t\tconst preview =\n\t\t\t\tmessage &&\n\t\t\t\tmessage.previews &&\n\t\t\t\tmessage.previews.find((p) => p.link === textPart.link);\n\t\t\tconst link = createElement(\n\t\t\t\t\"a\",\n\t\t\t\t{\n\t\t\t\t\thref: textPart.link,\n\t\t\t\t\tdir: preview ? null : \"auto\",\n\t\t\t\t\ttarget: \"_blank\",\n\t\t\t\t\trel: \"noopener\",\n\t\t\t\t},\n\t\t\t\tfragments\n\t\t\t);\n\n\t\t\tif (!preview) {\n\t\t\t\treturn link;\n\t\t\t}\n\n\t\t\tconst linkEls = [link];\n\n\t\t\tif (preview.size > 0) {\n\t\t\t\tlinkEls.push(\n\t\t\t\t\tcreateElement(LinkPreviewFileSize, {\n\t\t\t\t\t\tsize: preview.size,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlinkEls.push(\n\t\t\t\tcreateElement(LinkPreviewToggle, {\n\t\t\t\t\tlink: preview,\n\t\t\t\t\tmessage: message,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\t// We wrap the link, size, and the toggle button into <span dir=\"auto\">\n\t\t\t// to correctly keep the left-to-right order of these elements\n\t\t\treturn createElement(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tdir: \"auto\",\n\t\t\t\t},\n\t\t\t\tlinkEls\n\t\t\t);\n\t\t} else if (textPart.channel) {\n\t\t\treturn createElement(\n\t\t\t\tInlineChannel,\n\t\t\t\t{\n\t\t\t\t\tchannel: textPart.channel,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: () => fragments,\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (textPart.emoji) {\n\t\t\tconst emojiWithoutModifiers = textPart.emoji.replace(emojiModifiersRegex, \"\");\n\t\t\tconst title = emojiMap[emojiWithoutModifiers]\n\t\t\t\t? // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t  `Emoji: ${emojiMap[emojiWithoutModifiers]}`\n\t\t\t\t: null;\n\n\t\t\treturn createElement(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tclass: [\"emoji\"],\n\t\t\t\t\trole: \"img\",\n\t\t\t\t\t\"aria-label\": title,\n\t\t\t\t\ttitle: title,\n\t\t\t\t},\n\t\t\t\tfragments\n\t\t\t);\n\t\t} else if (textPart.nick) {\n\t\t\treturn createElement(\n\t\t\t\tUsername,\n\t\t\t\t{\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tnick: textPart.nick,\n\t\t\t\t\t},\n\t\t\t\t\tdir: \"auto\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: () => fragments,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn fragments;\n\t});\n}\n\nexport default parse;\n","// Create plain text entries corresponding to areas of the text that match no\n// existing entries. Returns an empty array if all parts of the text have been\n\nimport {Part} from \"./merge\";\n\n// parsed into recognizable entries already.\nfunction fill(existingEntries: Part[], text: string) {\n\tlet position = 0;\n\n\t// Fill inner parts of the text. For example, if text is `foobarbaz` and both\n\t// `foo` and `baz` have matched into an entry, this will return a dummy entry\n\t// corresponding to `bar`.\n\tconst result = existingEntries.reduce<Part[]>((acc, textSegment) => {\n\t\tif (textSegment.start > position) {\n\t\t\tacc.push({\n\t\t\t\tstart: position,\n\t\t\t\tend: textSegment.start,\n\t\t\t});\n\t\t}\n\n\t\tposition = textSegment.end;\n\t\treturn acc;\n\t}, []);\n\n\t// Complete the unmatched end of the text with a dummy entry\n\tif (position < text.length) {\n\t\tresult.push({\n\t\t\tstart: position,\n\t\t\tend: text.length,\n\t\t});\n\t}\n\n\treturn result;\n}\n\nexport default fill;\n","import script from \"./ParsedMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ParsedMessage.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script lang=\"ts\">\nimport {defineComponent, PropType, h} from \"vue\";\nimport parse from \"../js/helpers/parse\";\nimport type {ClientMessage, ClientNetwork} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"ParsedMessage\",\n\tfunctional: true,\n\tprops: {\n\t\ttext: String,\n\t\tmessage: {type: Object as PropType<ClientMessage | string>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: false},\n\t},\n\trender(context) {\n\t\treturn parse(\n\t\t\ttypeof context.text !== \"undefined\" ? context.text : context.message.text,\n\t\t\tcontext.message,\n\t\t\tcontext.network\n\t\t);\n\t},\n});\n</script>\n","<template>\n\t<span\n\t\t:class=\"['user', {[nickColor]: store.state.settings.coloredNicks}, {active: active}]\"\n\t\t:data-name=\"user.nick\"\n\t\trole=\"button\"\n\t\tv-on=\"onHover ? {mouseenter: hover} : {}\"\n\t\t@click.prevent=\"openContextMenu\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t\t><slot>{{ mode }}{{ user.nick }}</slot></span\n\t>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {UserInMessage} from \"../../server/models/msg\";\nimport eventbus from \"../js/eventbus\";\nimport colorClass from \"../js/helpers/colorClass\";\nimport type {ClientChan, ClientNetwork, ClientUser} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\ntype UsernameUser = Partial<UserInMessage> & {\n\tmode?: string;\n\tnick: string;\n};\n\nexport default defineComponent({\n\tname: \"Username\",\n\tprops: {\n\t\tuser: {\n\t\t\t// TODO: UserInMessage shouldn't be necessary here.\n\t\t\ttype: Object as PropType<UsernameUser | UserInMessage>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tonHover: {\n\t\t\ttype: Function as PropType<(user: UserInMessage) => void>,\n\t\t\trequired: false,\n\t\t},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: false},\n\t},\n\tsetup(props) {\n\t\tconst mode = computed(() => {\n\t\t\t// Message objects have a singular mode, but user objects have modes array\n\t\t\tif (props.user.modes) {\n\t\t\t\treturn props.user.modes[0];\n\t\t\t}\n\n\t\t\treturn props.user.mode;\n\t\t});\n\n\t\t// TODO: Nick must be ! because our user prop union includes UserInMessage\n\t\tconst nickColor = computed(() => colorClass(props.user.nick!));\n\n\t\tconst hover = () => {\n\t\t\tif (props.onHover) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\t\treturn props.onHover(props.user as UserInMessage);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tconst openContextMenu = (event: Event) => {\n\t\t\teventbus.emit(\"contextmenu:user\", {\n\t\t\t\tevent: event,\n\t\t\t\tuser: props.user,\n\t\t\t\tnetwork: props.network,\n\t\t\t\tchannel: props.channel,\n\t\t\t});\n\t\t};\n\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tmode,\n\t\t\tnickColor,\n\t\t\thover,\n\t\t\topenContextMenu,\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","// Generates a string from \"color-1\" to \"color-32\" based on an input string\nexport default (str: string) => {\n\tlet hash = 0;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\thash += str.charCodeAt(i);\n\t}\n\n\t/*\n\t\tModulo 32 lets us be case insensitive for ascii\n\t\tdue to A being ascii 65 (100 0001)\n\t\t while a being ascii 97 (110 0001)\n\t*/\n\treturn \"color-\" + (1 + (hash % 32)).toString();\n};\n","import { render } from \"./Username.vue?vue&type=template&id=6d9d5328&ts=true\"\nimport script from \"./Username.vue?vue&type=script&lang=ts\"\nexport * from \"./Username.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t744: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkthelounge\"] = self[\"webpackChunkthelounge\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [772], () => (__webpack_require__(43)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Auth","storage","location","input","store","messageIds","message","toggled","preview","previews","shown","push","document","body","classList","contains","length","socket","target","channel","commands","require","reduce","acc","path","command","substring","default","args","channels","chanTypes","network","serverOptions","CHANTYPES","channelList","split","c","includes","join","chan","text","switchToChannel","type","router","name","params","query","q","catch","console","error","colorCodeMap","timeFormats","msgDefault","msgWithSeconds","msg12h","msg12hWithSeconds","mobileViewportPixels","events","Map","on","handler","has","get","set","off","filter","item","emit","evt","slice","x1","y1","x2","y2","Math","hypot","sizes","size","i","floor","log","parseFloat","pow","toFixed","isCollapsed","highlight","event","tagName","value","time","dayjs","format","key","window","localStorage","setItem","getItem","remove","removeItem","clear","reload","class","role","_createElementVNode","src","alt","width","height","for","defineComponent","setup","isVisible","ref","onClick","_createElementBlock","_renderSlot","_ctx","components","RevealPassword","inFlight","errorShown","username","password","onAuthFailed","onMounted","onBeforeUnmount","onSubmit","preventDefault","values","user","getStoredUser","method","action","_hoisted_2","_hoisted_3","_hoisted_4","autocapitalize","autocorrect","autocomplete","required","autofocus","_hoisted_7","_createVNode","_component_RevealPassword","slotProps","disabled","_hoisted_10","useStore","commit","SidebarToggle","props","handleSubmit","Function","defaults","Boolean","config","state","serverConfiguration","previousUsername","displayPasswordField","publicPassword","watch","newValue","nextTick","focus","commandsInput","resizeCommandsInput","style","ceil","scrollHeight","tls","isSecureChecked","ports","newPort","port","usernameInput","setSaslAuth","sasl","onNickChanged","usernameRef","formData","FormData","data","forEach","_component_SidebarToggle","uuid","_Fragment","$event","_toDisplayString","lockNetwork","public","_hoisted_39","_hoisted_41","maxlength","_hoisted_43","placeholder","_hoisted_5","_hoisted_9","host","_hoisted_11","min","max","_hoisted_13","_hoisted_16","hasSTSPolicy","rejectUnauthorized","_hoisted_24","_hoisted_26","proxyEnabled","_hoisted_31","proxyHost","_hoisted_33","proxyPort","_hoisted_35","proxyUsername","_hoisted_37","proxyPassword","_hoisted_45","_hoisted_47","nick","pattern","onInput","useHexIp","_hoisted_49","_hoisted_51","realname","_hoisted_53","leaveMessage","_hoisted_55","_hoisted_58","_hoisted_60","_hoisted_65","_hoisted_67","checked","onChange","_hoisted_79","saslAccount","_hoisted_81","saslPassword","_hoisted_87","NetworkForm","queryParams","assign","parsedParams","Array","isArray","prototype","hasOwnProperty","call","match","Number","String","parseOverrideParams","_createBlock","_component_NetworkForm","className","to","route","useRoute","_component_router_link","custom","navigate","isExactActive","active","onKeypress","SettingTabItem","_component_SettingTabItem","Navigation","dispatch","sync","_component_Navigation","_component_router_view","href","rel","_hoisted_30","_hoisted_34","checkNow","versionData","versionStatus","_hoisted_1","latest","version","prerelease","_hoisted_6","url","_hoisted_8","_hoisted_12","versionDataExpired","_hoisted_14","VersionChecker","isApple","navigator","platform","isTouch","maxTouchPoints","_component_VersionChecker","gitCommit","_hoisted_18","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_32","_hoisted_36","_hoisted_40","_hoisted_44","_hoisted_61","_hoisted_48","_hoisted_54","_hoisted_62","_hoisted_72","_hoisted_78","_hoisted_71","_hoisted_89","_hoisted_95","_hoisted_82","_hoisted_88","_hoisted_96","_hoisted_106","_hoisted_112","_hoisted_99","_hoisted_105","_hoisted_113","_hoisted_121","_hoisted_125","_hoisted_116","_hoisted_120","_hoisted_126","_hoisted_134","_hoisted_138","_hoisted_129","_hoisted_133","_hoisted_139","_hoisted_147","_hoisted_151","_hoisted_142","_hoisted_146","_hoisted_152","_hoisted_160","_hoisted_164","_hoisted_155","_hoisted_159","_hoisted_165","_hoisted_173","_hoisted_177","_hoisted_168","_hoisted_172","_hoisted_178","_hoisted_186","_hoisted_190","_hoisted_181","_hoisted_185","_hoisted_191","_hoisted_199","_hoisted_203","_hoisted_194","_hoisted_198","_hoisted_204","_hoisted_212","_hoisted_216","_hoisted_207","_hoisted_211","_hoisted_217","_hoisted_218","_hoisted_219","_hoisted_227","_hoisted_231","_hoisted_222","_hoisted_226","_hoisted_232","_hoisted_240","_hoisted_244","_hoisted_235","_hoisted_239","_hoisted_245","_hoisted_253","_hoisted_257","_hoisted_248","_hoisted_252","_hoisted_258","_hoisted_266","_hoisted_270","_hoisted_261","_hoisted_265","_hoisted_271","_hoisted_279","_hoisted_283","_hoisted_274","_hoisted_278","_hoisted_284","_hoisted_292","_hoisted_296","_hoisted_287","_hoisted_291","_hoisted_297","_hoisted_305","_hoisted_309","_hoisted_300","_hoisted_304","_hoisted_310","_hoisted_311","settings","searchEnabled","_hoisted_353","_hoisted_354","changelog","patchChangelog","querySelectorAll","link","setAttribute","querySelector","add","onUpdated","current","innerHTML","networkData","setNetworkData","getters","findNetwork","tabindex","dir","keepScrollPosition","showMoreButton","isContentShown","imageViewer","inject","imageViewerKey","onBeforeRouteUpdate","from","next","closeViewer","content","container","moreButtonLabel","computed","imageMaxSize","maxSize","friendlysize","handleResize","offsetWidth","onPreviewReady","sourceLoaded","onPreviewUpdate","updateShownState","defaultState","media","links","eventbus","onUnmounted","onThumbnailClick","onThumbnailError","thumb","onMoreClick","opened","decoding","onError","onAbort","onLoad","title","head","preload","controls","onCanplay","mediaType","_hoisted_17","_hoisted_21","_hoisted_23","requireViews","MessageTypes","ParsedMessage","LinkPreview","Username","isPreviousSource","focused","timeFormat","use12hClock","showSeconds","constants","messageTime","messageTimeLocale","localetime","messageComponent","isAction","self","_renderList","param","_resolveDynamicComponent","_component_Username","_component_ParsedMessage","_component_LinkPreview","showInActive","statusmsgGroup","searchOpened","searchInput","useRouter","searchInputField","onSearchPage","closeSearch","toggleSearch","blur","searchMessages","err","onBlur","onKeyup","onMousedown","calendar","localeDate","hoursPassed","Date","now","parse","toString","dayChange","friendlyDate","sameDay","lastDay","lastWeek","sameElse","Message","DateMarker","MessageSearchForm","chat","loadMoreButton","offset","moreResultsAvailable","oldScrollTop","oldChatHeight","messages","results","messageSearchResults","chanId","parseInt","findChannel","setActiveChannel","clearSearchState","doSearch","networkUuid","channelName","searchTerm","jumpToBottom","async","el","scrollTop","currentChatHeight","shouldDisplayDateMarker","previousMessage","getDay","onShowMoreClick","jump","_component_MessageSearchForm","messageSearchPendingQuery","isConnected","_component_DateMarker","_component_Message","condensedText","obj","condensedTypes","modeChangesCount","char","part","quit","strings","pop","onCollapseClick","closed","unreadMarkerShown","MessageCondensed","historyObserver","skipNextScrollEvent","isWaitingForNextTick","scrolledToBottom","lastMessage","historyLoading","lastId","condensed","statusMessages","onLoadButtonObserved","entries","entry","isIntersecting","IntersectionObserver","root","condensedMessages","lastCondensedContainer","firstUnread","heightOld","handleScroll","offsetHeight","addEventListener","passive","observe","unobserve","deep","pendingMessage","onBeforeUpdate","removeEventListener","disconnect","onCopy","InstallTrigger","selection","getSelection","anchorNode","focusNode","range","getRangeAt","documentFragment","cloneContents","div","createElement","appendChild","selectAllChildren","setTimeout","removeChild","removeAllRanges","addRange","clipboard","oldDate","newDate","getDate","getMonth","getFullYear","shouldDisplayUnreadMarker","currentMessage","onLinkPreviewToggle","msgId","moreHistoryAvailable","_component_MessageCondensed","onToggleLinkPreview","emojiSearchTerms","emojiMap","emojiStrategy","search","term","callback","fuzzyGrep","replace","template","string","original","index","nicksStrategy","completeNicks","val","replaceNick","chanStrategy","word","words","completeChans","commandStrategy","cmds","getCommands","foregroundColorStrategy","toLowerCase","fuzzy","pre","post","rendered","backgroundColorStrategy","pair","concat","position","test","array","isFuzzy","users","sort","a","b","u","me","otherUser","rawNicks","w","indexOf","formattingHotkeys","bracketWraps","_","uploadInput","autocompletionRef","setInputSize","getComputedStyle","lineHeight","blurInput","hide","tabCount","lastMatch","currentMatches","detail","Mousetrap","bind","selectionStart","newMatch","remainder","substr","selectionEnd","dispatchEvent","CustomEvent","strategies","editor","TextareaEditor","textcomplete","Textcomplete","dropdown","placement","destroy","autocompletion","inputTrap","modifier","wrapCursor","isAutoCompleting","onRow","undefined","totalRows","inputHistoryPosition","inputHistory","fileUpload","upload","onUploadInputChange","files","openFileUpload","click","getInputPlaceholder","splice","cmd","shift","setPendingMessage","enterkeyhint","multiple","modes","userSearchInput","activeUser","userlist","filteredUsers","fuzzyFilter","extract","groupedUsers","groups","result","mode","scrollToActiveUser","scrollIntoView","block","inline","setUserSearchInput","getModeClass","selectUser","rect","getBoundingClientRect","ev","MouseEvent","view","bubbles","cancelable","clientX","left","clientY","top","hoverUser","removeHoverUser","navigateUserList","direction","stopImmediatePropagation","abort","currentIndex","onMouseleave","onKeydown","date","localeTime","ban","hostmask","banned_by","banned_at","invite","invited_by","invited_at","num_users","topic","when","MessageList","ChatInput","ChatUserList","emits","messageList","topicInput","specialComponent","special","ListBans","ListInvites","ListChannels","ListIgnored","channelChanged","usersOutdated","editTopic","newTopic","hideUserVisibleError","saveTopic","openContextMenu","openMentions","lang","motd","empty","onDblclick","_component_ChatUserList","_component_MessageList","currentUserVisibleError","_component_ChatInput","Chat","activeChannel","chanInStore","unread","_component_Chat","onChannelChanged","prefetch","_hoisted_19","coloredNicks","_hoisted_38","nickPostfix","theme","themes","displayName","userStyles","installPromptEvent","canRegisterProtocol","hasInstallPromptEvent","registerProtocolHandler","nativeInstallPrompt","prompt","onForceSyncClick","registerProtocol","uri","origin","pathname","uploadCanvas","syncSettings","serverHasSettings","_hoisted_15","_hoisted_20","awayMessage","session","lastUse","signOut","token","agent","ip","Session","passwordChangeStatus","old_password","new_password","verify_password","currentSession","sessions","find","activeSessions","otherSessions","passwordErrors","missing_fields","password_mismatch","password_incorrect","update_failed","changePassword","response","success","ldapEnabled","_component_Session","_hoisted_22","isIOS","userAgent","playNotification","Audio","play","onPushButtonClick","webpush","pushNotificationState","desktopNotifications","desktopNotificationState","notification","notifyAllMessages","highlights","highlightExceptions","createRouter","history","createWebHashHistory","routes","component","SignIn","beforeEnter","Connect","Settings","children","GeneralSettings","AppearanceSettings","AccountSettings","NotificationSettings","Help","Changelog","NetworkEdit","RoutedChat","SearchResults","routeName","currentRoute","beforeEach","appLoaded","matched","afterEach","innerWidth","serviceWorker","channelTarget","io","transports","JSON","dataset","autoConnect","reconnection","defaultSettingConfig","apply","defaultConfig","auto","advanced","Notification","permission","requestPermission","getElementById","serverTheme","themeEl","themeUrl","HTMLLinkElement","hrefAttr","attributes","getNamedItem","newTheme","metaSelector","HTMLMetaElement","themeColor","element","newConfig","settingName","normalizeConfig","createState","loadFromLocalStorage","storedSettings","assignStoredSettings","defaultSettings","newSettings","appName","DesktopNotificationState","detectDesktopNotificationState","Granted","isSecureContext","Blocked","NoHttps","Unsupported","storePattern","networks","mentions","hasServiceWorker","sidebarOpen","sidebarDragging","userlistOpen","mutations","netChan","refreshDesktopNotificationState","payload","removeNetwork","networkId","findIndex","n","sortNetworks","sortFn","toggleSidebar","toggleUserlist","addMessageSearchResults","actions","partChannel","msg","findChannelOnCurrentNetwork","findChannelOnNetwork","highlightCount","muted","initChannel","m","reverse","totalMessages","Symbol","createStore","settingsStore","namespaced","syncAll","force","applyAll","update","settingConfig","stringify","createSettingsStore","baseUseStore","registerModule","instance","xhr","fileQueue","tokenKeepAlive","overlay","uploadProgressbar","onDragEnter","this","dragEnter","onDragOver","dragOver","onDragLeave","dragLeave","onDrop","drop","onPaste","paste","init","uploadNextFileInQueue","mounted","unmounted","dataTransfer","types","relatedTarget","items","kind","getAsFile","triggerUpload","clipboardData","handleResponse","wasQueueEmpty","maxFileSize","fileUploadMaxFileSize","file","requestToken","setProgress","toggle","setInterval","startsWith","renderImage","newFile","performUpload","fileReader","FileReader","onabort","onerror","onload","img","Image","canvas","ctx","getContext","drawImage","toBlob","blob","File","readAsDataURL","XMLHttpRequest","percent","loaded","total","onreadystatechange","readyState","DONE","responseText","statusText","status","append","open","send","clearInterval","insertUploadUrl","fullURL","URL","textbox","HTMLTextAreaElement","initStart","headToCursor","cursorToTail","textBeforeTail","updateCursor","initialize","handleDisconnect","updateLoadingMessage","requestIdleCallback","timeout","loading","textContent","attempt","lastServerHash","showSignIn","g_TheLoungeRemoveLoading","reloadPage","mergeChannelData","oldChannels","newChannels","currentChannel","serverHash","doFastAuth","openChannel","hasConfig","newNetworks","stored","collapsedNetworks","Set","currentNetwork","isJoinChannelShown","mergeNetworkData","handledQuery","URLSearchParams","cleanParams","cleanUri","hash","replaceState","stringUri","protocol","hostname","parseIrcUri","fromEntries","handleQueryParams","shouldOpen","unshift","receivingChannel","isActiveChannel","targetId","hasFocus","exception","cleanIrcMessage","timestamp","ready","then","registration","postMessage","tag","badge","icon","close","notifyMessage","messageLimit","getTime","idx","updateUserList","previewIndex","connected","secure","isCurrentNetworkBeingRemoved","order","currentTheme","t","defaultTheme","returnValue","packages","expiresAt","expires","pendingQuery","navigateWindow","flatChannels","isChannelCollapsed","jumpToChannel","targetChannel","isIgnoredKeybind","onTwoFingerSwipe","touches","performance","center","screenX","screenY","last","centersAreEqual","hist","previous","distance","abs","tangent","getCardinalDirection","getSwipe","listenForTwoFingerSwipes","cardinalDirection","outer_loop","ignoredKeys","altKey","which","ctrlKey","metaKey","favicon","faviconNormal","getAttribute","faviconAlerted","other","VueApp","createApp","App","use","mount","nav","setAppBadge","clearAppBadge","errorHandler","togglePushSubscription","pushManager","getSubscription","existingSubscription","unsubscribe","successful","subscribe","applicationServerKey","userVisibleOnly","subscription","toJSON","hasSubscriptionOnServer","register","matchFormatting","trim","Props","delay","delayOnTouchOnly","touchStartThreshold","handle","draggable","ghostClass","dragClass","group","itemKey","list","containerRef","sortable","newDraggable","Sortable","onChoose","onUnchoose","onEnd","delete","count","isFiltering","isChannelVisible","getAriaLabel","extra","transition","opacity","onContextmenu","ChannelWrapper","joinChannelLabel","unreadCount","roundBadgeNumber","collapseNetwork","getExpandLabel","_component_ChannelWrapper","useCloseChannel","button","directives","inputChannel","inputPassword","existingChannel","JoinChannel","NetworkLobby","Channel","Draggable","searchText","activeSearchItem","startDrag","networklist","sidebarWasClosed","moveItemInArray","newItems","collapseNetworkHelper","expandNetwork","activateSearch","activeElement","deactivateSearch","setActiveSearchItem","scrollToActive","LONG_TOUCH_DURATION","setSearchText","selectResult","navigateResults","r","onChannelSort","oldIndex","newIndex","unparsedId","onNetworkSort","onDraggableTouchStart","onDraggableTouchMove","touch","currentPosition","onDraggableTouchEnd","onDraggableChoose","originalEvent","pointerType","isTouchEvent","TouchEvent","PointerEvent","onDraggableUnchoose","onFocus","onMouseenter","_component_Channel","_component_NetworkLobby","_component_Draggable","onTouchstart","onTouchmove","onTouchend","onTouchcancel","onToggleJoinChannel","_component_JoinChannel","NetworkList","touchStartPos","touchCurPos","touchStartTime","menuWidth","menuIsMoving","menuIsAbsolute","sidebar","onTouchMove","distX","distY","onTouchEnd","devicePixelRatio","transform","diff","absDiff","onTouchStart","styles","isDevelopment","process","isPublic","_component_NetworkList","isActive","isUpdateAvailable","viewer","image","previousImage","nextImage","x","y","scale","computeImageStyles","transformX","transformY","calculateZoomShift","newScale","oldScale","imageWidth","centerX","centerY","correctPosition","imageEl","viewerEl","widthScaled","heightScaled","containerWidth","containerHeight","reduceTouches","totalX","totalY","totalScale","i2","sqrt","newLink","oldLink","flat","setPrevNextImages","onImageLoad","naturalWidth","naturalHeight","prepareImage","onImageMouseDown","stopPropagation","startX","startY","startTransformX","startTransformY","movedDistance","mouseMove","moveEvent","newX","newY","mouseUp","upEvent","onMouseWheel","deltaY","delta","fixedPosition","onImageTouchStart","currentTouches","touchEndFingers","currentTransform","startTransform","touchMove","deltaX","deltaScale","touchEnd","endEvent","changedTouches","onWheel","generateChannelContextMenu","closeChannel","label","lobby","humanFriendlyChanTypeMap","chanType","setMutedTo","generateInlineChannelContextMenu","generateUserContextMenu","currentChannelUser","whois","modeCharToName","modeTextTemplate","revoke","symbol","give","networkModeSymbols","PREFIX","symbols","compare","p1","p2","prefix","isOpen","passthrough","contextMenu","previousActiveElement","activeItem","enablePointerEvents","clickItem","pos","menuHeight","pageX","pageY","innerHeight","positionContextMenu","openChannelContextMenu","openInlineChannelContextMenu","openUserContextMenu","containerClick","currentTarget","navigateMenu","nextItem","hoverItem","clickActiveItem","incoming","cb","relativeTime","isLoading","resolvedMessages","togglePopup","closePopup","fromNow","dismissMention","dismissAllMentions","contextMenuKey","confirmDialogKey","Sidebar","ImageViewer","ContextMenu","ConfirmDialog","Mentions","loungeWindow","confirmDialog","provide","viewportClasses","notified","debouncedResize","dayChangeTimeout","escapeKey","toggleUserList","toggleMentions","msUntilNextDay","today","viewportWidth","isUserlistOpen","prepareOpenStates","throttle","emitDayChange","clearTimeout","_component_Sidebar","_component_Mentions","_component_ImageViewer","_component_ContextMenu","_component_ConfirmDialog","new_ident","new_host","ctcpMessage","errorMessage","reason","invitedYou","account","gecos","raw_modes","cleanText","lines","every","line","new_nick","whowas","ident","actual_hostname","actual_ip","real_name","registered_nick","operator","helpop","bot","away","certfp","server","server_info","logonTime","idle","idleTime","colorRx","hexColorRx","controlCodesRx","properties","escapeRegExpCharSet","raw","escapeRegExp","LinkifyIt","noschema","schema","linkify","tlds","commonSchemes","makeLinkPart","start","end","lastIndex","regExp","emojiRegExp","nickRegExp","sortParts","ariaLabel","previewSize","emojiModifiersRegex","styleFragments","colorCodes","bold","textColor","bgColor","hexColor","hexBgColor","italic","underline","strikethrough","monospace","resetStyle","emitFragment","processedText","fragmentStart","toUpperCase","tmp","parseStyle","prev","curr","lastEntry","fragment","channelParts","channelPrefixes","userModes","userModePattern","channelPrefixPattern","channelRegExp","RegExp","exec","findChannels","pref","linkParts","matches","findLinks","emojiParts","emoji","findEmoji","nameParts","nicks","findNames","parts","filled","existingEntries","textSegment","fill","some","p","anyIntersection","fragments","textPart","fragStart","merge","classes","hasData","color","createFragment","linkEls","LinkPreviewFileSize","LinkPreviewToggle","InlineChannel","emojiWithoutModifiers","functional","render","context","onHover","nickColor","str","charCodeAt","colorClass","hover","_toHandlers","mouseenter","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","prop","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}