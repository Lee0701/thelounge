{"version":3,"file":"js/bundle.js","mappings":"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","sources":["webpack://thelounge/webpack/runtime/chunk loaded","webpack://thelounge/./client/components/MessageTypes/ sync nonrecursive \\.vue$","webpack://thelounge/./client/js/commands/ sync \\.ts$","webpack://thelounge/./client/js/auth.ts","webpack://thelounge/./client/js/commands/collapse.ts","webpack://thelounge/./client/js/commands/expand.ts","webpack://thelounge/./client/js/commands/index.ts","webpack://thelounge/./client/js/commands/join.ts","webpack://thelounge/./client/js/commands/search.ts","webpack://thelounge/./client/js/constants.ts","webpack://thelounge/./client/js/eventbus.ts","webpack://thelounge/./client/js/helpers/distance.ts","webpack://thelounge/./client/js/helpers/friendlysize.ts","webpack://thelounge/./client/js/helpers/isChannelCollapsed.ts","webpack://thelounge/./client/js/helpers/isIgnoredKeybind.ts","webpack://thelounge/./client/js/helpers/localetime.ts","webpack://thelounge/./client/js/localStorage.ts","webpack://thelounge/./client/js/location.ts","webpack://thelounge/./client/components/Windows/SignIn.vue","webpack://thelounge/./client/components/RevealPassword.vue","webpack://thelounge/./client/components/RevealPassword.vue?c069","webpack://thelounge/./client/components/Windows/SignIn.vue?15cf","webpack://thelounge/./client/components/NetworkForm.vue","webpack://thelounge/./client/components/SidebarToggle.vue","webpack://thelounge/./client/components/SidebarToggle.vue?5dae","webpack://thelounge/./client/components/NetworkForm.vue?97fe","webpack://thelounge/./client/components/Windows/Connect.vue","webpack://thelounge/./client/components/Windows/Connect.vue?3910","webpack://thelounge/./client/components/Windows/Settings.vue","webpack://thelounge/./client/components/Settings/Navigation.vue","webpack://thelounge/./client/components/Settings/SettingTabItem.vue","webpack://thelounge/./client/components/Settings/SettingTabItem.vue?8598","webpack://thelounge/./client/components/Settings/Navigation.vue?538b","webpack://thelounge/./client/components/Windows/Settings.vue?b26a","webpack://thelounge/./client/components/Windows/Help.vue","webpack://thelounge/./client/components/VersionChecker.vue","webpack://thelounge/./client/components/VersionChecker.vue?f024","webpack://thelounge/./client/components/Windows/Help.vue?3de4","webpack://thelounge/./client/components/Windows/Changelog.vue","webpack://thelounge/./client/components/Windows/Changelog.vue?eb05","webpack://thelounge/./client/components/Windows/NetworkEdit.vue","webpack://thelounge/./client/components/Windows/NetworkEdit.vue?3546","webpack://thelounge/./client/components/Windows/SearchResults.vue","webpack://thelounge/./client/components/Message.vue","webpack://thelounge/./client/components/LinkPreview.vue","webpack://thelounge/./client/components/LinkPreview.vue?77b7","webpack://thelounge/./client/components/MessageTypes/index.ts","webpack://thelounge/./client/components/Message.vue?dd80","webpack://thelounge/./client/components/MessageSearchForm.vue","webpack://thelounge/./client/components/MessageSearchForm.vue?6f16","webpack://thelounge/./client/components/DateMarker.vue","webpack://thelounge/./client/components/DateMarker.vue?205b","webpack://thelounge/./client/components/Windows/SearchResults.vue?abb7","webpack://thelounge/./client/components/Chat.vue","webpack://thelounge/./client/components/MessageList.vue","webpack://thelounge/./client/components/MessageCondensed.vue","webpack://thelounge/./client/components/MessageCondensed.vue?0c2b","webpack://thelounge/./client/js/clipboard.ts","webpack://thelounge/./client/components/MessageList.vue?f60d","webpack://thelounge/./client/components/ChatInput.vue","webpack://thelounge/./client/js/autocompletion.ts","webpack://thelounge/./client/components/ChatInput.vue?83df","webpack://thelounge/./client/components/ChatUserList.vue","webpack://thelounge/./client/components/ChatUserList.vue?ef74","webpack://thelounge/./client/components/Special/ListBans.vue","webpack://thelounge/./client/components/Special/ListBans.vue?e125","webpack://thelounge/./client/components/Special/ListInvites.vue","webpack://thelounge/./client/components/Special/ListInvites.vue?3ace","webpack://thelounge/./client/components/Special/ListChannels.vue","webpack://thelounge/./client/components/Special/ListChannels.vue?727e","webpack://thelounge/./client/components/Special/ListIgnored.vue","webpack://thelounge/./client/components/Special/ListIgnored.vue?78d6","webpack://thelounge/./client/components/Chat.vue?9f2a","webpack://thelounge/./client/components/RoutedChat.vue","webpack://thelounge/./client/components/RoutedChat.vue?f310","webpack://thelounge/./client/components/Settings/Appearance.vue","webpack://thelounge/./client/components/Settings/Appearance.vue?aba1","webpack://thelounge/./client/components/Settings/General.vue","webpack://thelounge/./client/components/Settings/General.vue?e603","webpack://thelounge/./client/components/Settings/Account.vue","webpack://thelounge/./client/components/Session.vue","webpack://thelounge/./client/components/Session.vue?1e0d","webpack://thelounge/./client/components/Settings/Account.vue?8037","webpack://thelounge/./client/components/Settings/Notifications.vue","webpack://thelounge/./client/components/Settings/Notifications.vue?6626","webpack://thelounge/./client/js/router.ts","webpack://thelounge/./client/js/socket.ts","webpack://thelounge/./client/js/settings.ts","webpack://thelounge/./client/js/store-settings.ts","webpack://thelounge/./client/js/store.ts","webpack://thelounge/./client/js/upload.ts","webpack://thelounge/./client/js/socket-events/connection.ts","webpack://thelounge/./client/js/socket-events/auth.ts","webpack://thelounge/./client/js/socket-events/init.ts","webpack://thelounge/./client/js/socket-events/commands.ts","webpack://thelounge/./client/js/helpers/parseIrcUri.ts","webpack://thelounge/./client/js/socket-events/join.ts","webpack://thelounge/./client/js/socket-events/more.ts","webpack://thelounge/./client/js/socket-events/msg.ts","webpack://thelounge/./client/js/socket-events/msg_preview.ts","webpack://thelounge/./client/js/socket-events/msg_special.ts","webpack://thelounge/./client/js/socket-events/names.ts","webpack://thelounge/./client/js/socket-events/network.ts","webpack://thelounge/./client/js/socket-events/nick.ts","webpack://thelounge/./client/js/socket-events/open.ts","webpack://thelounge/./client/js/socket-events/part.ts","webpack://thelounge/./client/js/socket-events/quit.ts","webpack://thelounge/./client/js/socket-events/sync_sort.ts","webpack://thelounge/./client/js/socket-events/topic.ts","webpack://thelounge/./client/js/socket-events/users.ts","webpack://thelounge/./client/js/socket-events/sign_out.ts","webpack://thelounge/./client/js/socket-events/sessions_list.ts","webpack://thelounge/./client/js/socket-events/configuration.ts","webpack://thelounge/./client/js/socket-events/changelog.ts","webpack://thelounge/./client/js/socket-events/setting.ts","webpack://thelounge/./client/js/socket-events/history_clear.ts","webpack://thelounge/./client/js/socket-events/mentions.ts","webpack://thelounge/./client/js/socket-events/search.ts","webpack://thelounge/./client/js/socket-events/mute_changed.ts","webpack://thelounge/./client/js/keybinds.ts","webpack://thelounge/./client/js/helpers/listenForTwoFingerSwipes.ts","webpack://thelounge/./client/js/vue.ts","webpack://thelounge/./client/js/webpush.ts","webpack://thelounge/./shared/irc.ts","webpack://thelounge/./client/components/App.vue","webpack://thelounge/./client/components/Sidebar.vue","webpack://thelounge/./client/components/NetworkList.vue","webpack://thelounge/./client/components/Draggable.vue","webpack://thelounge/./client/components/Draggable.vue?a413","webpack://thelounge/./client/components/NetworkLobby.vue","webpack://thelounge/./client/js/helpers/collapseNetwork.ts","webpack://thelounge/./client/js/helpers/roundBadgeNumber.ts","webpack://thelounge/./client/components/ChannelWrapper.vue","webpack://thelounge/./client/components/ChannelWrapper.vue?8bb7","webpack://thelounge/./client/components/NetworkLobby.vue?7d17","webpack://thelounge/./client/components/Channel.vue","webpack://thelounge/./client/js/hooks/use-close-channel.ts","webpack://thelounge/./client/components/Channel.vue?19d6","webpack://thelounge/./client/components/JoinChannel.vue","webpack://thelounge/./client/components/JoinChannel.vue?d18e","webpack://thelounge/./client/components/NetworkList.vue?403b","webpack://thelounge/./client/components/Sidebar.vue?9985","webpack://thelounge/./client/components/ImageViewer.vue","webpack://thelounge/./client/components/ImageViewer.vue?2dfc","webpack://thelounge/./client/js/helpers/contextMenu.ts","webpack://thelounge/./client/components/ContextMenu.vue","webpack://thelounge/./client/components/ContextMenu.vue?fdba","webpack://thelounge/./client/components/ConfirmDialog.vue","webpack://thelounge/./client/components/ConfirmDialog.vue?36a8","webpack://thelounge/./client/components/Mentions.vue","webpack://thelounge/./client/components/Mentions.vue?dcdf","webpack://thelounge/./client/components/App.vue?37fa","webpack://thelounge/./client/components/MessageTypes/away.vue","webpack://thelounge/./client/components/MessageTypes/away.vue?c451","webpack://thelounge/./client/components/MessageTypes/back.vue","webpack://thelounge/./client/components/MessageTypes/back.vue?a43b","webpack://thelounge/./client/components/MessageTypes/chghost.vue","webpack://thelounge/./client/components/MessageTypes/chghost.vue?ab01","webpack://thelounge/./client/components/MessageTypes/ctcp.vue","webpack://thelounge/./client/components/MessageTypes/ctcp.vue?cacf","webpack://thelounge/./client/components/MessageTypes/ctcp_request.vue","webpack://thelounge/./client/components/MessageTypes/ctcp_request.vue?2dcb","webpack://thelounge/./client/components/MessageTypes/error.vue","webpack://thelounge/./client/components/MessageTypes/error.vue?3d38","webpack://thelounge/./client/components/MessageTypes/invite.vue","webpack://thelounge/./client/components/MessageTypes/invite.vue?0d58","webpack://thelounge/./client/components/MessageTypes/join.vue","webpack://thelounge/./client/components/MessageTypes/join.vue?8f48","webpack://thelounge/./client/components/MessageTypes/kick.vue","webpack://thelounge/./client/components/MessageTypes/kick.vue?24a1","webpack://thelounge/./client/components/MessageTypes/mode.vue","webpack://thelounge/./client/components/MessageTypes/mode.vue?86d9","webpack://thelounge/./client/components/MessageTypes/mode_channel.vue","webpack://thelounge/./client/components/MessageTypes/mode_channel.vue?8348","webpack://thelounge/./client/components/MessageTypes/mode_user.vue","webpack://thelounge/./client/components/MessageTypes/mode_user.vue?70f4","webpack://thelounge/./client/components/MessageTypes/monospace_block.vue","webpack://thelounge/./client/components/MessageTypes/monospace_block.vue?5357","webpack://thelounge/./client/components/MessageTypes/nick.vue","webpack://thelounge/./client/components/MessageTypes/nick.vue?d15a","webpack://thelounge/./client/components/MessageTypes/part.vue","webpack://thelounge/./client/components/MessageTypes/part.vue?e2a6","webpack://thelounge/./client/components/MessageTypes/quit.vue","webpack://thelounge/./client/components/MessageTypes/quit.vue?6cc8","webpack://thelounge/./client/components/MessageTypes/raw.vue","webpack://thelounge/./client/components/MessageTypes/raw.vue?56b1","webpack://thelounge/./client/components/MessageTypes/topic.vue","webpack://thelounge/./client/components/MessageTypes/topic.vue?2f75","webpack://thelounge/./client/components/MessageTypes/topic_set_by.vue","webpack://thelounge/./client/components/MessageTypes/topic_set_by.vue?2f65","webpack://thelounge/./client/components/MessageTypes/whois.vue","webpack://thelounge/./client/components/MessageTypes/whois.vue?a6be","webpack://thelounge/./client/js/helpers/ircmessageparser/parseStyle.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findChannels.ts","webpack://thelounge/./shared/linkify.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findEmoji.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/findNames.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/anyIntersection.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/merge.ts","webpack://thelounge/./client/components/LinkPreviewToggle.vue","webpack://thelounge/./client/components/LinkPreviewToggle.vue?bfed","webpack://thelounge/./client/components/LinkPreviewFileSize.vue","webpack://thelounge/./client/components/LinkPreviewFileSize.vue?6888","webpack://thelounge/./client/components/InlineChannel.vue","webpack://thelounge/./client/components/InlineChannel.vue?b1e5","webpack://thelounge/./client/js/helpers/parse.ts","webpack://thelounge/./client/js/helpers/ircmessageparser/fill.ts","webpack://thelounge/./client/components/ParsedMessage.vue?11f7","webpack://thelounge/./client/components/ParsedMessage.vue","webpack://thelounge/./client/components/Username.vue","webpack://thelounge/./client/js/helpers/colorClass.ts","webpack://thelounge/./client/components/Username.vue?2f83","webpack://thelounge/webpack/bootstrap","webpack://thelounge/webpack/runtime/compat get default export","webpack://thelounge/webpack/runtime/define property getters","webpack://thelounge/webpack/runtime/global","webpack://thelounge/webpack/runtime/hasOwnProperty shorthand","webpack://thelounge/webpack/runtime/make namespace object","webpack://thelounge/webpack/runtime/jsonp chunk loading","webpack://thelounge/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var map = {\n\t\"./away.vue\": 4509,\n\t\"./back.vue\": 5381,\n\t\"./chghost.vue\": 3089,\n\t\"./ctcp.vue\": 4878,\n\t\"./ctcp_request.vue\": 7052,\n\t\"./error.vue\": 3576,\n\t\"./invite.vue\": 6502,\n\t\"./join.vue\": 1770,\n\t\"./kick.vue\": 2501,\n\t\"./mode.vue\": 7393,\n\t\"./mode_channel.vue\": 1686,\n\t\"./mode_user.vue\": 1267,\n\t\"./monospace_block.vue\": 6258,\n\t\"./nick.vue\": 5169,\n\t\"./part.vue\": 3397,\n\t\"./quit.vue\": 9561,\n\t\"./raw.vue\": 7928,\n\t\"./topic.vue\": 6096,\n\t\"./topic_set_by.vue\": 4886,\n\t\"./whois.vue\": 801\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1039;","var map = {\n\t\"./collapse.ts\": 1329,\n\t\"./expand.ts\": 102,\n\t\"./index.ts\": 3805,\n\t\"./join.ts\": 7301,\n\t\"./search.ts\": 960\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2664;","import storage from \"./localStorage\";\nimport location from \"./location\";\n\nexport default class Auth {\n\tstatic signout() {\n\t\tstorage.clear();\n\t\tlocation.reload();\n\t}\n}\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nfunction input() {\n\tif (!store.state.activeChannel) {\n\t\treturn;\n\t}\n\n\tconst messageIds: number[] = [];\n\n\tfor (const message of store.state.activeChannel.channel.messages) {\n\t\tlet toggled = false;\n\n\t\tfor (const preview of message.previews) {\n\t\t\tif (preview.shown) {\n\t\t\t\tpreview.shown = false;\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (toggled) {\n\t\t\tmessageIds.push(message.id);\n\t\t}\n\t}\n\n\t// Tell the server we're toggling so it remembers at page reload\n\tif (!document.body.classList.contains(\"public\") && messageIds.length > 0) {\n\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\ttarget: store.state.activeChannel?.channel.id,\n\t\t\tmessageIds: messageIds,\n\t\t\tshown: false,\n\t\t});\n\t}\n\n\treturn true;\n}\n\nexport default {input};\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nfunction input() {\n\tif (!store.state.activeChannel) {\n\t\treturn;\n\t}\n\n\tconst messageIds: number[] = [];\n\n\tfor (const message of store.state.activeChannel.channel.messages) {\n\t\tlet toggled = false;\n\n\t\tfor (const preview of message.previews) {\n\t\t\tif (!preview.shown) {\n\t\t\t\tpreview.shown = true;\n\t\t\t\ttoggled = true;\n\t\t\t}\n\t\t}\n\n\t\tif (toggled) {\n\t\t\tmessageIds.push(message.id);\n\t\t}\n\t}\n\n\t// Tell the server we're toggling so it remembers at page reload\n\tif (!document.body.classList.contains(\"public\") && messageIds.length > 0) {\n\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\ttarget: store.state.activeChannel?.channel.id,\n\t\t\tmessageIds: messageIds,\n\t\t\tshown: true,\n\t\t});\n\t}\n\n\treturn true;\n}\n\nexport default {input};\n","// Taken from views/index.js\n\n// This creates a version of `require()` in the context of the current\n// directory, so we iterate over its content, which is a map statically built by\n// Webpack.\n// Second argument says it's recursive, third makes sure we only load javascript.\nconst commands = require.context(\"./\", true, /\\.ts$/);\n\nexport default commands.keys().reduce<Record<string, unknown>>((acc, path) => {\n\tconst command = path.substring(2, path.length - 3);\n\n\tif (command === \"index\") {\n\t\treturn acc;\n\t}\n\n\tacc[command] = commands(path).default;\n\n\treturn acc;\n}, {});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nfunction input(args: string[]) {\n\tif (args.length > 0) {\n\t\tlet channels = args[0];\n\n\t\tif (channels.length > 0) {\n\t\t\tconst chanTypes = store.state.activeChannel?.network.serverOptions.CHANTYPES;\n\t\t\tconst channelList = args[0].split(\",\");\n\n\t\t\tif (chanTypes && chanTypes.length > 0) {\n\t\t\t\tfor (let c = 0; c < channelList.length; c++) {\n\t\t\t\t\tif (!chanTypes.includes(channelList[c][0])) {\n\t\t\t\t\t\tchannelList[c] = chanTypes[0] + channelList[c];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchannels = channelList.join(\",\");\n\n\t\t\tconst chan = store.getters.findChannelOnCurrentNetwork(channels);\n\n\t\t\tif (chan) {\n\t\t\t\tswitchToChannel(chan);\n\t\t\t} else {\n\t\t\t\tif (store.state.activeChannel) {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttext: `/join ${channels} ${args.length > 1 ? args[1] : \"\"}`,\n\t\t\t\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} else if (store.state.activeChannel?.channel.type === \"channel\") {\n\t\t// If `/join` command is used without any arguments, re-join current channel\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\ttext: `/join ${store.state.activeChannel.channel.name}`,\n\t\t});\n\n\t\treturn true;\n\t}\n}\n\nexport default {input};\n","import {store} from \"../store\";\nimport {router} from \"../router\";\n\nfunction input(args: string[]) {\n\tif (!store.state.settings.searchEnabled) {\n\t\treturn false;\n\t}\n\n\trouter\n\t\t.push({\n\t\t\tname: \"SearchResults\",\n\t\t\tparams: {\n\t\t\t\tid: store.state.activeChannel?.channel.id,\n\t\t\t},\n\t\t\tquery: {\n\t\t\t\tq: args.join(\" \"),\n\t\t\t},\n\t\t})\n\t\t.catch((e: Error) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(`Failed to push SearchResults route: ${e.message}`);\n\t\t});\n\n\treturn true;\n}\n\nexport default {input};\n","const colorCodeMap = [\n\t[\"00\", \"White\"],\n\t[\"01\", \"Black\"],\n\t[\"02\", \"Blue\"],\n\t[\"03\", \"Green\"],\n\t[\"04\", \"Red\"],\n\t[\"05\", \"Brown\"],\n\t[\"06\", \"Magenta\"],\n\t[\"07\", \"Orange\"],\n\t[\"08\", \"Yellow\"],\n\t[\"09\", \"Light Green\"],\n\t[\"10\", \"Cyan\"],\n\t[\"11\", \"Light Cyan\"],\n\t[\"12\", \"Light Blue\"],\n\t[\"13\", \"Pink\"],\n\t[\"14\", \"Grey\"],\n\t[\"15\", \"Light Grey\"],\n];\n\nconst timeFormats = {\n\tmsgDefault: \"HH:mm\",\n\tmsgWithSeconds: \"HH:mm:ss\",\n\tmsg12h: \"hh:mm A\",\n\tmsg12hWithSeconds: \"hh:mm:ss A\",\n};\n\nexport default {\n\tcolorCodeMap,\n\tcommands: [] as string[],\n\ttimeFormats,\n\t// Same value as media query in CSS that forces sidebars to become overlays\n\tmobileViewportPixels: 768,\n};\n","const events = new Map();\n\nclass EventBus {\n\t/**\n\t * Register an event handler for the given type.\n\t *\n\t * @param  {String} type    Type of event to listen for.\n\t * @param  {Function} handler Function to call in response to given event.\n\t */\n\ton(type: string, handler: (...evt: any[]) => void) {\n\t\tif (events.has(type)) {\n\t\t\tevents.get(type).push(handler);\n\t\t} else {\n\t\t\tevents.set(type, [handler]);\n\t\t}\n\t}\n\n\t/**\n\t * Remove an event handler for the given type.\n\t *\n\t * @param  {String} type    Type of event to unregister `handler` from.\n\t * @param  {Function} handler Handler function to remove.\n\t */\n\toff(type: string, handler: (...evt: any[]) => void) {\n\t\tif (events.has(type)) {\n\t\t\tevents.set(\n\t\t\t\ttype,\n\t\t\t\tevents.get(type).filter((item: (...evt: any[]) => void) => item !== handler)\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Invoke all handlers for the given type.\n\t *\n\t * @param {String} type  The event type to invoke.\n\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler.\n\t */\n\temit(type: string, ...evt: any) {\n\t\tif (events.has(type)) {\n\t\t\tevents\n\t\t\t\t.get(type)\n\t\t\t\t.slice()\n\t\t\t\t.map((handler: (...evts: any[]) => void) => {\n\t\t\t\t\thandler(...evt);\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport default new EventBus();\n","function distance([x1, y1]: [number, number], [x2, y2]: [number, number]) {\n\treturn Math.hypot(x1 - x2, y1 - y2);\n}\n\nexport default distance;\n","const sizes = [\"Bytes\", \"KiB\", \"MiB\", \"GiB\", \"TiB\", \"PiB\"];\n\nexport default (size: number) => {\n\t// Loosely inspired from https://stackoverflow.com/a/18650828/1935861\n\tconst i = size > 0 ? Math.floor(Math.log(size) / Math.log(1024)) : 0;\n\tconst fixedSize = parseFloat((size / Math.pow(1024, i)).toFixed(1));\n\treturn `${fixedSize} ${sizes[i]}`;\n};\n","import {store} from \"../store\";\n\nexport default (network, channel) => {\n\tif (!network.isCollapsed || channel.highlight || channel.type === \"lobby\") {\n\t\treturn false;\n\t}\n\n\tif (store.state.activeChannel && channel === store.state.activeChannel.channel) {\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n","export default (event: MouseEvent | Mousetrap.ExtendedKeyboardEvent) => {\n\tif (\n\t\t(event.target as HTMLElement).tagName !== \"TEXTAREA\" &&\n\t\t(event.target as HTMLElement).tagName !== \"INPUT\"\n\t) {\n\t\treturn false;\n\t}\n\n\t// If focus is in a textarea, do not handle keybinds if user has typed anything\n\t// This is done to prevent keyboard layout binds conflicting with ours\n\t// For example alt+shift+left on macos selects a word\n\treturn !!(event.target as any).value;\n};\n","import dayjs from \"dayjs\";\n\nexport default (time: Date | number) => dayjs(time).format(\"D MMMM YYYY, HH:mm:ss\");\n","// This is a simple localStorage wrapper because browser can throw errors\n// in different situations, including:\n// - Unable to store data if storage is full\n// - Local storage is blocked if \"third-party cookies and site data\" is disabled\n//\n// For more details, see:\n// https://stackoverflow.com/q/14555347/1935861\n// https://github.com/thelounge/thelounge/issues/2699\n// https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n\nexport default {\n\tset(key: string, value: string) {\n\t\ttry {\n\t\t\twindow.localStorage.setItem(key, value);\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n\tget(key: string) {\n\t\ttry {\n\t\t\treturn window.localStorage.getItem(key);\n\t\t} catch (e) {\n\t\t\t// Return null as if data is not set\n\t\t\treturn null;\n\t\t}\n\t},\n\tremove(key: string) {\n\t\ttry {\n\t\t\twindow.localStorage.removeItem(key);\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n\tclear() {\n\t\ttry {\n\t\t\twindow.localStorage.clear();\n\t\t} catch (e) {\n\t\t\t//\n\t\t}\n\t},\n};\n","// This is a thin wrapper around `window.location`, in order to contain the\n// side-effects. Do not add logic to it as it cannot be tested, only mocked.\nexport default {\n\treload() {\n\t\twindow.location.reload();\n\t},\n};\n","<template>\n\t<div id=\"sign-in\" class=\"window\" role=\"tabpanel\" aria-label=\"Sign-in\">\n\t\t<form class=\"container\" method=\"post\" action=\"\" @submit=\"onSubmit\">\n\t\t\t<img\n\t\t\t\tsrc=\"img/logo-vertical-transparent-bg.svg\"\n\t\t\t\tclass=\"logo\"\n\t\t\t\talt=\"The Lounge\"\n\t\t\t\twidth=\"256\"\n\t\t\t\theight=\"170\"\n\t\t\t/>\n\t\t\t<img\n\t\t\t\tsrc=\"img/logo-vertical-transparent-bg-inverted.svg\"\n\t\t\t\tclass=\"logo-inverted\"\n\t\t\t\talt=\"The Lounge\"\n\t\t\t\twidth=\"256\"\n\t\t\t\theight=\"170\"\n\t\t\t/>\n\n\t\t\t<label for=\"signin-username\">Username</label>\n\t\t\t<input\n\t\t\t\tid=\"signin-username\"\n\t\t\t\tref=\"username\"\n\t\t\t\tclass=\"input\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"username\"\n\t\t\t\tautocapitalize=\"none\"\n\t\t\t\tautocorrect=\"off\"\n\t\t\t\tautocomplete=\"username\"\n\t\t\t\t:value=\"getStoredUser()\"\n\t\t\t\trequired\n\t\t\t\tautofocus\n\t\t\t/>\n\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"signin-password\">Password</label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"signin-password\"\n\t\t\t\t\t\tref=\"password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tautocapitalize=\"none\"\n\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"errorShown\" class=\"error\">Authentication failed.</div>\n\n\t\t\t<button :disabled=\"inFlight\" type=\"submit\" class=\"btn\">Sign in</button>\n\t\t</form>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport storage from \"../../js/localStorage\";\nimport socket from \"../../js/socket\";\nimport RevealPassword from \"../RevealPassword.vue\";\nimport {defineComponent, onBeforeUnmount, onMounted, ref} from \"vue\";\n\nexport default defineComponent({\n\tname: \"SignIn\",\n\tcomponents: {\n\t\tRevealPassword,\n\t},\n\tsetup() {\n\t\tconst inFlight = ref(false);\n\t\tconst errorShown = ref(false);\n\n\t\tconst username = ref<HTMLInputElement | null>(null);\n\t\tconst password = ref<HTMLInputElement | null>(null);\n\n\t\tconst onAuthFailed = () => {\n\t\t\tinFlight.value = false;\n\t\t\terrorShown.value = true;\n\t\t};\n\n\t\tconst onSubmit = (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!username.value || !password.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinFlight.value = true;\n\t\t\terrorShown.value = false;\n\n\t\t\tconst values = {\n\t\t\t\tuser: username.value?.value,\n\t\t\t\tpassword: password.value?.value,\n\t\t\t};\n\n\t\t\tstorage.set(\"user\", values.user);\n\n\t\t\tsocket.emit(\"auth:perform\", values);\n\t\t};\n\n\t\tconst getStoredUser = () => {\n\t\t\treturn storage.get(\"user\");\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tsocket.on(\"auth:failed\", onAuthFailed);\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tsocket.off(\"auth:failed\", onAuthFailed);\n\t\t});\n\n\t\treturn {\n\t\t\tinFlight,\n\t\t\terrorShown,\n\t\t\tusername,\n\t\t\tpassword,\n\t\t\tonSubmit,\n\t\t\tgetStoredUser,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div>\n\t\t<slot :is-visible=\"isVisible\" />\n\t\t<span\n\t\t\tref=\"revealButton\"\n\t\t\ttype=\"button\"\n\t\t\t:class=\"[\n\t\t\t\t'reveal-password tooltipped tooltipped-n tooltipped-no-delay',\n\t\t\t\t{'reveal-password-visible': isVisible},\n\t\t\t]\"\n\t\t\t:aria-label=\"isVisible ? 'Hide password' : 'Show password'\"\n\t\t\t@click=\"onClick\"\n\t\t>\n\t\t\t<span :aria-label=\"isVisible ? 'Hide password' : 'Show password'\" />\n\t\t</span>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\n\nexport default defineComponent({\n\tname: \"RevealPassword\",\n\tsetup() {\n\t\tconst isVisible = ref(false);\n\n\t\tconst onClick = () => {\n\t\t\tisVisible.value = !isVisible.value;\n\t\t};\n\n\t\treturn {\n\t\t\tisVisible,\n\t\t\tonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./RevealPassword.vue?vue&type=template&id=5df695c1&ts=true\"\nimport script from \"./RevealPassword.vue?vue&type=script&lang=ts\"\nexport * from \"./RevealPassword.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SignIn.vue?vue&type=template&id=52a7a731&ts=true\"\nimport script from \"./SignIn.vue?vue&type=script&lang=ts\"\nexport * from \"./SignIn.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"connect\" class=\"window\" role=\"tabpanel\" aria-label=\"Connect\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<form class=\"container\" method=\"post\" action=\"\" @submit.prevent=\"onSubmit\">\n\t\t\t<h1 class=\"title\">\n\t\t\t\t<template v-if=\"defaults.uuid\">\n\t\t\t\t\t<input v-model=\"defaults.uuid\" type=\"hidden\" name=\"uuid\" />\n\t\t\t\t\tEdit {{ defaults.name }}\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\tConnect\n\t\t\t\t\t<template\n\t\t\t\t\t\tv-if=\"config?.lockNetwork && store?.state.serverConfiguration?.public\"\n\t\t\t\t\t>\n\t\t\t\t\t\tto {{ defaults.name }}\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</h1>\n\t\t\t<template v-if=\"!config?.lockNetwork\">\n\t\t\t\t<h2>Network settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:name\"\n\t\t\t\t\t\tv-model.trim=\"defaults.name\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:host\">Server</label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:host\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.host\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tname=\"host\"\n\t\t\t\t\t\t\taria-label=\"Server address\"\n\t\t\t\t\t\t\tmaxlength=\"255\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span id=\"connect:portseparator\">:</span>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:port\"\n\t\t\t\t\t\t\tv-model=\"defaults.port\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\tmax=\"65535\"\n\t\t\t\t\t\t\tname=\"port\"\n\t\t\t\t\t\t\taria-label=\"Server port\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RevealPassword>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label></label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"defaults.tls\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"tls\"\n\t\t\t\t\t\t\t\t:disabled=\"defaults.hasSTSPolicy\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tUse secure connection (TLS)\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tv-if=\"defaults.hasSTSPolicy\"\n\t\t\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\t\t\taria-label=\"This network has a strict transport security policy, you will be unable to disable TLS\"\n\t\t\t\t\t\t\t\t> STS</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"defaults.rejectUnauthorized\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"rejectUnauthorized\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tOnly allow trusted certificates\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<h2>Proxy Settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label></label>\n\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t<label for=\"connect:proxyEnabled\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyEnabled\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyEnabled\"\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tname=\"proxyEnabled\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\tEnable Proxy\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"defaults.proxyEnabled\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyHost\">SOCKS Address</label>\n\t\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyHost\"\n\t\t\t\t\t\t\t\tv-model.trim=\"defaults.proxyHost\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\tname=\"proxyHost\"\n\t\t\t\t\t\t\t\taria-label=\"Proxy host\"\n\t\t\t\t\t\t\t\tmaxlength=\"255\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span id=\"connect:proxyPortSeparator\">:</span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyPort\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyPort\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\tmax=\"65535\"\n\t\t\t\t\t\t\t\tname=\"proxyPort\"\n\t\t\t\t\t\t\t\taria-label=\"SOCKS port\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyUsername\">Proxy username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:proxyUsername\"\n\t\t\t\t\t\t\tref=\"proxyUsernameInput\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.proxyUsername\"\n\t\t\t\t\t\t\tclass=\"input username\"\n\t\t\t\t\t\t\tname=\"proxyUsername\"\n\t\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t\t\tplaceholder=\"Proxy username\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:proxyPassword\">Proxy password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:proxyPassword\"\n\t\t\t\t\t\t\t\tref=\"proxyPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.proxyPassword\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tplaceholder=\"Proxy password\"\n\t\t\t\t\t\t\t\tname=\"proxyPassword\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"config.lockNetwork && !store.state.serverConfiguration?.public\">\n\t\t\t\t<h2>Network settings</h2>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:name\">Name</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:name\"\n\t\t\t\t\t\tv-model.trim=\"defaults.name\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RevealPassword>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<h2>User preferences</h2>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:nick\">Nick</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:nick\"\n\t\t\t\t\tv-model=\"defaults.nick\"\n\t\t\t\t\tclass=\"input nick\"\n\t\t\t\t\tname=\"nick\"\n\t\t\t\t\tpattern=\"[^\\s:!@]+\"\n\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\trequired\n\t\t\t\t\t@input=\"onNickChanged\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<template v-if=\"!config?.useHexIp\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:username\">Username</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:username\"\n\t\t\t\t\t\tref=\"usernameInput\"\n\t\t\t\t\t\tv-model.trim=\"defaults.username\"\n\t\t\t\t\t\tclass=\"input username\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:realname\">Real name</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:realname\"\n\t\t\t\t\tv-model.trim=\"defaults.realname\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tname=\"realname\"\n\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"connect-row\">\n\t\t\t\t<label for=\"connect:leaveMessage\">Leave message</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"connect:leaveMessage\"\n\t\t\t\t\tv-model.trim=\"defaults.leaveMessage\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tname=\"leaveMessage\"\n\t\t\t\t\tplaceholder=\"The Lounge - https://thelounge.chat\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<template v-if=\"defaults.uuid && !store.state.serverConfiguration?.public\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:commands\">\n\t\t\t\t\t\tCommands\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"tooltipped tooltipped-ne tooltipped-no-delay\"\n\t\t\t\t\t\t\taria-label=\"One /command per line.\nEach command will be executed in\nthe server tab on new connection\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid=\"connect:commands\"\n\t\t\t\t\t\tref=\"commandsInput\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t:value=\"defaults.commands ? defaults.commands.join('\\n') : ''\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"commands\"\n\t\t\t\t\t\t@input=\"resizeCommandsInput\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"!defaults.uuid\">\n\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t<label for=\"connect:channels\">Channels</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"connect:channels\"\n\t\t\t\t\t\tv-model.trim=\"defaults.join\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tname=\"join\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"store.state.serverConfiguration?.public\">\n\t\t\t\t<template v-if=\"config?.lockNetwork\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label></label>\n\t\t\t\t\t\t<div class=\"input-wrap\">\n\t\t\t\t\t\t\t<label class=\"tls\">\n\t\t\t\t\t\t\t\t<input v-model=\"displayPasswordField\" type=\"checkbox\" />\n\t\t\t\t\t\t\t\tI have a password\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"displayPasswordField\" class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:password\"\n\t\t\t\t\t\t\t\tref=\"publicPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.password\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tplaceholder=\"Server password (optional)\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<h2 id=\"label-auth\">Authentication</h2>\n\t\t\t\t<div class=\"connect-row connect-auth\" role=\"group\" aria-labelledby=\"label-auth\">\n\t\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"!defaults.sasl\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tNo authentication\n\t\t\t\t\t</label>\n\t\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"defaults.sasl === 'plain'\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"plain\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('plain')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tUsername + password (SASL PLAIN)\n\t\t\t\t\t</label>\n\t\t\t\t\t<label\n\t\t\t\t\t\tv-if=\"!store.state.serverConfiguration?.public && defaults.tls\"\n\t\t\t\t\t\tclass=\"opt\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t:checked=\"defaults.sasl === 'external'\"\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname=\"sasl\"\n\t\t\t\t\t\t\tvalue=\"external\"\n\t\t\t\t\t\t\t@change=\"setSaslAuth('external')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\tClient certificate (SASL EXTERNAL)\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<template v-if=\"defaults.sasl === 'plain'\">\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:username\">Account</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"connect:saslAccount\"\n\t\t\t\t\t\t\tv-model.trim=\"defaults.saslAccount\"\n\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\tname=\"saslAccount\"\n\t\t\t\t\t\t\tmaxlength=\"100\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"connect-row\">\n\t\t\t\t\t\t<label for=\"connect:password\">Password</label>\n\t\t\t\t\t\t<RevealPassword\n\t\t\t\t\t\t\tv-slot:default=\"slotProps\"\n\t\t\t\t\t\t\tclass=\"input-wrap password-container\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"connect:saslPassword\"\n\t\t\t\t\t\t\t\tv-model=\"defaults.saslPassword\"\n\t\t\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\t\t\tname=\"saslPassword\"\n\t\t\t\t\t\t\t\tmaxlength=\"300\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RevealPassword>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<div v-else-if=\"defaults.sasl === 'external'\" class=\"connect-sasl-external\">\n\t\t\t\t\t<p>The Lounge automatically generates and manages the client certificate.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tOn the IRC server, you will need to tell the services to attach the\n\t\t\t\t\t\tcertificate fingerprint (certfp) to your account, for example:\n\t\t\t\t\t</p>\n\t\t\t\t\t<pre><code>/msg NickServ CERT ADD</code></pre>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" class=\"btn\" :disabled=\"disabled ? true : false\">\n\t\t\t\t\t<template v-if=\"defaults.uuid\">Save network</template>\n\t\t\t\t\t<template v-else>Connect</template>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</template>\n\n<style>\n#connect .connect-auth {\n\tdisplay: block;\n\tmargin-bottom: 10px;\n}\n\n#connect .connect-auth .opt {\n\tdisplay: block;\n\twidth: 100%;\n}\n\n#connect .connect-auth input {\n\tmargin: 3px 10px 0 0;\n}\n\n#connect .connect-sasl-external {\n\tpadding: 10px;\n\tborder-radius: 2px;\n\tbackground-color: #d9edf7;\n\tcolor: #31708f;\n}\n\n#connect .connect-sasl-external pre {\n\tmargin: 0;\n\tuser-select: text;\n}\n</style>\n\n<script lang=\"ts\">\nimport RevealPassword from \"./RevealPassword.vue\";\nimport SidebarToggle from \"./SidebarToggle.vue\";\nimport {defineComponent, nextTick, PropType, ref, watch} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientNetwork} from \"../js/types\";\n\nexport type NetworkFormDefaults = Partial<ClientNetwork> & {\n\tjoin?: string;\n};\n\nexport default defineComponent({\n\tname: \"NetworkForm\",\n\tcomponents: {\n\t\tRevealPassword,\n\t\tSidebarToggle,\n\t},\n\tprops: {\n\t\thandleSubmit: {\n\t\t\ttype: Function as PropType<(network: ClientNetwork) => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaults: {\n\t\t\ttype: Object as PropType<NetworkFormDefaults>,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst config = ref(store.state.serverConfiguration);\n\t\tconst previousUsername = ref(props.defaults?.username);\n\t\tconst displayPasswordField = ref(false);\n\n\t\tconst publicPassword = ref<HTMLInputElement | null>(null);\n\n\t\twatch(displayPasswordField, (newValue) => {\n\t\t\tif (newValue) {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\tpublicPassword.value?.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst commandsInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst resizeCommandsInput = () => {\n\t\t\tif (!commandsInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset height first so it can down size\n\t\t\tcommandsInput.value.style.height = \"\";\n\n\t\t\t// 2 pixels to account for the border\n\t\t\tcommandsInput.value.style.height = `${Math.ceil(\n\t\t\t\tcommandsInput.value.scrollHeight + 2\n\t\t\t)}px`;\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.defaults?.commands,\n\t\t\t() => {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\tresizeCommandsInput();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.defaults?.tls,\n\t\t\t(isSecureChecked) => {\n\t\t\t\tconst ports = [6667, 6697];\n\t\t\t\tconst newPort = isSecureChecked ? 0 : 1;\n\n\t\t\t\t// If you disable TLS and current port is 6697,\n\t\t\t\t// set it to 6667, and vice versa\n\t\t\t\tif (props.defaults?.port === ports[newPort]) {\n\t\t\t\t\tprops.defaults.port = ports[1 - newPort];\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tconst setSaslAuth = (type: string) => {\n\t\t\tif (props.defaults) {\n\t\t\t\tprops.defaults.sasl = type;\n\t\t\t}\n\t\t};\n\n\t\tconst usernameInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst onNickChanged = (event: Event) => {\n\t\t\tif (!usernameInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst usernameRef = usernameInput.value;\n\n\t\t\tif (!usernameRef.value || usernameRef.value === previousUsername.value) {\n\t\t\t\tusernameRef.value = (event.target as HTMLInputElement)?.value;\n\t\t\t}\n\n\t\t\tpreviousUsername.value = (event.target as HTMLInputElement)?.value;\n\t\t};\n\n\t\tconst onSubmit = (event: Event) => {\n\t\t\tconst formData = new FormData(event.target as HTMLFormElement);\n\t\t\tconst data: Partial<ClientNetwork> = {};\n\n\t\t\tformData.forEach((value, key) => {\n\t\t\t\tdata[key] = value;\n\t\t\t});\n\n\t\t\tprops.handleSubmit(data as ClientNetwork);\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tconfig,\n\t\t\tdisplayPasswordField,\n\t\t\tpublicPassword,\n\t\t\tcommandsInput,\n\t\t\tresizeCommandsInput,\n\t\t\tsetSaslAuth,\n\t\t\tusernameInput,\n\t\t\tonNickChanged,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<button class=\"lt\" aria-label=\"Toggle channel list\" @click=\"store.commit('toggleSidebar')\" />\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"SidebarToggle\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./SidebarToggle.vue?vue&type=template&id=5256e772&ts=true\"\nimport script from \"./SidebarToggle.vue?vue&type=script&lang=ts\"\nexport * from \"./SidebarToggle.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkForm.vue?vue&type=template&id=7d6ce570&ts=true\"\nimport script from \"./NetworkForm.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkForm.vue?vue&type=script&lang=ts\"\n\nimport \"./NetworkForm.vue?vue&type=style&index=0&id=7d6ce570&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<NetworkForm :handle-submit=\"handleSubmit\" :defaults=\"defaults\" :disabled=\"disabled\" />\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\n\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport NetworkForm, {NetworkFormDefaults} from \"../NetworkForm.vue\";\n\nexport default defineComponent({\n\tname: \"Connect\",\n\tcomponents: {\n\t\tNetworkForm,\n\t},\n\tprops: {\n\t\tqueryParams: Object,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst disabled = ref(false);\n\n\t\tconst handleSubmit = (data: Record<string, any>) => {\n\t\t\tdisabled.value = true;\n\t\t\tsocket.emit(\"network:new\", data);\n\t\t};\n\n\t\tconst parseOverrideParams = (params?: Record<string, string>) => {\n\t\t\tif (!params) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst parsedParams: Record<string, any> = {};\n\n\t\t\tfor (let key of Object.keys(params)) {\n\t\t\t\tlet value = params[key];\n\n\t\t\t\t// Param can contain multiple values in an array if its supplied more than once\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tvalue = value[0];\n\t\t\t\t}\n\n\t\t\t\t// Support `channels` as a compatibility alias with other clients\n\t\t\t\tif (key === \"channels\") {\n\t\t\t\t\tkey = \"join\";\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!Object.prototype.hasOwnProperty.call(\n\t\t\t\t\t\tstore.state.serverConfiguration?.defaults,\n\t\t\t\t\t\tkey\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// When the network is locked, URL overrides should not affect disabled fields\n\t\t\t\tif (\n\t\t\t\t\tstore.state.serverConfiguration?.lockNetwork &&\n\t\t\t\t\t[\"name\", \"host\", \"port\", \"tls\", \"rejectUnauthorized\"].includes(key)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (key === \"join\") {\n\t\t\t\t\tvalue = value\n\t\t\t\t\t\t.split(\",\")\n\t\t\t\t\t\t.map((chan) => {\n\t\t\t\t\t\t\tif (!chan.match(/^[#&!+]/)) {\n\t\t\t\t\t\t\t\treturn `#${chan}`;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn chan;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(\", \");\n\t\t\t\t}\n\n\t\t\t\t// Override server provided defaults with parameters passed in the URL if they match the data type\n\t\t\t\tswitch (typeof store.state.serverConfiguration?.defaults[key]) {\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tif (value === \"0\" || value === \"false\") {\n\t\t\t\t\t\t\tparsedParams[key] = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparsedParams[key] = !!value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\tparsedParams[key] = Number(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tparsedParams[key] = String(value);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn parsedParams;\n\t\t};\n\n\t\tconst defaults = ref<Partial<NetworkFormDefaults>>(\n\t\t\tObject.assign(\n\t\t\t\t{},\n\t\t\t\tstore.state.serverConfiguration?.defaults,\n\t\t\t\tparseOverrideParams(props.queryParams)\n\t\t\t)\n\t\t);\n\n\t\treturn {\n\t\t\tdefaults,\n\t\t\tdisabled,\n\t\t\thandleSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Connect.vue?vue&type=template&id=3ec80d95&ts=true\"\nimport script from \"./Connect.vue?vue&type=script&lang=ts\"\nexport * from \"./Connect.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"settings\" class=\"window\" role=\"tabpanel\" aria-label=\"Settings\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<Navigation />\n\n\t\t<div class=\"container\">\n\t\t\t<form ref=\"settingsForm\" autocomplete=\"off\" @change=\"onChange\" @submit.prevent>\n\t\t\t\t<router-view></router-view>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport Navigation from \"../Settings/Navigation.vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"Settings\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tNavigation,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst onChange = (event: Event) => {\n\t\t\tconst ignore = [\"old_password\", \"new_password\", \"verify_password\"];\n\n\t\t\tconst name = (event.target as HTMLInputElement).name;\n\n\t\t\tif (ignore.includes(name)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet value: boolean | string;\n\n\t\t\tif ((event.target as HTMLInputElement).type === \"checkbox\") {\n\t\t\t\tvalue = (event.target as HTMLInputElement).checked;\n\t\t\t} else {\n\t\t\t\tvalue = (event.target as HTMLInputElement).value;\n\t\t\t}\n\n\t\t\tvoid store.dispatch(\"settings/update\", {name, value, sync: true});\n\t\t};\n\n\t\treturn {\n\t\t\tonChange,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<!-- 220px is the width of the sidebar, and we add 100px to allow for the text -->\n\t<aside class=\"settings-menu\">\n\t\t<h2>Settings</h2>\n\t\t<ul role=\"navigation\" aria-label=\"Settings tabs\">\n\t\t\t<SettingTabItem name=\"General\" class-name=\"general\" to=\"\" />\n\t\t\t<SettingTabItem name=\"Appearance\" class-name=\"appearance\" to=\"appearance\" />\n\t\t\t<SettingTabItem name=\"Notifications\" class-name=\"notifications\" to=\"notifications\" />\n\t\t\t<SettingTabItem name=\"Account\" class-name=\"account\" to=\"account\" />\n\t\t</ul>\n\t</aside>\n</template>\n\n<style>\n.settings-menu {\n\tposition: fixed;\n\t/* top: Header + (padding bottom of h2 - border) */\n\ttop: calc(45px + 5px);\n\t/* Mid page minus width of container and 30 pixels for padding */\n\tmargin-left: calc(50% - 480px - 30px);\n}\n\n/** The calculation is mobile +  2/3 of container width. Fairly arbitrary. */\n@media screen and (max-width: calc(768px + 320px)) {\n\t.settings-menu {\n\t\tposition: static;\n\t\twidth: min(480px, 100%);\n\t\talign-self: center;\n\t\tmargin: 0 auto;\n\t\tpadding: 0 15px;\n\t}\n}\n\n.settings-menu ul {\n\tpadding: 0;\n}\n\n.settings-menu li {\n\tfont-size: 18px;\n\tlist-style: none;\n}\n\n.settings-menu button {\n\tcolor: var(--body-color-muted);\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: inline-block;\n\ttext-align: left;\n}\n\n.settings-menu li:not(:last-of-type) button {\n\tmargin-bottom: 8px;\n}\n\n.settings-menu button::before {\n\twidth: 18px;\n\theight: 18px;\n\tdisplay: inline-block;\n\tcontent: \"\";\n\tmargin-right: 8px;\n}\n\n.settings-menu .appearance::before {\n\tcontent: \"\\f108\"; /* http://fontawesome.io/icon/desktop/ */\n}\n\n.settings-menu .account::before {\n\tcontent: \"\\f007\"; /* http://fontawesome.io/icon/user/ */\n}\n\n.settings-menu .messages::before {\n\tcontent: \"\\f0e0\"; /* http://fontawesome.io/icon/envelope/ */\n}\n\n.settings-menu .notifications::before {\n\tcontent: \"\\f0f3\"; /* http://fontawesome.io/icon/bell/ */\n}\n\n.settings-menu .general::before {\n\tcontent: \"\\f013\"; /* http://fontawesome.io/icon/cog/ */\n}\n\n.settings-menu button:hover,\n.settings-menu button.active {\n\tcolor: var(--body-color);\n}\n\n.settings-menu button.active {\n\tcursor: default;\n}\n</style>\n\n<script lang=\"ts\">\nimport SettingTabItem from \"./SettingTabItem.vue\";\nimport {defineComponent} from \"vue\";\n\nexport default defineComponent({\n\tname: \"SettingsTabs\",\n\tcomponents: {\n\t\tSettingTabItem,\n\t},\n});\n</script>\n","<template>\n\t<li :aria-label=\"name\" role=\"tab\" :aria-selected=\"route.name === name\" aria-controls=\"settings\">\n\t\t<router-link v-slot:default=\"{navigate, isExactActive}\" :to=\"'/settings/' + to\" custom>\n\t\t\t<button\n\t\t\t\t:class=\"['icon', className, {active: isExactActive}]\"\n\t\t\t\t@click=\"navigate\"\n\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t>\n\t\t\t\t{{ name }}\n\t\t\t</button>\n\t\t</router-link>\n\t</li>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useRoute} from \"vue-router\";\n\nexport default defineComponent({\n\tname: \"SettingTabListItem\",\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tto: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\n\t\treturn {\n\t\t\troute,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./SettingTabItem.vue?vue&type=template&id=3df3582f&ts=true\"\nimport script from \"./SettingTabItem.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingTabItem.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Navigation.vue?vue&type=template&id=29a7cecc&ts=true\"\nimport script from \"./Navigation.vue?vue&type=script&lang=ts\"\nexport * from \"./Navigation.vue?vue&type=script&lang=ts\"\n\nimport \"./Navigation.vue?vue&type=style&index=0&id=29a7cecc&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Settings.vue?vue&type=template&id=7dcb681f&ts=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"help\" class=\"window\" role=\"tabpanel\" aria-label=\"Help\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<h1 class=\"title\">Help</h1>\n\n\t\t\t<h2 class=\"help-version-title\">\n\t\t\t\t<span>About The Lounge</span>\n\t\t\t\t<small>\n\t\t\t\t\tv{{ store.state.serverConfiguration?.version }} (<router-link\n\t\t\t\t\t\tid=\"view-changelog\"\n\t\t\t\t\t\tto=\"/changelog\"\n\t\t\t\t\t\t>release notes</router-link\n\t\t\t\t\t>)\n\t\t\t\t</small>\n\t\t\t</h2>\n\n\t\t\t<div class=\"about\">\n\t\t\t\t<VersionChecker />\n\n\t\t\t\t<template v-if=\"store.state.serverConfiguration?.gitCommit\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThe Lounge is running from source (<a\n\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/tree/${store.state.serverConfiguration?.gitCommit}`\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>commit <code>{{ store.state.serverConfiguration?.gitCommit }}</code></a\n\t\t\t\t\t\t>).\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCompare\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/compare/${store.state.serverConfiguration?.gitCommit}...master`\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>between\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.gitCommit }}</code> and\n\t\t\t\t\t\t\t\t<code>master</code></a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto see what you are missing\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\tCompare\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/compare/${store.state.serverConfiguration?.version}...${store.state.serverConfiguration?.gitCommit}`\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>between\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.version }}</code> and\n\t\t\t\t\t\t\t\t<code>{{ store.state.serverConfiguration?.gitCommit }}</code></a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\tto see your local changes\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</template>\n\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://thelounge.chat/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"website-link\"\n\t\t\t\t\t\t>Website</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://thelounge.chat/docs/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"documentation-link\"\n\t\t\t\t\t\t>Documentation</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://github.com/thelounge/thelounge/issues/new\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\tclass=\"report-issue-link\"\n\t\t\t\t\t\t>Report an issue</a\n\t\t\t\t\t>\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<h2 v-if=\"isTouch\">Gestures</h2>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Single-Finger Swipe Left</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Hide sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Single-Finger Swipe Right</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Show sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Two-Finger Swipe Left</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"isTouch\" class=\"help-item\">\n\t\t\t\t<div class=\"subject gesture\">Two-Finger Swipe Right</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Keyboard Shortcuts</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next lobby in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous lobby in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Collapse current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>Shift</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Expand current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the next window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd></kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd></kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the previous window in the channel list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>A</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>A</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the first window with unread messages.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>S</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>S</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle sidebar.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>U</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>U</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle channel user list.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>J</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>J</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle jump to channel switcher.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>M</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>M</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Toggle recent mentions popup.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Alt</kbd> <kbd>/</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>/</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Switch to the help menu.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span><kbd>Esc</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClose current contextual window (context menu, image viewer, topic edit,\n\t\t\t\t\t\tetc) and remove focus from input.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Formatting Shortcuts</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>K</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>K</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark any text typed after this shortcut to be colored. After hitting this\n\t\t\t\t\t\tshortcut, enter an integer in the range\n\t\t\t\t\t\t<code>015</code> to select the desired color, or use the autocompletion\n\t\t\t\t\t\tmenu to choose a color name (see below).\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBackground color can be specified by putting a comma and another integer in\n\t\t\t\t\t\tthe range <code>015</code> after the foreground color number\n\t\t\t\t\t\t(autocompletion works too).\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tA color reference can be found\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://modern.ircdocs.horse/formatting.html#colors\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>here</a\n\t\t\t\t\t\t>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>B</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>B</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-bold\">bold</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>U</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>U</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-underline\">underlined</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>I</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>I</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-italic\">italics</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>S</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>S</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-strikethrough\">struck through</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>M</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>M</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut as\n\t\t\t\t\t\t<span class=\"irc-monospace\">monospaced</span>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<span v-if=\"!isApple\"><kbd>Ctrl</kbd> <kbd>O</kbd></span>\n\t\t\t\t\t<span v-else><kbd></kbd> <kbd>O</kbd></span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tMark all text typed after this shortcut to be reset to its original\n\t\t\t\t\t\tformatting.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Autocompletion</h2>\n\n\t\t\t<p>\n\t\t\t\tTo auto-complete nicknames, channels, commands, and emoji, type one of the\n\t\t\t\tcharacters below to open a suggestion list. Use the <kbd></kbd> and\n\t\t\t\t<kbd></kbd> keys to highlight an item, and insert it by pressing <kbd>Tab</kbd> or\n\t\t\t\t<kbd>Enter</kbd> (or by clicking the desired item).\n\t\t\t</p>\n\t\t\t<p>Autocompletion can be disabled in settings.</p>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>@</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Nickname</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>#</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Channel</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Commands (see list of commands below)</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>:</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tEmoji (note: requires two search characters, to avoid conflicting with\n\t\t\t\t\t\tcommon emoticons like <code>:)</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<h2>Commands</h2>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/away [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Mark yourself as away with an optional message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/back</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Remove your away status (set with <code>/away</code>).</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ban nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBan (<code>+b</code>) a user from the current channel. This can be a\n\t\t\t\t\t\tnickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/banlist</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Load the banlist for the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/collapse</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tCollapse all previews in the current channel (opposite of\n\t\t\t\t\t\t<code>/expand</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/connect host [port]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tConnect to a new IRC network. If <code>port</code> starts with a\n\t\t\t\t\t\t<code>+</code> sign, the connection will be made secure using TLS.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Alias: <code>/server</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ctcp target cmd [args]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend a <abbr title=\"Client-to-client protocol\">CTCP</abbr>\n\t\t\t\t\t\trequest. Read more about this on\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://en.wikipedia.org/wiki/Client-to-client_protocol\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>the dedicated Wikipedia article</a\n\t\t\t\t\t\t>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/deop nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRemove op (<code>-o</code>) from one or several users in the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/devoice nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tRemove voice (<code>-v</code>) from one or several users in the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/disconnect [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Disconnect from the current network with an optionally-provided message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/expand</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tExpand all previews in the current channel (opposite of\n\t\t\t\t\t\t<code>/collapse</code>)\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/invite nick [channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tInvite a user to the specified channel. If\n\t\t\t\t\t\t<code>channel</code> is omitted, user will be invited to the current\n\t\t\t\t\t\tchannel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ignore nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tBlock any messages from the specified user on the current network. This can\n\t\t\t\t\t\tbe a nickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/ignorelist</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Load the list of ignored users for the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/join channel [password]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tJoin a channel. Password is only needed in protected channels and can\n\t\t\t\t\t\tusually be omitted.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/kick nick [reason]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Kick a user from the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/kickban nick [reason]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tKick and ban (<code>+b</code>) a user from the current channel. Unlike\n\t\t\t\t\t\t<code>/ban</code>, only nicknames (and not host masks) can be used.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/list</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Retrieve a list of available channels on this network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/me message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSend an action message to the current channel. The Lounge will display it\n\t\t\t\t\t\tinline, as if the message was posted in the third person.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/mode flags [args]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSet the given flags to the current channel if the active window is a\n\t\t\t\t\t\tchannel, another user if the active window is a private message window, or\n\t\t\t\t\t\tyourself if the current window is a server window.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/msg channel message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a message to the specified channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/mute [...channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tPrevent messages from generating any feedback for a channel. This turns off\n\t\t\t\t\t\tthe highlight indicator, hides mentions and inhibits push notifications.\n\t\t\t\t\t\tMuting a network lobby mutes the entire network. Not specifying any channel\n\t\t\t\t\t\ttarget mutes the current channel. Revert with <code>/unmute</code>.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/nick newnick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Change your nickname on the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/notice channel message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Sends a notice message to the specified channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/op nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Give op (<code>+o</code>) to one or several users in the current channel.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/part [channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClose the specified channel or private message window, or the current\n\t\t\t\t\t\tchannel if <code>channel</code> is omitted.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Aliases: <code>/close</code>, <code>/leave</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/rejoin</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tLeave and immediately rejoin the current channel. Useful to quickly get op\n\t\t\t\t\t\tfrom ChanServ in an empty channel, for example.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>Alias: <code>/cycle</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/query nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a private message to the specified user.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/quit [message]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Disconnect from the current network with an optional message.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/raw message</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Send a raw message to the current IRC network.</p>\n\t\t\t\t\t<p>Aliases: <code>/quote</code>, <code>/send</code></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/slap nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Slap someone in the current channel with a trout!</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"store.state.settings.searchEnabled\" class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/search query</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Search for messages in the current channel / user</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/topic [newtopic]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tGet the topic in the current channel. If <code>newtopic</code> is specified,\n\t\t\t\t\t\tsets the topic in the current channel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unban nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUnban (<code>-b</code>) a user from the current channel. This can be a\n\t\t\t\t\t\tnickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unignore nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUnblock messages from the specified user on the current network. This can be\n\t\t\t\t\t\ta nickname or a hostmask.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/unmute [...channel]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUn-mutes the given channel(s) or the current channel if no channel is\n\t\t\t\t\t\tprovided. See <code>/mute</code> for more information.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/voice nick [...nick]</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\tGive voice (<code>+v</code>) to one or several users in the current channel.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"help-item\">\n\t\t\t\t<div class=\"subject\">\n\t\t\t\t\t<code>/whois nick</code>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"description\">\n\t\t\t\t\t<p>Retrieve information about the given user on the current network.</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport VersionChecker from \"../VersionChecker.vue\";\n\nexport default defineComponent({\n\tname: \"Help\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tVersionChecker,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst isApple = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) || false;\n\t\tconst isTouch = navigator.maxTouchPoints > 0;\n\n\t\treturn {\n\t\t\tisApple,\n\t\t\tisTouch,\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div id=\"version-checker\" :class=\"[store.state.versionStatus]\">\n\t\t<p v-if=\"store.state.versionStatus === 'loading'\">Checking for updates</p>\n\t\t<p v-if=\"store.state.versionStatus === 'new-version'\">\n\t\t\tThe Lounge <b>{{ store.state.versionData?.latest.version }}</b>\n\t\t\t<template v-if=\"store.state.versionData?.latest.prerelease\"> (pre-release) </template>\n\t\t\tis now available.\n\t\t\t<br />\n\n\t\t\t<a :href=\"store.state.versionData?.latest.url\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\tRead more on GitHub\n\t\t\t</a>\n\t\t</p>\n\t\t<p v-if=\"store.state.versionStatus === 'new-packages'\">\n\t\t\tThe Lounge is up to date, but there are out of date packages Run\n\t\t\t<code>thelounge upgrade</code> on the server to upgrade packages.\n\t\t</p>\n\t\t<template v-if=\"store.state.versionStatus === 'up-to-date'\">\n\t\t\t<p>The Lounge is up to date!</p>\n\n\t\t\t<button\n\t\t\t\tv-if=\"store.state.versionDataExpired\"\n\t\t\t\tid=\"check-now\"\n\t\t\t\tclass=\"btn btn-small\"\n\t\t\t\t@click=\"checkNow\"\n\t\t\t>\n\t\t\t\tCheck now\n\t\t\t</button>\n\t\t</template>\n\t\t<template v-if=\"store.state.versionStatus === 'error'\">\n\t\t\t<p>Information about latest release could not be retrieved.</p>\n\n\t\t\t<button id=\"check-now\" class=\"btn btn-small\" @click=\"checkNow\">Try again</button>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted} from \"vue\";\nimport socket from \"../js/socket\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"VersionChecker\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst checkNow = () => {\n\t\t\tstore.commit(\"versionData\", null);\n\t\t\tstore.commit(\"versionStatus\", \"loading\");\n\t\t\tsocket.emit(\"changelog\");\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (!store.state.versionData) {\n\t\t\t\tcheckNow();\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tcheckNow,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./VersionChecker.vue?vue&type=template&id=522019e6&ts=true\"\nimport script from \"./VersionChecker.vue?vue&type=script&lang=ts\"\nexport * from \"./VersionChecker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Help.vue?vue&type=template&id=fb36735e&ts=true\"\nimport script from \"./Help.vue?vue&type=script&lang=ts\"\nexport * from \"./Help.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"changelog\" class=\"window\" aria-label=\"Changelog\">\n\t\t<div class=\"header\">\n\t\t\t<SidebarToggle />\n\t\t</div>\n\t\t<div class=\"container\">\n\t\t\t<router-link id=\"back-to-help\" to=\"/help\"> Help</router-link>\n\n\t\t\t<template\n\t\t\t\tv-if=\"store.state.versionData?.current && store.state.versionData?.current.version\"\n\t\t\t>\n\t\t\t\t<h1 class=\"title\">\n\t\t\t\t\tRelease notes for {{ store.state.versionData.current.version }}\n\t\t\t\t</h1>\n\n\t\t\t\t<template v-if=\"store.state.versionData.current.changelog\">\n\t\t\t\t\t<h3>Introduction</h3>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref=\"changelog\"\n\t\t\t\t\t\tclass=\"changelog-text\"\n\t\t\t\t\t\tv-html=\"store.state.versionData.current.changelog\"\n\t\t\t\t\t></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<p>Unable to retrieve changelog for current release from GitHub.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if=\"store.state.serverConfiguration?.version\"\n\t\t\t\t\t\t\t:href=\"`https://github.com/thelounge/thelounge/releases/tag/v${store.state.serverConfiguration?.version}`\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>View release notes for this version on GitHub</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</p>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<p v-else>Loading changelog</p>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted, onUpdated, ref} from \"vue\";\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport SidebarToggle from \"../SidebarToggle.vue\";\n\nexport default defineComponent({\n\tname: \"Changelog\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst changelog = ref<HTMLDivElement | null>(null);\n\n\t\tconst patchChangelog = () => {\n\t\t\tif (!changelog.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst links = changelog.value.querySelectorAll(\"a\");\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\t// Make sure all links will open a new tab instead of exiting the application\n\t\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\t\t\t\tlink.setAttribute(\"rel\", \"noopener\");\n\n\t\t\t\tif (link.querySelector(\"img\")) {\n\t\t\t\t\t// Add required metadata to image links, to support built-in image viewer\n\t\t\t\t\tlink.classList.add(\"toggle-thumbnail\");\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (!store.state.versionData) {\n\t\t\t\tsocket.emit(\"changelog\");\n\t\t\t}\n\n\t\t\tpatchChangelog();\n\t\t});\n\n\t\tonUpdated(() => {\n\t\t\tpatchChangelog();\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Changelog.vue?vue&type=template&id=cdf28376&ts=true\"\nimport script from \"./Changelog.vue?vue&type=script&lang=ts\"\nexport * from \"./Changelog.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<NetworkForm\n\t\tv-if=\"networkData\"\n\t\t:handle-submit=\"handleSubmit\"\n\t\t:defaults=\"networkData\"\n\t\t:disabled=\"disabled\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, onMounted, ref, watch} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {switchToChannel} from \"../../js/router\";\nimport socket from \"../../js/socket\";\nimport {useStore} from \"../../js/store\";\nimport NetworkForm, {NetworkFormDefaults} from \"../NetworkForm.vue\";\n\nexport default defineComponent({\n\tname: \"NetworkEdit\",\n\tcomponents: {\n\t\tNetworkForm,\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\t\tconst store = useStore();\n\n\t\tconst disabled = ref(false);\n\t\tconst networkData = ref<NetworkFormDefaults | null>(null);\n\n\t\tconst setNetworkData = () => {\n\t\t\tsocket.emit(\"network:get\", String(route.params.uuid || \"\"));\n\t\t\tnetworkData.value = store.getters.findNetwork(String(route.params.uuid || \"\"));\n\t\t};\n\n\t\tconst handleSubmit = (data: {uuid: string; name: string}) => {\n\t\t\tdisabled.value = true;\n\t\t\tsocket.emit(\"network:edit\", data);\n\n\t\t\t// TODO: move networks to vuex and update state when the network info comes in\n\t\t\tconst network = store.getters.findNetwork(data.uuid);\n\n\t\t\tif (network) {\n\t\t\t\tnetwork.name = network.channels[0].name = data.name;\n\n\t\t\t\tswitchToChannel(network.channels[0]);\n\t\t\t}\n\t\t};\n\n\t\twatch(\n\t\t\t() => route.params.uuid,\n\t\t\t(newValue) => {\n\t\t\t\tsetNetworkData();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\tsetNetworkData();\n\t\t});\n\n\t\treturn {\n\t\t\tdisabled,\n\t\t\tnetworkData,\n\t\t\thandleSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./NetworkEdit.vue?vue&type=template&id=7e54a048&ts=true\"\nimport script from \"./NetworkEdit.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkEdit.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"chat-container\" class=\"window\">\n\t\t<div\n\t\t\tid=\"chat\"\n\t\t\t:class=\"{\n\t\t\t\t'time-seconds': store.state.settings.showSeconds,\n\t\t\t\t'time-12h': store.state.settings.use12hClock,\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"chat-view\"\n\t\t\t\tdata-type=\"search-results\"\n\t\t\t\taria-label=\"Search results\"\n\t\t\t\trole=\"tabpanel\"\n\t\t\t>\n\t\t\t\t<div v-if=\"network && channel\" class=\"header\">\n\t\t\t\t\t<SidebarToggle />\n\t\t\t\t\t<span class=\"title\"\n\t\t\t\t\t\t>Searching in <span class=\"channel-name\">{{ channel.name }}</span> for</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"topic\">{{ route.query.q }}</span>\n\t\t\t\t\t<MessageSearchForm :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"close\"\n\t\t\t\t\t\taria-label=\"Close search window\"\n\t\t\t\t\t\ttitle=\"Close search window\"\n\t\t\t\t\t\t@click=\"closeSearch\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"network && channel\" class=\"chat-content\">\n\t\t\t\t\t<div ref=\"chat\" class=\"chat\" tabindex=\"-1\">\n\t\t\t\t\t\t<div v-show=\"moreResultsAvailable\" class=\"show-more\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tref=\"loadMoreButton\"\n\t\t\t\t\t\t\t\t:disabled=\"\n\t\t\t\t\t\t\t\t\t!!store.state.messageSearchPendingQuery ||\n\t\t\t\t\t\t\t\t\t!store.state.isConnected\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t\t@click=\"onShowMoreClick\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span v-if=\"store.state.messageSearchPendingQuery\">Loading</span>\n\t\t\t\t\t\t\t\t<span v-else>Show older messages</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"store.state.messageSearchPendingQuery && !offset\"\n\t\t\t\t\t\t\tclass=\"search-status\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSearching\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-else-if=\"!messages.length && !offset\" class=\"search-status\">\n\t\t\t\t\t\t\tNo results found.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"messages\"\n\t\t\t\t\t\t\trole=\"log\"\n\t\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\t\taria-relevant=\"additions\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"(message, id) in messages\"\n\t\t\t\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t\t\t\tclass=\"result\"\n\t\t\t\t\t\t\t\t@click=\"jump(message, id)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DateMarker\n\t\t\t\t\t\t\t\t\tv-if=\"shouldDisplayDateMarker(message, id)\"\n\t\t\t\t\t\t\t\t\t:key=\"message.id + '-date'\"\n\t\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Message\n\t\t\t\t\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t\t\t\t\t:data-id=\"message.id\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n.channel-name {\n\tfont-weight: 700;\n}\n</style>\n\n<script lang=\"ts\">\nimport socket from \"../../js/socket\";\nimport eventbus from \"../../js/eventbus\";\n\nimport SidebarToggle from \"../SidebarToggle.vue\";\nimport Message from \"../Message.vue\";\nimport MessageSearchForm from \"../MessageSearchForm.vue\";\nimport DateMarker from \"../DateMarker.vue\";\nimport {watch, computed, defineComponent, nextTick, ref, onMounted, onUnmounted} from \"vue\";\nimport type {ClientMessage} from \"../../js/types\";\n\nimport {useStore} from \"../../js/store\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport {switchToChannel} from \"../../js/router\";\nimport {SearchQuery} from \"../../../server/plugins/messageStorage/types\";\n\nexport default defineComponent({\n\tname: \"SearchResults\",\n\tcomponents: {\n\t\tSidebarToggle,\n\t\tMessage,\n\t\tDateMarker,\n\t\tMessageSearchForm,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst route = useRoute();\n\t\tconst router = useRouter();\n\n\t\tconst chat = ref<HTMLDivElement>();\n\n\t\tconst loadMoreButton = ref<HTMLButtonElement>();\n\n\t\tconst offset = ref(0);\n\t\tconst moreResultsAvailable = ref(false);\n\t\tconst oldScrollTop = ref(0);\n\t\tconst oldChatHeight = ref(0);\n\n\t\tconst messages = computed(() => {\n\t\t\tconst results = store.state.messageSearchResults?.results;\n\n\t\t\tif (!results) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn results;\n\t\t});\n\n\t\tconst chan = computed(() => {\n\t\t\tconst chanId = parseInt(String(route.params.id || \"\"), 10);\n\t\t\treturn store.getters.findChannel(chanId);\n\t\t});\n\n\t\tconst network = computed(() => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn chan.value.network;\n\t\t});\n\n\t\tconst channel = computed(() => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn chan.value.channel;\n\t\t});\n\n\t\tconst setActiveChannel = () => {\n\t\t\tif (!chan.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tstore.commit(\"activeChannel\", chan.value);\n\t\t};\n\n\t\tconst closeSearch = () => {\n\t\t\tif (!channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitchToChannel(channel.value);\n\t\t};\n\n\t\tconst shouldDisplayDateMarker = (message: ClientMessage, id: number) => {\n\t\t\tconst previousMessage = messages.value[id - 1];\n\n\t\t\tif (!previousMessage) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn new Date(previousMessage.time).getDay() !== new Date(message.time).getDay();\n\t\t};\n\n\t\tconst clearSearchState = () => {\n\t\t\toffset.value = 0;\n\t\t\tstore.commit(\"messageSearchResults\", null);\n\t\t\tstore.commit(\"messageSearchPendingQuery\", null);\n\t\t};\n\n\t\tconst doSearch = () => {\n\t\t\tif (!network.value || !channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearSearchState(); // this is a new search, so we need to clear anything before that\n\t\t\tconst query: SearchQuery = {\n\t\t\t\tnetworkUuid: network.value.uuid,\n\t\t\t\tchannelName: channel.value.name,\n\t\t\t\tsearchTerm: String(route.query.q || \"\"),\n\t\t\t\toffset: offset.value,\n\t\t\t};\n\t\t\tstore.commit(\"messageSearchPendingQuery\", query);\n\t\t\tsocket.emit(\"search\", query);\n\t\t};\n\n\t\tconst onShowMoreClick = () => {\n\t\t\tif (!chat.value || !network.value || !channel.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\toffset.value += 100;\n\n\t\t\toldScrollTop.value = chat.value.scrollTop;\n\t\t\toldChatHeight.value = chat.value.scrollHeight;\n\n\t\t\tconst query: SearchQuery = {\n\t\t\t\tnetworkUuid: network.value.uuid,\n\t\t\t\tchannelName: channel.value.name,\n\t\t\t\tsearchTerm: String(route.query.q || \"\"),\n\t\t\t\toffset: offset.value,\n\t\t\t};\n\t\t\tstore.commit(\"messageSearchPendingQuery\", query);\n\t\t\tsocket.emit(\"search\", query);\n\t\t};\n\n\t\tconst jumpToBottom = async () => {\n\t\t\tawait nextTick();\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tel.scrollTop = el.scrollHeight;\n\t\t};\n\n\t\tconst jump = (message: ClientMessage, id: number) => {\n\t\t\t// TODO: Implement jumping to messages!\n\t\t\t// This is difficult because it means client will need to handle a potentially nonlinear message set\n\t\t\t// (loading IntersectionObserver both before AND after the messages)\n\t\t};\n\n\t\twatch(\n\t\t\t() => route.params.id,\n\t\t\t() => {\n\t\t\t\tdoSearch();\n\t\t\t\tsetActiveChannel();\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => route.query,\n\t\t\t() => {\n\t\t\t\tdoSearch();\n\t\t\t\tsetActiveChannel();\n\t\t\t}\n\t\t);\n\n\t\twatch(messages, async () => {\n\t\t\tmoreResultsAvailable.value = !!(\n\t\t\t\tmessages.value.length && !(messages.value.length % 100)\n\t\t\t);\n\n\t\t\tif (!offset.value) {\n\t\t\t\tawait jumpToBottom();\n\t\t\t} else {\n\t\t\t\tawait nextTick();\n\n\t\t\t\tconst el = chat.value;\n\n\t\t\t\tif (!el) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst currentChatHeight = el.scrollHeight;\n\t\t\t\tel.scrollTop = oldScrollTop.value + currentChatHeight - oldChatHeight.value;\n\t\t\t}\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsetActiveChannel();\n\t\t\tdoSearch();\n\n\t\t\teventbus.on(\"escapekey\", closeSearch);\n\t\t\teventbus.on(\"re-search\", doSearch);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", closeSearch);\n\t\t\teventbus.off(\"re-search\", doSearch);\n\t\t\tclearSearchState();\n\t\t});\n\n\t\treturn {\n\t\t\tchat,\n\t\t\tloadMoreButton,\n\t\t\tmessages,\n\t\t\tmoreResultsAvailable,\n\t\t\tnetwork,\n\t\t\tchannel,\n\t\t\troute,\n\t\t\toffset,\n\t\t\tstore,\n\t\t\tsetActiveChannel,\n\t\t\tcloseSearch,\n\t\t\tshouldDisplayDateMarker,\n\t\t\tdoSearch,\n\t\t\tonShowMoreClick,\n\t\t\tjumpToBottom,\n\t\t\tjump,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\t:id=\"'msg-' + message.id\"\n\t\t:class=\"[\n\t\t\t'msg',\n\t\t\t{\n\t\t\t\tself: message.self,\n\t\t\t\thighlight: message.highlight || focused,\n\t\t\t\t'previous-source': isPreviousSource,\n\t\t\t},\n\t\t]\"\n\t\t:data-type=\"message.type\"\n\t\t:data-command=\"message.command\"\n\t\t:data-from=\"message.from && message.from.nick\"\n\t>\n\t\t<span\n\t\t\taria-hidden=\"true\"\n\t\t\t:aria-label=\"messageTimeLocale\"\n\t\t\tclass=\"time tooltipped tooltipped-e\"\n\t\t\t>{{ `${messageTime}&#32;` }}\n\t\t</span>\n\t\t<template v-if=\"message.type === 'unhandled'\">\n\t\t\t<span class=\"from\">[{{ message.command }}]</span>\n\t\t\t<span class=\"content\">\n\t\t\t\t<span v-for=\"(param, id) in message.params\" :key=\"id\">{{\n\t\t\t\t\t`&#32;${param}&#32;`\n\t\t\t\t}}</span>\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else-if=\"isAction()\">\n\t\t\t<span class=\"from\"><span class=\"only-copy\">***&nbsp;</span></span>\n\t\t\t<component :is=\"messageComponent\" :network=\"network\" :message=\"message\" />\n\t\t</template>\n\t\t<template v-else-if=\"message.type === 'action'\">\n\t\t\t<span class=\"from\"><span class=\"only-copy\">*&nbsp;</span></span>\n\t\t\t<span class=\"content\" dir=\"auto\">\n\t\t\t\t<Username\n\t\t\t\t\t:user=\"message.from\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\tdir=\"auto\"\n\t\t\t\t/>&#32;<ParsedMessage :message=\"message\" />\n\t\t\t\t<LinkPreview\n\t\t\t\t\tv-for=\"preview in message.previews\"\n\t\t\t\t\t:key=\"preview.link\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:link=\"preview\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<span v-if=\"message.type === 'message'\" class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">&lt;</span>\n\t\t\t\t\t<Username :user=\"message.from\" :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">&gt;&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span v-else-if=\"message.type === 'plugin'\" class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">[</span>\n\t\t\t\t\t{{ message.from.nick }}\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">]&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span v-else class=\"from\">\n\t\t\t\t<template v-if=\"message.from && message.from.nick\">\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">-</span>\n\t\t\t\t\t<Username :user=\"message.from\" :network=\"network\" :channel=\"channel\" />\n\t\t\t\t\t<span class=\"only-copy\" aria-hidden=\"true\">-&nbsp;</span>\n\t\t\t\t</template>\n\t\t\t</span>\n\t\t\t<span class=\"content\" dir=\"auto\">\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"message.showInActive\"\n\t\t\t\t\taria-label=\"This message was shown in your active channel\"\n\t\t\t\t\tclass=\"msg-shown-in-active tooltipped tooltipped-e\"\n\t\t\t\t\t><span></span\n\t\t\t\t></span>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"message.statusmsgGroup\"\n\t\t\t\t\t:aria-label=\"`This message was only shown to users with ${message.statusmsgGroup} mode`\"\n\t\t\t\t\tclass=\"msg-statusmsg tooltipped tooltipped-e\"\n\t\t\t\t\t><span>{{ message.statusmsgGroup }}</span></span\n\t\t\t\t>\n\t\t\t\t<span v-if=\"message.isHtml\" v-html=\"message.text\"></span>\n\t\t\t\t<ParsedMessage v-else :network=\"network\" :message=\"message\" />\n\t\t\t\t<LinkPreview\n\t\t\t\t\tv-for=\"preview in message.previews\"\n\t\t\t\t\t:key=\"preview.link\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:link=\"preview\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport dayjs from \"dayjs\";\n\nimport constants from \"../js/constants\";\nimport localetime from \"../js/helpers/localetime\";\nimport Username from \"./Username.vue\";\nimport LinkPreview from \"./LinkPreview.vue\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport MessageTypes from \"./MessageTypes\";\n\nimport type {ClientChan, ClientMessage, ClientNetwork} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nMessageTypes.ParsedMessage = ParsedMessage;\nMessageTypes.LinkPreview = LinkPreview;\nMessageTypes.Username = Username;\n\nexport default defineComponent({\n\tname: \"Message\",\n\tcomponents: MessageTypes,\n\tprops: {\n\t\tmessage: {type: Object as PropType<ClientMessage>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tkeepScrollPosition: Function as PropType<() => void>,\n\t\tisPreviousSource: Boolean,\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst timeFormat = computed(() => {\n\t\t\tlet format: keyof typeof constants.timeFormats;\n\t\t\tif (store.state.settings.use12hClock) {\n\t\t\t\tformat = store.state.settings.showSeconds ? \"msg12hWithSeconds\" : \"msg12h\";\n\t\t\t} else {\n\t\t\t\tformat = store.state.settings.showSeconds ? \"msgWithSeconds\" : \"msgDefault\";\n\t\t\t}\n\t\t\treturn constants.timeFormats[format];\n\t\t});\n\t\tconst messageTime = computed(() => {\n\t\t\treturn dayjs(props.message.time).format(timeFormat.value);\n\t\t});\n\t\tconst messageTimeLocale = computed(() => {\n\t\t\treturn localetime(props.message.time);\n\t\t});\n\t\tconst messageComponent = computed(() => {\n\t\t\treturn \"message-\" + props.message.type;\n\t\t});\n\t\tconst isAction = () => {\n\t\t\treturn typeof MessageTypes[\"message-\" + props.message.type] !== \"undefined\";\n\t\t};\n\t\treturn {\n\t\t\ttimeFormat,\n\t\t\tmessageTime,\n\t\t\tmessageTimeLocale,\n\t\t\tmessageComponent,\n\t\t\tisAction,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\tv-if=\"link.shown\"\n\t\tv-show=\"link.sourceLoaded || link.type === 'link'\"\n\t\tref=\"container\"\n\t\tclass=\"preview\"\n\t\tdir=\"ltr\"\n\t>\n\t\t<div\n\t\t\tref=\"content\"\n\t\t\t:class=\"['toggle-content', 'toggle-type-' + link.type, {opened: isContentShown}]\"\n\t\t>\n\t\t\t<template v-if=\"link.type === 'link'\">\n\t\t\t\t<a\n\t\t\t\t\tv-if=\"link.thumb\"\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\tclass=\"toggle-thumbnail\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t@click=\"onThumbnailClick\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\t:src=\"link.thumb\"\n\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tclass=\"thumb\"\n\t\t\t\t\t\t@error=\"onThumbnailError\"\n\t\t\t\t\t\t@abort=\"onThumbnailError\"\n\t\t\t\t\t\t@load=\"onPreviewReady\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t\t<div class=\"toggle-text\" dir=\"auto\">\n\t\t\t\t\t<div class=\"head\">\n\t\t\t\t\t\t<div class=\"overflowable\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\t\t\t\t:title=\"link.head\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t>{{ link.head }}</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"showMoreButton\"\n\t\t\t\t\t\t\t:aria-expanded=\"isContentShown\"\n\t\t\t\t\t\t\t:aria-label=\"moreButtonLabel\"\n\t\t\t\t\t\t\tdir=\"auto\"\n\t\t\t\t\t\t\tclass=\"more\"\n\t\t\t\t\t\t\t@click=\"onMoreClick\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"more-caret\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"body overflowable\">\n\t\t\t\t\t\t<a :href=\"link.link\" :title=\"link.body\" target=\"_blank\" rel=\"noopener\">{{\n\t\t\t\t\t\t\tlink.body\n\t\t\t\t\t\t}}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'image'\">\n\t\t\t\t<a\n\t\t\t\t\t:href=\"link.link\"\n\t\t\t\t\tclass=\"toggle-thumbnail\"\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t@click=\"onThumbnailClick\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\t\t:src=\"link.thumb\"\n\t\t\t\t\t\tdecoding=\"async\"\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t@load=\"onPreviewReady\"\n\t\t\t\t\t/>\n\t\t\t\t</a>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'video'\">\n\t\t\t\t<video\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\tcontrols\n\t\t\t\t\t@canplay=\"onPreviewReady\"\n\t\t\t\t>\n\t\t\t\t\t<source :src=\"link.media\" :type=\"link.mediaType\" />\n\t\t\t\t</video>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'audio'\">\n\t\t\t\t<audio\n\t\t\t\t\tv-show=\"link.sourceLoaded\"\n\t\t\t\t\tcontrols\n\t\t\t\t\tpreload=\"metadata\"\n\t\t\t\t\t@canplay=\"onPreviewReady\"\n\t\t\t\t>\n\t\t\t\t\t<source :src=\"link.media\" :type=\"link.mediaType\" />\n\t\t\t\t</audio>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"link.type === 'error'\">\n\t\t\t\t<em v-if=\"link.error === 'image-too-big'\">\n\t\t\t\t\tThis image is larger than {{ imageMaxSize }} and cannot be previewed.\n\t\t\t\t\t<a :href=\"link.link\" target=\"_blank\" rel=\"noopener\">Click here</a>\n\t\t\t\t\tto open it in a new window.\n\t\t\t\t</em>\n\t\t\t\t<template v-else-if=\"link.error === 'message'\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<em>\n\t\t\t\t\t\t\tA preview could not be loaded.\n\t\t\t\t\t\t\t<a :href=\"link.link\" target=\"_blank\" rel=\"noopener\">Click here</a>\n\t\t\t\t\t\t\tto open it in a new window.\n\t\t\t\t\t\t</em>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<pre class=\"prefetch-error\">{{ link.message }}</pre>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\t:aria-expanded=\"isContentShown\"\n\t\t\t\t\t\t:aria-label=\"moreButtonLabel\"\n\t\t\t\t\t\tclass=\"more\"\n\t\t\t\t\t\t@click=\"onMoreClick\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"more-caret\" />\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tcomputed,\n\tdefineComponent,\n\tinject,\n\tnextTick,\n\tonBeforeUnmount,\n\tonMounted,\n\tonUnmounted,\n\tPropType,\n\tref,\n\twatch,\n} from \"vue\";\nimport {onBeforeRouteUpdate} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport friendlysize from \"../js/helpers/friendlysize\";\nimport {useStore} from \"../js/store\";\nimport type {ClientChan, ClientLinkPreview} from \"../js/types\";\nimport {imageViewerKey} from \"./App.vue\";\n\nexport default defineComponent({\n\tname: \"LinkPreview\",\n\tprops: {\n\t\tlink: {\n\t\t\ttype: Object as PropType<ClientLinkPreview>,\n\t\t\trequired: true,\n\t\t},\n\t\tkeepScrollPosition: {\n\t\t\ttype: Function as PropType<() => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\n\t\tconst showMoreButton = ref(false);\n\t\tconst isContentShown = ref(false);\n\t\tconst imageViewer = inject(imageViewerKey);\n\n\t\tonBeforeRouteUpdate((to, from, next) => {\n\t\t\t// cancel the navigation if the user is trying to close the image viewer\n\t\t\tif (imageViewer?.value?.link) {\n\t\t\t\timageViewer.value.closeViewer();\n\t\t\t\treturn next(false);\n\t\t\t}\n\n\t\t\tnext();\n\t\t});\n\n\t\tconst content = ref<HTMLDivElement | null>(null);\n\t\tconst container = ref<HTMLDivElement | null>(null);\n\n\t\tconst moreButtonLabel = computed(() => {\n\t\t\treturn isContentShown.value ? \"Less\" : \"More\";\n\t\t});\n\n\t\tconst imageMaxSize = computed(() => {\n\t\t\tif (!props.link.maxSize) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn friendlysize(props.link.maxSize);\n\t\t});\n\n\t\tconst handleResize = () => {\n\t\t\tnextTick(() => {\n\t\t\t\tif (!content.value || !container.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tshowMoreButton.value = content.value.offsetWidth >= container.value.offsetWidth;\n\t\t\t}).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(\"Error in LinkPreview.handleResize\", e);\n\t\t\t});\n\t\t};\n\n\t\tconst onPreviewReady = () => {\n\t\t\tprops.link.sourceLoaded = true;\n\n\t\t\tprops.keepScrollPosition();\n\n\t\t\tif (props.link.type === \"link\") {\n\t\t\t\thandleResize();\n\t\t\t}\n\t\t};\n\n\t\tconst onPreviewUpdate = () => {\n\t\t\t// Don't display previews while they are loading on the server\n\t\t\tif (props.link.type === \"loading\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Error does not have any media to render\n\t\t\tif (props.link.type === \"error\") {\n\t\t\t\tonPreviewReady();\n\t\t\t}\n\n\t\t\t// If link doesn't have a thumbnail, render it\n\t\t\tif (props.link.type === \"link\") {\n\t\t\t\thandleResize();\n\t\t\t\tprops.keepScrollPosition();\n\t\t\t}\n\t\t};\n\n\t\tconst onThumbnailError = () => {\n\t\t\t// If thumbnail fails to load, hide it and show the preview without it\n\t\t\tprops.link.thumb = \"\";\n\t\t\tonPreviewReady();\n\t\t};\n\n\t\tconst onThumbnailClick = (e: MouseEvent) => {\n\t\t\te.preventDefault();\n\n\t\t\tif (!imageViewer?.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\timageViewer.value.channel = props.channel;\n\t\t\timageViewer.value.link = props.link;\n\t\t};\n\n\t\tconst onMoreClick = () => {\n\t\t\tisContentShown.value = !isContentShown.value;\n\t\t\tprops.keepScrollPosition();\n\t\t};\n\n\t\tconst updateShownState = () => {\n\t\t\t// User has manually toggled the preview, do not apply default\n\t\t\tif (props.link.shown !== null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet defaultState = false;\n\n\t\t\tswitch (props.link.type) {\n\t\t\t\tcase \"error\":\n\t\t\t\t\t// Collapse all errors by default unless its a message about image being too big\n\t\t\t\t\tif (props.link.error === \"image-too-big\") {\n\t\t\t\t\t\tdefaultState = store.state.settings.media;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"link\":\n\t\t\t\t\tdefaultState = store.state.settings.links;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdefaultState = store.state.settings.media;\n\t\t\t}\n\n\t\t\tprops.link.shown = defaultState;\n\t\t};\n\n\t\tupdateShownState();\n\n\t\twatch(\n\t\t\t() => props.link.type,\n\t\t\t() => {\n\t\t\t\tupdateShownState();\n\t\t\t\tonPreviewUpdate();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"resize\", handleResize);\n\n\t\t\tonPreviewUpdate();\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"resize\", handleResize);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\t// Let this preview go through load/canplay events again,\n\t\t\t// Otherwise the browser can cause a resize on video elements\n\t\t\tprops.link.sourceLoaded = false;\n\t\t});\n\n\t\treturn {\n\t\t\tmoreButtonLabel,\n\t\t\timageMaxSize,\n\t\t\tonThumbnailClick,\n\t\t\tonThumbnailError,\n\t\t\tonMoreClick,\n\t\t\tonPreviewReady,\n\t\t\tonPreviewUpdate,\n\t\t\tshowMoreButton,\n\t\t\tisContentShown,\n\t\t\tcontent,\n\t\t\tcontainer,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreview.vue?vue&type=template&id=66dae5b1&ts=true\"\nimport script from \"./LinkPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreview.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// This creates a version of `require()` in the context of the current\n// directory, so we iterate over its content, which is a map statically built by\n// Webpack.\n// Second argument says it's recursive, third makes sure we only load templates.\nconst requireViews = require.context(\".\", false, /\\.vue$/);\n\nexport default requireViews.keys().reduce((acc: Record<string, any>, path) => {\n\tacc[\"message-\" + path.substring(2, path.length - 4)] = requireViews(path).default;\n\n\treturn acc;\n}, {});\n","import { render } from \"./Message.vue?vue&type=template&id=814514bc&ts=true\"\nimport script from \"./Message.vue?vue&type=script&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form :class=\"['message-search', {opened: searchOpened}]\" @submit.prevent=\"searchMessages\">\n\t\t<div class=\"input-wrapper\">\n\t\t\t<input\n\t\t\t\tref=\"searchInputField\"\n\t\t\t\tv-model=\"searchInput\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tname=\"search\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tplaceholder=\"Search messages\"\n\t\t\t\t@blur=\"closeSearch\"\n\t\t\t\t@keyup.esc=\"closeSearch\"\n\t\t\t/>\n\t\t</div>\n\t\t<button\n\t\t\tv-if=\"!onSearchPage\"\n\t\t\tclass=\"search\"\n\t\t\ttype=\"button\"\n\t\t\taria-label=\"Search messages in this channel\"\n\t\t\t@mousedown.prevent=\"toggleSearch\"\n\t\t/>\n\t</form>\n</template>\n\n<style>\nform.message-search {\n\tdisplay: flex;\n}\n\nform.message-search .input-wrapper {\n\tdisplay: flex;\n}\n\nform.message-search input {\n\twidth: 100%;\n\theight: auto !important;\n\tmargin: 7px 0;\n\tborder: 0;\n\tcolor: inherit;\n\tbackground-color: #fafafa;\n\tappearance: none;\n}\n\nform.message-search input::placeholder {\n\tcolor: rgba(0, 0, 0, 0.35);\n}\n\n@media (min-width: 480px) {\n\tform.message-search input {\n\t\tmin-width: 140px;\n\t}\n\n\tform.message-search input:focus {\n\t\tmin-width: 220px;\n\t}\n}\n\nform.message-search .input-wrapper {\n\tposition: absolute;\n\ttop: 45px;\n\tleft: 0;\n\tright: 0;\n\tz-index: 1;\n\theight: 0;\n\toverflow: hidden;\n\tbackground: var(--window-bg-color);\n}\n\nform.message-search .input-wrapper input {\n\tmargin: 7px;\n}\n\nform.message-search.opened .input-wrapper {\n\theight: 50px;\n}\n\n#chat form.message-search button {\n\tdisplay: flex;\n\tcolor: #607992;\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, onMounted, PropType, ref, watch} from \"vue\";\nimport {useRoute, useRouter} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageSearchForm\",\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst searchOpened = ref(false);\n\t\tconst searchInput = ref(\"\");\n\t\tconst router = useRouter();\n\t\tconst route = useRoute();\n\n\t\tconst searchInputField = ref<HTMLInputElement | null>(null);\n\n\t\tconst onSearchPage = computed(() => {\n\t\t\treturn route.name === \"SearchResults\";\n\t\t});\n\n\t\twatch(route, (newValue) => {\n\t\t\tif (newValue.query.q) {\n\t\t\t\tsearchInput.value = String(newValue.query.q);\n\t\t\t}\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsearchInput.value = String(route.query.q || \"\");\n\t\t\tsearchOpened.value = onSearchPage.value;\n\n\t\t\tif (searchInputField.value && !searchInput.value && searchOpened.value) {\n\t\t\t\tsearchInputField.value.focus();\n\t\t\t}\n\t\t});\n\n\t\tconst closeSearch = () => {\n\t\t\tif (!onSearchPage.value) {\n\t\t\t\tsearchInput.value = \"\";\n\t\t\t\tsearchOpened.value = false;\n\t\t\t}\n\t\t};\n\n\t\tconst toggleSearch = () => {\n\t\t\tif (searchOpened.value) {\n\t\t\t\tsearchInputField.value?.blur();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsearchOpened.value = true;\n\t\t\tsearchInputField.value?.focus();\n\t\t};\n\n\t\tconst searchMessages = (event: Event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!searchInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trouter\n\t\t\t\t.push({\n\t\t\t\t\tname: \"SearchResults\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tid: props.channel.id,\n\t\t\t\t\t},\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tq: searchInput.value,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (err.name === \"NavigationDuplicated\") {\n\t\t\t\t\t\t// Search for the same query again\n\t\t\t\t\t\teventbus.emit(\"re-search\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tsearchOpened,\n\t\t\tsearchInput,\n\t\t\tsearchInputField,\n\t\t\tcloseSearch,\n\t\t\ttoggleSearch,\n\t\t\tsearchMessages,\n\t\t\tonSearchPage,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./MessageSearchForm.vue?vue&type=template&id=7f7156c0&ts=true\"\nimport script from \"./MessageSearchForm.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageSearchForm.vue?vue&type=script&lang=ts\"\n\nimport \"./MessageSearchForm.vue?vue&type=style&index=0&id=7f7156c0&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div :aria-label=\"localeDate\" class=\"date-marker-container tooltipped tooltipped-s\">\n\t\t<div class=\"date-marker\">\n\t\t\t<span :aria-label=\"friendlyDate()\" class=\"date-marker-text\" />\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport dayjs from \"dayjs\";\nimport calendar from \"dayjs/plugin/calendar\";\nimport {computed, defineComponent, onBeforeUnmount, onMounted, PropType} from \"vue\";\nimport eventbus from \"../js/eventbus\";\nimport type {ClientMessage} from \"../js/types\";\n\ndayjs.extend(calendar);\n\nexport default defineComponent({\n\tname: \"DateMarker\",\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst localeDate = computed(() => dayjs(props.message.time).format(\"D MMMM YYYY\"));\n\n\t\tconst hoursPassed = () => {\n\t\t\treturn (Date.now() - Date.parse(props.message.time.toString())) / 3600000;\n\t\t};\n\n\t\tconst dayChange = () => {\n\t\t\tif (hoursPassed() >= 48) {\n\t\t\t\teventbus.off(\"daychange\", dayChange);\n\t\t\t}\n\t\t};\n\n\t\tconst friendlyDate = () => {\n\t\t\t// See http://momentjs.com/docs/#/displaying/calendar-time/\n\t\t\treturn dayjs(props.message.time).calendar(null, {\n\t\t\t\tsameDay: \"[Today]\",\n\t\t\t\tlastDay: \"[Yesterday]\",\n\t\t\t\tlastWeek: \"D MMMM YYYY\",\n\t\t\t\tsameElse: \"D MMMM YYYY\",\n\t\t\t});\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tif (hoursPassed() < 48) {\n\t\t\t\teventbus.on(\"daychange\", dayChange);\n\t\t\t}\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"daychange\", dayChange);\n\t\t});\n\n\t\treturn {\n\t\t\tlocaleDate,\n\t\t\tfriendlyDate,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./DateMarker.vue?vue&type=template&id=97dda32c&ts=true\"\nimport script from \"./DateMarker.vue?vue&type=script&lang=ts\"\nexport * from \"./DateMarker.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SearchResults.vue?vue&type=template&id=f577812e&ts=true\"\nimport script from \"./SearchResults.vue?vue&type=script&lang=ts\"\nexport * from \"./SearchResults.vue?vue&type=script&lang=ts\"\n\nimport \"./SearchResults.vue?vue&type=style&index=0&id=f577812e&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"chat-container\" class=\"window\" :data-current-channel=\"channel.name\" lang=\"\">\n\t\t<div\n\t\t\tid=\"chat\"\n\t\t\t:class=\"{\n\t\t\t\t'hide-motd': !store.state.settings.motd,\n\t\t\t\t'time-seconds': store.state.settings.showSeconds,\n\t\t\t\t'time-12h': store.state.settings.use12hClock,\n\t\t\t\t'colored-nicks': true, // TODO temporarily fixes themes, to be removed in next major version\n\t\t\t}\"\n\t\t>\n\t\t\t<div\n\t\t\t\t:id=\"'chan-' + channel.id\"\n\t\t\t\tclass=\"chat-view\"\n\t\t\t\t:data-type=\"channel.type\"\n\t\t\t\t:aria-label=\"channel.name\"\n\t\t\t\trole=\"tabpanel\"\n\t\t\t>\n\t\t\t\t<div class=\"header\">\n\t\t\t\t\t<SidebarToggle />\n\t\t\t\t\t<span class=\"title\" :aria-label=\"'Currently open ' + channel.type\">{{\n\t\t\t\t\t\tchannel.name\n\t\t\t\t\t}}</span>\n\t\t\t\t\t<div v-if=\"channel.editTopic === true\" class=\"topic-container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref=\"topicInput\"\n\t\t\t\t\t\t\t:value=\"channel.topic\"\n\t\t\t\t\t\t\tclass=\"topic-input\"\n\t\t\t\t\t\t\tplaceholder=\"Set channel topic\"\n\t\t\t\t\t\t\tenterkeyhint=\"done\"\n\t\t\t\t\t\t\t@keyup.enter=\"saveTopic\"\n\t\t\t\t\t\t\t@keyup.esc=\"channel.editTopic = false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span aria-label=\"Save topic\" class=\"save-topic\" @click=\"saveTopic\">\n\t\t\t\t\t\t\t<span type=\"button\" aria-label=\"Save topic\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:title=\"channel.topic\"\n\t\t\t\t\t\t:class=\"{topic: true, empty: !channel.topic}\"\n\t\t\t\t\t\t@dblclick=\"editTopic\"\n\t\t\t\t\t\t><ParsedMessage\n\t\t\t\t\t\t\tv-if=\"channel.topic\"\n\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t:text=\"channel.topic\"\n\t\t\t\t\t/></span>\n\t\t\t\t\t<MessageSearchForm\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tstore.state.settings.searchEnabled &&\n\t\t\t\t\t\t\t['channel', 'query'].includes(channel.type)\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"mentions\"\n\t\t\t\t\t\taria-label=\"Open your mentions\"\n\t\t\t\t\t\t@click=\"openMentions\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"menu\"\n\t\t\t\t\t\taria-label=\"Open the context menu\"\n\t\t\t\t\t\t@click=\"openContextMenu\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"channel.type === 'channel'\"\n\t\t\t\t\t\tclass=\"rt-tooltip tooltipped tooltipped-w\"\n\t\t\t\t\t\taria-label=\"Toggle user list\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"rt\"\n\t\t\t\t\t\t\taria-label=\"Toggle user list\"\n\t\t\t\t\t\t\t@click=\"store.commit('toggleUserlist')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"channel.type === 'special'\" class=\"chat-content\">\n\t\t\t\t\t<div class=\"chat\">\n\t\t\t\t\t\t<div class=\"messages\">\n\t\t\t\t\t\t\t<div class=\"msg\">\n\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\t:is=\"specialComponent\"\n\t\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"chat-content\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'scroll-down tooltipped tooltipped-w tooltipped-no-touch',\n\t\t\t\t\t\t\t{'scroll-down-shown': !channel.scrolledToBottom},\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\taria-label=\"Jump to recent messages\"\n\t\t\t\t\t\t@click=\"messageList?.jumpToBottom()\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"scroll-down-arrow\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<ChatUserList v-if=\"channel.type === 'channel'\" :channel=\"channel\" />\n\t\t\t\t\t<MessageList\n\t\t\t\t\t\tref=\"messageList\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t:focused=\"focused\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-if=\"store.state.currentUserVisibleError\"\n\t\t\tid=\"user-visible-error\"\n\t\t\t@click=\"hideUserVisibleError\"\n\t\t>\n\t\t\t{{ store.state.currentUserVisibleError }}\n\t\t</div>\n\t\t<ChatInput :network=\"network\" :channel=\"channel\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport socket from \"../js/socket\";\nimport eventbus from \"../js/eventbus\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport MessageList from \"./MessageList.vue\";\nimport ChatInput from \"./ChatInput.vue\";\nimport ChatUserList from \"./ChatUserList.vue\";\nimport SidebarToggle from \"./SidebarToggle.vue\";\nimport MessageSearchForm from \"./MessageSearchForm.vue\";\nimport ListBans from \"./Special/ListBans.vue\";\nimport ListInvites from \"./Special/ListInvites.vue\";\nimport ListChannels from \"./Special/ListChannels.vue\";\nimport ListIgnored from \"./Special/ListIgnored.vue\";\nimport {defineComponent, PropType, ref, computed, watch, nextTick, onMounted, Component} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"Chat\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tMessageList,\n\t\tChatInput,\n\t\tChatUserList,\n\t\tSidebarToggle,\n\t\tMessageSearchForm,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t\tfocused: Number,\n\t},\n\temits: [\"channel-changed\"],\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\n\t\tconst messageList = ref<typeof MessageList>();\n\t\tconst topicInput = ref<HTMLInputElement | null>(null);\n\n\t\tconst specialComponent = computed(() => {\n\t\t\tswitch (props.channel.special) {\n\t\t\t\tcase \"list_bans\":\n\t\t\t\t\treturn ListBans as Component;\n\t\t\t\tcase \"list_invites\":\n\t\t\t\t\treturn ListInvites as Component;\n\t\t\t\tcase \"list_channels\":\n\t\t\t\t\treturn ListChannels as Component;\n\t\t\t\tcase \"list_ignored\":\n\t\t\t\t\treturn ListIgnored as Component;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\n\t\tconst channelChanged = () => {\n\t\t\t// Triggered when active channel is set or changed\n\t\t\temit(\"channel-changed\", props.channel);\n\n\t\t\tsocket.emit(\"open\", props.channel.id);\n\n\t\t\tif (props.channel.usersOutdated) {\n\t\t\t\tprops.channel.usersOutdated = false;\n\n\t\t\t\tsocket.emit(\"names\", {\n\t\t\t\t\ttarget: props.channel.id,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst hideUserVisibleError = () => {\n\t\t\tstore.commit(\"currentUserVisibleError\", null);\n\t\t};\n\n\t\tconst editTopic = () => {\n\t\t\tif (props.channel.type === \"channel\") {\n\t\t\t\tprops.channel.editTopic = true;\n\t\t\t}\n\t\t};\n\n\t\tconst saveTopic = () => {\n\t\t\tprops.channel.editTopic = false;\n\n\t\t\tif (!topicInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newTopic = topicInput.value.value;\n\n\t\t\tif (props.channel.topic !== newTopic) {\n\t\t\t\tconst target = props.channel.id;\n\t\t\t\tconst text = `/raw TOPIC ${props.channel.name} :${newTopic}`;\n\t\t\t\tsocket.emit(\"input\", {target, text});\n\t\t\t}\n\t\t};\n\n\t\tconst openContextMenu = (event: any) => {\n\t\t\teventbus.emit(\"contextmenu:channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t\tnetwork: props.network,\n\t\t\t});\n\t\t};\n\n\t\tconst openMentions = (event: any) => {\n\t\t\teventbus.emit(\"mentions:toggle\", {\n\t\t\t\tevent: event,\n\t\t\t});\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.channel,\n\t\t\t() => {\n\t\t\t\tchannelChanged();\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.editTopic,\n\t\t\t(newTopic) => {\n\t\t\t\tif (newTopic) {\n\t\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\t\ttopicInput.value?.focus();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\tchannelChanged();\n\n\t\t\tif (props.channel.editTopic) {\n\t\t\t\tvoid nextTick(() => {\n\t\t\t\t\ttopicInput.value?.focus();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tmessageList,\n\t\t\ttopicInput,\n\t\t\tspecialComponent,\n\t\t\thideUserVisibleError,\n\t\t\teditTopic,\n\t\t\tsaveTopic,\n\t\t\topenContextMenu,\n\t\t\topenMentions,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div ref=\"chat\" class=\"chat\" tabindex=\"-1\">\n\t\t<div v-show=\"channel.moreHistoryAvailable\" class=\"show-more\">\n\t\t\t<button\n\t\t\t\tref=\"loadMoreButton\"\n\t\t\t\t:disabled=\"channel.historyLoading || !store.state.isConnected\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click=\"onShowMoreClick\"\n\t\t\t>\n\t\t\t\t<span v-if=\"channel.historyLoading\">Loading</span>\n\t\t\t\t<span v-else>Show older messages</span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div\n\t\t\tclass=\"messages\"\n\t\t\trole=\"log\"\n\t\t\taria-live=\"polite\"\n\t\t\taria-relevant=\"additions\"\n\t\t\t@copy=\"onCopy\"\n\t\t>\n\t\t\t<template v-for=\"(message, id) in condensedMessages\">\n\t\t\t\t<DateMarker\n\t\t\t\t\tv-if=\"shouldDisplayDateMarker(message, id)\"\n\t\t\t\t\t:key=\"message.id + '-date'\"\n\t\t\t\t\t:message=\"message as any\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"shouldDisplayUnreadMarker(Number(message.id))\"\n\t\t\t\t\t:key=\"message.id + '-unread'\"\n\t\t\t\t\tclass=\"unread-marker\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"unread-marker-text\" />\n\t\t\t\t</div>\n\n\t\t\t\t<MessageCondensed\n\t\t\t\t\tv-if=\"message.type === 'condensed'\"\n\t\t\t\t\t:key=\"message.messages[0].id\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:messages=\"message.messages\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t/>\n\t\t\t\t<Message\n\t\t\t\t\tv-else\n\t\t\t\t\t:key=\"message.id\"\n\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:message=\"message\"\n\t\t\t\t\t:keep-scroll-position=\"keepScrollPosition\"\n\t\t\t\t\t:is-previous-source=\"isPreviousSource(message, id)\"\n\t\t\t\t\t:focused=\"message.id === focused\"\n\t\t\t\t\t@toggle-link-preview=\"onLinkPreviewToggle\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {condensedTypes} from \"../../shared/irc\";\nimport eventbus from \"../js/eventbus\";\nimport clipboard from \"../js/clipboard\";\nimport socket from \"../js/socket\";\nimport Message from \"./Message.vue\";\nimport MessageCondensed from \"./MessageCondensed.vue\";\nimport DateMarker from \"./DateMarker.vue\";\nimport {\n\tcomputed,\n\tdefineComponent,\n\tnextTick,\n\tonBeforeUnmount,\n\tonBeforeUpdate,\n\tonMounted,\n\tonUnmounted,\n\tPropType,\n\tref,\n\twatch,\n} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientChan, ClientMessage, ClientNetwork, ClientLinkPreview} from \"../js/types\";\nimport Msg from \"../../server/models/msg\";\n\ntype CondensedMessageContainer = {\n\ttype: \"condensed\";\n\ttime: Date;\n\tmessages: ClientMessage[];\n\tid?: number;\n};\n\n// TODO; move into component\nlet unreadMarkerShown = false;\n\nexport default defineComponent({\n\tname: \"MessageList\",\n\tcomponents: {\n\t\tMessage,\n\t\tMessageCondensed,\n\t\tDateMarker,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t\tfocused: Number,\n\t},\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\n\t\tconst chat = ref<HTMLDivElement | null>(null);\n\t\tconst loadMoreButton = ref<HTMLButtonElement | null>(null);\n\t\tconst historyObserver = ref<IntersectionObserver | null>(null);\n\t\tconst skipNextScrollEvent = ref(false);\n\n\t\tconst isWaitingForNextTick = ref(false);\n\n\t\tconst jumpToBottom = () => {\n\t\t\tskipNextScrollEvent.value = true;\n\t\t\tprops.channel.scrolledToBottom = true;\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (el) {\n\t\t\t\tel.scrollTop = el.scrollHeight;\n\t\t\t}\n\t\t};\n\n\t\tconst onShowMoreClick = () => {\n\t\t\tif (!store.state.isConnected) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet lastMessage = -1;\n\n\t\t\t// Find the id of first message that isn't showInActive\n\t\t\t// If showInActive is set, this message is actually in another channel\n\t\t\tfor (const message of props.channel.messages) {\n\t\t\t\tif (!message.showInActive) {\n\t\t\t\t\tlastMessage = message.id;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tprops.channel.historyLoading = true;\n\n\t\t\tsocket.emit(\"more\", {\n\t\t\t\ttarget: props.channel.id,\n\t\t\t\tlastId: lastMessage,\n\t\t\t\tcondensed: store.state.settings.statusMessages !== \"shown\",\n\t\t\t});\n\t\t};\n\n\t\tconst onLoadButtonObserved = (entries: IntersectionObserverEntry[]) => {\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (!entry.isIntersecting) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tonShowMoreClick();\n\t\t\t});\n\t\t};\n\n\t\tnextTick(() => {\n\t\t\tif (!chat.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (window.IntersectionObserver) {\n\t\t\t\thistoryObserver.value = new window.IntersectionObserver(onLoadButtonObserved, {\n\t\t\t\t\troot: chat.value,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tjumpToBottom();\n\t\t}).catch((e) => {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Error in new IntersectionObserver\", e);\n\t\t});\n\n\t\tconst condensedMessages = computed(() => {\n\t\t\tif (props.channel.type !== \"channel\" && props.channel.type !== \"query\") {\n\t\t\t\treturn props.channel.messages;\n\t\t\t}\n\n\t\t\t// If actions are hidden, just return a message list with them excluded\n\t\t\tif (store.state.settings.statusMessages === \"hidden\") {\n\t\t\t\treturn props.channel.messages.filter(\n\t\t\t\t\t(message) => !condensedTypes.has(message.type)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// If actions are not condensed, just return raw message list\n\t\t\tif (store.state.settings.statusMessages !== \"condensed\") {\n\t\t\t\treturn props.channel.messages;\n\t\t\t}\n\n\t\t\tlet lastCondensedContainer: CondensedMessageContainer | null = null;\n\n\t\t\tconst condensed: (ClientMessage | CondensedMessageContainer)[] = [];\n\n\t\t\tfor (const message of props.channel.messages) {\n\t\t\t\t// If this message is not condensable, or its an action affecting our user,\n\t\t\t\t// then just append the message to container and be done with it\n\t\t\t\tif (message.self || message.highlight || !condensedTypes.has(message.type)) {\n\t\t\t\t\tlastCondensedContainer = null;\n\n\t\t\t\t\tcondensed.push(message);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!lastCondensedContainer) {\n\t\t\t\t\tlastCondensedContainer = {\n\t\t\t\t\t\ttime: message.time,\n\t\t\t\t\t\ttype: \"condensed\",\n\t\t\t\t\t\tmessages: [],\n\t\t\t\t\t};\n\n\t\t\t\t\tcondensed.push(lastCondensedContainer);\n\t\t\t\t}\n\n\t\t\t\tlastCondensedContainer!.messages.push(message);\n\n\t\t\t\t// Set id of the condensed container to last message id,\n\t\t\t\t// which is required for the unread marker to work correctly\n\t\t\t\tlastCondensedContainer!.id = message.id;\n\n\t\t\t\t// If this message is the unread boundary, create a split condensed container\n\t\t\t\tif (message.id === props.channel.firstUnread) {\n\t\t\t\t\tlastCondensedContainer = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn condensed.map((message) => {\n\t\t\t\t// Skip condensing single messages, it doesn't save any\n\t\t\t\t// space but makes useful information harder to see\n\t\t\t\tif (message.type === \"condensed\" && message.messages.length === 1) {\n\t\t\t\t\treturn message.messages[0];\n\t\t\t\t}\n\n\t\t\t\treturn message;\n\t\t\t});\n\t\t});\n\n\t\tconst shouldDisplayDateMarker = (\n\t\t\tmessage: Msg | ClientMessage | CondensedMessageContainer,\n\t\t\tid: number\n\t\t) => {\n\t\t\tconst previousMessage = condensedMessages.value[id - 1];\n\n\t\t\tif (!previousMessage) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst oldDate = new Date(previousMessage.time);\n\t\t\tconst newDate = new Date(message.time);\n\n\t\t\treturn (\n\t\t\t\toldDate.getDate() !== newDate.getDate() ||\n\t\t\t\toldDate.getMonth() !== newDate.getMonth() ||\n\t\t\t\toldDate.getFullYear() !== newDate.getFullYear()\n\t\t\t);\n\t\t};\n\n\t\tconst shouldDisplayUnreadMarker = (id: number) => {\n\t\t\tif (!unreadMarkerShown && id > props.channel.firstUnread) {\n\t\t\t\tunreadMarkerShown = true;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst isPreviousSource = (currentMessage: ClientMessage | Msg, id: number) => {\n\t\t\tconst previousMessage = condensedMessages.value[id - 1];\n\t\t\treturn !!(\n\t\t\t\tpreviousMessage &&\n\t\t\t\tcurrentMessage.type === \"message\" &&\n\t\t\t\tpreviousMessage.type === \"message\" &&\n\t\t\t\tpreviousMessage.from &&\n\t\t\t\tcurrentMessage.from.nick === previousMessage.from.nick\n\t\t\t);\n\t\t};\n\n\t\tconst onCopy = () => {\n\t\t\tif (chat.value) {\n\t\t\t\tclipboard(chat.value);\n\t\t\t}\n\t\t};\n\n\t\tconst keepScrollPosition = async () => {\n\t\t\t// If we are already waiting for the next tick to force scroll position,\n\t\t\t// we have no reason to perform more checks and set it again in the next tick\n\t\t\tif (isWaitingForNextTick.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!props.channel.scrolledToBottom) {\n\t\t\t\tif (props.channel.historyLoading) {\n\t\t\t\t\tconst heightOld = el.scrollHeight - el.scrollTop;\n\n\t\t\t\t\tisWaitingForNextTick.value = true;\n\n\t\t\t\t\tawait nextTick();\n\n\t\t\t\t\tisWaitingForNextTick.value = false;\n\t\t\t\t\tskipNextScrollEvent.value = true;\n\n\t\t\t\t\tel.scrollTop = el.scrollHeight - heightOld;\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisWaitingForNextTick.value = true;\n\t\t\tawait nextTick();\n\t\t\tisWaitingForNextTick.value = false;\n\n\t\t\tjumpToBottom();\n\t\t};\n\n\t\tconst onLinkPreviewToggle = async (preview: ClientLinkPreview, message: ClientMessage) => {\n\t\t\tawait keepScrollPosition();\n\n\t\t\t// Tell the server we're toggling so it remembers at page reload\n\t\t\tsocket.emit(\"msg:preview:toggle\", {\n\t\t\t\ttarget: props.channel.id,\n\t\t\t\tmsgId: message.id,\n\t\t\t\tlink: preview.link,\n\t\t\t\tshown: preview.shown,\n\t\t\t});\n\t\t};\n\n\t\tconst handleScroll = () => {\n\t\t\t// Setting scrollTop also triggers scroll event\n\t\t\t// We don't want to perform calculations for that\n\t\t\tif (skipNextScrollEvent.value) {\n\t\t\t\tskipNextScrollEvent.value = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = chat.value;\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprops.channel.scrolledToBottom = el.scrollHeight - el.scrollTop - el.offsetHeight <= 30;\n\t\t};\n\n\t\tconst handleResize = () => {\n\t\t\t// Keep message list scrolled to bottom on resize\n\t\t\tif (props.channel.scrolledToBottom) {\n\t\t\t\tjumpToBottom();\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tchat.value?.addEventListener(\"scroll\", handleScroll, {passive: true});\n\n\t\t\teventbus.on(\"resize\", handleResize);\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (historyObserver.value && loadMoreButton.value) {\n\t\t\t\t\thistoryObserver.value.observe(loadMoreButton.value);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\twatch(\n\t\t\t() => props.channel.id,\n\t\t\t() => {\n\t\t\t\tprops.channel.scrolledToBottom = true;\n\n\t\t\t\t// Re-add the intersection observer to trigger the check again on channel switch\n\t\t\t\t// Otherwise if last channel had the button visible, switching to a new channel won't trigger the history\n\t\t\t\tif (historyObserver.value && loadMoreButton.value) {\n\t\t\t\t\thistoryObserver.value.unobserve(loadMoreButton.value);\n\t\t\t\t\thistoryObserver.value.observe(loadMoreButton.value);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.messages,\n\t\t\tasync () => {\n\t\t\t\tawait keepScrollPosition();\n\t\t\t},\n\t\t\t{\n\t\t\t\tdeep: true,\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.pendingMessage,\n\t\t\tasync () => {\n\t\t\t\t// Keep the scroll stuck when input gets resized while typing\n\t\t\t\tawait keepScrollPosition();\n\t\t\t}\n\t\t);\n\n\t\tonBeforeUpdate(() => {\n\t\t\tunreadMarkerShown = false;\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\teventbus.off(\"resize\", handleResize);\n\t\t\tchat.value?.removeEventListener(\"scroll\", handleScroll);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tif (historyObserver.value) {\n\t\t\t\thistoryObserver.value.disconnect();\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tchat,\n\t\t\tstore,\n\t\t\tonShowMoreClick,\n\t\t\tloadMoreButton,\n\t\t\tonCopy,\n\t\t\tcondensedMessages,\n\t\t\tshouldDisplayDateMarker,\n\t\t\tshouldDisplayUnreadMarker,\n\t\t\tkeepScrollPosition,\n\t\t\tisPreviousSource,\n\t\t\tjumpToBottom,\n\t\t\tonLinkPreviewToggle,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div :class=\"['msg', {closed: isCollapsed}]\" data-type=\"condensed\">\n\t\t<div class=\"condensed-summary\">\n\t\t\t<span class=\"time\" />\n\t\t\t<span class=\"from\" />\n\t\t\t<span class=\"content\" @click=\"onCollapseClick\"\n\t\t\t\t>{{ condensedText\n\t\t\t\t}}<button class=\"toggle-button\" aria-label=\"Toggle status messages\"\n\t\t\t/></span>\n\t\t</div>\n\t\t<Message\n\t\t\tv-for=\"message in messages\"\n\t\t\t:key=\"message.id\"\n\t\t\t:network=\"network\"\n\t\t\t:message=\"message\"\n\t\t/>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType, ref} from \"vue\";\nimport {condensedTypes} from \"../../shared/irc\";\nimport {ClientMessage, ClientNetwork} from \"../js/types\";\nimport Message from \"./Message.vue\";\n\nexport default defineComponent({\n\tname: \"MessageCondensed\",\n\tcomponents: {\n\t\tMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tmessages: {\n\t\t\ttype: Array as PropType<ClientMessage[]>,\n\t\t\trequired: true,\n\t\t},\n\t\tkeepScrollPosition: {\n\t\t\ttype: Function as PropType<() => void>,\n\t\t\trequired: true,\n\t\t},\n\t\tfocused: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst isCollapsed = ref(true);\n\n\t\tconst onCollapseClick = () => {\n\t\t\tisCollapsed.value = !isCollapsed.value;\n\t\t\tprops.keepScrollPosition();\n\t\t};\n\n\t\tconst condensedText = computed(() => {\n\t\t\tconst obj: Record<string, number> = {};\n\n\t\t\tcondensedTypes.forEach((type) => {\n\t\t\t\tobj[type] = 0;\n\t\t\t});\n\n\t\t\tfor (const message of props.messages) {\n\t\t\t\t// special case since one MODE message can change multiple modes\n\t\t\t\tif (message.type === \"mode\") {\n\t\t\t\t\t// syntax: +vv-t maybe-some targets\n\t\t\t\t\t// we want the number of mode changes in the message, so count the\n\t\t\t\t\t// number of chars other than + and - before the first space\n\t\t\t\t\tconst modeChangesCount = message.text\n\t\t\t\t\t\t.split(\" \")[0]\n\t\t\t\t\t\t.split(\"\")\n\t\t\t\t\t\t.filter((char) => char !== \"+\" && char !== \"-\").length;\n\t\t\t\t\tobj[message.type] += modeChangesCount;\n\t\t\t\t} else {\n\t\t\t\t\tobj[message.type]++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Count quits as parts in condensed messages to reduce information density\n\t\t\tobj.part += obj.quit;\n\n\t\t\tconst strings: string[] = [];\n\t\t\tcondensedTypes.forEach((type) => {\n\t\t\t\tif (obj[type]) {\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase \"chghost\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1\n\t\t\t\t\t\t\t\t\t\t? \" users have changed hostname\"\n\t\t\t\t\t\t\t\t\t\t: \" user has changed hostname\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"join\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users have joined\" : \" user has joined\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"part\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users have left\" : \" user has left\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"nick\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1\n\t\t\t\t\t\t\t\t\t\t? \" users have changed nick\"\n\t\t\t\t\t\t\t\t\t\t: \" user has changed nick\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"kick\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" users were kicked\" : \" user was kicked\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"mode\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\tString(obj[type]) +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? \" modes were set\" : \" mode was set\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"away\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\t\"marked away \" +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? String(obj[type]) + \" times\" : \"once\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"back\":\n\t\t\t\t\t\t\tstrings.push(\n\t\t\t\t\t\t\t\t\"marked back \" +\n\t\t\t\t\t\t\t\t\t(obj[type] > 1 ? String(obj[type]) + \" times\" : \"once\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (strings.length) {\n\t\t\t\tlet text = strings.pop();\n\n\t\t\t\tif (strings.length) {\n\t\t\t\t\ttext = strings.join(\", \") + \", and \" + text!;\n\t\t\t\t}\n\n\t\t\t\treturn text;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t});\n\n\t\treturn {\n\t\t\tisCollapsed,\n\t\t\tcondensedText,\n\t\t\tonCollapseClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./MessageCondensed.vue?vue&type=template&id=41ebb2a0&ts=true\"\nimport script from \"./MessageCondensed.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageCondensed.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export default function (chat: HTMLDivElement) {\n\t// Disable in Firefox as it already copies flex text correctly\n\t// @ts-expect-error Property 'InstallTrigger' does not exist on type 'Window & typeof globalThis'.ts(2339)\n\tif (typeof window.InstallTrigger !== \"undefined\") {\n\t\treturn;\n\t}\n\n\tconst selection = window.getSelection();\n\n\tif (!selection) {\n\t\treturn;\n\t}\n\n\t// If selection does not span multiple elements, do nothing\n\tif (selection.anchorNode === selection.focusNode) {\n\t\treturn;\n\t}\n\n\tconst range = selection.getRangeAt(0);\n\tconst documentFragment = range.cloneContents();\n\tconst div = document.createElement(\"div\");\n\n\tdiv.id = \"js-copy-hack\";\n\tdiv.appendChild(documentFragment);\n\tchat.appendChild(div);\n\n\tselection.selectAllChildren(div);\n\n\twindow.setTimeout(() => {\n\t\tchat.removeChild(div);\n\t\tselection.removeAllRanges();\n\t\tselection.addRange(range);\n\t}, 0);\n}\n","import { render } from \"./MessageList.vue?vue&type=template&id=70fab858&ts=true\"\nimport script from \"./MessageList.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form id=\"form\" method=\"post\" action=\"\" @submit.prevent=\"onSubmit\">\n\t\t<span id=\"upload-progressbar\" />\n\t\t<span id=\"nick\">{{ network.nick }}</span>\n\t\t<textarea\n\t\t\tid=\"input\"\n\t\t\tref=\"input\"\n\t\t\tdir=\"auto\"\n\t\t\tclass=\"mousetrap\"\n\t\t\tenterkeyhint=\"send\"\n\t\t\t:value=\"channel.pendingMessage\"\n\t\t\t:placeholder=\"getInputPlaceholder(channel)\"\n\t\t\t:aria-label=\"getInputPlaceholder(channel)\"\n\t\t\t@input=\"setPendingMessage\"\n\t\t\t@keypress.enter.exact.prevent=\"onSubmit\"\n\t\t\t@blur=\"onBlur\"\n\t\t/>\n\t\t<span\n\t\t\tv-if=\"store.state.serverConfiguration?.fileUpload\"\n\t\t\tid=\"upload-tooltip\"\n\t\t\tclass=\"tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t\taria-label=\"Upload file\"\n\t\t\t@click=\"openFileUpload\"\n\t\t>\n\t\t\t<input\n\t\t\t\tid=\"upload-input\"\n\t\t\t\tref=\"uploadInput\"\n\t\t\t\ttype=\"file\"\n\t\t\t\taria-labelledby=\"upload\"\n\t\t\t\tmultiple\n\t\t\t\t@change=\"onUploadInputChange\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tid=\"upload\"\n\t\t\t\ttype=\"button\"\n\t\t\t\taria-label=\"Upload file\"\n\t\t\t\t:disabled=\"!store.state.isConnected\"\n\t\t\t/>\n\t\t</span>\n\t\t<span\n\t\t\tid=\"submit-tooltip\"\n\t\t\tclass=\"tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t\taria-label=\"Send message\"\n\t\t>\n\t\t\t<button\n\t\t\t\tid=\"submit\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\taria-label=\"Send message\"\n\t\t\t\t:disabled=\"!store.state.isConnected\"\n\t\t\t/>\n\t\t</span>\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport Mousetrap from \"mousetrap\";\nimport {wrapCursor} from \"undate\";\nimport autocompletion from \"../js/autocompletion\";\nimport commands from \"../js/commands/index\";\nimport socket from \"../js/socket\";\nimport upload from \"../js/upload\";\nimport eventbus from \"../js/eventbus\";\nimport {watch, defineComponent, nextTick, onMounted, PropType, ref, onUnmounted} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\nconst formattingHotkeys = {\n\t\"mod+k\": \"\\x03\",\n\t\"mod+b\": \"\\x02\",\n\t\"mod+u\": \"\\x1F\",\n\t\"mod+i\": \"\\x1D\",\n\t\"mod+o\": \"\\x0F\",\n\t\"mod+s\": \"\\x1e\",\n\t\"mod+m\": \"\\x11\",\n};\n\n// Autocomplete bracket and quote characters like in a modern IDE\n// For example, select `text`, press `[` key, and it becomes `[text]`\nconst bracketWraps = {\n\t'\"': '\"',\n\t\"'\": \"'\",\n\t\"(\": \")\",\n\t\"<\": \">\",\n\t\"[\": \"]\",\n\t\"{\": \"}\",\n\t\"*\": \"*\",\n\t\"`\": \"`\",\n\t\"~\": \"~\",\n\t_: \"_\",\n};\n\nexport default defineComponent({\n\tname: \"ChatInput\",\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst input = ref<HTMLTextAreaElement>();\n\t\tconst uploadInput = ref<HTMLInputElement>();\n\t\tconst autocompletionRef = ref<ReturnType<typeof autocompletion>>();\n\n\t\tconst setInputSize = () => {\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst style = window.getComputedStyle(input.value);\n\t\t\t\tconst lineHeight = parseFloat(style.lineHeight) || 1;\n\n\t\t\t\t// Start by resetting height before computing as scrollHeight does not\n\t\t\t\t// decrease when deleting characters\n\t\t\t\tinput.value.style.height = \"\";\n\n\t\t\t\t// Use scrollHeight to calculate how many lines there are in input, and ceil the value\n\t\t\t\t// because some browsers tend to incorrently round the values when using high density\n\t\t\t\t// displays or using page zoom feature\n\t\t\t\tinput.value.style.height = `${\n\t\t\t\t\tMath.ceil(input.value.scrollHeight / lineHeight) * lineHeight\n\t\t\t\t}px`;\n\t\t\t});\n\t\t};\n\n\t\tconst setPendingMessage = (e: Event) => {\n\t\t\tprops.channel.pendingMessage = (e.target as HTMLInputElement).value;\n\t\t\tprops.channel.inputHistoryPosition = 0;\n\t\t\tsetInputSize();\n\t\t};\n\n\t\tconst getInputPlaceholder = (channel: ClientChan) => {\n\t\t\tif (channel.type === \"channel\" || channel.type === \"query\") {\n\t\t\t\treturn `Write to ${channel.name}`;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t};\n\n\t\tconst onSubmit = () => {\n\t\t\tif (!input.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Triggering click event opens the virtual keyboard on mobile\n\t\t\t// This can only be called from another interactive event (e.g. button click)\n\t\t\tinput.value.click();\n\t\t\tinput.value.focus();\n\n\t\t\tif (!store.state.isConnected) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst target = props.channel.id;\n\t\t\tconst text = props.channel.pendingMessage;\n\n\t\t\tif (text.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.hide();\n\t\t\t}\n\n\t\t\tprops.channel.inputHistoryPosition = 0;\n\t\t\tprops.channel.pendingMessage = \"\";\n\t\t\tinput.value.value = \"\";\n\t\t\tsetInputSize();\n\n\t\t\t// Store new message in history if last message isn't already equal\n\t\t\tif (props.channel.inputHistory[1] !== text) {\n\t\t\t\tprops.channel.inputHistory.splice(1, 0, text);\n\t\t\t}\n\n\t\t\t// Limit input history to a 100 entries\n\t\t\tif (props.channel.inputHistory.length > 100) {\n\t\t\t\tprops.channel.inputHistory.pop();\n\t\t\t}\n\n\t\t\tif (text[0] === \"/\") {\n\t\t\t\tconst args = text.substring(1).split(\" \");\n\t\t\t\tconst cmd = args.shift()?.toLowerCase();\n\n\t\t\t\tif (!cmd) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tObject.prototype.hasOwnProperty.call(commands, cmd) &&\n\t\t\t\t\tcommands[cmd].input(args)\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsocket.emit(\"input\", {target, text});\n\t\t};\n\n\t\tconst onUploadInputChange = () => {\n\t\t\tif (!uploadInput.value || !uploadInput.value.files) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst files = Array.from(uploadInput.value.files);\n\t\t\tupload.triggerUpload(files);\n\t\t\tuploadInput.value.value = \"\"; // Reset <input> element so you can upload the same file\n\t\t};\n\n\t\tconst openFileUpload = () => {\n\t\t\tuploadInput.value?.click();\n\t\t};\n\n\t\tconst blurInput = () => {\n\t\t\tinput.value?.blur();\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.hide();\n\t\t\t}\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.channel.id,\n\t\t\t() => {\n\t\t\t\tif (autocompletionRef.value) {\n\t\t\t\t\tautocompletionRef.value.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\twatch(\n\t\t\t() => props.channel.pendingMessage,\n\t\t\t() => {\n\t\t\t\tsetInputSize();\n\t\t\t}\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", blurInput);\n\n\t\t\tif (store.state.settings.autocomplete) {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\tthrow new Error(\"ChatInput autocomplete: input element is not available\");\n\t\t\t\t}\n\n\t\t\t\tautocompletionRef.value = autocompletion(input.value);\n\t\t\t}\n\n\t\t\tconst inputTrap = Mousetrap(input.value);\n\n\t\t\tinputTrap.bind(Object.keys(formattingHotkeys), function (e, key) {\n\t\t\t\tconst modifier = formattingHotkeys[key];\n\n\t\t\t\tif (!e.target) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twrapCursor(\n\t\t\t\t\te.target as HTMLTextAreaElement,\n\t\t\t\t\tmodifier,\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionStart ===\n\t\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd\n\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t: modifier\n\t\t\t\t);\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tinputTrap.bind(Object.keys(bracketWraps), function (e, key) {\n\t\t\t\tif (\n\t\t\t\t\t(e.target as HTMLTextAreaElement)?.selectionStart !==\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd\n\t\t\t\t) {\n\t\t\t\t\twrapCursor(e.target as HTMLTextAreaElement, key, bracketWraps[key]);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinputTrap.bind([\"up\", \"down\"], (e, key) => {\n\t\t\t\tif (\n\t\t\t\t\tstore.state.isAutoCompleting ||\n\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionStart !==\n\t\t\t\t\t\t(e.target as HTMLTextAreaElement).selectionEnd ||\n\t\t\t\t\t!input.value\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst onRow = (\n\t\t\t\t\tinput.value.value.slice(undefined, input.value.selectionStart).match(/\\n/g) ||\n\t\t\t\t\t[]\n\t\t\t\t).length;\n\t\t\t\tconst totalRows = (input.value.value.match(/\\n/g) || []).length;\n\n\t\t\t\tconst {channel} = props;\n\n\t\t\t\tif (channel.inputHistoryPosition === 0) {\n\t\t\t\t\tchannel.inputHistory[channel.inputHistoryPosition] = channel.pendingMessage;\n\t\t\t\t}\n\n\t\t\t\tif (key === \"up\" && onRow === 0) {\n\t\t\t\t\tif (channel.inputHistoryPosition < channel.inputHistory.length - 1) {\n\t\t\t\t\t\tchannel.inputHistoryPosition++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\tkey === \"down\" &&\n\t\t\t\t\tchannel.inputHistoryPosition > 0 &&\n\t\t\t\t\tonRow === totalRows\n\t\t\t\t) {\n\t\t\t\t\tchannel.inputHistoryPosition--;\n\t\t\t\t} else {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tchannel.pendingMessage = channel.inputHistory[channel.inputHistoryPosition];\n\t\t\t\tinput.value.value = channel.pendingMessage;\n\t\t\t\tsetInputSize();\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tif (store.state.serverConfiguration?.fileUpload) {\n\t\t\t\tupload.mounted();\n\t\t\t}\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", blurInput);\n\n\t\t\tif (autocompletionRef.value) {\n\t\t\t\tautocompletionRef.value.destroy();\n\t\t\t\tautocompletionRef.value = undefined;\n\t\t\t}\n\n\t\t\tupload.unmounted();\n\t\t\tupload.abort();\n\t\t});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tinput,\n\t\t\tuploadInput,\n\t\t\tonUploadInputChange,\n\t\t\topenFileUpload,\n\t\t\tblurInput,\n\t\t\tonBlur,\n\t\t\tsetInputSize,\n\t\t\tupload,\n\t\t\tgetInputPlaceholder,\n\t\t\tonSubmit,\n\t\t\tsetPendingMessage,\n\t\t};\n\t},\n});\n</script>\n","import constants from \"./constants\";\n\nimport Mousetrap from \"mousetrap\";\nimport {Strategy, Textcomplete, StrategyProps} from \"@textcomplete/core\";\nimport {TextareaEditor} from \"@textcomplete/textarea\";\n\nimport fuzzy from \"fuzzy\";\n\nimport emojiMap from \"./helpers/simplemap.json\";\nimport {store} from \"./store\";\n\nexport default enableAutocomplete;\n\nconst emojiSearchTerms = Object.keys(emojiMap);\nconst emojiStrategy: StrategyProps = {\n\tid: \"emoji\",\n\tmatch: /(^|\\s):([-+\\w:?]{2,}):?$/,\n\tsearch(term: string, callback: (matches) => void) {\n\t\t// Trim colon from the matched term,\n\t\t// as we are unable to get a clean string from match regex\n\t\tterm = term.replace(/:$/, \"\");\n\t\tcallback(fuzzyGrep(term, emojiSearchTerms));\n\t},\n\ttemplate([string, original]: [string, string]) {\n\t\treturn `<span class=\"emoji\">${String(emojiMap[original])}</span> ${string}`;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + String(emojiMap[original]);\n\t},\n\tindex: 2,\n};\n\nconst nicksStrategy: StrategyProps = {\n\tid: \"nicks\",\n\tmatch: /(^|\\s)(@([a-zA-Z_[\\]\\\\^{}|`@][a-zA-Z0-9_[\\]\\\\^{}|`-]*)?)$/,\n\tsearch(term: string, callback: (matches: string[] | string[][]) => void) {\n\t\tterm = term.slice(1);\n\n\t\tif (term[0] === \"@\") {\n\t\t\t// TODO: type\n\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n\t\t\tcallback(completeNicks(term.slice(1), true).map((val) => [\"@\" + val[0], \"@\" + val[1]]));\n\t\t} else {\n\t\t\tcallback(completeNicks(term, true));\n\t\t}\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + replaceNick(original);\n\t},\n\tindex: 2,\n};\n\nconst chanStrategy: StrategyProps = {\n\tid: \"chans\",\n\tmatch: /(^|\\s)((?:#|\\+|&|![A-Z0-9]{5})(?:[^\\s]+)?)$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tcallback(completeChans(term));\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn \"$1\" + original;\n\t},\n\tindex: 2,\n};\n\nconst commandStrategy: StrategyProps = {\n\tid: \"commands\",\n\tmatch: /^\\/(\\w*)$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tcallback(completeCommands(\"/\" + term));\n\t},\n\ttemplate([string]: [string, string]) {\n\t\treturn string;\n\t},\n\treplace([, original]: [string, string]) {\n\t\treturn original;\n\t},\n\tindex: 1,\n};\n\nconst foregroundColorStrategy: StrategyProps = {\n\tid: \"foreground-colors\",\n\tmatch: /\\x03(\\d{0,2}|[A-Za-z ]{0,10})$/,\n\tsearch(term: string, callback: (matches: string[][]) => void) {\n\t\tterm = term.toLowerCase();\n\n\t\tconst matchingColorCodes = constants.colorCodeMap\n\t\t\t.filter((i) => fuzzy.test(term, i[0]) || fuzzy.test(term, i[1]))\n\t\t\t.map((i) => {\n\t\t\t\tif (fuzzy.test(term, i[1])) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ti[0],\n\t\t\t\t\t\tfuzzy.match(term, i[1], {\n\t\t\t\t\t\t\tpre: \"<b>\",\n\t\t\t\t\t\t\tpost: \"</b>\",\n\t\t\t\t\t\t}).rendered,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn i;\n\t\t\t});\n\n\t\tcallback(matchingColorCodes);\n\t},\n\ttemplate(value: string[]) {\n\t\treturn `<span class=\"irc-fg${parseInt(value[0], 10)}\">${value[1]}</span>`;\n\t},\n\treplace(value: string) {\n\t\treturn \"\\x03\" + value[0];\n\t},\n\tindex: 1,\n};\n\nconst backgroundColorStrategy: StrategyProps = {\n\tid: \"background-colors\",\n\tmatch: /\\x03(\\d{2}),(\\d{0,2}|[A-Za-z ]{0,10})$/,\n\tsearch(term: string, callback: (matchingColorCodes: string[][]) => void, match: string[]) {\n\t\tterm = term.toLowerCase();\n\t\tconst matchingColorCodes = constants.colorCodeMap\n\t\t\t.filter((i) => fuzzy.test(term, i[0]) || fuzzy.test(term, i[1]))\n\t\t\t.map((pair) => {\n\t\t\t\tif (fuzzy.test(term, pair[1])) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\tpair[0],\n\t\t\t\t\t\tfuzzy.match(term, pair[1], {\n\t\t\t\t\t\t\tpre: \"<b>\",\n\t\t\t\t\t\t\tpost: \"</b>\",\n\t\t\t\t\t\t}).rendered,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn pair;\n\t\t\t})\n\t\t\t.map((pair) => pair.concat(match[1])); // Needed to pass fg color to `template`...\n\n\t\tcallback(matchingColorCodes);\n\t},\n\ttemplate(value: string[]) {\n\t\treturn `<span class=\"irc-fg${parseInt(value[2], 10)} irc-bg irc-bg${parseInt(\n\t\t\tvalue[0],\n\t\t\t10\n\t\t)}\">${value[1]}</span>`;\n\t},\n\treplace(value: string[]) {\n\t\treturn \"\\x03$1,\" + value[0];\n\t},\n\tindex: 2,\n};\n\nfunction enableAutocomplete(input: HTMLTextAreaElement) {\n\tlet tabCount = 0;\n\tlet lastMatch = \"\";\n\tlet currentMatches: string[] | string[][] = [];\n\n\tinput.addEventListener(\"input\", (e) => {\n\t\tif ((e as CustomEvent).detail === \"autocomplete\") {\n\t\t\treturn;\n\t\t}\n\n\t\ttabCount = 0;\n\t\tcurrentMatches = [];\n\t\tlastMatch = \"\";\n\t});\n\n\tMousetrap(input).bind(\n\t\t\"tab\",\n\t\t(e) => {\n\t\t\tif (store.state.isAutoCompleting) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t\tconst text = input.value;\n\n\t\t\tif (tabCount === 0) {\n\t\t\t\tlastMatch = text.substring(0, input.selectionStart).split(/\\s/).pop() || \"\";\n\n\t\t\t\tif (lastMatch.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcurrentMatches = completeNicks(lastMatch, false);\n\n\t\t\t\tif (currentMatches.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst position = input.selectionStart - lastMatch.length;\n\t\t\tconst newMatch = replaceNick(\n\t\t\t\t// TODO: type this properly\n\t\t\t\tString(currentMatches[tabCount % currentMatches.length]),\n\t\t\t\tposition\n\t\t\t);\n\t\t\tconst remainder = text.substring(input.selectionStart);\n\n\t\t\tinput.value = text.substr(0, position) + newMatch + remainder;\n\n\t\t\tinput.selectionStart -= remainder.length;\n\t\t\tinput.selectionEnd = input.selectionStart;\n\n\t\t\t// Propagate change to Vue model\n\t\t\tinput.dispatchEvent(\n\t\t\t\tnew CustomEvent(\"input\", {\n\t\t\t\t\tdetail: \"autocomplete\",\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tlastMatch = newMatch;\n\t\t\ttabCount++;\n\t\t},\n\t\t\"keydown\"\n\t);\n\n\tconst strategies = [\n\t\temojiStrategy,\n\t\tnicksStrategy,\n\t\tchanStrategy,\n\t\tcommandStrategy,\n\t\tforegroundColorStrategy,\n\t\tbackgroundColorStrategy,\n\t];\n\n\tconst editor = new TextareaEditor(input);\n\tconst textcomplete = new Textcomplete(editor, strategies, {\n\t\tdropdown: {\n\t\t\tclassName: \"textcomplete-menu\",\n\t\t\tplacement: \"top\",\n\t\t},\n\t});\n\n\ttextcomplete.on(\"show\", () => {\n\t\tstore.commit(\"isAutoCompleting\", true);\n\t});\n\n\ttextcomplete.on(\"hidden\", () => {\n\t\tstore.commit(\"isAutoCompleting\", false);\n\t});\n\n\treturn {\n\t\thide() {\n\t\t\ttextcomplete.hide();\n\t\t},\n\t\tdestroy() {\n\t\t\ttextcomplete.destroy();\n\t\t\tstore.commit(\"isAutoCompleting\", false);\n\t\t},\n\t};\n}\n\nfunction replaceNick(original: string, position = 1) {\n\t// If no postfix specified, return autocompleted nick as-is\n\tif (!store.state.settings.nickPostfix) {\n\t\treturn original;\n\t}\n\n\t// If there is whitespace in the input already, append space to nick\n\tif (position > 0 && /\\s/.test(store.state.activeChannel?.channel.pendingMessage || \"\")) {\n\t\treturn original + \" \";\n\t}\n\n\t// If nick is first in the input, append specified postfix\n\treturn original + store.state.settings.nickPostfix;\n}\n\nfunction fuzzyGrep<T>(term: string, array: Array<T>) {\n\tconst results = fuzzy.filter(term, array, {\n\t\tpre: \"<b>\",\n\t\tpost: \"</b>\",\n\t});\n\treturn results.map((el) => [el.string, el.original]);\n}\n\nfunction rawNicks() {\n\tif (!store.state.activeChannel) {\n\t\treturn [];\n\t}\n\n\tif (store.state.activeChannel.channel.users.length > 0) {\n\t\tconst users = store.state.activeChannel.channel.users.slice();\n\n\t\treturn users.sort((a, b) => b.lastMessage - a.lastMessage).map((u) => u.nick);\n\t}\n\n\tconst me = store.state.activeChannel.network.nick;\n\tconst otherUser = store.state.activeChannel.channel.name;\n\n\t// If this is a query, add their name to autocomplete\n\tif (me !== otherUser && store.state.activeChannel.channel.type === \"query\") {\n\t\treturn [otherUser, me];\n\t}\n\n\t// Return our own name by default for anything that isn't a channel or query\n\treturn [me];\n}\n\nfunction completeNicks(word: string, isFuzzy: boolean) {\n\tconst users = rawNicks();\n\tword = word.toLowerCase();\n\n\tif (isFuzzy) {\n\t\treturn fuzzyGrep(word, users);\n\t}\n\n\treturn users.filter((w) => !w.toLowerCase().indexOf(word));\n}\n\nfunction getCommands() {\n\tlet cmds = constants.commands.slice();\n\n\tif (!store.state.settings.searchEnabled) {\n\t\tcmds = cmds.filter((c) => c !== \"/search\");\n\t}\n\n\treturn cmds;\n}\n\nfunction completeCommands(word: string) {\n\tconst commands = getCommands();\n\treturn fuzzyGrep(word, commands);\n}\n\nfunction completeChans(word: string) {\n\tconst words: string[] = [];\n\n\tif (store.state.activeChannel) {\n\t\tfor (const channel of store.state.activeChannel.network.channels) {\n\t\t\t// Push all channels that start with the same CHANTYPE\n\t\t\tif (channel.type === \"channel\" && channel.name[0] === word[0]) {\n\t\t\t\twords.push(channel.name);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fuzzyGrep(word, words);\n}\n","import { render } from \"./ChatInput.vue?vue&type=template&id=027606da&ts=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<aside\n\t\tref=\"userlist\"\n\t\tclass=\"userlist\"\n\t\t:aria-label=\"'User list for ' + channel.name\"\n\t\t@mouseleave=\"removeHoverUser\"\n\t>\n\t\t<div class=\"count\">\n\t\t\t<input\n\t\t\t\tref=\"input\"\n\t\t\t\t:value=\"userSearchInput\"\n\t\t\t\t:placeholder=\"\n\t\t\t\t\tchannel.users.length + ' user' + (channel.users.length === 1 ? '' : 's')\n\t\t\t\t\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tclass=\"search\"\n\t\t\t\taria-label=\"Search among the user list\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\t@input=\"setUserSearchInput\"\n\t\t\t\t@keydown.up=\"navigateUserList($event, -1)\"\n\t\t\t\t@keydown.down=\"navigateUserList($event, 1)\"\n\t\t\t\t@keydown.page-up=\"navigateUserList($event, -10)\"\n\t\t\t\t@keydown.page-down=\"navigateUserList($event, 10)\"\n\t\t\t\t@keydown.enter=\"selectUser\"\n\t\t\t/>\n\t\t</div>\n\t\t<div class=\"names\">\n\t\t\t<div\n\t\t\t\tv-for=\"(users, mode) in groupedUsers\"\n\t\t\t\t:key=\"mode\"\n\t\t\t\t:class=\"['user-mode', getModeClass(String(mode))]\"\n\t\t\t>\n\t\t\t\t<template v-if=\"userSearchInput.length > 0\">\n\t\t\t\t\t<!-- eslint-disable vue/no-v-text-v-html-on-component -->\n\t\t\t\t\t<Username\n\t\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\t\t:key=\"user.original.nick + '-search'\"\n\t\t\t\t\t\t:on-hover=\"hoverUser\"\n\t\t\t\t\t\t:active=\"user.original === activeUser\"\n\t\t\t\t\t\t:user=\"user.original\"\n\t\t\t\t\t\tv-html=\"user.string\"\n\t\t\t\t\t/>\n\t\t\t\t\t<!-- eslint-enable -->\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<Username\n\t\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\t\t:key=\"user.nick\"\n\t\t\t\t\t\t:on-hover=\"hoverUser\"\n\t\t\t\t\t\t:active=\"user === activeUser\"\n\t\t\t\t\t\t:user=\"user\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t</aside>\n</template>\n\n<script lang=\"ts\">\nimport {filter as fuzzyFilter} from \"fuzzy\";\nimport {computed, defineComponent, nextTick, PropType, ref} from \"vue\";\nimport type {UserInMessage} from \"../../server/models/msg\";\nimport type {ClientChan, ClientUser} from \"../js/types\";\nimport Username from \"./Username.vue\";\n\nconst modes = {\n\t\"~\": \"owner\",\n\t\"&\": \"admin\",\n\t\"!\": \"admin\",\n\t\"@\": \"op\",\n\t\"%\": \"half-op\",\n\t\"+\": \"voice\",\n\t\"\": \"normal\",\n};\n\nexport default defineComponent({\n\tname: \"ChatUserList\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst userSearchInput = ref(\"\");\n\t\tconst activeUser = ref<UserInMessage | null>();\n\t\tconst userlist = ref<HTMLDivElement>();\n\t\tconst filteredUsers = computed(() => {\n\t\t\tif (!userSearchInput.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn fuzzyFilter(userSearchInput.value, props.channel.users, {\n\t\t\t\tpre: \"<b>\",\n\t\t\t\tpost: \"</b>\",\n\t\t\t\textract: (u) => u.nick,\n\t\t\t});\n\t\t});\n\n\t\tconst groupedUsers = computed(() => {\n\t\t\tconst groups = {};\n\n\t\t\tif (userSearchInput.value && filteredUsers.value) {\n\t\t\t\tconst result = filteredUsers.value;\n\n\t\t\t\tfor (const user of result) {\n\t\t\t\t\tconst mode = user.original.modes[0] || \"\";\n\n\t\t\t\t\tif (!groups[mode]) {\n\t\t\t\t\t\tgroups[mode] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prepend user mode to search result\n\t\t\t\t\tuser.string = mode + user.string;\n\n\t\t\t\t\tgroups[mode].push(user);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const user of props.channel.users) {\n\t\t\t\t\tconst mode = user.modes[0] || \"\";\n\n\t\t\t\t\tif (!groups[mode]) {\n\t\t\t\t\t\tgroups[mode] = [user];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgroups[mode].push(user);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn groups as {\n\t\t\t\t[mode: string]: (ClientUser & {\n\t\t\t\t\toriginal: UserInMessage;\n\t\t\t\t\tstring: string;\n\t\t\t\t})[];\n\t\t\t};\n\t\t});\n\n\t\tconst setUserSearchInput = (e: Event) => {\n\t\t\tuserSearchInput.value = (e.target as HTMLInputElement).value;\n\t\t};\n\n\t\tconst getModeClass = (mode: string) => {\n\t\t\treturn modes[mode] as typeof modes;\n\t\t};\n\n\t\tconst selectUser = () => {\n\t\t\t// Simulate a click on the active user to open the context menu.\n\t\t\t// Coordinates are provided to position the menu correctly.\n\t\t\tif (!activeUser.value || !userlist.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst el = userlist.value.querySelector(\".active\");\n\n\t\t\tif (!el) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rect = el.getBoundingClientRect();\n\t\t\tconst ev = new MouseEvent(\"click\", {\n\t\t\t\tview: window,\n\t\t\t\tbubbles: true,\n\t\t\t\tcancelable: true,\n\t\t\t\tclientX: rect.left,\n\t\t\t\tclientY: rect.top + rect.height,\n\t\t\t});\n\t\t\tel.dispatchEvent(ev);\n\t\t};\n\n\t\tconst hoverUser = (user: UserInMessage) => {\n\t\t\tactiveUser.value = user;\n\t\t};\n\n\t\tconst removeHoverUser = () => {\n\t\t\tactiveUser.value = null;\n\t\t};\n\n\t\tconst scrollToActiveUser = () => {\n\t\t\t// Scroll the list if needed after the active class is applied\n\t\t\tvoid nextTick(() => {\n\t\t\t\tconst el = userlist.value?.querySelector(\".active\");\n\t\t\t\tel?.scrollIntoView({block: \"nearest\", inline: \"nearest\"});\n\t\t\t});\n\t\t};\n\n\t\tconst navigateUserList = (event: Event, direction: number) => {\n\t\t\t// Prevent propagation to stop global keybind handler from capturing pagedown/pageup\n\t\t\t// and redirecting it to the message list container for scrolling\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tlet users = props.channel.users;\n\n\t\t\t// Only using filteredUsers when we have to avoids filtering when it's not needed\n\t\t\tif (userSearchInput.value && filteredUsers.value) {\n\t\t\t\tusers = filteredUsers.value.map((result) => result.original);\n\t\t\t}\n\n\t\t\t// Bail out if there's no users to select\n\t\t\tif (!users.length) {\n\t\t\t\tactiveUser.value = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst abort = () => {\n\t\t\t\tactiveUser.value = direction ? users[0] : users[users.length - 1];\n\t\t\t\tscrollToActiveUser();\n\t\t\t};\n\n\t\t\t// If there's no active user select the first or last one depending on direction\n\t\t\tif (!activeUser.value) {\n\t\t\t\tabort();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet currentIndex = users.indexOf(activeUser.value as ClientUser);\n\n\t\t\tif (currentIndex === -1) {\n\t\t\t\tabort();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\t// Wrap around the list if necessary. Normaly each loop iterates once at most,\n\t\t\t// but might iterate more often if pgup or pgdown are used in a very short user list\n\t\t\twhile (currentIndex < 0) {\n\t\t\t\tcurrentIndex += users.length;\n\t\t\t}\n\n\t\t\twhile (currentIndex > users.length - 1) {\n\t\t\t\tcurrentIndex -= users.length;\n\t\t\t}\n\n\t\t\tactiveUser.value = users[currentIndex];\n\t\t\tscrollToActiveUser();\n\t\t};\n\n\t\treturn {\n\t\t\tfilteredUsers,\n\t\t\tgroupedUsers,\n\t\t\tuserSearchInput,\n\t\t\tactiveUser,\n\t\t\tuserlist,\n\n\t\t\tsetUserSearchInput,\n\t\t\tgetModeClass,\n\t\t\tselectUser,\n\t\t\thoverUser,\n\t\t\tremoveHoverUser,\n\t\t\tnavigateUserList,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ChatUserList.vue?vue&type=template&id=709fe8dc&ts=true\"\nimport script from \"./ChatUserList.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatUserList.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"ban-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Banned</th>\n\t\t\t\t<th class=\"banned_by\">Banned By</th>\n\t\t\t\t<th class=\"banned_at\">Banned At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"ban in channel.data\" :key=\"ban.hostmask\">\n\t\t\t\t<td class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"ban.hostmask\" /></td>\n\t\t\t\t<td class=\"banned_by\">{{ ban.banned_by }}</td>\n\t\t\t\t<td class=\"banned_at\">{{ localetime(ban.banned_at) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localeTime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListBans\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\tconst localetime = (date: number | Date) => {\n\t\t\treturn localeTime(date);\n\t\t};\n\n\t\treturn {\n\t\t\tlocaletime,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListBans.vue?vue&type=template&id=43e48268&ts=true\"\nimport script from \"./ListBans.vue?vue&type=script&lang=ts\"\nexport * from \"./ListBans.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"invite-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Invited</th>\n\t\t\t\t<th class=\"invitened_by\">Invited By</th>\n\t\t\t\t<th class=\"invitened_at\">Invited At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"invite in channel.data\" :key=\"invite.hostmask\">\n\t\t\t\t<td class=\"hostmask\">\n\t\t\t\t\t<ParsedMessage :network=\"network\" :text=\"invite.hostmask\" />\n\t\t\t\t</td>\n\t\t\t\t<td class=\"invitened_by\">{{ invite.invited_by }}</td>\n\t\t\t\t<td class=\"invitened_at\">{{ localetime(invite.invited_at) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListInvites\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime: (date: Date) => localetime(date),\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListInvites.vue?vue&type=template&id=47fd21b2&ts=true\"\nimport script from \"./ListInvites.vue?vue&type=script&lang=ts\"\nexport * from \"./ListInvites.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span v-if=\"channel.data.text\">{{ channel.data.text }}</span>\n\t<table v-else class=\"channel-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"channel\">Channel</th>\n\t\t\t\t<th class=\"users\">Users</th>\n\t\t\t\t<th class=\"topic\">Topic</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"chan in channel.data\" :key=\"chan.channel\">\n\t\t\t\t<td class=\"channel\"><ParsedMessage :network=\"network\" :text=\"chan.channel\" /></td>\n\t\t\t\t<td class=\"users\">{{ chan.num_users }}</td>\n\t\t\t\t<td class=\"topic\"><ParsedMessage :network=\"network\" :text=\"chan.topic\" /></td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientChan, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\n\nexport default defineComponent({\n\tname: \"ListChannels\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n});\n</script>\n","import { render } from \"./ListChannels.vue?vue&type=template&id=5b94c3e8&ts=true\"\nimport script from \"./ListChannels.vue?vue&type=script&lang=ts\"\nexport * from \"./ListChannels.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<table class=\"ignore-list\">\n\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class=\"hostmask\">Hostmask</th>\n\t\t\t\t<th class=\"when\">Ignored At</th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-for=\"user in channel.data\" :key=\"user.hostmask\">\n\t\t\t\t<td class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"user.hostmask\" /></td>\n\t\t\t\t<td class=\"when\">{{ localetime(user.when) }}</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientChan} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"ListIgnored\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ListIgnored.vue?vue&type=template&id=78be79d2&ts=true\"\nimport script from \"./ListIgnored.vue?vue&type=script&lang=ts\"\nexport * from \"./ListIgnored.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Chat.vue?vue&type=template&id=2d7e1755&ts=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=ts\"\nexport * from \"./Chat.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<Chat\n\t\tv-if=\"activeChannel\"\n\t\t:network=\"activeChannel.network\"\n\t\t:channel=\"activeChannel.channel\"\n\t\t:focused=\"parseInt(String(route.query.focused), 10)\"\n\t\t@channel-changed=\"channelChanged\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {watch, computed, defineComponent, onMounted} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"../js/store\";\nimport {ClientChan} from \"../js/types\";\n\n// Temporary component for routing channels and lobbies\nimport Chat from \"./Chat.vue\";\n\nexport default defineComponent({\n\tname: \"RoutedChat\",\n\tcomponents: {\n\t\tChat,\n\t},\n\tsetup() {\n\t\tconst route = useRoute();\n\t\tconst store = useStore();\n\n\t\tconst activeChannel = computed(() => {\n\t\t\tconst chanId = parseInt(String(route.params.id || \"\"), 10);\n\t\t\tconst channel = store.getters.findChannel(chanId);\n\t\t\treturn channel;\n\t\t});\n\n\t\tconst setActiveChannel = () => {\n\t\t\tif (activeChannel.value) {\n\t\t\t\tstore.commit(\"activeChannel\", activeChannel.value);\n\t\t\t}\n\t\t};\n\n\t\twatch(activeChannel, () => {\n\t\t\tsetActiveChannel();\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsetActiveChannel();\n\t\t});\n\n\t\tconst channelChanged = (channel: ClientChan) => {\n\t\t\tconst chanId = channel.id;\n\t\t\tconst chanInStore = store.getters.findChannel(chanId);\n\n\t\t\tif (chanInStore?.channel) {\n\t\t\t\tchanInStore.channel.unread = 0;\n\t\t\t\tchanInStore.channel.highlight = 0;\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\troute,\n\t\t\tactiveChannel,\n\t\t\tchannelChanged,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./RoutedChat.vue?vue&type=template&id=2cf5ac90&ts=true\"\nimport script from \"./RoutedChat.vue?vue&type=script&lang=ts\"\nexport * from \"./RoutedChat.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<h2>Messages</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input :checked=\"store.state.settings.motd\" type=\"checkbox\" name=\"motd\" />\n\t\t\t\tShow <abbr title=\"Message Of The Day\">MOTD</abbr>\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.showSeconds\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"showSeconds\"\n\t\t\t\t/>\n\t\t\t\tInclude seconds in timestamp\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.use12hClock\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"use12hClock\"\n\t\t\t\t/>\n\t\t\t\tUse 12-hour timestamps\n\t\t\t</label>\n\t\t</div>\n\t\t<template v-if=\"store.state.serverConfiguration?.prefetch\">\n\t\t\t<h2>Link previews</h2>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input :checked=\"store.state.settings.media\" type=\"checkbox\" name=\"media\" />\n\t\t\t\t\tAuto-expand media\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input :checked=\"store.state.settings.links\" type=\"checkbox\" name=\"links\" />\n\t\t\t\t\tAuto-expand websites\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</template>\n\t\t<h2 id=\"label-status-messages\">\n\t\t\tStatus messages\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\taria-label=\"Joins, parts, quits, kicks, nick changes, and mode changes\"\n\t\t\t>\n\t\t\t\t<button class=\"extra-help\" />\n\t\t\t</span>\n\t\t</h2>\n\t\t<div role=\"group\" aria-labelledby=\"label-status-messages\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'shown'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"shown\"\n\t\t\t\t/>\n\t\t\t\tShow all status messages individually\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'condensed'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"condensed\"\n\t\t\t\t/>\n\t\t\t\tCondense status messages together\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.statusMessages === 'hidden'\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tname=\"statusMessages\"\n\t\t\t\t\tvalue=\"hidden\"\n\t\t\t\t/>\n\t\t\t\tHide all status messages\n\t\t\t</label>\n\t\t</div>\n\t\t<h2>Visual Aids</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.coloredNicks\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"coloredNicks\"\n\t\t\t\t/>\n\t\t\t\tEnable colored nicknames\n\t\t\t</label>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.autocomplete\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"autocomplete\"\n\t\t\t\t/>\n\t\t\t\tEnable autocomplete\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"nickPostfix\" class=\"opt\">\n\t\t\t\t\tNick autocomplete postfix\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"Nick autocomplete postfix (for example a comma)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"nickPostfix\"\n\t\t\t\t\t:value=\"store.state.settings.nickPostfix\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"nickPostfix\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tplaceholder=\"Nick autocomplete postfix (e.g. ', ')\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<h2>Theme</h2>\n\t\t<div>\n\t\t\t<label for=\"theme-select\" class=\"sr-only\">Theme</label>\n\t\t\t<select\n\t\t\t\tid=\"theme-select\"\n\t\t\t\t:value=\"store.state.settings.theme\"\n\t\t\t\tname=\"theme\"\n\t\t\t\tclass=\"input\"\n\t\t\t>\n\t\t\t\t<option\n\t\t\t\t\tv-for=\"theme in store.state.serverConfiguration?.themes\"\n\t\t\t\t\t:key=\"theme.name\"\n\t\t\t\t\t:value=\"theme.name\"\n\t\t\t\t>\n\t\t\t\t\t{{ theme.displayName }}\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<h2>Custom Stylesheet</h2>\n\t\t\t<label for=\"user-specified-css-input\" class=\"sr-only\">\n\t\t\t\tCustom stylesheet. You can override any style with CSS here.\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"user-specified-css-input\"\n\t\t\t\t:value=\"store.state.settings.userStyles\"\n\t\t\t\tclass=\"input\"\n\t\t\t\tname=\"userStyles\"\n\t\t\t\tplaceholder=\"/* You can override any style with CSS here */\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\ntextarea#user-specified-css-input {\n\theight: 100px;\n}\n</style>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"AppearanceSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Appearance.vue?vue&type=template&id=6afb0861&ts=true\"\nimport script from \"./Appearance.vue?vue&type=script&lang=ts\"\nexport * from \"./Appearance.vue?vue&type=script&lang=ts\"\n\nimport \"./Appearance.vue?vue&type=style&index=0&id=6afb0861&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<div v-if=\"canRegisterProtocol || hasInstallPromptEvent\">\n\t\t\t<h2>Native app</h2>\n\t\t\t<button\n\t\t\t\tv-if=\"hasInstallPromptEvent\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click.prevent=\"nativeInstallPrompt\"\n\t\t\t>\n\t\t\t\tAdd The Lounge to Home screen\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tv-if=\"canRegisterProtocol\"\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn\"\n\t\t\t\t@click.prevent=\"registerProtocol\"\n\t\t\t>\n\t\t\t\tOpen irc:// URLs with The Lounge\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-if=\"store.state.serverConfiguration?.fileUpload\">\n\t\t\t<h2>File uploads</h2>\n\t\t\t<div>\n\t\t\t\t<label class=\"opt\">\n\t\t\t\t\t<input\n\t\t\t\t\t\t:checked=\"store.state.settings.uploadCanvas\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tname=\"uploadCanvas\"\n\t\t\t\t\t/>\n\t\t\t\t\tAttempt to remove metadata from images before uploading\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"This option renders the image into a canvas element to remove metadata from the image.\n\tThis may break orientation if your browser does not support that.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Settings synchronisation</h2>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.syncSettings\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"syncSettings\"\n\t\t\t\t/>\n\t\t\t\tSynchronize settings with other clients\n\t\t\t</label>\n\t\t\t<template v-if=\"!store.state.settings.syncSettings\">\n\t\t\t\t<div v-if=\"store.state.serverHasSettings\" class=\"settings-sync-panel\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Warning:</strong> Checking this box will override the settings of\n\t\t\t\t\t\tthis client with those stored on the server.\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tUse the button below to enable synchronization, and override any settings\n\t\t\t\t\t\talready synced to the server.\n\t\t\t\t\t</p>\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-small\" @click=\"onForceSyncClick\">\n\t\t\t\t\t\tSync settings and enable\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"settings-sync-panel\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Warning:</strong> No settings have been synced before. Enabling this\n\t\t\t\t\t\twill sync all settings of this client as the base for other clients.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Automatic away message</h2>\n\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"awayMessage\" class=\"sr-only\">Automatic away message</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"awayMessage\"\n\t\t\t\t\t:value=\"store.state.settings.awayMessage\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"awayMessage\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tplaceholder=\"Away message if The Lounge is not open\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</template>\n\n<style></style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, onMounted, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport {BeforeInstallPromptEvent} from \"../../js/types\";\n\nlet installPromptEvent: BeforeInstallPromptEvent | null = null;\n\nwindow.addEventListener(\"beforeinstallprompt\", (e) => {\n\te.preventDefault();\n\tinstallPromptEvent = e as BeforeInstallPromptEvent;\n});\n\nexport default defineComponent({\n\tname: \"GeneralSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst canRegisterProtocol = ref(false);\n\n\t\tconst hasInstallPromptEvent = computed(() => {\n\t\t\t// TODO: This doesn't hide the button after clicking\n\t\t\treturn installPromptEvent !== null;\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\t// Enable protocol handler registration if supported,\n\t\t\t// and the network configuration is not locked\n\t\t\tcanRegisterProtocol.value =\n\t\t\t\t!!window.navigator.registerProtocolHandler &&\n\t\t\t\t!store.state.serverConfiguration?.lockNetwork;\n\t\t});\n\n\t\tconst nativeInstallPrompt = () => {\n\t\t\tif (!installPromptEvent) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstallPromptEvent.prompt().catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\n\t\t\tinstallPromptEvent = null;\n\t\t};\n\n\t\tconst onForceSyncClick = () => {\n\t\t\tstore.dispatch(\"settings/syncAll\", true).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\n\t\t\tstore\n\t\t\t\t.dispatch(\"settings/update\", {\n\t\t\t\t\tname: \"syncSettings\",\n\t\t\t\t\tvalue: true,\n\t\t\t\t\tsync: true,\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t};\n\n\t\tconst registerProtocol = () => {\n\t\t\tconst uri = document.location.origin + document.location.pathname + \"?uri=%s\";\n\t\t\t// @ts-expect-error\n\t\t\t// the third argument is deprecated but recommended for compatibility: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/registerProtocolHandler\n\t\t\twindow.navigator.registerProtocolHandler(\"irc\", uri, \"The Lounge\");\n\t\t\t// @ts-expect-error\n\t\t\twindow.navigator.registerProtocolHandler(\"ircs\", uri, \"The Lounge\");\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tcanRegisterProtocol,\n\t\t\thasInstallPromptEvent,\n\t\t\tnativeInstallPrompt,\n\t\t\tonForceSyncClick,\n\t\t\tregisterProtocol,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./General.vue?vue&type=template&id=0fee67e4&ts=true\"\nimport script from \"./General.vue?vue&type=script&lang=ts\"\nexport * from \"./General.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<div\n\t\t\tv-if=\"\n\t\t\t\t!store.state.serverConfiguration?.public &&\n\t\t\t\t!store.state.serverConfiguration?.ldapEnabled\n\t\t\t\"\n\t\t\tid=\"change-password\"\n\t\t\trole=\"group\"\n\t\t\taria-labelledby=\"label-change-password\"\n\t\t>\n\t\t\t<h2 id=\"label-change-password\">Change password</h2>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"current-password\" class=\"sr-only\"> Enter current password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"current-password\"\n\t\t\t\t\t\tv-model=\"old_password\"\n\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"old_password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Enter current password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"new-password\" class=\"sr-only\"> Enter desired new password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"new-password\"\n\t\t\t\t\t\tv-model=\"new_password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"new_password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Enter desired new password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div class=\"password-container\">\n\t\t\t\t<label for=\"new-password-verify\" class=\"sr-only\"> Repeat new password </label>\n\t\t\t\t<RevealPassword v-slot:default=\"slotProps\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"new-password-verify\"\n\t\t\t\t\t\tv-model=\"verify_password\"\n\t\t\t\t\t\t:type=\"slotProps.isVisible ? 'text' : 'password'\"\n\t\t\t\t\t\tname=\"verify_password\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\tclass=\"input\"\n\t\t\t\t\t\tplaceholder=\"Repeat new password\"\n\t\t\t\t\t/>\n\t\t\t\t</RevealPassword>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if=\"passwordChangeStatus && passwordChangeStatus.success\"\n\t\t\t\tclass=\"feedback success\"\n\t\t\t>\n\t\t\t\tSuccessfully updated your password\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else-if=\"passwordChangeStatus && passwordChangeStatus.error\"\n\t\t\t\tclass=\"feedback error\"\n\t\t\t>\n\t\t\t\t{{ passwordErrors[passwordChangeStatus.error] }}\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\" class=\"btn\" @click.prevent=\"changePassword\">\n\t\t\t\t\tChange password\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\" class=\"session-list\" role=\"group\">\n\t\t\t<h2>Sessions</h2>\n\n\t\t\t<h3>Current session</h3>\n\t\t\t<Session v-if=\"currentSession\" :session=\"currentSession\" />\n\n\t\t\t<template v-if=\"activeSessions.length > 0\">\n\t\t\t\t<h3>Active sessions</h3>\n\t\t\t\t<Session\n\t\t\t\t\tv-for=\"session in activeSessions\"\n\t\t\t\t\t:key=\"session.token\"\n\t\t\t\t\t:session=\"session\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<h3>Other sessions</h3>\n\t\t\t<p v-if=\"store.state.sessions.length === 0\">Loading</p>\n\t\t\t<p v-else-if=\"otherSessions.length === 0\">\n\t\t\t\t<em>You are not currently logged in to any other device.</em>\n\t\t\t</p>\n\t\t\t<Session\n\t\t\t\tv-for=\"session in otherSessions\"\n\t\t\t\tv-else\n\t\t\t\t:key=\"session.token\"\n\t\t\t\t:session=\"session\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport socket from \"../../js/socket\";\nimport RevealPassword from \"../RevealPassword.vue\";\nimport Session from \"../Session.vue\";\nimport {computed, defineComponent, onMounted, PropType, ref} from \"vue\";\nimport {useStore} from \"../../js/store\";\n\nexport default defineComponent({\n\tname: \"UserSettings\",\n\tcomponents: {\n\t\tRevealPassword,\n\t\tSession,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst passwordErrors = {\n\t\t\tmissing_fields: \"Please fill in all fields\",\n\t\t\tpassword_mismatch: \"Both new password fields must match\",\n\t\t\tpassword_incorrect: \"The current password field does not match your account password\",\n\t\t\tupdate_failed: \"Failed to update your password\",\n\t\t};\n\n\t\tconst passwordChangeStatus = ref<{\n\t\t\tsuccess: boolean;\n\t\t\terror: keyof typeof passwordErrors;\n\t\t}>();\n\n\t\tconst old_password = ref(\"\");\n\t\tconst new_password = ref(\"\");\n\t\tconst verify_password = ref(\"\");\n\n\t\tconst currentSession = computed(() => {\n\t\t\treturn store.state.sessions.find((item) => item.current);\n\t\t});\n\n\t\tconst activeSessions = computed(() => {\n\t\t\treturn store.state.sessions.filter((item) => !item.current && item.active > 0);\n\t\t});\n\n\t\tconst otherSessions = computed(() => {\n\t\t\treturn store.state.sessions.filter((item) => !item.current && !item.active);\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tsocket.emit(\"sessions:get\");\n\t\t});\n\n\t\tconst changePassword = () => {\n\t\t\tconst data = {\n\t\t\t\told_password: old_password.value,\n\t\t\t\tnew_password: new_password.value,\n\t\t\t\tverify_password: verify_password.value,\n\t\t\t};\n\n\t\t\tif (!data.old_password || !data.new_password || !data.verify_password) {\n\t\t\t\tpasswordChangeStatus.value = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: \"missing_fields\",\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (data.new_password !== data.verify_password) {\n\t\t\t\tpasswordChangeStatus.value = {\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: \"password_mismatch\",\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsocket.once(\"change-password\", (response) => {\n\t\t\t\t// TODO type\n\t\t\t\tpasswordChangeStatus.value = response as any;\n\t\t\t});\n\n\t\t\tsocket.emit(\"change-password\", data);\n\t\t};\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tpasswordChangeStatus,\n\t\t\tpasswordErrors,\n\t\t\tcurrentSession,\n\t\t\tactiveSessions,\n\t\t\totherSessions,\n\t\t\tchangePassword,\n\t\t\told_password,\n\t\t\tnew_password,\n\t\t\tverify_password,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div class=\"session-item\">\n\t\t<div class=\"session-item-info\">\n\t\t\t<strong>{{ session.agent }}</strong>\n\n\t\t\t<a :href=\"'https://ipinfo.io/' + session.ip\" target=\"_blank\" rel=\"noopener\">{{\n\t\t\t\tsession.ip\n\t\t\t}}</a>\n\n\t\t\t<p v-if=\"session.active > 1\" class=\"session-usage\">\n\t\t\t\tActive in {{ session.active }} browsers\n\t\t\t</p>\n\t\t\t<p v-else-if=\"!session.current && !session.active\" class=\"session-usage\">\n\t\t\t\tLast used on <time>{{ lastUse }}</time>\n\t\t\t</p>\n\t\t</div>\n\t\t<div class=\"session-item-btn\">\n\t\t\t<button class=\"btn\" @click.prevent=\"signOut\">\n\t\t\t\t<template v-if=\"session.current\">Sign out</template>\n\t\t\t\t<template v-else>Revoke</template>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n.session-list .session-item {\n\tdisplay: flex;\n\tfont-size: 14px;\n}\n\n.session-list .session-item-info {\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n}\n\n.session-list .session-item-btn {\n\tflex-shrink: 0;\n}\n\n.session-list .session-usage {\n\tfont-style: italic;\n\tcolor: var(--body-color-muted);\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport localetime from \"../js/helpers/localetime\";\nimport Auth from \"../js/auth\";\nimport socket from \"../js/socket\";\nimport {ClientSession} from \"../js/store\";\n\nexport default defineComponent({\n\tname: \"Session\",\n\tprops: {\n\t\tsession: {\n\t\t\ttype: Object as PropType<ClientSession>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst lastUse = computed(() => {\n\t\t\treturn localetime(props.session.lastUse);\n\t\t});\n\n\t\tconst signOut = () => {\n\t\t\tif (!props.session.current) {\n\t\t\t\tsocket.emit(\"sign-out\", props.session.token);\n\t\t\t} else {\n\t\t\t\tsocket.emit(\"sign-out\");\n\t\t\t\tAuth.signout();\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tlastUse,\n\t\t\tsignOut,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Session.vue?vue&type=template&id=7c65ee22&ts=true\"\nimport script from \"./Session.vue?vue&type=script&lang=ts\"\nexport * from \"./Session.vue?vue&type=script&lang=ts\"\n\nimport \"./Session.vue?vue&type=style&index=0&id=7c65ee22&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Account.vue?vue&type=template&id=a2967c1c&ts=true\"\nimport script from \"./Account.vue?vue&type=script&lang=ts\"\nexport * from \"./Account.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div>\n\t\t<template v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<h2>Push Notifications</h2>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tid=\"pushNotifications\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t:disabled=\"\n\t\t\t\t\t\tstore.state.pushNotificationState !== 'supported' &&\n\t\t\t\t\t\tstore.state.pushNotificationState !== 'subscribed'\n\t\t\t\t\t\"\n\t\t\t\t\t@click=\"onPushButtonClick\"\n\t\t\t\t>\n\t\t\t\t\t<template v-if=\"store.state.pushNotificationState === 'subscribed'\">\n\t\t\t\t\t\tUnsubscribe from push notifications\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"store.state.pushNotificationState === 'loading'\">\n\t\t\t\t\t\tLoading\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else> Subscribe to push notifications </template>\n\t\t\t\t</button>\n\t\t\t\t<div v-if=\"store.state.pushNotificationState === 'nohttps'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>: Push notifications are only supported over HTTPS\n\t\t\t\t\tconnections.\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"store.state.pushNotificationState === 'unsupported'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>:\n\t\t\t\t\t<span>Push notifications are not supported by your browser.</span>\n\n\t\t\t\t\t<div v-if=\"isIOS\" class=\"apple-push-unsupported\">\n\t\t\t\t\t\tSafari does\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://bugs.webkit.org/show_bug.cgi?id=182566\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t>not support the web push notification specification</a\n\t\t\t\t\t\t>, and because all browsers on iOS use Safari under the hood, The Lounge is\n\t\t\t\t\t\tunable to provide push notifications on iOS devices.\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\n\t\t<h2>Browser Notifications</h2>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\tid=\"desktopNotifications\"\n\t\t\t\t\t:checked=\"store.state.settings.desktopNotifications\"\n\t\t\t\t\t:disabled=\"store.state.desktopNotificationState === 'nohttps'\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"desktopNotifications\"\n\t\t\t\t/>\n\t\t\t\tEnable browser notifications<br />\n\t\t\t\t<div v-if=\"store.state.desktopNotificationState === 'unsupported'\" class=\"error\">\n\t\t\t\t\t<strong>Warning</strong>: Notifications are not supported by your browser.\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"store.state.desktopNotificationState === 'nohttps'\"\n\t\t\t\t\tid=\"warnBlockedDesktopNotifications\"\n\t\t\t\t\tclass=\"error\"\n\t\t\t\t>\n\t\t\t\t\t<strong>Warning</strong>: Notifications are only supported over HTTPS\n\t\t\t\t\tconnections.\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"store.state.desktopNotificationState === 'blocked'\"\n\t\t\t\t\tid=\"warnBlockedDesktopNotifications\"\n\t\t\t\t\tclass=\"error\"\n\t\t\t\t>\n\t\t\t\t\t<strong>Warning</strong>: Notifications are blocked by your browser.\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.notification\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"notification\"\n\t\t\t\t/>\n\t\t\t\tEnable notification sound\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<div class=\"opt\">\n\t\t\t\t<button id=\"play\" @click.prevent=\"playNotification\">Play sound</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<label class=\"opt\">\n\t\t\t\t<input\n\t\t\t\t\t:checked=\"store.state.settings.notifyAllMessages\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tname=\"notifyAllMessages\"\n\t\t\t\t/>\n\t\t\t\tEnable notification for all messages\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"highlights\" class=\"opt\">\n\t\t\t\t\tCustom highlights\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"If a message contains any of these comma-separated\nexpressions, it will trigger a highlight.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"highlights\"\n\t\t\t\t\t:value=\"store.state.settings.highlights\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"highlights\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tplaceholder=\"Comma-separated, e.g.: word, some more words, anotherword\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div v-if=\"!store.state.serverConfiguration?.public\">\n\t\t\t<label class=\"opt\">\n\t\t\t\t<label for=\"highlightExceptions\" class=\"opt\">\n\t\t\t\t\tHighlight exceptions\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-delay\"\n\t\t\t\t\t\taria-label=\"If a message contains any of these comma-separated\nexpressions, it will not trigger a highlight even if it contains\nyour nickname or expressions defined in custom highlights.\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button class=\"extra-help\" />\n\t\t\t\t\t</span>\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid=\"highlightExceptions\"\n\t\t\t\t\t:value=\"store.state.settings.highlightExceptions\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"highlightExceptions\"\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\tplaceholder=\"Comma-separated, e.g.: word, some more words, anotherword\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent} from \"vue\";\nimport {useStore} from \"../../js/store\";\nimport webpush from \"../../js/webpush\";\n\nexport default defineComponent({\n\tname: \"NotificationSettings\",\n\tsetup() {\n\t\tconst store = useStore();\n\n\t\tconst isIOS = computed(\n\t\t\t() =>\n\t\t\t\t[\n\t\t\t\t\t\"iPad Simulator\",\n\t\t\t\t\t\"iPhone Simulator\",\n\t\t\t\t\t\"iPod Simulator\",\n\t\t\t\t\t\"iPad\",\n\t\t\t\t\t\"iPhone\",\n\t\t\t\t\t\"iPod\",\n\t\t\t\t].includes(navigator.platform) ||\n\t\t\t\t// iPad on iOS 13 detection\n\t\t\t\t(navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document)\n\t\t);\n\n\t\tconst playNotification = () => {\n\t\t\tconst pop = new Audio();\n\t\t\tpop.src = \"audio/pop.wav\";\n\n\t\t\t// eslint-disable-next-line\n\t\t\tpop.play();\n\t\t};\n\n\t\tconst onPushButtonClick = () => {\n\t\t\twebpush.togglePushSubscription();\n\t\t};\n\n\t\treturn {\n\t\t\tisIOS,\n\t\t\tstore,\n\t\t\tplayNotification,\n\t\t\tonPushButtonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Notifications.vue?vue&type=template&id=045eeb5c&ts=true\"\nimport script from \"./Notifications.vue?vue&type=script&lang=ts\"\nexport * from \"./Notifications.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import constants from \"./constants\";\n\nimport {createRouter, createWebHashHistory} from \"vue-router\";\nimport SignIn from \"../components/Windows/SignIn.vue\";\nimport Connect from \"../components/Windows/Connect.vue\";\nimport Settings from \"../components/Windows/Settings.vue\";\nimport Help from \"../components/Windows/Help.vue\";\nimport Changelog from \"../components/Windows/Changelog.vue\";\nimport NetworkEdit from \"../components/Windows/NetworkEdit.vue\";\nimport SearchResults from \"../components/Windows/SearchResults.vue\";\nimport RoutedChat from \"../components/RoutedChat.vue\";\nimport {store} from \"./store\";\n\nimport AppearanceSettings from \"../components/Settings/Appearance.vue\";\nimport GeneralSettings from \"../components/Settings/General.vue\";\nimport AccountSettings from \"../components/Settings/Account.vue\";\nimport NotificationSettings from \"../components/Settings/Notifications.vue\";\nimport {ClientChan} from \"./types\";\n\nconst router = createRouter({\n\thistory: createWebHashHistory(),\n\troutes: [\n\t\t{\n\t\t\tname: \"SignIn\",\n\t\t\tpath: \"/sign-in\",\n\t\t\tcomponent: SignIn,\n\t\t\tbeforeEnter(to, from, next) {\n\t\t\t\t// Prevent navigating to sign-in when already signed in\n\t\t\t\tif (store.state.appLoaded) {\n\t\t\t\t\tnext(false);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnext();\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: \"Connect\",\n\t\t\tpath: \"/connect\",\n\t\t\tcomponent: Connect,\n\t\t\tprops: (route) => ({queryParams: route.query}),\n\t\t},\n\t\t{\n\t\t\tpath: \"/settings\",\n\t\t\tcomponent: Settings,\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tname: \"General\",\n\t\t\t\t\tpath: \"\",\n\t\t\t\t\tcomponent: GeneralSettings,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Appearance\",\n\t\t\t\t\tpath: \"appearance\",\n\t\t\t\t\tcomponent: AppearanceSettings,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Account\",\n\t\t\t\t\tpath: \"account\",\n\t\t\t\t\tcomponent: AccountSettings,\n\t\t\t\t\tprops: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"Notifications\",\n\t\t\t\t\tpath: \"notifications\",\n\t\t\t\t\tcomponent: NotificationSettings,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tname: \"Help\",\n\t\t\tpath: \"/help\",\n\t\t\tcomponent: Help,\n\t\t},\n\t\t{\n\t\t\tname: \"Changelog\",\n\t\t\tpath: \"/changelog\",\n\t\t\tcomponent: Changelog,\n\t\t},\n\t\t{\n\t\t\tname: \"NetworkEdit\",\n\t\t\tpath: \"/edit-network/:uuid\",\n\t\t\tcomponent: NetworkEdit,\n\t\t},\n\t\t{\n\t\t\tname: \"RoutedChat\",\n\t\t\tpath: \"/chan-:id\",\n\t\t\tcomponent: RoutedChat,\n\t\t},\n\t\t{\n\t\t\tname: \"SearchResults\",\n\t\t\tpath: \"/chan-:id/search\",\n\t\t\tcomponent: SearchResults,\n\t\t},\n\t],\n});\n\nrouter.beforeEach((to, from, next) => {\n\t// If user is not yet signed in, wait for appLoaded state to change\n\t// unless they are trying to open SignIn (which can be triggered in auth.js)\n\tif (!store.state.appLoaded && to.name !== \"SignIn\") {\n\t\tstore.watch(\n\t\t\t(state) => state.appLoaded,\n\t\t\t() => next()\n\t\t);\n\n\t\treturn;\n\t}\n\n\tnext();\n});\n\nrouter.beforeEach((to, from, next) => {\n\t// Disallow navigating to non-existing routes\n\tif (!to.matched.length) {\n\t\tnext(false);\n\t\treturn;\n\t}\n\n\t// Disallow navigating to invalid channels\n\tif (to.name === \"RoutedChat\" && !store.getters.findChannel(Number(to.params.id))) {\n\t\tnext(false);\n\t\treturn;\n\t}\n\n\t// Disallow navigating to invalid networks\n\tif (to.name === \"NetworkEdit\" && !store.getters.findNetwork(String(to.params.uuid))) {\n\t\tnext(false);\n\t\treturn;\n\t}\n\n\tnext();\n});\n\nrouter.afterEach((to) => {\n\tif (store.state.appLoaded) {\n\t\tif (window.innerWidth <= constants.mobileViewportPixels) {\n\t\t\tstore.commit(\"sidebarOpen\", false);\n\t\t}\n\t}\n\n\tif (store.state.activeChannel) {\n\t\tconst channel = store.state.activeChannel.channel;\n\n\t\tif (to.name !== \"RoutedChat\") {\n\t\t\tstore.commit(\"activeChannel\", undefined);\n\t\t}\n\n\t\t// When switching out of a channel, mark everything as read\n\t\tif (channel.messages?.length > 0) {\n\t\t\tchannel.firstUnread = channel.messages[channel.messages.length - 1].id;\n\t\t}\n\n\t\tif (channel.messages?.length > 100) {\n\t\t\tchannel.messages.splice(0, channel.messages.length - 100);\n\t\t\tchannel.moreHistoryAvailable = true;\n\t\t}\n\t}\n});\n\nasync function navigate(routeName: string, params: any = {}) {\n\tif (router.currentRoute.value.name) {\n\t\tawait router.push({name: routeName, params});\n\t} else {\n\t\t// If current route is null, replace the history entry\n\t\t// This prevents invalid entries from lingering in history,\n\t\t// and then the route guard preventing proper navigation\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tawait router.replace({name: routeName, params}).catch(() => {});\n\t}\n}\n\nfunction switchToChannel(channel: ClientChan) {\n\tvoid navigate(\"RoutedChat\", {id: channel.id});\n}\n\nif (\"serviceWorker\" in navigator) {\n\tnavigator.serviceWorker.addEventListener(\"message\", (event) => {\n\t\tif (event.data && event.data.type === \"open\") {\n\t\t\tconst id = parseInt(event.data.channel.substring(5), 10); // remove \"chan-\" prefix\n\n\t\t\tconst channelTarget = store.getters.findChannel(id);\n\n\t\t\tif (channelTarget) {\n\t\t\t\tswitchToChannel(channelTarget.channel);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport {router, navigate, switchToChannel};\n","import io, {Socket} from \"socket.io-client\";\nimport type {ServerToClientEvents, ClientToServerEvents} from \"../../server/types/socket-events\";\n\nconst socket: Socket<ServerToClientEvents, ClientToServerEvents> = io({\n\ttransports: JSON.parse(document.body.dataset.transports || \"['polling', 'websocket']\"),\n\tpath: window.location.pathname + \"socket.io/\",\n\tautoConnect: false,\n\treconnection: !document.body.classList.contains(\"public\"),\n});\n\n// Ease debugging socket during development\nif (process.env.NODE_ENV === \"development\") {\n\twindow.socket = socket;\n}\n\ndeclare global {\n\tinterface Window {\n\t\tsocket: Socket;\n\t}\n}\n\nexport default socket;\n","import socket from \"./socket\";\nimport type {TypedStore} from \"./store\";\n\nconst defaultSettingConfig = {\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tapply() {},\n\tdefault: null,\n\tsync: null,\n};\n\nconst defaultConfig = {\n\tsyncSettings: {\n\t\tdefault: true,\n\t\tsync: \"never\",\n\t\tapply(store: TypedStore, value: boolean, auto = false) {\n\t\t\t// If applied by settings/applyAll, do not emit to server\n\t\t\tif (value && !auto) {\n\t\t\t\tsocket.emit(\"setting:get\");\n\t\t\t}\n\t\t},\n\t},\n\tadvanced: {\n\t\tdefault: false,\n\t},\n\tautocomplete: {\n\t\tdefault: true,\n\t},\n\tnickPostfix: {\n\t\tdefault: \"\",\n\t},\n\tcoloredNicks: {\n\t\tdefault: true,\n\t},\n\tdesktopNotifications: {\n\t\tdefault: false,\n\t\tsync: \"never\",\n\t\tapply(store: TypedStore, value: boolean) {\n\t\t\t// Commit a mutation. options can have root: true that allows to commit root mutations in namespaced modules.\n\t\t\t// https://vuex.vuejs.org/api/#store-instance-methods. not typed?\n\t\t\tstore.commit(\"refreshDesktopNotificationState\", null, {root: true});\n\n\t\t\tif (\"Notification\" in window && value && Notification.permission !== \"granted\") {\n\t\t\t\tNotification.requestPermission(() =>\n\t\t\t\t\tstore.commit(\"refreshDesktopNotificationState\", null, {root: true})\n\t\t\t\t).catch((e) => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\thighlights: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\thighlightExceptions: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\tawayMessage: {\n\t\tdefault: \"\",\n\t\tsync: \"always\",\n\t},\n\tlinks: {\n\t\tdefault: true,\n\t},\n\tmotd: {\n\t\tdefault: true,\n\t},\n\tnotification: {\n\t\tdefault: true,\n\t\tsync: \"never\",\n\t},\n\tnotifyAllMessages: {\n\t\tdefault: false,\n\t},\n\tshowSeconds: {\n\t\tdefault: false,\n\t},\n\tuse12hClock: {\n\t\tdefault: false,\n\t},\n\tstatusMessages: {\n\t\tdefault: \"condensed\",\n\t},\n\ttheme: {\n\t\tdefault: document.getElementById(\"theme\")?.dataset.serverTheme,\n\t\tapply(store: TypedStore, value: string) {\n\t\t\tconst themeEl = document.getElementById(\"theme\");\n\t\t\tconst themeUrl = `themes/${value}.css`;\n\n\t\t\tif (!(themeEl instanceof HTMLLinkElement)) {\n\t\t\t\tthrow new Error(\"theme element is not a link\");\n\t\t\t}\n\n\t\t\tconst hrefAttr = themeEl.attributes.getNamedItem(\"href\");\n\n\t\t\tif (!hrefAttr) {\n\t\t\t\tthrow new Error(\"theme is missing href attribute\");\n\t\t\t}\n\n\t\t\tif (hrefAttr.value === themeUrl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\threfAttr.value = themeUrl;\n\n\t\t\tif (!store.state.serverConfiguration) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newTheme = store.state.serverConfiguration?.themes.filter(\n\t\t\t\t(theme) => theme.name === value\n\t\t\t)[0];\n\n\t\t\tconst metaSelector = document.querySelector('meta[name=\"theme-color\"]');\n\n\t\t\tif (!(metaSelector instanceof HTMLMetaElement)) {\n\t\t\t\tthrow new Error(\"theme meta element is not a meta element\");\n\t\t\t}\n\n\t\t\tif (metaSelector) {\n\t\t\t\tconst themeColor = newTheme.themeColor || metaSelector.content;\n\t\t\t\tmetaSelector.content = themeColor;\n\t\t\t}\n\t\t},\n\t},\n\tmedia: {\n\t\tdefault: true,\n\t},\n\tuploadCanvas: {\n\t\tdefault: true,\n\t},\n\tuserStyles: {\n\t\tdefault: \"\",\n\t\tapply(store: TypedStore, value: string) {\n\t\t\tif (!/[?&]nocss/.test(window.location.search)) {\n\t\t\t\tconst element = document.getElementById(\"user-specified-css\");\n\n\t\t\t\tif (element) {\n\t\t\t\t\telement.innerHTML = value;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\tsearchEnabled: {\n\t\tdefault: false,\n\t},\n};\n\nexport const config = normalizeConfig(defaultConfig);\n\nexport function createState() {\n\tconst state = {};\n\n\tfor (const settingName in config) {\n\t\tstate[settingName] = config[settingName].default;\n\t}\n\n\treturn state;\n}\n\nfunction normalizeConfig(obj: any) {\n\tconst newConfig: Partial<typeof defaultConfig> = {};\n\n\tfor (const settingName in obj) {\n\t\tnewConfig[settingName] = {...defaultSettingConfig, ...obj[settingName]};\n\t}\n\n\treturn newConfig as typeof defaultConfig;\n}\n\n// flatten to type of default\nexport type SettingsState = {\n\t[key in keyof typeof defaultConfig]: typeof defaultConfig[key][\"default\"];\n};\n","import storage from \"./localStorage\";\nimport socket from \"./socket\";\nimport {config, createState} from \"./settings\";\nimport {Store} from \"vuex\";\nimport {State} from \"./store\";\n\nexport function createSettingsStore(store: Store<State>) {\n\treturn {\n\t\tnamespaced: true,\n\t\tstate: assignStoredSettings(createState(), loadFromLocalStorage()),\n\t\tmutations: {\n\t\t\tset(state, {name, value}) {\n\t\t\t\tstate[name] = value;\n\t\t\t},\n\t\t},\n\t\tactions: {\n\t\t\tsyncAll({state}, force = false) {\n\t\t\t\tif (state.syncSettings === false && force === false) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstore.commit(\"serverHasSettings\", true);\n\n\t\t\t\tfor (const name in state) {\n\t\t\t\t\tif (config[name].sync !== \"never\" || config[name].sync === \"always\") {\n\t\t\t\t\t\tsocket.emit(\"setting:set\", {name, value: state[name]});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tapplyAll({state}) {\n\t\t\t\tfor (const settingName in config) {\n\t\t\t\t\tconfig[settingName].apply(store, state[settingName], true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate({state, commit}, {name, value, sync = false}) {\n\t\t\t\tif (state[name] === value) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst settingConfig = config[name];\n\n\t\t\t\t// Trying to update a non existing setting (e.g. server has an old key)\n\t\t\t\tif (!settingConfig) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tsync === false &&\n\t\t\t\t\t(state.syncSettings === false || settingConfig.sync === \"never\")\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcommit(\"set\", {name, value});\n\t\t\t\tstorage.set(\"settings\", JSON.stringify(state));\n\t\t\t\tsettingConfig.apply(store, value);\n\n\t\t\t\tif (!sync) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(state.syncSettings && settingConfig.sync !== \"never\") ||\n\t\t\t\t\tsettingConfig.sync === \"always\"\n\t\t\t\t) {\n\t\t\t\t\tsocket.emit(\"setting:set\", {name, value});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n}\n\nfunction loadFromLocalStorage() {\n\tlet storedSettings: Record<string, any> = {};\n\n\ttry {\n\t\tstoredSettings = JSON.parse(storage.get(\"settings\") || \"{}\");\n\t} catch (e) {\n\t\tstorage.remove(\"settings\");\n\t}\n\n\tif (!storedSettings) {\n\t\treturn {};\n\t}\n\n\t// Older The Lounge versions converted highlights to an array, turn it back into a string\n\tif (storedSettings.highlights !== null && typeof storedSettings.highlights === \"object\") {\n\t\tstoredSettings.highlights = storedSettings.highlights.join(\", \");\n\t}\n\n\treturn storedSettings;\n}\n\n/**\n * Essentially Object.assign but does not overwrite and only assigns\n * if key exists in both supplied objects and types match\n *\n * @param {object} defaultSettings\n * @param {object} storedSettings\n */\nfunction assignStoredSettings(\n\tdefaultSettings: Record<string, any>,\n\tstoredSettings: Record<string, any>\n) {\n\tconst newSettings = {...defaultSettings};\n\n\tfor (const key in defaultSettings) {\n\t\t// Make sure the setting in local storage has the same type that the code expects\n\t\tif (\n\t\t\ttypeof storedSettings[key] !== \"undefined\" &&\n\t\t\ttypeof defaultSettings[key] === typeof storedSettings[key]\n\t\t) {\n\t\t\tnewSettings[key] = storedSettings[key];\n\t\t}\n\t}\n\n\treturn newSettings;\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\n\nimport {ActionContext, createStore, Store, useStore as baseUseStore} from \"vuex\";\nimport {createSettingsStore} from \"./store-settings\";\nimport storage from \"./localStorage\";\nimport type {\n\tClientChan,\n\tClientConfiguration,\n\tClientNetwork,\n\tInitClientChan,\n\tNetChan,\n\tClientMessage,\n\tClientMention,\n} from \"./types\";\nimport type {InjectionKey} from \"vue\";\n\nimport {SettingsState} from \"./settings\";\nimport {SearchQuery} from \"../../server/plugins/messageStorage/types\";\n\nconst appName = document.title;\n\nenum DesktopNotificationState {\n\tUnsupported = \"unsupported\",\n\tBlocked = \"blocked\",\n\tNoHttps = \"nohttps\",\n\tGranted = \"granted\",\n}\n\nfunction detectDesktopNotificationState(): DesktopNotificationState {\n\tif (!(\"Notification\" in window)) {\n\t\treturn DesktopNotificationState.Unsupported;\n\t} else if (Notification.permission === DesktopNotificationState.Granted) {\n\t\treturn DesktopNotificationState.Granted;\n\t} else if (!window.isSecureContext) {\n\t\treturn DesktopNotificationState.NoHttps;\n\t}\n\n\treturn DesktopNotificationState.Blocked;\n}\n\nexport type ClientSession = {\n\tcurrent: boolean;\n\tactive: number;\n\tlastUse: number;\n\tip: string;\n\tagent: string;\n\ttoken: string;\n};\n\nexport type State = {\n\tappLoaded: boolean;\n\tactiveChannel?: NetChan;\n\tcurrentUserVisibleError: string | null;\n\tdesktopNotificationState: DesktopNotificationState;\n\tisAutoCompleting: boolean;\n\tisConnected: boolean;\n\tnetworks: ClientNetwork[];\n\t// TODO: type\n\tmentions: ClientMention[];\n\thasServiceWorker: boolean;\n\tpushNotificationState: string;\n\tserverConfiguration: ClientConfiguration | null;\n\tsessions: ClientSession[];\n\tsidebarOpen: boolean;\n\tsidebarDragging: boolean;\n\tuserlistOpen: boolean;\n\tversionData:\n\t\t| null\n\t\t| undefined\n\t\t| {\n\t\t\t\tlatest?: {\n\t\t\t\t\tversion: string;\n\t\t\t\t\tprerelease: boolean;\n\t\t\t\t\turl: string;\n\t\t\t\t};\n\t\t\t\tcurrent?: {\n\t\t\t\t\tversion: string;\n\t\t\t\t\tprerelease: boolean;\n\t\t\t\t\turl: string;\n\t\t\t\t\tchangelog?: string;\n\t\t\t\t};\n\t\t  };\n\tversionStatus: \"loading\" | \"new-version\" | \"new-packages\" | \"up-to-date\" | \"error\";\n\tversionDataExpired: boolean;\n\tserverHasSettings: boolean;\n\tmessageSearchResults: {\n\t\tresults: ClientMessage[];\n\t} | null;\n\tmessageSearchPendingQuery: SearchQuery | null;\n\tsearchEnabled: boolean;\n};\n\nconst state = () =>\n\t({\n\t\tappLoaded: false,\n\t\tactiveChannel: undefined,\n\t\tcurrentUserVisibleError: null,\n\t\tdesktopNotificationState: detectDesktopNotificationState(),\n\t\tisAutoCompleting: false,\n\t\tisConnected: false,\n\t\tnetworks: [],\n\t\tmentions: [],\n\t\thasServiceWorker: false,\n\t\tpushNotificationState: \"unsupported\",\n\t\tserverConfiguration: null,\n\t\tsessions: [],\n\t\tsidebarOpen: false,\n\t\tsidebarDragging: false,\n\t\tuserlistOpen: storage.get(\"thelounge.state.userlist\") !== \"false\",\n\t\tversionData: null,\n\t\tversionStatus: \"loading\",\n\t\tversionDataExpired: false,\n\t\tserverHasSettings: false,\n\t\tmessageSearchResults: null,\n\t\tmessageSearchPendingQuery: null,\n\t\tsearchEnabled: false,\n\t} as State);\n\ntype Getters = {\n\tfindChannelOnCurrentNetwork: (state: State) => (name: string) => ClientChan | undefined;\n\tfindChannelOnNetwork: (state: State) => (\n\t\tnetworkUuid: string,\n\t\tchannelName: string\n\t) => {\n\t\tnetwork: ClientNetwork;\n\t\tchannel: ClientChan;\n\t} | null;\n\tfindChannel: (state: State) => (id: number) => {\n\t\tnetwork: ClientNetwork;\n\t\tchannel: ClientChan;\n\t} | null;\n\tfindNetwork: (state: State) => (uuid: string) => ClientNetwork | null;\n\thighlightCount(state: State): number;\n\ttitle(state: State, getters: Omit<Getters, \"title\">): string;\n\tinitChannel: () => (channel: InitClientChan) => ClientChan;\n};\n\n// getters without the state argument\nexport type CallableGetters = {\n\t[K in keyof Getters]: ReturnType<Getters[K]>;\n};\n\nconst getters: Getters = {\n\tfindChannelOnCurrentNetwork: (state) => (name: string) => {\n\t\tname = name.toLowerCase();\n\t\treturn state.activeChannel?.network.channels.find((c) => c.name.toLowerCase() === name);\n\t},\n\tfindChannelOnNetwork: (state) => (networkUuid: string, channelName: string) => {\n\t\tfor (const network of state.networks) {\n\t\t\tif (network.uuid !== networkUuid) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.name === channelName) {\n\t\t\t\t\treturn {network, channel};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tfindChannel: (state) => (id: number) => {\n\t\tfor (const network of state.networks) {\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.id === id) {\n\t\t\t\t\treturn {network, channel};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\tfindNetwork: (state) => (uuid: string) => {\n\t\tfor (const network of state.networks) {\n\t\t\tif (network.uuid === uuid) {\n\t\t\t\treturn network;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\thighlightCount(state) {\n\t\tlet highlightCount = 0;\n\n\t\tfor (const network of state.networks) {\n\t\t\tfor (const channel of network.channels) {\n\t\t\t\tif (channel.muted) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\thighlightCount += channel.highlight;\n\t\t\t}\n\t\t}\n\n\t\treturn highlightCount;\n\t},\n\ttitle(state, getters) {\n\t\tconst alertEventCount = getters.highlightCount\n\t\t\t? `(${getters.highlightCount.toString()}) `\n\t\t\t: \"\";\n\t\tconst channelname = state.activeChannel ? `${state.activeChannel.channel.name}  ` : \"\";\n\n\t\treturn alertEventCount + channelname + appName;\n\t},\n\tinitChannel: () => (channel: InitClientChan) => {\n\t\t// TODO: This should be a mutation\n\t\tchannel.pendingMessage = \"\";\n\t\tchannel.inputHistoryPosition = 0;\n\n\t\tchannel.inputHistory = [\"\"].concat(\n\t\t\tchannel.messages\n\t\t\t\t.filter((m) => m.self && m.text && m.type === \"message\")\n\t\t\t\t.map((m) => m.text)\n\t\t\t\t.reverse()\n\t\t\t\t.slice(0, 99)\n\t\t);\n\t\tchannel.historyLoading = false;\n\t\tchannel.scrolledToBottom = true;\n\t\tchannel.editTopic = false;\n\n\t\tchannel.moreHistoryAvailable = channel.totalMessages! > channel.messages.length;\n\t\tdelete channel.totalMessages;\n\n\t\tif (channel.type === \"channel\") {\n\t\t\tchannel.usersOutdated = true;\n\t\t}\n\n\t\treturn channel as ClientChan;\n\t},\n};\n\ntype Mutations = {\n\tappLoaded(state: State): void;\n\tactiveChannel(state: State, netChan: State[\"activeChannel\"]): void;\n\tcurrentUserVisibleError(state: State, error: State[\"currentUserVisibleError\"]): void;\n\trefreshDesktopNotificationState(state: State): void;\n\tisAutoCompleting(state: State, isAutoCompleting: State[\"isAutoCompleting\"]): void;\n\tisConnected(state: State, payload: State[\"isConnected\"]): void;\n\tnetworks(state: State, networks: State[\"networks\"]): void;\n\tmentions(state: State, mentions: State[\"mentions\"]): void;\n\n\tremoveNetwork(state: State, networkUuid: string): void;\n\tsortNetworks(\n\t\tstate: State,\n\t\tsortFn: (a: State[\"networks\"][0], b: State[\"networks\"][0]) => number\n\t): void;\n\thasServiceWorker(state: State): void;\n\tpushNotificationState(\n\t\tstate: State,\n\t\tpushNotificationState: State[\"pushNotificationState\"]\n\t): void;\n\tserverConfiguration(state: State, serverConfiguration: State[\"serverConfiguration\"]): void;\n\tsessions(state: State, payload: State[\"sessions\"]): void;\n\tsidebarOpen(state: State, payload: State[\"sidebarOpen\"]): void;\n\tsidebarDragging(state: State, payload: State[\"sidebarDragging\"]): void;\n\ttoggleSidebar(state: State): void;\n\ttoggleUserlist(state: State): void;\n\tuserlistOpen(state: State, payload: State[\"userlistOpen\"]): void;\n\tversionData(state: State, payload: State[\"versionData\"]): void;\n\tversionStatus(state: State, payload: State[\"versionStatus\"]): void;\n\tversionDataExpired(state: State, payload: State[\"versionDataExpired\"]): void;\n\tserverHasSettings(state: State, value: State[\"serverHasSettings\"]): void;\n\tmessageSearchPendingQuery(state: State, value: State[\"messageSearchPendingQuery\"]): void;\n\tmessageSearchResults(state: State, value: State[\"messageSearchResults\"]): void;\n\taddMessageSearchResults(state: State, value: NonNullable<State[\"messageSearchResults\"]>): void;\n};\n\nconst mutations: Mutations = {\n\tappLoaded(state) {\n\t\tstate.appLoaded = true;\n\t},\n\tactiveChannel(state, netChan) {\n\t\tstate.activeChannel = netChan;\n\t},\n\tcurrentUserVisibleError(state, error) {\n\t\tstate.currentUserVisibleError = error;\n\t},\n\trefreshDesktopNotificationState(state) {\n\t\tstate.desktopNotificationState = detectDesktopNotificationState();\n\t},\n\tisAutoCompleting(state, isAutoCompleting) {\n\t\tstate.isAutoCompleting = isAutoCompleting;\n\t},\n\tisConnected(state, payload) {\n\t\tstate.isConnected = payload;\n\t},\n\tnetworks(state, networks) {\n\t\tstate.networks = networks;\n\t},\n\tmentions(state, mentions) {\n\t\tstate.mentions = mentions;\n\t},\n\tremoveNetwork(state, networkId) {\n\t\tstate.networks.splice(\n\t\t\tstate.networks.findIndex((n) => n.uuid === networkId),\n\t\t\t1\n\t\t);\n\t},\n\tsortNetworks(state, sortFn) {\n\t\tstate.networks.sort(sortFn);\n\t},\n\thasServiceWorker(state) {\n\t\tstate.hasServiceWorker = true;\n\t},\n\tpushNotificationState(state, pushNotificationState) {\n\t\tstate.pushNotificationState = pushNotificationState;\n\t},\n\tserverConfiguration(state, serverConfiguration) {\n\t\tstate.serverConfiguration = serverConfiguration;\n\t},\n\tsessions(state, payload) {\n\t\tstate.sessions = payload;\n\t},\n\tsidebarOpen(state, payload) {\n\t\tstate.sidebarOpen = payload;\n\t},\n\tsidebarDragging(state, payload) {\n\t\tstate.sidebarDragging = payload;\n\t},\n\ttoggleSidebar(state) {\n\t\tstate.sidebarOpen = !state.sidebarOpen;\n\t},\n\ttoggleUserlist(state) {\n\t\tstate.userlistOpen = !state.userlistOpen;\n\t},\n\tuserlistOpen(state, payload) {\n\t\tstate.userlistOpen = payload;\n\t},\n\tversionData(state, payload) {\n\t\tstate.versionData = payload;\n\t},\n\tversionStatus(state, payload) {\n\t\tstate.versionStatus = payload;\n\t},\n\tversionDataExpired(state, payload) {\n\t\tstate.versionDataExpired = payload;\n\t},\n\tserverHasSettings(state, value) {\n\t\tstate.serverHasSettings = value;\n\t},\n\tmessageSearchPendingQuery(state, value) {\n\t\tstate.messageSearchPendingQuery = value;\n\t},\n\tmessageSearchResults(state, value) {\n\t\tstate.messageSearchResults = value;\n\t},\n\taddMessageSearchResults(state, value) {\n\t\t// Append the search results and add networks and channels to new messages\n\t\tif (!state.messageSearchResults) {\n\t\t\tstate.messageSearchResults = {results: []};\n\t\t}\n\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst results = [...value.results, ...state.messageSearchResults.results];\n\n\t\tstate.messageSearchResults = {\n\t\t\tresults,\n\t\t};\n\t},\n};\n\nexport type TypedCommit = <T extends keyof Mutations>(\n\ttype: T,\n\tpayload?: Parameters<Mutations[T]>[1] | null,\n\toptions?: {root?: boolean}\n) => ReturnType<Mutations[T]>;\ntype TypedActionContext = Omit<ActionContext<State, State>, \"commit\"> & {\n\tcommit: TypedCommit;\n};\n\ntype Actions = {\n\tpartChannel(context: TypedActionContext, payload: NetChan): void;\n};\n\nconst actions: Actions = {\n\tpartChannel({commit, state}, netChan) {\n\t\tconst mentions = state.mentions.filter((msg) => !(msg.chanId === netChan.channel.id));\n\t\tcommit(\"mentions\", mentions);\n\t},\n};\n\nconst storePattern = {\n\tstate,\n\tmutations,\n\tactions,\n\tgetters,\n};\n\n// https://vuex.vuejs.org/guide/typescript-support.html#typing-usestore-composition-function\nexport const key: InjectionKey<Store<State>> = Symbol();\n\n// vuex types getters as any\nexport type TypedStore = Omit<Store<State>, \"getters\" | \"commit\"> & {\n\tgetters: CallableGetters;\n\tcommit: TypedCommit;\n\tstate: State & {\n\t\tsettings: SettingsState;\n\t};\n};\n\nexport const store = createStore(storePattern) as TypedStore;\n\nconst settingsStore = createSettingsStore(store);\n\n// Settings module is registered dynamically because it benefits\n// from a direct reference to the store\nstore.registerModule(\"settings\", settingsStore);\n\nexport function useStore() {\n\treturn baseUseStore(key) as TypedStore;\n}\n","import {update as updateCursor} from \"undate\";\n\nimport socket from \"./socket\";\nimport {store} from \"./store\";\n\nclass Uploader {\n\txhr: XMLHttpRequest | null = null;\n\tfileQueue: File[] = [];\n\ttokenKeepAlive: NodeJS.Timeout | null = null;\n\n\toverlay: HTMLDivElement | null = null;\n\tuploadProgressbar: HTMLSpanElement | null = null;\n\n\tonDragEnter = (e: DragEvent) => this.dragEnter(e);\n\tonDragOver = (e: DragEvent) => this.dragOver(e);\n\tonDragLeave = (e: DragEvent) => this.dragLeave(e);\n\tonDrop = (e: DragEvent) => this.drop(e);\n\tonPaste = (e: ClipboardEvent) => this.paste(e);\n\n\tinit() {\n\t\tsocket.on(\"upload:auth\", (token) => this.uploadNextFileInQueue(token));\n\t}\n\n\tmounted() {\n\t\tthis.overlay = document.getElementById(\"upload-overlay\") as HTMLDivElement;\n\t\tthis.uploadProgressbar = document.getElementById(\"upload-progressbar\") as HTMLSpanElement;\n\n\t\tdocument.addEventListener(\"dragenter\", this.onDragEnter);\n\t\tdocument.addEventListener(\"dragover\", this.onDragOver);\n\t\tdocument.addEventListener(\"dragleave\", this.onDragLeave);\n\t\tdocument.addEventListener(\"drop\", this.onDrop);\n\t\tdocument.addEventListener(\"paste\", this.onPaste);\n\t}\n\n\tunmounted() {\n\t\tdocument.removeEventListener(\"dragenter\", this.onDragEnter);\n\t\tdocument.removeEventListener(\"dragover\", this.onDragOver);\n\t\tdocument.removeEventListener(\"dragleave\", this.onDragLeave);\n\t\tdocument.removeEventListener(\"drop\", this.onDrop);\n\t\tdocument.removeEventListener(\"paste\", this.onPaste);\n\t}\n\n\tdragOver(event: DragEvent) {\n\t\tif (event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\t// Prevent dragover event completely and do nothing with it\n\t\t\t// This stops the browser from trying to guess which cursor to show\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tdragEnter(event: DragEvent) {\n\t\t// relatedTarget is the target where we entered the drag from\n\t\t// when dragging from another window, the target is null, otherwise its a DOM element\n\t\tif (!event.relatedTarget && event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.overlay?.classList.add(\"is-dragover\");\n\t\t}\n\t}\n\n\tdragLeave(event: DragEvent) {\n\t\t// If relatedTarget is null, that means we are no longer dragging over the page\n\t\tif (!event.relatedTarget) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.overlay?.classList.remove(\"is-dragover\");\n\t\t}\n\t}\n\n\tdrop(event: DragEvent) {\n\t\tif (!event.dataTransfer?.types.includes(\"Files\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tthis.overlay?.classList.remove(\"is-dragover\");\n\n\t\tlet files: (File | null)[];\n\n\t\tif (event.dataTransfer.items) {\n\t\t\tfiles = Array.from(event.dataTransfer.items)\n\t\t\t\t.filter((item) => item.kind === \"file\")\n\t\t\t\t.map((item) => item.getAsFile());\n\t\t} else {\n\t\t\tfiles = Array.from(event.dataTransfer.files);\n\t\t}\n\n\t\tthis.triggerUpload(files);\n\t}\n\n\tpaste(event: ClipboardEvent) {\n\t\tconst items = event.clipboardData?.items;\n\t\tconst files: (File | null)[] = [];\n\n\t\tif (!items) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].kind === \"file\") {\n\t\t\t\tfiles.push(items[i].getAsFile());\n\t\t\t}\n\t\t}\n\n\t\tif (files.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tthis.triggerUpload(files);\n\t}\n\n\ttriggerUpload(files: (File | null)[]) {\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!store.state.isConnected) {\n\t\t\tthis.handleResponse({\n\t\t\t\terror: `You are currently disconnected, unable to initiate upload process.`,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst wasQueueEmpty = this.fileQueue.length === 0;\n\t\tconst maxFileSize = store.state.serverConfiguration?.fileUploadMaxFileSize || 0;\n\n\t\tfor (const file of files) {\n\t\t\tif (!file) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (maxFileSize > 0 && file.size > maxFileSize) {\n\t\t\t\tthis.handleResponse({\n\t\t\t\t\terror: `File ${file.name} is over the maximum allowed size`,\n\t\t\t\t});\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.fileQueue.push(file);\n\t\t}\n\n\t\t// if the queue was empty and we added some files to it, and there currently\n\t\t// is no upload in process, request a token to start the upload process\n\t\tif (wasQueueEmpty && this.xhr === null && this.fileQueue.length > 0) {\n\t\t\tthis.requestToken();\n\t\t}\n\t}\n\n\trequestToken() {\n\t\tsocket.emit(\"upload:auth\");\n\t}\n\n\tsetProgress(value: number) {\n\t\tif (!this.uploadProgressbar) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.uploadProgressbar.classList.toggle(\"upload-progressbar-visible\", value > 0);\n\t\tthis.uploadProgressbar.style.width = `${value}%`;\n\t}\n\n\tuploadNextFileInQueue(token: string) {\n\t\tconst file = this.fileQueue.shift();\n\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Tell the server that we are still upload to this token\n\t\t// so it does not become invalidated and fail the upload.\n\t\t// This issue only happens if The Lounge is proxied through other software\n\t\t// as it may buffer the upload before the upload request will be processed by The Lounge.\n\t\tthis.tokenKeepAlive = setInterval(() => socket.emit(\"upload:ping\", token), 40 * 1000);\n\n\t\tif (\n\t\t\tstore.state.settings.uploadCanvas &&\n\t\t\tfile.type.startsWith(\"image/\") &&\n\t\t\t!file.type.includes(\"svg\") &&\n\t\t\tfile.type !== \"image/gif\"\n\t\t) {\n\t\t\tthis.renderImage(file, (newFile) => this.performUpload(token, newFile));\n\t\t} else {\n\t\t\tthis.performUpload(token, file);\n\t\t}\n\t}\n\n\trenderImage(file: File, callback: (file: File) => void) {\n\t\tconst fileReader = new FileReader();\n\n\t\tfileReader.onabort = () => callback(file);\n\t\tfileReader.onerror = () => fileReader.abort();\n\n\t\tfileReader.onload = () => {\n\t\t\tconst img = new Image();\n\n\t\t\timg.onerror = () => callback(file);\n\n\t\t\timg.onload = () => {\n\t\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = img.width;\n\t\t\t\tcanvas.height = img.height;\n\t\t\t\tconst ctx = canvas.getContext(\"2d\");\n\n\t\t\t\tif (!ctx) {\n\t\t\t\t\tthrow new Error(\"Could not get canvas context in upload\");\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage(img, 0, 0);\n\n\t\t\t\tcanvas.toBlob((blob) => {\n\t\t\t\t\tcallback(new File([blob!], file.name));\n\t\t\t\t}, file.type);\n\t\t\t};\n\n\t\t\timg.src = String(fileReader.result);\n\t\t};\n\n\t\tfileReader.readAsDataURL(file);\n\t}\n\n\tperformUpload(token: string, file: File) {\n\t\tthis.xhr = new XMLHttpRequest();\n\n\t\tthis.xhr.upload.addEventListener(\n\t\t\t\"progress\",\n\t\t\t(e) => {\n\t\t\t\tconst percent = Math.floor((e.loaded / e.total) * 1000) / 10;\n\t\t\t\tthis.setProgress(percent);\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tthis.xhr.onreadystatechange = () => {\n\t\t\tif (this.xhr?.readyState === XMLHttpRequest.DONE) {\n\t\t\t\tlet response;\n\n\t\t\t\ttry {\n\t\t\t\t\tresponse = JSON.parse(this.xhr.responseText);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// This is just a safe guard and should not happen if server doesn't throw any errors.\n\t\t\t\t\t// Browsers break the HTTP spec by aborting the request without reading any response data,\n\t\t\t\t\t// if there is still data to be uploaded. Servers will only error in extreme cases like bad\n\t\t\t\t\t// authentication or server-side errors.\n\t\t\t\t\tresponse = {\n\t\t\t\t\t\terror: `Upload aborted: ${this.xhr.statusText} (HTTP ${this.xhr.status})`,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthis.handleResponse(response);\n\n\t\t\t\tthis.xhr = null;\n\n\t\t\t\t// this file was processed, if we still have files in the queue, upload the next one\n\t\t\t\tif (this.fileQueue.length > 0) {\n\t\t\t\t\tthis.requestToken();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst formData = new FormData();\n\t\tformData.append(\"file\", file);\n\t\tthis.xhr.open(\"POST\", `uploads/new/${token}`);\n\t\tthis.xhr.send(formData);\n\t}\n\n\thandleResponse(response: {error?: string; url?: string}) {\n\t\tthis.setProgress(0);\n\n\t\tif (this.tokenKeepAlive) {\n\t\t\tclearInterval(this.tokenKeepAlive);\n\t\t\tthis.tokenKeepAlive = null;\n\t\t}\n\n\t\tif (response.error) {\n\t\t\tstore.commit(\"currentUserVisibleError\", response.error);\n\t\t\treturn;\n\t\t}\n\n\t\tif (response.url) {\n\t\t\tthis.insertUploadUrl(response.url);\n\t\t}\n\t}\n\n\tinsertUploadUrl(url: string) {\n\t\tconst fullURL = new URL(url, location.toString()).toString();\n\t\tconst textbox = document.getElementById(\"input\");\n\n\t\tif (!(textbox instanceof HTMLTextAreaElement)) {\n\t\t\tthrow new Error(\"Could not find textbox in upload\");\n\t\t}\n\n\t\tconst initStart = textbox.selectionStart;\n\n\t\t// Get the text before the cursor, and add a space if it's not in the beginning\n\t\tconst headToCursor = initStart > 0 ? textbox.value.substring(0, initStart) + \" \" : \"\";\n\n\t\t// Get the remaining text after the cursor\n\t\tconst cursorToTail = textbox.value.substring(initStart);\n\n\t\t// Construct the value until the point where we want the cursor to be\n\t\tconst textBeforeTail = headToCursor + fullURL + \" \";\n\n\t\tupdateCursor(textbox, textBeforeTail + cursorToTail);\n\n\t\t// Set the cursor after the link and a space\n\t\ttextbox.selectionStart = textbox.selectionEnd = textBeforeTail.length;\n\t}\n\n\t// TODO: This is a temporary hack while Vue porting is finalized\n\tabort() {\n\t\tthis.fileQueue = [];\n\n\t\tif (this.xhr) {\n\t\t\tthis.xhr.abort();\n\t\t\tthis.xhr = null;\n\t\t}\n\t}\n}\n\nconst instance = new Uploader();\n\nexport default {\n\tabort: () => instance.abort(),\n\tinitialize: () => instance.init(),\n\tmounted: () => instance.mounted(),\n\tunmounted: () => instance.unmounted(),\n\ttriggerUpload: (files) => instance.triggerUpload(files),\n};\n","import {store} from \"../store\";\nimport socket from \"../socket\";\n\nsocket.on(\"disconnect\", handleDisconnect);\nsocket.on(\"connect_error\", handleDisconnect);\nsocket.on(\"error\", handleDisconnect);\n\nsocket.io.on(\"reconnect_attempt\", function (attempt) {\n\tstore.commit(\"currentUserVisibleError\", `Reconnecting (attempt ${attempt})`);\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"connecting\", function () {\n\tstore.commit(\"currentUserVisibleError\", \"Connecting\");\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"connect\", function () {\n\t// Clear send buffer when reconnecting, socket.io would emit these\n\t// immediately upon connection and it will have no effect, so we ensure\n\t// nothing is sent to the server that might have happened.\n\tsocket.sendBuffer = [];\n\n\tstore.commit(\"currentUserVisibleError\", \"Finalizing connection\");\n\tupdateLoadingMessage();\n});\n\nfunction handleDisconnect(data) {\n\tconst message = String(data.message || data);\n\n\tstore.commit(\"isConnected\", false);\n\n\tif (!socket.io.reconnection()) {\n\t\tstore.commit(\n\t\t\t\"currentUserVisibleError\",\n\t\t\t`Disconnected from the server (${message}), The Lounge does not reconnect in public mode.`\n\t\t);\n\t\tupdateLoadingMessage();\n\t\treturn;\n\t}\n\n\tstore.commit(\"currentUserVisibleError\", `Waiting to reconnect (${message})`);\n\tupdateLoadingMessage();\n\n\t// If the server shuts down, socket.io skips reconnection\n\t// and we have to manually call connect to start the process\n\t// However, do not reconnect if TL client manually closed the connection\n\t// @ts-expect-error Property 'skipReconnect' is private and only accessible within class 'Manager<ListenEvents, EmitEvents>'.ts(2341)\n\tif (socket.io.skipReconnect && message !== \"io client disconnect\") {\n\t\trequestIdleCallback(() => socket.connect(), 2000);\n\t}\n}\n\nfunction requestIdleCallback(callback, timeout) {\n\tif (window.requestIdleCallback) {\n\t\t// During an idle period the user agent will run idle callbacks in FIFO order\n\t\t// until either the idle period ends or there are no more idle callbacks eligible to be run.\n\t\twindow.requestIdleCallback(callback, {timeout});\n\t} else {\n\t\tcallback();\n\t}\n}\n\nfunction updateLoadingMessage() {\n\tconst loading = document.getElementById(\"loading-page-message\");\n\n\tif (loading) {\n\t\tloading.textContent = store.state.currentUserVisibleError;\n\t}\n}\n","import socket from \"../socket\";\nimport storage from \"../localStorage\";\nimport {router, navigate} from \"../router\";\nimport {store} from \"../store\";\nimport location from \"../location\";\nlet lastServerHash: number | null = null;\n\ndeclare global {\n\tinterface Window {\n\t\tg_TheLoungeRemoveLoading?: () => void;\n\t}\n}\n\nsocket.on(\"auth:success\", function () {\n\tstore.commit(\"currentUserVisibleError\", \"Loading messages\");\n\tupdateLoadingMessage();\n});\n\nsocket.on(\"auth:failed\", async function () {\n\tstorage.remove(\"token\");\n\n\tif (store.state.appLoaded) {\n\t\treturn reloadPage(\"Authentication failed, reloading\");\n\t}\n\n\tawait showSignIn();\n});\n\nsocket.on(\"auth:start\", async function (serverHash) {\n\t// If we reconnected and serverHash differs, that means the server restarted\n\t// And we will reload the page to grab the latest version\n\tif (lastServerHash && serverHash !== lastServerHash) {\n\t\treturn reloadPage(\"Server restarted, reloading\");\n\t}\n\n\tlastServerHash = serverHash;\n\n\tconst user = storage.get(\"user\");\n\tconst token = storage.get(\"token\");\n\tconst doFastAuth = user && token;\n\n\t// If we reconnect and no longer have a stored token, reload the page\n\tif (store.state.appLoaded && !doFastAuth) {\n\t\treturn reloadPage(\"Authentication failed, reloading\");\n\t}\n\n\t// If we have user and token stored, perform auth without showing sign-in first\n\tif (doFastAuth) {\n\t\tstore.commit(\"currentUserVisibleError\", \"Authorizing\");\n\t\tupdateLoadingMessage();\n\n\t\tlet lastMessage = -1;\n\n\t\tfor (const network of store.state.networks) {\n\t\t\tfor (const chan of network.channels) {\n\t\t\t\tif (chan.messages.length > 0) {\n\t\t\t\t\tconst id = chan.messages[chan.messages.length - 1].id;\n\n\t\t\t\t\tif (lastMessage < id) {\n\t\t\t\t\t\tlastMessage = id;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst openChannel =\n\t\t\t(store.state.activeChannel && store.state.activeChannel.channel.id) || null;\n\n\t\tsocket.emit(\"auth:perform\", {\n\t\t\tuser,\n\t\t\ttoken,\n\t\t\tlastMessage,\n\t\t\topenChannel,\n\t\t\thasConfig: store.state.serverConfiguration !== null,\n\t\t});\n\t} else {\n\t\tawait showSignIn();\n\t}\n});\n\nasync function showSignIn() {\n\t// TODO: this flashes grey background because it takes a little time for vue to mount signin\n\tif (window.g_TheLoungeRemoveLoading) {\n\t\twindow.g_TheLoungeRemoveLoading();\n\t}\n\n\tif (router.currentRoute.value.name !== \"SignIn\") {\n\t\tawait navigate(\"SignIn\");\n\t}\n}\n\nfunction reloadPage(message: string) {\n\tsocket.disconnect();\n\tstore.commit(\"currentUserVisibleError\", message);\n\tlocation.reload();\n}\n\nfunction updateLoadingMessage() {\n\tconst loading = document.getElementById(\"loading-page-message\");\n\n\tif (loading) {\n\t\tloading.textContent = store.state.currentUserVisibleError;\n\t}\n}\n","import {nextTick} from \"vue\";\nimport socket from \"../socket\";\nimport storage from \"../localStorage\";\nimport {router, switchToChannel, navigate} from \"../router\";\nimport {store} from \"../store\";\nimport parseIrcUri from \"../helpers/parseIrcUri\";\nimport {ClientNetwork, InitClientChan} from \"../types\";\n\nsocket.on(\"init\", async function (data) {\n\tstore.commit(\"networks\", mergeNetworkData(data.networks));\n\tstore.commit(\"isConnected\", true);\n\tstore.commit(\"currentUserVisibleError\", null);\n\n\tif (data.token) {\n\t\tstorage.set(\"token\", data.token);\n\t}\n\n\tif (!store.state.appLoaded) {\n\t\tstore.commit(\"appLoaded\");\n\n\t\tsocket.emit(\"setting:get\");\n\n\t\ttry {\n\t\t\tawait router.isReady();\n\t\t} catch (e: any) {\n\t\t\t// if the router throws an error, it means the route isn't matched,\n\t\t\t// so we can continue on.\n\t\t}\n\n\t\tif (window.g_TheLoungeRemoveLoading) {\n\t\t\twindow.g_TheLoungeRemoveLoading();\n\t\t}\n\n\t\tconst handledQuery = await handleQueryParams();\n\n\t\t// If we handled query parameters like irc:// links or just general\n\t\t// connect parameters in public mode, then nothing to do here\n\t\tif (!handledQuery) {\n\t\t\t// If we are on an unknown route or still on SignIn component\n\t\t\t// then we can open last known channel on server, or Connect window if none\n\t\t\tif (\n\t\t\t\t!router.currentRoute?.value?.name ||\n\t\t\t\trouter.currentRoute?.value?.name === \"SignIn\"\n\t\t\t) {\n\t\t\t\tconst channel = store.getters.findChannel(data.active);\n\n\t\t\t\tif (channel) {\n\t\t\t\t\tswitchToChannel(channel.channel);\n\t\t\t\t} else if (store.state.networks.length > 0) {\n\t\t\t\t\t// Server is telling us to open a channel that does not exist\n\t\t\t\t\t// For example, it can be unset if you first open the page after server start\n\t\t\t\t\tswitchToChannel(store.state.networks[0].channels[0]);\n\t\t\t\t} else {\n\t\t\t\t\tawait navigate(\"Connect\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nfunction mergeNetworkData(newNetworks: ClientNetwork[]) {\n\tconst stored = storage.get(\"thelounge.networks.collapsed\");\n\tconst collapsedNetworks = stored ? new Set(JSON.parse(stored)) : new Set();\n\n\tfor (let n = 0; n < newNetworks.length; n++) {\n\t\tconst network = newNetworks[n];\n\t\tconst currentNetwork = store.getters.findNetwork(network.uuid);\n\n\t\t// If this network is new, set some default variables and initalize channel variables\n\t\tif (!currentNetwork) {\n\t\t\tnetwork.isJoinChannelShown = false;\n\t\t\tnetwork.isCollapsed = collapsedNetworks.has(network.uuid);\n\t\t\tnetwork.channels.forEach(store.getters.initChannel);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge received network object into existing network object on the client\n\t\t// so the object reference stays the same (e.g. for currentChannel state)\n\t\tfor (const key in network) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(network, key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Channels require extra care to be merged correctly\n\t\t\tif (key === \"channels\") {\n\t\t\t\tcurrentNetwork.channels = mergeChannelData(\n\t\t\t\t\tcurrentNetwork.channels,\n\t\t\t\t\tnetwork.channels as InitClientChan[]\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcurrentNetwork[key] = network[key];\n\t\t\t}\n\t\t}\n\n\t\tnewNetworks[n] = currentNetwork;\n\t}\n\n\treturn newNetworks;\n}\n\nfunction mergeChannelData(oldChannels: InitClientChan[], newChannels: InitClientChan[]) {\n\tfor (let c = 0; c < newChannels.length; c++) {\n\t\tconst channel = newChannels[c];\n\t\tconst currentChannel = oldChannels.find((chan) => chan.id === channel.id);\n\n\t\t// This is a new channel that was joined while client was disconnected, initialize it\n\t\tif (!currentChannel) {\n\t\t\tstore.getters.initChannel(channel);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge received channel object into existing currentChannel\n\t\t// so the object references are exactly the same (e.g. in store.state.activeChannel)\n\t\tfor (const key in channel) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(channel, key)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Server sends an empty users array, client requests it whenever needed\n\t\t\tif (key === \"users\") {\n\t\t\t\tif (channel.type === \"channel\") {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\tstore.state.activeChannel.channel === currentChannel\n\t\t\t\t\t) {\n\t\t\t\t\t\t// For currently open channel, request the user list straight away\n\t\t\t\t\t\tsocket.emit(\"names\", {\n\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// For all other channels, mark the user list as outdated\n\t\t\t\t\t\t// so an update will be requested whenever user switches to these channels\n\t\t\t\t\t\tcurrentChannel.usersOutdated = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Server sends total count of messages in memory, we compare it to amount of messages\n\t\t\t// on the client, and decide whether theres more messages to load from server\n\t\t\tif (key === \"totalMessages\") {\n\t\t\t\tcurrentChannel.moreHistoryAvailable =\n\t\t\t\t\tchannel.totalMessages! > currentChannel.messages.length;\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Reconnection only sends new messages, so merge it on the client\n\t\t\t// Only concat if server sent us less than 100 messages so we don't introduce gaps\n\t\t\tif (key === \"messages\" && currentChannel.messages && channel.messages.length < 100) {\n\t\t\t\tcurrentChannel.messages = currentChannel.messages.concat(channel.messages);\n\t\t\t} else {\n\t\t\t\tcurrentChannel[key] = channel[key];\n\t\t\t}\n\t\t}\n\n\t\tnewChannels[c] = currentChannel;\n\t}\n\n\treturn newChannels;\n}\n\nasync function handleQueryParams() {\n\tif (!(\"URLSearchParams\" in window)) {\n\t\treturn false;\n\t}\n\n\tconst params = new URLSearchParams(document.location.search);\n\n\tconst cleanParams = () => {\n\t\t// Remove query parameters from url without reloading the page\n\t\tconst cleanUri = window.location.origin + window.location.pathname + window.location.hash;\n\t\twindow.history.replaceState({}, document.title, cleanUri);\n\t};\n\n\tif (params.has(\"uri\")) {\n\t\t// Set default connection settings from IRC protocol links\n\t\tconst uri = params.get(\"uri\");\n\t\tconst queryParams = parseIrcUri(String(uri));\n\n\t\tcleanParams();\n\t\tawait router.push({name: \"Connect\", query: queryParams});\n\n\t\treturn true;\n\t} else if (document.body.classList.contains(\"public\") && document.location.search) {\n\t\t// Set default connection settings from url params\n\t\tconst queryParams = Object.fromEntries(params.entries());\n\n\t\tcleanParams();\n\t\tawait router.push({name: \"Connect\", query: queryParams});\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","import constants from \"../constants\";\nimport socket from \"../socket\";\n\nsocket.on(\"commands\", function (commands) {\n\tif (commands) {\n\t\tconstants.commands = commands;\n\t}\n});\n","export default (stringUri: string) => {\n\tconst data = {\n\t\tname: \"\",\n\t\thost: \"\",\n\t\tport: \"\",\n\t\tjoin: \"\",\n\t\ttls: false,\n\t};\n\n\ttry {\n\t\t// https://tools.ietf.org/html/draft-butcher-irc-url-04\n\t\tconst uri = new URL(stringUri);\n\n\t\t// Replace protocol with a \"special protocol\" (that's what it's called in WHATWG spec)\n\t\t// So that the uri can be properly parsed\n\t\tif (uri.protocol === \"irc:\") {\n\t\t\turi.protocol = \"http:\";\n\n\t\t\tif (!uri.port) {\n\t\t\t\turi.port = \"6667\";\n\t\t\t}\n\t\t} else if (uri.protocol === \"ircs:\") {\n\t\t\turi.protocol = \"https:\";\n\n\t\t\tif (!uri.port) {\n\t\t\t\turi.port = \"6697\";\n\t\t\t}\n\n\t\t\tdata.tls = true;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!uri.hostname) {\n\t\t\treturn {};\n\t\t}\n\n\t\tdata.host = data.name = uri.hostname;\n\t\tdata.port = uri.port;\n\n\t\tlet channel = \"\";\n\n\t\tif (uri.pathname.length > 1) {\n\t\t\tchannel = uri.pathname.substr(1); // Remove slash\n\t\t}\n\n\t\tif (uri.hash.length > 1) {\n\t\t\tchannel += uri.hash;\n\t\t}\n\n\t\t// We don't split channels or append # here because the connect window takes care of that\n\t\tdata.join = channel;\n\t} catch (e) {\n\t\t// do nothing on invalid uri\n\t}\n\n\treturn data;\n};\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"join\", function (data) {\n\tstore.getters.initChannel(data.chan);\n\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tnetwork.channels.splice(data.index || -1, 0, data.chan);\n\n\t// Queries do not automatically focus, unless the user did a whois\n\tif (data.chan.type === \"query\" && !data.shouldOpen) {\n\t\treturn;\n\t}\n\n\tconst chan = store.getters.findChannel(data.chan.id);\n\n\tif (chan) {\n\t\tswitchToChannel(chan.channel);\n\t} else {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(\"Could not find channel\", data.chan.id);\n\t}\n});\n","import {nextTick} from \"vue\";\n\nimport socket from \"../socket\";\nimport {store} from \"../store\";\nimport {ClientMessage} from \"../types\";\n\nsocket.on(\"more\", async (data) => {\n\tconst channel = store.getters.findChannel(data.chan)?.channel;\n\n\tif (!channel) {\n\t\treturn;\n\t}\n\n\tchannel.inputHistory = channel.inputHistory.concat(\n\t\tdata.messages\n\t\t\t.filter((m) => m.self && m.text && m.type === \"message\")\n\t\t\t.map((m) => m.text)\n\t\t\t.reverse()\n\t\t\t.slice(0, 100 - channel.inputHistory.length)\n\t);\n\tchannel.moreHistoryAvailable =\n\t\tdata.totalMessages > channel.messages.length + data.messages.length;\n\tchannel.messages.unshift(...(data.messages as ClientMessage[]));\n\n\tawait nextTick();\n\tchannel.historyLoading = false;\n});\n","/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport socket from \"../socket\";\nimport {cleanIrcMessage} from \"../../../shared/irc\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\nimport {ClientChan, ClientMention, ClientMessage, NetChan} from \"../types\";\n\nlet pop;\n\ntry {\n\tpop = new Audio();\n\tpop.src = \"audio/pop.wav\";\n} catch (e) {\n\tpop = {\n\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\tplay() {},\n\t};\n}\n\nsocket.on(\"msg\", function (data) {\n\tconst receivingChannel = store.getters.findChannel(data.chan);\n\n\tif (!receivingChannel) {\n\t\treturn;\n\t}\n\n\tlet channel = receivingChannel.channel;\n\tlet isActiveChannel =\n\t\tstore.state.activeChannel && store.state.activeChannel.channel === channel;\n\n\t// Display received notices and errors in currently active channel.\n\t// Reloading the page will put them back into the lobby window.\n\tif (data.msg.showInActive) {\n\t\t// We only want to put errors/notices in active channel if they arrive on the same network\n\t\tif (\n\t\t\tstore.state.activeChannel &&\n\t\t\tstore.state.activeChannel.network === receivingChannel.network\n\t\t) {\n\t\t\tchannel = store.state.activeChannel.channel;\n\n\t\t\t// Do not update unread/highlight counters for this channel\n\t\t\t// as we are putting this message in the active channel\n\t\t\tisActiveChannel = true;\n\n\t\t\tif (data.chan === channel.id) {\n\t\t\t\t// If active channel is the intended channel for this message,\n\t\t\t\t// remove the showInActive flag\n\t\t\t\tdelete data.msg.showInActive;\n\t\t\t} else {\n\t\t\t\tdata.chan = channel.id;\n\t\t\t}\n\t\t} else {\n\t\t\tdelete data.msg.showInActive;\n\t\t}\n\t}\n\n\t// Do not set unread counter for channel if it is currently active on this client\n\t// It may increase on the server before it processes channel open event from this client\n\tif (!isActiveChannel) {\n\t\tif (typeof data.highlight !== \"undefined\") {\n\t\t\tchannel.highlight = data.highlight;\n\t\t}\n\n\t\tif (typeof data.unread !== \"undefined\") {\n\t\t\tchannel.unread = data.unread;\n\t\t}\n\t}\n\n\tchannel.messages.push(data.msg);\n\n\tif (data.msg.self) {\n\t\tchannel.firstUnread = data.msg.id;\n\t} else {\n\t\tnotifyMessage(data.chan, channel, store.state.activeChannel, data.msg);\n\t}\n\n\tlet messageLimit = 0;\n\n\tif (!isActiveChannel) {\n\t\t// If message arrives in non active channel, keep only 100 messages\n\t\tmessageLimit = 100;\n\t} else if (channel.scrolledToBottom) {\n\t\t// If message arrives in active channel, keep 1500 messages if scroll is currently at the bottom\n\t\t// One history load may load up to 1000 messages at once if condendesed or hidden events are enabled\n\t\tmessageLimit = 1500;\n\t}\n\n\tif (messageLimit > 0 && channel.messages.length > messageLimit) {\n\t\tchannel.messages.splice(0, channel.messages.length - messageLimit);\n\t\tchannel.moreHistoryAvailable = true;\n\t}\n\n\tif (channel.type === \"channel\") {\n\t\tupdateUserList(channel, data.msg);\n\t}\n});\n\nfunction notifyMessage(\n\ttargetId: number,\n\tchannel: ClientChan,\n\tactiveChannel: NetChan | undefined,\n\tmsg: ClientMessage\n) {\n\tif (channel.muted) {\n\t\treturn;\n\t}\n\n\tif (msg.highlight || (store.state.settings.notifyAllMessages && msg.type === \"message\")) {\n\t\tif (!document.hasFocus() || !activeChannel || activeChannel.channel !== channel) {\n\t\t\tif (store.state.settings.notification) {\n\t\t\t\ttry {\n\t\t\t\t\tpop.play();\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// On mobile, sounds can not be played without user interaction.\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tstore.state.settings.desktopNotifications &&\n\t\t\t\t\"Notification\" in window &&\n\t\t\t\tNotification.permission === \"granted\"\n\t\t\t) {\n\t\t\t\tlet title: string;\n\t\t\t\tlet body: string;\n\n\t\t\t\tif (msg.type === \"invite\") {\n\t\t\t\t\ttitle = \"New channel invite:\";\n\t\t\t\t\tbody = msg.from.nick + \" invited you to \" + msg.channel;\n\t\t\t\t} else {\n\t\t\t\t\ttitle = String(msg.from.nick);\n\n\t\t\t\t\tif (channel.type !== \"query\") {\n\t\t\t\t\t\ttitle += ` (${channel.name})`;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (msg.type === \"message\") {\n\t\t\t\t\t\ttitle += \" says:\";\n\t\t\t\t\t}\n\n\t\t\t\t\tbody = cleanIrcMessage(msg.text);\n\t\t\t\t}\n\n\t\t\t\tconst timestamp = Date.parse(String(msg.time));\n\n\t\t\t\ttry {\n\t\t\t\t\tif (store.state.hasServiceWorker) {\n\t\t\t\t\t\tnavigator.serviceWorker.ready\n\t\t\t\t\t\t\t.then((registration) => {\n\t\t\t\t\t\t\t\tregistration.active?.postMessage({\n\t\t\t\t\t\t\t\t\ttype: \"notification\",\n\t\t\t\t\t\t\t\t\tchanId: targetId,\n\t\t\t\t\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t// no-op\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst notify = new Notification(title, {\n\t\t\t\t\t\t\ttag: `chan-${targetId}`,\n\t\t\t\t\t\t\tbadge: \"img/icon-alerted-black-transparent-bg-72x72px.png\",\n\t\t\t\t\t\t\ticon: \"img/icon-alerted-grey-bg-192x192px.png\",\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\ttimestamp: timestamp,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnotify.addEventListener(\"click\", function () {\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\twindow.focus();\n\n\t\t\t\t\t\t\tconst channelTarget = store.getters.findChannel(targetId);\n\n\t\t\t\t\t\t\tif (channelTarget) {\n\t\t\t\t\t\t\t\tswitchToChannel(channelTarget.channel);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} catch (exception) {\n\t\t\t\t\t// `new Notification(...)` is not supported and should be silenced.\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction updateUserList(channel, msg) {\n\tif (msg.type === \"message\" || msg.type === \"action\") {\n\t\tconst user = channel.users.find((u) => u.nick === msg.from.nick);\n\n\t\tif (user) {\n\t\t\tuser.lastMessage = new Date(msg.time).getTime() || Date.now();\n\t\t}\n\t} else if (msg.type === \"quit\" || msg.type === \"part\") {\n\t\tconst idx = channel.users.findIndex((u) => u.nick === msg.from.nick);\n\n\t\tif (idx > -1) {\n\t\t\tchannel.users.splice(idx, 1);\n\t\t}\n\t} else if (msg.type === \"kick\") {\n\t\tconst idx = channel.users.findIndex((u) => u.nick === msg.target.nick);\n\n\t\tif (idx > -1) {\n\t\t\tchannel.users.splice(idx, 1);\n\t\t}\n\t}\n}\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"msg:preview\", function (data) {\n\tconst netChan = store.getters.findChannel(data.chan);\n\tconst message = netChan?.channel.messages.find((m) => m.id === data.id);\n\n\tif (!message) {\n\t\treturn;\n\t}\n\n\tconst previewIndex = message.previews.findIndex((m) => m.link === data.preview.link);\n\n\tif (previewIndex > -1) {\n\t\tmessage.previews[previewIndex] = data.preview;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"msg:special\", function (data) {\n\tconst netChan = store.getters.findChannel(data.chan);\n\n\tif (!netChan) {\n\t\treturn;\n\t}\n\n\tnetChan.channel.data = data.data;\n\tswitchToChannel(netChan.channel);\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"names\", function (data) {\n\tconst netChan = store.getters.findChannel(data.id);\n\n\tif (netChan) {\n\t\tnetChan.channel.users = data.users;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"network\", function (data) {\n\tconst network = data.networks[0];\n\n\tnetwork.isJoinChannelShown = false;\n\tnetwork.isCollapsed = false;\n\tnetwork.channels.forEach(store.getters.initChannel);\n\n\tstore.commit(\"networks\", [...store.state.networks, network]);\n\n\t// Open last channel specified in `join`\n\tswitchToChannel(network.channels[network.channels.length - 1]);\n});\n\nsocket.on(\"network:options\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (network) {\n\t\tnetwork.serverOptions = data.serverOptions as typeof network.serverOptions;\n\t}\n});\n\nsocket.on(\"network:status\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tnetwork.status.connected = data.connected;\n\tnetwork.status.secure = data.secure;\n\n\tif (!data.connected) {\n\t\tnetwork.channels.forEach((channel) => {\n\t\t\tchannel.users = [];\n\t\t\tchannel.state = 0;\n\t\t});\n\t}\n});\n\nsocket.on(\"channel:state\", function (data) {\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.state = data.state;\n\t}\n});\n\nsocket.on(\"network:info\", function (data) {\n\tconst network = store.getters.findNetwork(data.uuid);\n\n\tif (!network) {\n\t\treturn;\n\t}\n\n\tfor (const key in data) {\n\t\tnetwork[key] = data[key];\n\t}\n});\n\nsocket.on(\"network:name\", function (data) {\n\tconst network = store.getters.findNetwork(data.uuid);\n\n\tif (network) {\n\t\tnetwork.name = network.channels[0].name = data.name;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"nick\", function (data) {\n\tconst network = store.getters.findNetwork(data.network);\n\n\tif (network) {\n\t\tnetwork.nick = data.nick;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\n// Sync unread badge and marker when other clients open a channel\nsocket.on(\"open\", function (id) {\n\tif (id < 1) {\n\t\treturn;\n\t}\n\n\t// Don't do anything if the channel is active on this client\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === id) {\n\t\treturn;\n\t}\n\n\t// Clear the unread badge\n\tconst channel = store.getters.findChannel(id);\n\n\tif (channel) {\n\t\tchannel.channel.highlight = 0;\n\t\tchannel.channel.unread = 0;\n\n\t\tif (channel.channel.messages.length > 0) {\n\t\t\tchannel.channel.firstUnread =\n\t\t\t\tchannel.channel.messages[channel.channel.messages.length - 1].id;\n\t\t}\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {switchToChannel} from \"../router\";\n\nsocket.on(\"part\", async function (data) {\n\t// When parting from the active channel/query, jump to the network's lobby\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === data.chan) {\n\t\tswitchToChannel(store.state.activeChannel.network.channels[0]);\n\t}\n\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (!channel) {\n\t\treturn;\n\t}\n\n\tchannel.network.channels.splice(\n\t\tchannel.network.channels.findIndex((c) => c.id === data.chan),\n\t\t1\n\t);\n\n\tawait store.dispatch(\"partChannel\", channel);\n});\n","import socket from \"../socket\";\nimport {switchToChannel, navigate} from \"../router\";\nimport {store} from \"../store\";\n\nsocket.on(\"quit\", async function (data) {\n\t// If we're in a channel, and it's on the network that is being removed,\n\t// then open another channel window\n\tconst isCurrentNetworkBeingRemoved =\n\t\tstore.state.activeChannel && store.state.activeChannel.network.uuid === data.network;\n\n\tstore.commit(\"removeNetwork\", data.network);\n\n\tif (!isCurrentNetworkBeingRemoved) {\n\t\treturn;\n\t}\n\n\tif (store.state.networks.length > 0) {\n\t\tswitchToChannel(store.state.networks[0].channels[0]);\n\t} else {\n\t\tawait navigate(\"Connect\");\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"sync_sort\", function (data) {\n\tconst order = data.order;\n\n\tswitch (data.type) {\n\t\tcase \"networks\":\n\t\t\tstore.commit(\n\t\t\t\t\"sortNetworks\",\n\t\t\t\t(a, b) => (order as string[]).indexOf(a.uuid) - (order as string[]).indexOf(b.uuid)\n\t\t\t);\n\n\t\t\tbreak;\n\n\t\tcase \"channels\": {\n\t\t\tconst network = store.getters.findNetwork(data.target);\n\n\t\t\tif (!network) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnetwork.channels.sort(\n\t\t\t\t(a, b) => (order as number[]).indexOf(a.id) - (order as number[]).indexOf(b.id)\n\t\t\t);\n\n\t\t\tbreak;\n\t\t}\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"topic\", function (data) {\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.topic = data.topic;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"users\", function (data) {\n\tif (store.state.activeChannel && store.state.activeChannel.channel.id === data.chan) {\n\t\treturn socket.emit(\"names\", {\n\t\t\ttarget: data.chan,\n\t\t});\n\t}\n\n\tconst channel = store.getters.findChannel(data.chan);\n\n\tif (channel) {\n\t\tchannel.channel.usersOutdated = true;\n\t}\n});\n","import socket from \"../socket\";\nimport Auth from \"../auth\";\n\nsocket.on(\"sign-out\", function () {\n\tAuth.signout();\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"sessions:list\", function (data) {\n\tdata.sort((a, b) => b.lastUse - a.lastUse);\n\tstore.commit(\"sessions\", data);\n});\n","import socket from \"../socket\";\nimport upload from \"../upload\";\nimport {store} from \"../store\";\n\nsocket.once(\"configuration\", function (data) {\n\tstore.commit(\"serverConfiguration\", data);\n\n\t// 'theme' setting depends on serverConfiguration.themes so\n\t// settings cannot be applied before this point\n\tvoid store.dispatch(\"settings/applyAll\");\n\n\tif (data.fileUpload) {\n\t\tupload.initialize();\n\t}\n\n\t// If localStorage contains a theme that does not exist on this server, switch\n\t// back to its default theme.\n\tconst currentTheme = data.themes.find((t) => t.name === store.state.settings.theme);\n\n\tif (currentTheme === undefined) {\n\t\tvoid store.dispatch(\"settings/update\", {\n\t\t\tname: \"theme\",\n\t\t\tvalue: data.defaultTheme,\n\t\t\tsync: true,\n\t\t});\n\t} else if (currentTheme.themeColor) {\n\t\t(document.querySelector('meta[name=\"theme-color\"]') as HTMLMetaElement).content =\n\t\t\tcurrentTheme.themeColor;\n\t}\n\n\tif (document.body.classList.contains(\"public\")) {\n\t\twindow.addEventListener(\"beforeunload\", (e) => {\n\t\t\te.preventDefault();\n\t\t\te.returnValue = \"Are you sure you want to navigate away from this page?\";\n\t\t});\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"changelog\", function (data) {\n\tstore.commit(\"versionData\", data);\n\tstore.commit(\"versionDataExpired\", false);\n\n\tlet status;\n\n\tif (data.latest) {\n\t\tstatus = \"new-version\";\n\t} else if (data.packages) {\n\t\tstatus = \"new-packages\";\n\t} else if (data.current.changelog) {\n\t\tstatus = \"up-to-date\";\n\t} else {\n\t\tstatus = \"error\";\n\t}\n\n\tstore.commit(\"versionStatus\", status);\n\n\t// When there is a button to refresh the checker available, display it when\n\t// data is expired. Before that, server would return same information anyway.\n\tif (data.expiresAt) {\n\t\tconst expires = data.expiresAt - Date.now();\n\n\t\tif (expires > 0) {\n\t\t\tsetTimeout(() => store.commit(\"versionDataExpired\", true), expires);\n\t\t} else {\n\t\t\tstore.commit(\"versionDataExpired\", true);\n\t\t}\n\t}\n});\n\nsocket.on(\"changelog:newversion\", () => {\n\tif (!store.state.serverConfiguration) {\n\t\treturn;\n\t}\n\n\tstore.state.serverConfiguration.isUpdateAvailable = true;\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"setting:new\", async function (data) {\n\tconst name = data.name;\n\tconst value = data.value;\n\tawait store.dispatch(\"settings/update\", {name, value, sync: false});\n});\n\nsocket.on(\"setting:all\", async function (settings) {\n\tconst serverHasSettings = Object.keys(settings).length > 0;\n\n\tstore.commit(\"serverHasSettings\", serverHasSettings);\n\n\tif (serverHasSettings) {\n\t\tfor (const name in settings) {\n\t\t\tawait store.dispatch(\"settings/update\", {name, value: settings[name], sync: false});\n\t\t}\n\t} else {\n\t\tawait store.dispatch(\"settings/syncAll\");\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"history:clear\", function (data) {\n\tconst netChan = store.getters.findChannel(data.target);\n\n\tif (netChan?.channel) {\n\t\tnetChan.channel.messages = [];\n\t\tnetChan.channel.unread = 0;\n\t\tnetChan.channel.highlight = 0;\n\t\tnetChan.channel.firstUnread = 0;\n\t\tnetChan.channel.moreHistoryAvailable = false;\n\t}\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\nimport {ClientMention} from \"../types\";\n\nsocket.on(\"mentions:list\", function (data) {\n\tstore.commit(\"mentions\", data as ClientMention[]);\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"search:results\", (response) => {\n\tconst pendingQuery = store.state.messageSearchPendingQuery;\n\n\tif (\n\t\t!pendingQuery ||\n\t\tpendingQuery.channelName !== response.channelName ||\n\t\tpendingQuery.networkUuid !== response.networkUuid ||\n\t\tpendingQuery.offset !== response.offset ||\n\t\tpendingQuery.searchTerm !== response.searchTerm\n\t) {\n\t\t// This is a response from a search that we are not interested in.\n\t\t// The user may have entered a different search while one was still in flight.\n\t\t// We can simply drop it on the floor.\n\t\treturn;\n\t}\n\n\tstore.commit(\"messageSearchPendingQuery\", null);\n\n\tif (store.state.messageSearchResults) {\n\t\tstore.commit(\"addMessageSearchResults\", response);\n\t\treturn;\n\t}\n\n\tstore.commit(\"messageSearchResults\", {results: response.results});\n});\n","import socket from \"../socket\";\nimport {store} from \"../store\";\n\nsocket.on(\"mute:changed\", (response) => {\n\tconst {target, status} = response;\n\n\tconst netChan = store.getters.findChannel(target);\n\n\tif (netChan?.channel.type === \"lobby\") {\n\t\tfor (const chan of netChan.network.channels) {\n\t\t\tif (chan.type !== \"special\") {\n\t\t\t\tchan.muted = status;\n\t\t\t}\n\t\t}\n\t} else if (netChan) {\n\t\tnetChan.channel.muted = status;\n\t}\n});\n","import Mousetrap from \"mousetrap\";\n\nimport {store} from \"./store\";\nimport {switchToChannel, router, navigate} from \"./router\";\nimport isChannelCollapsed from \"./helpers/isChannelCollapsed\";\nimport isIgnoredKeybind from \"./helpers/isIgnoredKeybind\";\nimport listenForTwoFingerSwipes from \"./helpers/listenForTwoFingerSwipes\";\nimport {ClientChan} from \"./types\";\n\n// Switch to the next/previous window in the channel list.\nMousetrap.bind([\"alt+up\", \"alt+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tnavigateWindow(keys.split(\"+\").pop() === \"up\" ? -1 : 1);\n\n\treturn false;\n});\n\nlistenForTwoFingerSwipes(function (cardinalDirection: string) {\n\tif (cardinalDirection === \"e\" || cardinalDirection === \"w\") {\n\t\tnavigateWindow(cardinalDirection === \"e\" ? -1 : 1);\n\t}\n});\n\nfunction navigateWindow(direction: number) {\n\tif (store.state.networks.length === 0) {\n\t\treturn;\n\t}\n\n\tconst flatChannels: ClientChan[] = [];\n\tlet index = -1;\n\n\tfor (const network of store.state.networks) {\n\t\tfor (const channel of network.channels) {\n\t\t\tif (isChannelCollapsed(network, channel)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (index === -1 && store.state.activeChannel?.channel === channel) {\n\t\t\t\tindex = flatChannels.length;\n\t\t\t}\n\n\t\t\tflatChannels.push(channel);\n\t\t}\n\t}\n\n\t// Circular array, and a modulo bug workaround because in JS it stays negative\n\tconst length = flatChannels.length;\n\tindex = (((index + direction) % length) + length) % length;\n\n\tjumpToChannel(flatChannels[index]);\n}\n\n// Switch to the next/previous lobby in the channel list\nMousetrap.bind([\"alt+shift+up\", \"alt+shift+down\"], function (e, keys) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tconst length = store.state.networks.length;\n\n\tif (length === 0) {\n\t\treturn false;\n\t}\n\n\tconst direction = keys.split(\"+\").pop() === \"up\" ? -1 : 1;\n\tlet index = 0;\n\n\t// If we're in another window, jump to first lobby\n\tif (store.state.activeChannel) {\n\t\tindex = store.state.networks.findIndex((n) => n === store.state.activeChannel?.network);\n\n\t\t// If we're in a channel, and it's not the lobby, jump to lobby of this network when going up\n\t\tif (direction !== -1 || store.state.activeChannel?.channel.type === \"lobby\") {\n\t\t\tindex = (((index + direction) % length) + length) % length;\n\t\t}\n\t}\n\n\tjumpToChannel(store.state.networks[index].channels[0]);\n\n\treturn false;\n});\n\n// Jump to the first window with a highlight in it, or the first with unread\n// activity if there are none with highlights.\nMousetrap.bind([\"alt+a\"], function (e) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\tlet targetChannel;\n\n\touter_loop: for (const network of store.state.networks) {\n\t\tfor (const chan of network.channels) {\n\t\t\tif (chan.highlight) {\n\t\t\t\ttargetChannel = chan;\n\t\t\t\tbreak outer_loop;\n\t\t\t}\n\n\t\t\tif (chan.unread && !targetChannel) {\n\t\t\t\ttargetChannel = chan;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (targetChannel) {\n\t\tjumpToChannel(targetChannel);\n\t}\n\n\treturn false;\n});\n\n// Show the help menu.\nMousetrap.bind([\"alt+/\"], function (e) {\n\tif (isIgnoredKeybind(e)) {\n\t\treturn true;\n\t}\n\n\t/* eslint-disable no-console */\n\tnavigate(\"Help\").catch((err) => console.log(err));\n\treturn false;\n});\n\nfunction jumpToChannel(targetChannel: ClientChan) {\n\tswitchToChannel(targetChannel);\n\n\tconst element = document.querySelector(\n\t\t`#sidebar .channel-list-item[aria-controls=\"#chan-${targetChannel.id}\"]`\n\t);\n\n\tif (element) {\n\t\tscrollIntoViewNicely(element);\n\t}\n}\n\n// Ignored keys which should not automatically focus the input bar\nconst ignoredKeys = {\n\t8: true, // Backspace\n\t9: true, // Tab\n\t12: true, // Clear\n\t16: true, // Shift\n\t17: true, // Control\n\t18: true, // Alt\n\t19: true, // Pause\n\t20: true, // CapsLock\n\t27: true, // Escape\n\t35: true, // End\n\t36: true, // Home\n\t37: true, // ArrowLeft\n\t38: true, // ArrowUp\n\t39: true, // ArrowRight\n\t40: true, // ArrowDown\n\t45: true, // Insert\n\t46: true, // Delete\n\t112: true, // F1\n\t113: true, // F2\n\t114: true, // F3\n\t115: true, // F4\n\t116: true, // F5\n\t117: true, // F6\n\t118: true, // F7\n\t119: true, // F8\n\t120: true, // F9\n\t121: true, // F10\n\t122: true, // F11\n\t123: true, // F12\n\t144: true, // NumLock\n\t145: true, // ScrollLock\n\t224: true, // Meta\n};\n\ndocument.addEventListener(\"keydown\", (e) => {\n\t// Allow navigating back to the previous page when on the help screen.\n\tif (e.key === \"Escape\" && router.currentRoute.value.name === \"Help\") {\n\t\trouter.go(-1);\n\t\treturn;\n\t}\n\n\t// Ignore any key that uses alt modifier\n\t// Ignore keys defined above\n\tif (e.altKey || ignoredKeys[e.which]) {\n\t\treturn;\n\t}\n\n\t// Ignore all ctrl keys except for ctrl+v to allow pasting\n\tif ((e.ctrlKey || e.metaKey) && e.which !== 86) {\n\t\treturn;\n\t}\n\n\t// Redirect pagedown/pageup keys to messages container so it scrolls\n\tif (e.which === 33 || e.which === 34) {\n\t\tconst chat = document.querySelector(\".window .chat-content .chat\");\n\n\t\tif (chat) {\n\t\t\t(chat as HTMLDivElement).focus();\n\t\t}\n\n\t\treturn;\n\t}\n\n\tconst tagName = (e.target as HTMLElement).tagName;\n\n\t// Ignore if we're already typing into <input> or <textarea>\n\tif (tagName === \"INPUT\" || tagName === \"TEXTAREA\") {\n\t\treturn;\n\t}\n\n\tconst input = document.getElementById(\"input\");\n\n\tif (!input) {\n\t\treturn;\n\t}\n\n\tinput.focus();\n\n\t// On enter, focus the input but do not propagate the event\n\t// This way, a new line is not inserted\n\tif (e.which === 13) {\n\t\te.preventDefault();\n\t}\n});\n\nfunction scrollIntoViewNicely(el) {\n\t// Ideally this would use behavior: \"smooth\", but that does not consistently work in e.g. Chrome\n\t// https://github.com/iamdustan/smoothscroll/issues/28#issuecomment-364061459\n\tel.scrollIntoView({block: \"center\", inline: \"nearest\"});\n}\n","import distance from \"./distance\";\n\n// onTwoFingerSwipe will be called with a cardinal direction (\"n\", \"e\", \"s\" or\n// \"w\") as its only argument.\nfunction listenForTwoFingerSwipes(onTwoFingerSwipe) {\n\tlet history: {\n\t\tcenter: number[];\n\t\ttimestamp: number;\n\t}[] = [];\n\n\tdocument.body.addEventListener(\n\t\t\"touchmove\",\n\t\tfunction (event) {\n\t\t\tif (event.touches.length !== 2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst a = event.touches.item(0);\n\t\t\tconst b = event.touches.item(1);\n\n\t\t\tif (!a || !b) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timestamp = window.performance.now();\n\t\t\tconst center = [(a.screenX + b.screenX) / 2, (a.screenY + b.screenY) / 2];\n\n\t\t\tif (history.length > 0) {\n\t\t\t\tconst last = history[history.length - 1];\n\t\t\t\tconst centersAreEqual =\n\t\t\t\t\tlast.center[0] === center[0] && last.center[1] === center[1];\n\n\t\t\t\tif (last.timestamp === timestamp || centersAreEqual) {\n\t\t\t\t\t// Touches with the same timestamps or center don't help us\n\t\t\t\t\t// see the speed of movement. Ignore them.\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thistory.push({timestamp, center});\n\t\t},\n\t\t{passive: true}\n\t);\n\n\tdocument.body.addEventListener(\n\t\t\"touchend\",\n\t\tfunction (event) {\n\t\t\tif (event.touches.length >= 2) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst direction = getSwipe(history);\n\n\t\t\t\tif (direction) {\n\t\t\t\t\tonTwoFingerSwipe(direction);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\thistory = [];\n\t\t\t}\n\t\t},\n\t\t{passive: true}\n\t);\n\n\tdocument.body.addEventListener(\n\t\t\"touchcancel\",\n\t\tfunction () {\n\t\t\thistory = [];\n\t\t},\n\t\t{passive: true}\n\t);\n}\n\n// Returns the cardinal direction of the swipe or null if there is no swipe.\nfunction getSwipe(hist) {\n\t// Speed is in pixels/millisecond. Must be maintained throughout swipe.\n\tconst MIN_SWIPE_SPEED = 0.2;\n\n\tif (hist.length < 2) {\n\t\treturn null;\n\t}\n\n\tfor (let i = 1; i < hist.length; ++i) {\n\t\tconst previous = hist[i - 1];\n\t\tconst current = hist[i];\n\n\t\tconst speed =\n\t\t\tdistance(previous.center, current.center) /\n\t\t\tMath.abs(previous.timestamp - current.timestamp);\n\n\t\tif (speed < MIN_SWIPE_SPEED) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn getCardinalDirection(hist[0].center, hist[hist.length - 1].center);\n}\n\nfunction getCardinalDirection([x1, y1], [x2, y2]) {\n\t// If  is the angle of the vector then this is tan()\n\tconst tangent = (y2 - y1) / (x2 - x1);\n\n\t// All values of |tan(-45 to 45)| are less than 1, same for 145 to 225\n\tif (Math.abs(tangent) < 1) {\n\t\treturn x1 < x2 ? \"e\" : \"w\";\n\t}\n\n\treturn y1 < y2 ? \"s\" : \"n\";\n}\n\nexport default listenForTwoFingerSwipes;\n","import constants from \"./constants\";\n\nimport \"../css/style.css\";\nimport {createApp} from \"vue\";\nimport {store, CallableGetters, key} from \"./store\";\nimport App from \"../components/App.vue\";\nimport storage from \"./localStorage\";\nimport {router} from \"./router\";\nimport socket from \"./socket\";\nimport eventbus from \"./eventbus\";\n\nimport \"./socket-events\";\nimport \"./webpush\";\nimport \"./keybinds\";\nimport {LoungeWindow} from \"./types\";\n\nconst favicon = document.getElementById(\"favicon\");\nconst faviconNormal = favicon?.getAttribute(\"href\") || \"\";\nconst faviconAlerted = favicon?.dataset.other || \"\";\n\nexport const VueApp = createApp(App);\n\nVueApp.use(router);\nVueApp.use(store, key);\n\nVueApp.mount(\"#app\");\nsocket.open();\n\nstore.watch(\n\t(state) => state.sidebarOpen,\n\t(sidebarOpen) => {\n\t\tif (window.innerWidth > constants.mobileViewportPixels) {\n\t\t\tstorage.set(\"thelounge.state.sidebar\", sidebarOpen.toString());\n\t\t\teventbus.emit(\"resize\");\n\t\t}\n\t}\n);\n\nstore.watch(\n\t(state) => state.userlistOpen,\n\t(userlistOpen) => {\n\t\tstorage.set(\"thelounge.state.userlist\", userlistOpen.toString());\n\t\teventbus.emit(\"resize\");\n\t}\n);\n\nstore.watch(\n\t(_, getters: CallableGetters) => getters.title,\n\t(title) => {\n\t\tdocument.title = title;\n\t}\n);\n\n// Toggles the favicon to red when there are unread notifications\nstore.watch(\n\t(_, getters: CallableGetters) => getters.highlightCount,\n\t(highlightCount) => {\n\t\tfavicon?.setAttribute(\"href\", highlightCount > 0 ? faviconAlerted : faviconNormal);\n\n\t\tconst nav: LoungeWindow[\"navigator\"] = window.navigator;\n\n\t\tif (nav.setAppBadge) {\n\t\t\tif (highlightCount > 0) {\n\t\t\t\tnav.setAppBadge(highlightCount);\n\t\t\t} else {\n\t\t\t\tif (nav.clearAppBadge) {\n\t\t\t\t\tnav.clearAppBadge();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n);\n\nVueApp.config.errorHandler = function (e) {\n\tif (e instanceof Error) {\n\t\tstore.commit(\"currentUserVisibleError\", `Vue error: ${e.message}`);\n\t} else {\n\t\tstore.commit(\"currentUserVisibleError\", `Vue error: ${String(e)}`);\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.error(e);\n};\n","import socket from \"./socket\";\nimport {store} from \"./store\";\n\nexport default {togglePushSubscription};\n\nsocket.once(\"push:issubscribed\", function (hasSubscriptionOnServer) {\n\tif (!isAllowedServiceWorkersHost()) {\n\t\tstore.commit(\"pushNotificationState\", \"nohttps\");\n\t\treturn;\n\t}\n\n\tif (!(\"serviceWorker\" in navigator)) {\n\t\treturn;\n\t}\n\n\tnavigator.serviceWorker\n\t\t.register(\"service-worker.js\")\n\t\t.then((registration) => {\n\t\t\tstore.commit(\"hasServiceWorker\");\n\n\t\t\tif (!registration.pushManager) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn registration.pushManager.getSubscription().then((subscription) => {\n\t\t\t\t// If client has push registration but the server knows nothing about it,\n\t\t\t\t// this subscription is broken and client has to register again\n\t\t\t\tif (subscription && hasSubscriptionOnServer === false) {\n\t\t\t\t\tvoid subscription.unsubscribe().then((successful) => {\n\t\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\t\tsuccessful ? \"supported\" : \"unsupported\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\tsubscription ? \"subscribed\" : \"supported\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.catch((err) => {\n\t\t\tstore.commit(\"pushNotificationState\", \"unsupported\");\n\t\t\tconsole.error(err); // eslint-disable-line no-console\n\t\t});\n});\n\nfunction togglePushSubscription() {\n\tstore.commit(\"pushNotificationState\", \"loading\");\n\n\tnavigator.serviceWorker.ready\n\t\t.then((registration) =>\n\t\t\tregistration.pushManager.getSubscription().then((existingSubscription) => {\n\t\t\t\tif (existingSubscription) {\n\t\t\t\t\tsocket.emit(\"push:unregister\");\n\n\t\t\t\t\treturn existingSubscription.unsubscribe().then((successful) => {\n\t\t\t\t\t\tstore.commit(\n\t\t\t\t\t\t\t\"pushNotificationState\",\n\t\t\t\t\t\t\tsuccessful ? \"supported\" : \"unsupported\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn registration.pushManager\n\t\t\t\t\t.subscribe({\n\t\t\t\t\t\tapplicationServerKey: store.state.serverConfiguration?.applicationServerKey,\n\t\t\t\t\t\tuserVisibleOnly: true,\n\t\t\t\t\t})\n\t\t\t\t\t.then((subscription) => {\n\t\t\t\t\t\tsocket.emit(\"push:register\", subscription.toJSON());\n\t\t\t\t\t\tstore.commit(\"pushNotificationState\", \"subscribed\");\n\t\t\t\t\t\tstore.commit(\"refreshDesktopNotificationState\");\n\t\t\t\t\t});\n\t\t\t})\n\t\t)\n\t\t.catch((err) => {\n\t\t\tstore.commit(\"pushNotificationState\", \"unsupported\");\n\t\t\tstore.commit(\"refreshDesktopNotificationState\");\n\t\t\tconsole.error(err); // eslint-disable-line no-console\n\t\t});\n}\n\nfunction isAllowedServiceWorkersHost() {\n\treturn (\n\t\tlocation.protocol === \"https:\" ||\n\t\tlocation.hostname === \"localhost\" ||\n\t\tlocation.hostname === \"127.0.0.1\"\n\t);\n}\n","const matchFormatting =\n\t/\\x02|\\x1D|\\x1F|\\x16|\\x0F|\\x11|\\x1E|\\x03(?:[0-9]{1,2}(?:,[0-9]{1,2})?)?|\\x04(?:[0-9a-f]{6}(?:,[0-9a-f]{6})?)?/gi;\n\nexport function cleanIrcMessage(message: string) {\n\treturn message.replace(matchFormatting, \"\").trim();\n}\n\nexport const condensedTypes = new Set([\n\t\"away\",\n\t\"back\",\n\t\"chghost\",\n\t\"join\",\n\t\"kick\",\n\t\"mode\",\n\t\"nick\",\n\t\"part\",\n\t\"quit\",\n]);\n","<template>\n\t<div id=\"viewport\" :class=\"viewportClasses\" role=\"tablist\">\n\t\t<Sidebar v-if=\"store.state.appLoaded\" :overlay=\"overlay\" />\n\t\t<div\n\t\t\tid=\"sidebar-overlay\"\n\t\t\tref=\"overlay\"\n\t\t\taria-hidden=\"true\"\n\t\t\t@click=\"store.commit('sidebarOpen', false)\"\n\t\t/>\n\t\t<router-view ref=\"loungeWindow\"></router-view>\n\t\t<Mentions />\n\t\t<ImageViewer ref=\"imageViewer\" />\n\t\t<ContextMenu ref=\"contextMenu\" />\n\t\t<ConfirmDialog ref=\"confirmDialog\" />\n\t\t<div id=\"upload-overlay\"></div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport constants from \"../js/constants\";\nimport eventbus from \"../js/eventbus\";\nimport Mousetrap, {ExtendedKeyboardEvent} from \"mousetrap\";\nimport throttle from \"lodash/throttle\";\nimport storage from \"../js/localStorage\";\nimport isIgnoredKeybind from \"../js/helpers/isIgnoredKeybind\";\n\nimport Sidebar from \"./Sidebar.vue\";\nimport ImageViewer from \"./ImageViewer.vue\";\nimport ContextMenu from \"./ContextMenu.vue\";\nimport ConfirmDialog from \"./ConfirmDialog.vue\";\nimport Mentions from \"./Mentions.vue\";\nimport {\n\tcomputed,\n\tprovide,\n\tdefineComponent,\n\tonBeforeUnmount,\n\tonMounted,\n\tref,\n\tRef,\n\tInjectionKey,\n} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport type {DebouncedFunc} from \"lodash\";\n\nexport const imageViewerKey = Symbol() as InjectionKey<Ref<typeof ImageViewer | null>>;\nconst contextMenuKey = Symbol() as InjectionKey<Ref<typeof ContextMenu | null>>;\nconst confirmDialogKey = Symbol() as InjectionKey<Ref<typeof ConfirmDialog | null>>;\n\nexport default defineComponent({\n\tname: \"App\",\n\tcomponents: {\n\t\tSidebar,\n\t\tImageViewer,\n\t\tContextMenu,\n\t\tConfirmDialog,\n\t\tMentions,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst overlay = ref(null);\n\t\tconst loungeWindow = ref(null);\n\t\tconst imageViewer = ref(null);\n\t\tconst contextMenu = ref(null);\n\t\tconst confirmDialog = ref(null);\n\n\t\tprovide(imageViewerKey, imageViewer);\n\t\tprovide(contextMenuKey, contextMenu);\n\t\tprovide(confirmDialogKey, confirmDialog);\n\n\t\tconst viewportClasses = computed(() => {\n\t\t\treturn {\n\t\t\t\tnotified: store.getters.highlightCount > 0,\n\t\t\t\t\"menu-open\": store.state.appLoaded && store.state.sidebarOpen,\n\t\t\t\t\"menu-dragging\": store.state.sidebarDragging,\n\t\t\t\t\"userlist-open\": store.state.userlistOpen,\n\t\t\t};\n\t\t});\n\n\t\tconst debouncedResize = ref<DebouncedFunc<() => void>>();\n\t\tconst dayChangeTimeout = ref<any>();\n\n\t\tconst escapeKey = () => {\n\t\t\teventbus.emit(\"escapekey\");\n\t\t};\n\n\t\tconst toggleSidebar = (e: ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tstore.commit(\"toggleSidebar\");\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst toggleUserList = (e: ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(e)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tstore.commit(\"toggleUserlist\");\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst toggleMentions = () => {\n\t\t\tif (store.state.networks.length !== 0) {\n\t\t\t\teventbus.emit(\"mentions:toggle\");\n\t\t\t}\n\t\t};\n\n\t\tconst msUntilNextDay = () => {\n\t\t\t// Compute how many milliseconds are remaining until the next day starts\n\t\t\tconst today = new Date();\n\t\t\tconst tommorow = new Date(\n\t\t\t\ttoday.getFullYear(),\n\t\t\t\ttoday.getMonth(),\n\t\t\t\ttoday.getDate() + 1\n\t\t\t).getTime();\n\n\t\t\treturn tommorow - today.getTime();\n\t\t};\n\n\t\tconst prepareOpenStates = () => {\n\t\t\tconst viewportWidth = window.innerWidth;\n\t\t\tlet isUserlistOpen = storage.get(\"thelounge.state.userlist\");\n\n\t\t\tif (viewportWidth > constants.mobileViewportPixels) {\n\t\t\t\tstore.commit(\"sidebarOpen\", storage.get(\"thelounge.state.sidebar\") !== \"false\");\n\t\t\t}\n\n\t\t\t// If The Lounge is opened on a small screen (less than 1024px), and we don't have stored\n\t\t\t// user list state, close it by default\n\t\t\tif (viewportWidth >= 1024 && isUserlistOpen !== \"true\" && isUserlistOpen !== \"false\") {\n\t\t\t\tisUserlistOpen = \"true\";\n\t\t\t}\n\n\t\t\tstore.commit(\"userlistOpen\", isUserlistOpen === \"true\");\n\t\t};\n\n\t\tprepareOpenStates();\n\n\t\tonMounted(() => {\n\t\t\tMousetrap.bind(\"esc\", escapeKey);\n\t\t\tMousetrap.bind(\"alt+u\", toggleUserList);\n\t\t\tMousetrap.bind(\"alt+s\", toggleSidebar);\n\t\t\tMousetrap.bind(\"alt+m\", toggleMentions);\n\n\t\t\tdebouncedResize.value = throttle(() => {\n\t\t\t\teventbus.emit(\"resize\");\n\t\t\t}, 100);\n\n\t\t\twindow.addEventListener(\"resize\", debouncedResize.value, {passive: true});\n\n\t\t\t// Emit a daychange event every time the day changes so date markers know when to update themselves\n\t\t\tconst emitDayChange = () => {\n\t\t\t\teventbus.emit(\"daychange\");\n\t\t\t\t// This should always be 24h later but re-computing exact value just in case\n\t\t\t\tdayChangeTimeout.value = setTimeout(emitDayChange, msUntilNextDay());\n\t\t\t};\n\n\t\t\tdayChangeTimeout.value = setTimeout(emitDayChange, msUntilNextDay());\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tMousetrap.unbind(\"esc\");\n\t\t\tMousetrap.unbind(\"alt+u\");\n\t\t\tMousetrap.unbind(\"alt+s\");\n\t\t\tMousetrap.unbind(\"alt+m\");\n\n\t\t\tif (debouncedResize.value) {\n\t\t\t\twindow.removeEventListener(\"resize\", debouncedResize.value);\n\t\t\t}\n\n\t\t\tif (dayChangeTimeout.value) {\n\t\t\t\tclearTimeout(dayChangeTimeout.value);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tviewportClasses,\n\t\t\tescapeKey,\n\t\t\ttoggleSidebar,\n\t\t\ttoggleUserList,\n\t\t\ttoggleMentions,\n\t\t\tstore,\n\t\t\toverlay,\n\t\t\tloungeWindow,\n\t\t\timageViewer,\n\t\t\tcontextMenu,\n\t\t\tconfirmDialog,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<aside id=\"sidebar\" ref=\"sidebar\">\n\t\t<div class=\"scrollable-area\">\n\t\t\t<div class=\"logo-container\">\n\t\t\t\t<img\n\t\t\t\t\t:src=\"`img/logo-${isPublic() ? 'horizontal-' : ''}transparent-bg.svg`\"\n\t\t\t\t\tclass=\"logo\"\n\t\t\t\t\talt=\"The Lounge\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t/>\n\t\t\t\t<img\n\t\t\t\t\t:src=\"`img/logo-${isPublic() ? 'horizontal-' : ''}transparent-bg-inverted.svg`\"\n\t\t\t\t\tclass=\"logo-inverted\"\n\t\t\t\t\talt=\"The Lounge\"\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t/>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"isDevelopment\"\n\t\t\t\t\ttitle=\"The Lounge has been built in development mode\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: '#ff9e18',\n\t\t\t\t\t\tcolor: '#000',\n\t\t\t\t\t\tpadding: '2px',\n\t\t\t\t\t\tborderRadius: '4px',\n\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t}\"\n\t\t\t\t\t>DEVELOPER</span\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<NetworkList />\n\t\t</div>\n\t\t<footer id=\"footer\">\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-touch\"\n\t\t\t\taria-label=\"Connect to network\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/connect\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"connect\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:class=\"['icon', 'connect', {active: isActive}]\"\n\t\t\t\t\t\t:aria-selected=\"isActive\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t/> </router-link\n\t\t\t></span>\n\t\t\t<span class=\"tooltipped tooltipped-n tooltipped-no-touch\" aria-label=\"Settings\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/settings\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"settings\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:class=\"['icon', 'settings', {active: isActive}]\"\n\t\t\t\t\t\t:aria-selected=\"isActive\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t></button> </router-link\n\t\t\t></span>\n\t\t\t<span\n\t\t\t\tclass=\"tooltipped tooltipped-n tooltipped-no-touch\"\n\t\t\t\t:aria-label=\"\n\t\t\t\t\tstore.state.serverConfiguration?.isUpdateAvailable\n\t\t\t\t\t\t? 'Help\\n(update available)'\n\t\t\t\t\t\t: 'Help'\n\t\t\t\t\"\n\t\t\t\t><router-link\n\t\t\t\t\tv-slot:default=\"{navigate, isActive}\"\n\t\t\t\t\tto=\"/help\"\n\t\t\t\t\trole=\"tab\"\n\t\t\t\t\taria-controls=\"help\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\t:aria-selected=\"route.name === 'Help'\"\n\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t'icon',\n\t\t\t\t\t\t\t'help',\n\t\t\t\t\t\t\t{notified: store.state.serverConfiguration?.isUpdateAvailable},\n\t\t\t\t\t\t\t{active: isActive},\n\t\t\t\t\t\t]\"\n\t\t\t\t\t\t@click=\"navigate\"\n\t\t\t\t\t\t@keypress.enter=\"navigate\"\n\t\t\t\t\t></button> </router-link\n\t\t\t></span>\n\t\t</footer>\n\t</aside>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, nextTick, onMounted, onUnmounted, PropType, ref} from \"vue\";\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"../js/store\";\nimport NetworkList from \"./NetworkList.vue\";\n\nexport default defineComponent({\n\tname: \"Sidebar\",\n\tcomponents: {\n\t\tNetworkList,\n\t},\n\tprops: {\n\t\toverlay: {type: Object as PropType<HTMLElement | null>, required: true},\n\t},\n\tsetup(props) {\n\t\tconst isDevelopment = process.env.NODE_ENV !== \"production\";\n\n\t\tconst store = useStore();\n\t\tconst route = useRoute();\n\n\t\tconst touchStartPos = ref<Touch | null>();\n\t\tconst touchCurPos = ref<Touch | null>();\n\t\tconst touchStartTime = ref<number>(0);\n\t\tconst menuWidth = ref<number>(0);\n\t\tconst menuIsMoving = ref<boolean>(false);\n\t\tconst menuIsAbsolute = ref<boolean>(false);\n\n\t\tconst sidebar = ref<HTMLElement | null>(null);\n\n\t\tconst toggle = (state: boolean) => {\n\t\t\tstore.commit(\"sidebarOpen\", state);\n\t\t};\n\n\t\tconst onTouchMove = (e: TouchEvent) => {\n\t\t\tconst touch = (touchCurPos.value = e.touches.item(0));\n\n\t\t\tif (\n\t\t\t\t!touch ||\n\t\t\t\t!touchStartPos.value ||\n\t\t\t\t!touchStartPos.value.screenX ||\n\t\t\t\t!touchStartPos.value.screenY\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet distX = touch.screenX - touchStartPos.value.screenX;\n\t\t\tconst distY = touch.screenY - touchStartPos.value.screenY;\n\n\t\t\tif (!menuIsMoving.value) {\n\t\t\t\t// tan(45) is 1. Gestures in 0-45 (< 1) are considered horizontal, so\n\t\t\t\t// menu must be open; gestures in 45-90 (>1) are considered vertical, so\n\t\t\t\t// chat windows must be scrolled.\n\t\t\t\tif (Math.abs(distY / distX) >= 1) {\n\t\t\t\t\t// eslint-disable-next-line no-use-before-define\n\t\t\t\t\tonTouchEnd();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst devicePixelRatio = window.devicePixelRatio || 2;\n\n\t\t\t\tif (Math.abs(distX) > devicePixelRatio) {\n\t\t\t\t\tstore.commit(\"sidebarDragging\", true);\n\t\t\t\t\tmenuIsMoving.value = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do not animate the menu on desktop view\n\t\t\tif (!menuIsAbsolute.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (store.state.sidebarOpen) {\n\t\t\t\tdistX += menuWidth.value;\n\t\t\t}\n\n\t\t\tif (distX > menuWidth.value) {\n\t\t\t\tdistX = menuWidth.value;\n\t\t\t} else if (distX < 0) {\n\t\t\t\tdistX = 0;\n\t\t\t}\n\n\t\t\tif (sidebar.value) {\n\t\t\t\tsidebar.value.style.transform = \"translate3d(\" + distX.toString() + \"px, 0, 0)\";\n\t\t\t}\n\n\t\t\tif (props.overlay) {\n\t\t\t\tprops.overlay.style.opacity = `${distX / menuWidth.value}`;\n\t\t\t}\n\t\t};\n\n\t\tconst onTouchEnd = () => {\n\t\t\tif (!touchStartPos.value?.screenX || !touchCurPos.value?.screenX) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst diff = touchCurPos.value.screenX - touchStartPos.value.screenX;\n\t\t\tconst absDiff = Math.abs(diff);\n\n\t\t\tif (\n\t\t\t\tabsDiff > menuWidth.value / 2 ||\n\t\t\t\t(Date.now() - touchStartTime.value < 180 && absDiff > 50)\n\t\t\t) {\n\t\t\t\ttoggle(diff > 0);\n\t\t\t}\n\n\t\t\tdocument.body.removeEventListener(\"touchmove\", onTouchMove);\n\t\t\tdocument.body.removeEventListener(\"touchend\", onTouchEnd);\n\n\t\t\tstore.commit(\"sidebarDragging\", false);\n\n\t\t\ttouchStartPos.value = null;\n\t\t\ttouchCurPos.value = null;\n\t\t\ttouchStartTime.value = 0;\n\t\t\tmenuIsMoving.value = false;\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tif (sidebar.value) {\n\t\t\t\t\tsidebar.value.style.transform = \"\";\n\t\t\t\t}\n\n\t\t\t\tif (props.overlay) {\n\t\t\t\t\tprops.overlay.style.opacity = \"\";\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tconst onTouchStart = (e: TouchEvent) => {\n\t\t\tif (!sidebar.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttouchStartPos.value = touchCurPos.value = e.touches.item(0);\n\n\t\t\tif (e.touches.length !== 1) {\n\t\t\t\tonTouchEnd();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst styles = window.getComputedStyle(sidebar.value);\n\n\t\t\tmenuWidth.value = parseFloat(styles.width);\n\t\t\tmenuIsAbsolute.value = styles.position === \"absolute\";\n\n\t\t\tif (\n\t\t\t\t!store.state.sidebarOpen ||\n\t\t\t\t(touchStartPos.value?.screenX && touchStartPos.value.screenX > menuWidth.value)\n\t\t\t) {\n\t\t\t\ttouchStartTime.value = Date.now();\n\n\t\t\t\tdocument.body.addEventListener(\"touchmove\", onTouchMove, {passive: true});\n\t\t\t\tdocument.body.addEventListener(\"touchend\", onTouchEnd, {passive: true});\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tdocument.body.addEventListener(\"touchstart\", onTouchStart, {passive: true});\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tdocument.body.removeEventListener(\"touchstart\", onTouchStart);\n\t\t});\n\n\t\tconst isPublic = () => document.body.classList.contains(\"public\");\n\n\t\treturn {\n\t\t\tisDevelopment,\n\t\t\tstore,\n\t\t\troute,\n\t\t\tsidebar,\n\t\t\ttoggle,\n\t\t\tonTouchStart,\n\t\t\tonTouchMove,\n\t\t\tonTouchEnd,\n\t\t\tisPublic,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div\n\t\tv-if=\"store.state.networks.length === 0\"\n\t\tclass=\"empty\"\n\t\trole=\"navigation\"\n\t\taria-label=\"Network and Channel list\"\n\t>\n\t\tYou are not connected to any networks yet.\n\t</div>\n\t<div v-else ref=\"networklist\" role=\"navigation\" aria-label=\"Network and Channel list\">\n\t\t<div class=\"jump-to-input\">\n\t\t\t<input\n\t\t\t\tref=\"searchInput\"\n\t\t\t\t:value=\"searchText\"\n\t\t\t\tplaceholder=\"Jump to...\"\n\t\t\t\ttype=\"search\"\n\t\t\t\tclass=\"search input mousetrap\"\n\t\t\t\taria-label=\"Search among the channel list\"\n\t\t\t\ttabindex=\"-1\"\n\t\t\t\t@input=\"setSearchText\"\n\t\t\t\t@keydown.up=\"navigateResults($event, -1)\"\n\t\t\t\t@keydown.down=\"navigateResults($event, 1)\"\n\t\t\t\t@keydown.page-up=\"navigateResults($event, -10)\"\n\t\t\t\t@keydown.page-down=\"navigateResults($event, 10)\"\n\t\t\t\t@keydown.enter=\"selectResult\"\n\t\t\t\t@keydown.escape=\"deactivateSearch\"\n\t\t\t\t@focus=\"activateSearch\"\n\t\t\t/>\n\t\t</div>\n\t\t<div v-if=\"searchText\" class=\"jump-to-results\">\n\t\t\t<div v-if=\"results.length\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"item in results\"\n\t\t\t\t\t:key=\"item.channel.id\"\n\t\t\t\t\t@mouseenter=\"setActiveSearchItem(item.channel)\"\n\t\t\t\t\t@click.prevent=\"selectResult\"\n\t\t\t\t>\n\t\t\t\t\t<Channel\n\t\t\t\t\t\tv-if=\"item.channel.type !== 'lobby'\"\n\t\t\t\t\t\t:channel=\"item.channel\"\n\t\t\t\t\t\t:network=\"item.network\"\n\t\t\t\t\t\t:active=\"item.channel === activeSearchItem\"\n\t\t\t\t\t\t:is-filtering=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t\t<NetworkLobby\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\t:channel=\"item.channel\"\n\t\t\t\t\t\t:network=\"item.network\"\n\t\t\t\t\t\t:active=\"item.channel === activeSearchItem\"\n\t\t\t\t\t\t:is-filtering=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else class=\"no-results\">No results found.</div>\n\t\t</div>\n\t\t<Draggable\n\t\t\tv-else\n\t\t\t:list=\"store.state.networks\"\n\t\t\t:delay=\"LONG_TOUCH_DURATION\"\n\t\t\t:delay-on-touch-only=\"true\"\n\t\t\t:touch-start-threshold=\"10\"\n\t\t\thandle=\".channel-list-item[data-type='lobby']\"\n\t\t\tdraggable=\".network\"\n\t\t\tghost-class=\"ui-sortable-ghost\"\n\t\t\tdrag-class=\"ui-sortable-dragging\"\n\t\t\tgroup=\"networks\"\n\t\t\tclass=\"networks\"\n\t\t\titem-key=\"uuid\"\n\t\t\t@change=\"onNetworkSort\"\n\t\t\t@choose=\"onDraggableChoose\"\n\t\t\t@unchoose=\"onDraggableUnchoose\"\n\t\t>\n\t\t\t<template v-slot:item=\"{element: network}\">\n\t\t\t\t<div\n\t\t\t\t\t:id=\"'network-' + network.uuid\"\n\t\t\t\t\t:key=\"network.uuid\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\tcollapsed: network.isCollapsed,\n\t\t\t\t\t\t'not-connected': !network.status.connected,\n\t\t\t\t\t\t'not-secure': !network.status.secure,\n\t\t\t\t\t}\"\n\t\t\t\t\tclass=\"network\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t@touchstart=\"onDraggableTouchStart\"\n\t\t\t\t\t@touchmove=\"onDraggableTouchMove\"\n\t\t\t\t\t@touchend=\"onDraggableTouchEnd\"\n\t\t\t\t\t@touchcancel=\"onDraggableTouchEnd\"\n\t\t\t\t>\n\t\t\t\t\t<NetworkLobby\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:is-join-channel-shown=\"network.isJoinChannelShown\"\n\t\t\t\t\t\t:active=\"\n\t\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\t\tnetwork.channels[0] === store.state.activeChannel.channel\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@toggle-join-channel=\"\n\t\t\t\t\t\t\tnetwork.isJoinChannelShown = !network.isJoinChannelShown\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t\t<JoinChannel\n\t\t\t\t\t\tv-if=\"network.isJoinChannelShown\"\n\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t:channel=\"network.channels[0]\"\n\t\t\t\t\t\t@toggle-join-channel=\"\n\t\t\t\t\t\t\tnetwork.isJoinChannelShown = !network.isJoinChannelShown\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Draggable\n\t\t\t\t\t\tdraggable=\".channel-list-item\"\n\t\t\t\t\t\tghost-class=\"ui-sortable-ghost\"\n\t\t\t\t\t\tdrag-class=\"ui-sortable-dragging\"\n\t\t\t\t\t\t:group=\"network.uuid\"\n\t\t\t\t\t\t:list=\"network.channels\"\n\t\t\t\t\t\t:delay=\"LONG_TOUCH_DURATION\"\n\t\t\t\t\t\t:delay-on-touch-only=\"true\"\n\t\t\t\t\t\t:touch-start-threshold=\"10\"\n\t\t\t\t\t\tclass=\"channels\"\n\t\t\t\t\t\titem-key=\"name\"\n\t\t\t\t\t\t@change=\"onChannelSort\"\n\t\t\t\t\t\t@choose=\"onDraggableChoose\"\n\t\t\t\t\t\t@unchoose=\"onDraggableUnchoose\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template v-slot:item=\"{element: channel, index}\">\n\t\t\t\t\t\t\t<Channel\n\t\t\t\t\t\t\t\tv-if=\"index > 0\"\n\t\t\t\t\t\t\t\t:key=\"channel.id\"\n\t\t\t\t\t\t\t\t:data-item=\"channel.id\"\n\t\t\t\t\t\t\t\t:channel=\"channel\"\n\t\t\t\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t\t\t\t:active=\"\n\t\t\t\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\t\t\t\tchannel === store.state.activeChannel.channel\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Draggable>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Draggable>\n\t</div>\n</template>\n\n<style>\n.jump-to-input {\n\tmargin: 8px;\n\tposition: relative;\n}\n\n.jump-to-input .input {\n\tmargin: 0;\n\twidth: 100%;\n\tborder: 0;\n\tcolor: #fff;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tpadding-right: 35px;\n\tappearance: none;\n}\n\n.jump-to-input .input::placeholder {\n\tcolor: rgba(255, 255, 255, 0.35);\n}\n\n.jump-to-input::before {\n\tcontent: \"\\f002\"; /* http://fontawesome.io/icon/search/ */\n\tcolor: rgba(255, 255, 255, 0.35);\n\tposition: absolute;\n\tright: 8px;\n\ttop: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\tline-height: 35px !important;\n}\n\n.jump-to-results {\n\tmargin: 0;\n\tpadding: 0;\n\tlist-style: none;\n\toverflow: auto;\n}\n\n.jump-to-results .no-results {\n\tmargin: 14px 8px;\n\ttext-align: center;\n}\n\n.jump-to-results .channel-list-item.active {\n\tcursor: pointer;\n}\n\n.jump-to-results .channel-list-item .add-channel,\n.jump-to-results .channel-list-item .close-tooltip {\n\tdisplay: none;\n}\n\n.jump-to-results .channel-list-item[data-type=\"lobby\"] {\n\tpadding: 8px 14px;\n}\n\n.jump-to-results .channel-list-item[data-type=\"lobby\"]::before {\n\tcontent: \"\\f233\";\n}\n</style>\n\n<script lang=\"ts\">\nimport {computed, watch, defineComponent, nextTick, onBeforeUnmount, onMounted, ref} from \"vue\";\n\nimport Mousetrap from \"mousetrap\";\nimport Draggable from \"./Draggable.vue\";\nimport {filter as fuzzyFilter} from \"fuzzy\";\nimport NetworkLobby from \"./NetworkLobby.vue\";\nimport Channel from \"./Channel.vue\";\nimport JoinChannel from \"./JoinChannel.vue\";\n\nimport socket from \"../js/socket\";\nimport collapseNetworkHelper from \"../js/helpers/collapseNetwork\";\nimport isIgnoredKeybind from \"../js/helpers/isIgnoredKeybind\";\nimport distance from \"../js/helpers/distance\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientChan, NetChan} from \"../js/types\";\nimport {useStore} from \"../js/store\";\nimport {switchToChannel} from \"../js/router\";\nimport Sortable from \"sortablejs\";\n\nexport default defineComponent({\n\tname: \"NetworkList\",\n\tcomponents: {\n\t\tJoinChannel,\n\t\tNetworkLobby,\n\t\tChannel,\n\t\tDraggable,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst searchText = ref(\"\");\n\t\tconst activeSearchItem = ref<ClientChan | null>();\n\t\t// Number of milliseconds a touch has to last to be considered long\n\t\tconst LONG_TOUCH_DURATION = 500;\n\n\t\tconst startDrag = ref<[number, number] | null>();\n\t\tconst searchInput = ref<HTMLInputElement | null>(null);\n\t\tconst networklist = ref<HTMLDivElement | null>(null);\n\n\t\tconst sidebarWasClosed = ref(false);\n\n\t\tconst moveItemInArray = <T>(array: T[], from: number, to: number) => {\n\t\t\tconst item = array.splice(from, 1)[0];\n\t\t\tarray.splice(to, 0, item);\n\t\t};\n\n\t\tconst items = computed(() => {\n\t\t\tconst newItems: NetChan[] = [];\n\n\t\t\tfor (const network of store.state.networks) {\n\t\t\t\tfor (const channel of network.channels) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstore.state.activeChannel &&\n\t\t\t\t\t\tchannel === store.state.activeChannel.channel\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewItems.push({network, channel});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn newItems;\n\t\t});\n\n\t\tconst results = computed(() => {\n\t\t\tconst newResults = fuzzyFilter(searchText.value, items.value, {\n\t\t\t\textract: (item) => item.channel.name,\n\t\t\t}).map((item) => item.original);\n\n\t\t\treturn newResults;\n\t\t});\n\n\t\tconst collapseNetwork = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (store.state.activeChannel) {\n\t\t\t\tcollapseNetworkHelper(store.state.activeChannel.network, true);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst expandNetwork = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (store.state.activeChannel) {\n\t\t\t\tcollapseNetworkHelper(store.state.activeChannel.network, false);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst onNetworkSort = (e: Sortable.SortableEvent) => {\n\t\t\tconst {oldIndex, newIndex} = e;\n\n\t\t\tif (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveItemInArray(store.state.networks, oldIndex, newIndex);\n\n\t\t\tsocket.emit(\"sort\", {\n\t\t\t\ttype: \"networks\",\n\t\t\t\torder: store.state.networks.map((n) => n.uuid),\n\t\t\t});\n\t\t};\n\n\t\tconst onChannelSort = (e: Sortable.SortableEvent) => {\n\t\t\tlet {oldIndex, newIndex} = e;\n\n\t\t\tif (oldIndex === undefined || newIndex === undefined || oldIndex === newIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Indexes are offset by one due to the lobby\n\t\t\toldIndex += 1;\n\t\t\tnewIndex += 1;\n\n\t\t\tconst unparsedId = e.item.getAttribute(\"data-item\");\n\n\t\t\tif (!unparsedId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst id = parseInt(unparsedId);\n\t\t\tconst netChan = store.getters.findChannel(id);\n\n\t\t\tif (!netChan) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoveItemInArray(netChan.network.channels, oldIndex, newIndex);\n\n\t\t\tsocket.emit(\"sort\", {\n\t\t\t\ttype: \"channels\",\n\t\t\t\ttarget: netChan.network.uuid,\n\t\t\t\torder: netChan.network.channels.map((c) => c.id),\n\t\t\t});\n\t\t};\n\n\t\tconst isTouchEvent = (event: any): boolean => {\n\t\t\t// This is the same way Sortable.js detects a touch event. See\n\t\t\t// SortableJS/Sortable@daaefeda:/src/Sortable.js#L465\n\n\t\t\treturn !!(\n\t\t\t\t(event.touches && event.touches[0]) ||\n\t\t\t\t(event.pointerType && event.pointerType === \"touch\")\n\t\t\t);\n\t\t};\n\n\t\tconst onDraggableChoose = (event: any) => {\n\t\t\tconst original = event.originalEvent;\n\n\t\t\tif (isTouchEvent(original)) {\n\t\t\t\t// onDrag is only triggered when the user actually moves the\n\t\t\t\t// dragged object but onChoose is triggered as soon as the\n\t\t\t\t// item is eligible for dragging. This gives us an opportunity\n\t\t\t\t// to tell the user they've held the touch long enough.\n\t\t\t\tevent.item.classList.add(\"ui-sortable-dragging-touch-cue\");\n\n\t\t\t\tif (original instanceof TouchEvent && original.touches.length > 0) {\n\t\t\t\t\tstartDrag.value = [original.touches[0].clientX, original.touches[0].clientY];\n\t\t\t\t} else if (original instanceof PointerEvent) {\n\t\t\t\t\tstartDrag.value = [original.clientX, original.clientY];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableUnchoose = (event: any) => {\n\t\t\tevent.item.classList.remove(\"ui-sortable-dragging-touch-cue\");\n\t\t\tstartDrag.value = null;\n\t\t};\n\n\t\tconst onDraggableTouchStart = (event: TouchEvent) => {\n\t\t\tif (event.touches.length === 1) {\n\t\t\t\t// This prevents an iOS long touch default behavior: selecting\n\t\t\t\t// the nearest selectable text.\n\t\t\t\tdocument.body.classList.add(\"force-no-select\");\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableTouchMove = (event: TouchEvent) => {\n\t\t\tif (startDrag.value && event.touches.length > 0) {\n\t\t\t\tconst touch = event.touches[0];\n\t\t\t\tconst currentPosition = [touch.clientX, touch.clientY];\n\n\t\t\t\tif (distance(startDrag.value, currentPosition as [number, number]) > 10) {\n\t\t\t\t\t// Context menu is shown on Android after long touch.\n\t\t\t\t\t// Dismiss it now that we're sure the user is dragging.\n\t\t\t\t\teventbus.emit(\"contextmenu:cancel\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDraggableTouchEnd = (event: TouchEvent) => {\n\t\t\tif (event.touches.length === 0) {\n\t\t\t\tdocument.body.classList.remove(\"force-no-select\");\n\t\t\t}\n\t\t};\n\n\t\tconst activateSearch = () => {\n\t\t\tif (searchInput.value === document.activeElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsidebarWasClosed.value = store.state.sidebarOpen ? false : true;\n\t\t\tstore.commit(\"sidebarOpen\", true);\n\n\t\t\tvoid nextTick(() => {\n\t\t\t\tsearchInput.value?.focus();\n\t\t\t});\n\t\t};\n\n\t\tconst deactivateSearch = () => {\n\t\t\tactiveSearchItem.value = null;\n\t\t\tsearchText.value = \"\";\n\t\t\tsearchInput.value?.blur();\n\n\t\t\tif (sidebarWasClosed.value) {\n\t\t\t\tstore.commit(\"sidebarOpen\", false);\n\t\t\t}\n\t\t};\n\n\t\tconst toggleSearch = (event: Mousetrap.ExtendedKeyboardEvent) => {\n\t\t\tif (isIgnoredKeybind(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (searchInput.value === document.activeElement) {\n\t\t\t\tdeactivateSearch();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tactivateSearch();\n\t\t\treturn false;\n\t\t};\n\n\t\tconst setSearchText = (e: Event) => {\n\t\t\tsearchText.value = (e.target as HTMLInputElement).value;\n\t\t};\n\n\t\tconst setActiveSearchItem = (channel?: ClientChan) => {\n\t\t\tif (!results.value.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!channel) {\n\t\t\t\tchannel = results.value[0].channel;\n\t\t\t}\n\n\t\t\tactiveSearchItem.value = channel;\n\t\t};\n\n\t\tconst scrollToActive = () => {\n\t\t\t// Scroll the list if needed after the active class is applied\n\t\t\tvoid nextTick(() => {\n\t\t\t\tconst el = networklist.value?.querySelector(\".channel-list-item.active\");\n\n\t\t\t\tif (el) {\n\t\t\t\t\tel.scrollIntoView({block: \"nearest\", inline: \"nearest\"});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tconst selectResult = () => {\n\t\t\tif (!searchText.value || !results.value.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (activeSearchItem.value) {\n\t\t\t\tswitchToChannel(activeSearchItem.value);\n\t\t\t\tdeactivateSearch();\n\t\t\t\tscrollToActive();\n\t\t\t}\n\t\t};\n\n\t\tconst navigateResults = (event: Event, direction: number) => {\n\t\t\t// Prevent propagation to stop global keybind handler from capturing pagedown/pageup\n\t\t\t// and redirecting it to the message list container for scrolling\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!searchText.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst channels = results.value.map((r) => r.channel);\n\n\t\t\t// Bail out if there's no channels to select\n\t\t\tif (!channels.length) {\n\t\t\t\tactiveSearchItem.value = null;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet currentIndex = activeSearchItem.value\n\t\t\t\t? channels.indexOf(activeSearchItem.value)\n\t\t\t\t: -1;\n\n\t\t\t// If there's no active channel select the first or last one depending on direction\n\t\t\tif (!activeSearchItem.value || currentIndex === -1) {\n\t\t\t\tactiveSearchItem.value = direction ? channels[0] : channels[channels.length - 1];\n\t\t\t\tscrollToActive();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\t// Wrap around the list if necessary. Normaly each loop iterates once at most,\n\t\t\t// but might iterate more often if pgup or pgdown are used in a very short list\n\t\t\twhile (currentIndex < 0) {\n\t\t\t\tcurrentIndex += channels.length;\n\t\t\t}\n\n\t\t\twhile (currentIndex > channels.length - 1) {\n\t\t\t\tcurrentIndex -= channels.length;\n\t\t\t}\n\n\t\t\tactiveSearchItem.value = channels[currentIndex];\n\t\t\tscrollToActive();\n\t\t};\n\n\t\twatch(searchText, () => {\n\t\t\tsetActiveSearchItem();\n\t\t});\n\n\t\tonMounted(() => {\n\t\t\tMousetrap.bind(\"alt+shift+right\", expandNetwork);\n\t\t\tMousetrap.bind(\"alt+shift+left\", collapseNetwork);\n\t\t\tMousetrap.bind(\"alt+j\", toggleSearch);\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tMousetrap.unbind(\"alt+shift+right\");\n\t\t\tMousetrap.unbind(\"alt+shift+left\");\n\t\t\tMousetrap.unbind(\"alt+j\");\n\t\t});\n\n\t\tconst networkContainerRef = ref<HTMLDivElement>();\n\t\tconst channelRefs = ref<{[key: string]: HTMLDivElement}>({});\n\n\t\treturn {\n\t\t\tstore,\n\t\t\tnetworklist,\n\t\t\tsearchInput,\n\t\t\tsearchText,\n\t\t\tresults,\n\t\t\tactiveSearchItem,\n\t\t\tLONG_TOUCH_DURATION,\n\n\t\t\tactivateSearch,\n\t\t\tdeactivateSearch,\n\t\t\ttoggleSearch,\n\t\t\tsetSearchText,\n\t\t\tsetActiveSearchItem,\n\t\t\tscrollToActive,\n\t\t\tselectResult,\n\t\t\tnavigateResults,\n\t\t\tonChannelSort,\n\t\t\tonNetworkSort,\n\t\t\tonDraggableTouchStart,\n\t\t\tonDraggableTouchMove,\n\t\t\tonDraggableTouchEnd,\n\t\t\tonDraggableChoose,\n\t\t\tonDraggableUnchoose,\n\t\t};\n\t},\n});\n</script>\n","<template>\n\t<div ref=\"containerRef\" :class=\"$props.class\">\n\t\t<slot\n\t\t\tv-for=\"(item, index) of list\"\n\t\t\t:key=\"item[itemKey]\"\n\t\t\t:element=\"item\"\n\t\t\t:index=\"index\"\n\t\t\tname=\"item\"\n\t\t></slot>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, ref, PropType, watch, onUnmounted, onBeforeUnmount} from \"vue\";\nimport Sortable from \"sortablejs\";\n\nconst Props = {\n\tdelay: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t\trequired: false,\n\t},\n\tdelayOnTouchOnly: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t\trequired: false,\n\t},\n\ttouchStartThreshold: {\n\t\ttype: Number,\n\t\tdefault: 10,\n\t\trequired: false,\n\t},\n\thandle: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tdraggable: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tghostClass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tdragClass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tgroup: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\tclass: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n\titemKey: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: true,\n\t},\n\tlist: {\n\t\ttype: Array as PropType<any[]>,\n\t\tdefault: [],\n\t\trequired: true,\n\t},\n\tfilter: {\n\t\ttype: String,\n\t\tdefault: \"\",\n\t\trequired: false,\n\t},\n};\n\nexport default defineComponent({\n\tname: \"Draggable\",\n\tprops: Props,\n\temits: [\"change\", \"choose\", \"unchoose\"],\n\tsetup(props, {emit}) {\n\t\tconst containerRef = ref<HTMLElement | null>(null);\n\t\tconst sortable = ref<Sortable | null>(null);\n\n\t\twatch(containerRef, (newDraggable) => {\n\t\t\tif (newDraggable) {\n\t\t\t\tsortable.value = new Sortable(newDraggable, {\n\t\t\t\t\t...props,\n\n\t\t\t\t\tonChoose(event) {\n\t\t\t\t\t\temit(\"choose\", event);\n\t\t\t\t\t},\n\n\t\t\t\t\tonUnchoose(event) {\n\t\t\t\t\t\temit(\"unchoose\", event);\n\t\t\t\t\t},\n\n\t\t\t\t\tonEnd(event) {\n\t\t\t\t\t\temit(\"change\", event);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tonBeforeUnmount(() => {\n\t\t\tif (sortable.value) {\n\t\t\t\tsortable.value.destroy();\n\t\t\t\tcontainerRef.value = null;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tcontainerRef,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Draggable.vue?vue&type=template&id=09d4f527&ts=true\"\nimport script from \"./Draggable.vue?vue&type=script&lang=ts\"\nexport * from \"./Draggable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<ChannelWrapper v-bind=\"$props\" :channel=\"channel\">\n\t\t<button\n\t\t\tv-if=\"network.channels.length > 1\"\n\t\t\t:aria-controls=\"'network-' + network.uuid\"\n\t\t\t:aria-label=\"getExpandLabel(network)\"\n\t\t\t:aria-expanded=\"!network.isCollapsed\"\n\t\t\tclass=\"collapse-network\"\n\t\t\t@click.stop=\"onCollapseClick\"\n\t\t>\n\t\t\t<span class=\"collapse-network-icon\" />\n\t\t</button>\n\t\t<span v-else class=\"collapse-network\" />\n\t\t<div class=\"lobby-wrap\">\n\t\t\t<span :title=\"channel.name\" class=\"name\">{{ channel.name }}</span>\n\t\t\t<span\n\t\t\t\tv-if=\"network.status.connected && !network.status.secure\"\n\t\t\t\tclass=\"not-secure-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Insecure connection\"\n\t\t\t>\n\t\t\t\t<span class=\"not-secure-icon\" />\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"!network.status.connected\"\n\t\t\t\tclass=\"not-connected-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Disconnected\"\n\t\t\t>\n\t\t\t\t<span class=\"not-connected-icon\" />\n\t\t\t</span>\n\t\t\t<span v-if=\"channel.unread\" :class=\"{highlight: channel.highlight}\" class=\"badge\">{{\n\t\t\t\tunreadCount\n\t\t\t}}</span>\n\t\t</div>\n\t\t<span\n\t\t\t:aria-label=\"joinChannelLabel\"\n\t\t\tclass=\"add-channel-tooltip tooltipped tooltipped-w tooltipped-no-touch\"\n\t\t>\n\t\t\t<button\n\t\t\t\t:class=\"['add-channel', {opened: isJoinChannelShown}]\"\n\t\t\t\t:aria-controls=\"'join-channel-' + channel.id\"\n\t\t\t\t:aria-label=\"joinChannelLabel\"\n\t\t\t\t@click.stop=\"$emit('toggle-join-channel')\"\n\t\t\t/>\n\t\t</span>\n\t</ChannelWrapper>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport collapseNetwork from \"../js/helpers/collapseNetwork\";\nimport roundBadgeNumber from \"../js/helpers/roundBadgeNumber\";\nimport ChannelWrapper from \"./ChannelWrapper.vue\";\n\nimport type {ClientChan, ClientNetwork} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"Channel\",\n\tcomponents: {\n\t\tChannelWrapper,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tisJoinChannelShown: Boolean,\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\temits: [\"toggle-join-channel\"],\n\tsetup(props) {\n\t\tconst channel = computed(() => {\n\t\t\treturn props.network.channels[0];\n\t\t});\n\n\t\tconst joinChannelLabel = computed(() => {\n\t\t\treturn props.isJoinChannelShown ? \"Cancel\" : \"Join a channel\";\n\t\t});\n\n\t\tconst unreadCount = computed(() => {\n\t\t\treturn roundBadgeNumber(channel.value.unread);\n\t\t});\n\n\t\tconst onCollapseClick = () => {\n\t\t\tcollapseNetwork(props.network, !props.network.isCollapsed);\n\t\t};\n\n\t\tconst getExpandLabel = (network: ClientNetwork) => {\n\t\t\treturn network.isCollapsed ? \"Expand\" : \"Collapse\";\n\t\t};\n\n\t\treturn {\n\t\t\tchannel,\n\t\t\tjoinChannelLabel,\n\t\t\tunreadCount,\n\t\t\tonCollapseClick,\n\t\t\tgetExpandLabel,\n\t\t};\n\t},\n});\n</script>\n","import storage from \"../localStorage\";\n\nexport default (network, isCollapsed) => {\n\tconst stored = storage.get(\"thelounge.networks.collapsed\");\n\tconst networks = stored ? new Set(JSON.parse(stored)) : new Set();\n\n\tnetwork.isCollapsed = isCollapsed;\n\n\tif (isCollapsed) {\n\t\tnetworks.add(network.uuid);\n\t} else {\n\t\tnetworks.delete(network.uuid);\n\t}\n\n\tstorage.set(\"thelounge.networks.collapsed\", JSON.stringify([...networks]));\n};\n","export default (count: number) => {\n\tif (count < 1000) {\n\t\treturn count.toString();\n\t}\n\n\treturn (count / 1000).toFixed(2).slice(0, -1) + \"k\";\n};\n","<template>\n\t<!-- TODO: move closed style to it's own class -->\n\t<div\n\t\tv-if=\"isChannelVisible\"\n\t\tref=\"element\"\n\t\t:class=\"[\n\t\t\t'channel-list-item',\n\t\t\t{active: active},\n\t\t\t{'parted-channel': channel.type === 'channel' && channel.state === 0},\n\t\t\t{'has-draft': channel.pendingMessage},\n\t\t\t{'has-unread': channel.unread},\n\t\t\t{'has-highlight': channel.highlight},\n\t\t\t{\n\t\t\t\t'not-secure':\n\t\t\t\t\tchannel.type === 'lobby' && network.status.connected && !network.status.secure,\n\t\t\t},\n\t\t\t{'not-connected': channel.type === 'lobby' && !network.status.connected},\n\t\t\t{'is-muted': channel.muted},\n\t\t]\"\n\t\t:aria-label=\"getAriaLabel()\"\n\t\t:title=\"getAriaLabel()\"\n\t\t:data-name=\"channel.name\"\n\t\t:data-type=\"channel.type\"\n\t\t:aria-controls=\"'#chan-' + channel.id\"\n\t\t:aria-selected=\"active\"\n\t\t:style=\"channel.closed ? {transition: 'none', opacity: 0.4} : undefined\"\n\t\trole=\"tab\"\n\t\t@click=\"click\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t>\n\t\t<slot :network=\"network\" :channel=\"channel\" :active-channel=\"activeChannel\" />\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport eventbus from \"../js/eventbus\";\nimport isChannelCollapsed from \"../js/helpers/isChannelCollapsed\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {switchToChannel} from \"../js/router\";\n\nexport default defineComponent({\n\tname: \"ChannelWrapper\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {\n\t\t\ttype: Object as PropType<ClientChan>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst store = useStore();\n\t\tconst activeChannel = computed(() => store.state.activeChannel);\n\t\tconst isChannelVisible = computed(\n\t\t\t() => props.isFiltering || !isChannelCollapsed(props.network, props.channel)\n\t\t);\n\n\t\tconst getAriaLabel = () => {\n\t\t\tconst extra: string[] = [];\n\t\t\tconst type = props.channel.type;\n\n\t\t\tif (props.channel.unread > 0) {\n\t\t\t\tif (props.channel.unread > 1) {\n\t\t\t\t\textra.push(`${props.channel.unread} unread messages`);\n\t\t\t\t} else {\n\t\t\t\t\textra.push(`${props.channel.unread} unread message`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (props.channel.highlight > 0) {\n\t\t\t\tif (props.channel.highlight > 1) {\n\t\t\t\t\textra.push(`${props.channel.highlight} mentions`);\n\t\t\t\t} else {\n\t\t\t\t\textra.push(`${props.channel.highlight} mention`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn `${type}: ${props.channel.name} ${extra.length ? `(${extra.join(\", \")})` : \"\"}`;\n\t\t};\n\n\t\tconst click = () => {\n\t\t\tif (props.isFiltering) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitchToChannel(props.channel);\n\t\t};\n\n\t\tconst openContextMenu = (event: MouseEvent) => {\n\t\t\teventbus.emit(\"contextmenu:channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t\tnetwork: props.network,\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\tactiveChannel,\n\t\t\tisChannelVisible,\n\t\t\tgetAriaLabel,\n\t\t\tclick,\n\t\t\topenContextMenu,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ChannelWrapper.vue?vue&type=template&id=27b55c3c&ts=true\"\nimport script from \"./ChannelWrapper.vue?vue&type=script&lang=ts\"\nexport * from \"./ChannelWrapper.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkLobby.vue?vue&type=template&id=0ca1e50b&ts=true\"\nimport script from \"./NetworkLobby.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkLobby.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<!-- TODO: investigate -->\n\t<ChannelWrapper ref=\"wrapper\" v-bind=\"$props\">\n\t\t<span class=\"name\">{{ channel.name }}</span>\n\t\t<span\n\t\t\tv-if=\"channel.unread\"\n\t\t\t:class=\"{highlight: channel.highlight && !channel.muted}\"\n\t\t\tclass=\"badge\"\n\t\t\t>{{ unreadCount }}</span\n\t\t>\n\t\t<template v-if=\"channel.type === 'channel'\">\n\t\t\t<span\n\t\t\t\tv-if=\"channel.state === 0\"\n\t\t\t\tclass=\"parted-channel-tooltip tooltipped tooltipped-w\"\n\t\t\t\taria-label=\"Not currently joined\"\n\t\t\t>\n\t\t\t\t<span class=\"parted-channel-icon\" />\n\t\t\t</span>\n\t\t\t<span class=\"close-tooltip tooltipped tooltipped-w\" aria-label=\"Leave\">\n\t\t\t\t<button class=\"close\" aria-label=\"Leave\" @click.stop=\"close\" />\n\t\t\t</span>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<span class=\"close-tooltip tooltipped tooltipped-w\" aria-label=\"Close\">\n\t\t\t\t<button class=\"close\" aria-label=\"Close\" @click.stop=\"close\" />\n\t\t\t</span>\n\t\t</template>\n\t</ChannelWrapper>\n</template>\n\n<script lang=\"ts\">\nimport {PropType, defineComponent, computed} from \"vue\";\nimport roundBadgeNumber from \"../js/helpers/roundBadgeNumber\";\nimport useCloseChannel from \"../js/hooks/use-close-channel\";\nimport {ClientChan, ClientNetwork} from \"../js/types\";\nimport ChannelWrapper from \"./ChannelWrapper.vue\";\n\nexport default defineComponent({\n\tname: \"Channel\",\n\tcomponents: {\n\t\tChannelWrapper,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tchannel: {\n\t\t\ttype: Object as PropType<ClientChan>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tisFiltering: Boolean,\n\t},\n\tsetup(props) {\n\t\tconst unreadCount = computed(() => roundBadgeNumber(props.channel.unread));\n\t\tconst close = useCloseChannel(props.channel);\n\n\t\treturn {\n\t\t\tunreadCount,\n\t\t\tclose,\n\t\t};\n\t},\n});\n</script>\n","import eventbus from \"../eventbus\";\nimport socket from \"../socket\";\nimport {ClientChan} from \"../types\";\n\nexport default function useCloseChannel(channel: ClientChan) {\n\treturn () => {\n\t\tif (channel.type === \"lobby\") {\n\t\t\teventbus.emit(\n\t\t\t\t\"confirm-dialog\",\n\t\t\t\t{\n\t\t\t\t\ttitle: \"Remove network\",\n\t\t\t\t\ttext: `Are you sure you want to quit and remove ${channel.name}? This cannot be undone.`,\n\t\t\t\t\tbutton: \"Remove network\",\n\t\t\t\t},\n\t\t\t\t(result: boolean) => {\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tchannel.closed = true;\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: Number(channel.id),\n\t\t\t\t\t\ttext: \"/quit\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tchannel.closed = true;\n\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: Number(channel.id),\n\t\t\ttext: \"/close\",\n\t\t});\n\t};\n}\n","import { render } from \"./Channel.vue?vue&type=template&id=27e62c21&ts=true\"\nimport script from \"./Channel.vue?vue&type=script&lang=ts\"\nexport * from \"./Channel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<form\n\t\t:id=\"'join-channel-' + channel.id\"\n\t\tclass=\"join-form\"\n\t\tmethod=\"post\"\n\t\taction=\"\"\n\t\tautocomplete=\"off\"\n\t\t@keydown.esc.prevent=\"$emit('toggle-join-channel')\"\n\t\t@submit.prevent=\"onSubmit\"\n\t>\n\t\t<input\n\t\t\tv-model=\"inputChannel\"\n\t\t\tv-focus\n\t\t\ttype=\"text\"\n\t\t\tclass=\"input\"\n\t\t\tname=\"channel\"\n\t\t\tplaceholder=\"Channel\"\n\t\t\tpattern=\"[^\\s]+\"\n\t\t\tmaxlength=\"200\"\n\t\t\ttitle=\"The channel name may not contain spaces\"\n\t\t\trequired\n\t\t/>\n\t\t<input\n\t\t\tv-model=\"inputPassword\"\n\t\t\ttype=\"password\"\n\t\t\tclass=\"input\"\n\t\t\tname=\"key\"\n\t\t\tplaceholder=\"Password (optional)\"\n\t\t\tpattern=\"[^\\s]+\"\n\t\t\tmaxlength=\"200\"\n\t\t\ttitle=\"The channel password may not contain spaces\"\n\t\t\tautocomplete=\"new-password\"\n\t\t/>\n\t\t<button type=\"submit\" class=\"btn btn-small\">Join</button>\n\t</form>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType, ref} from \"vue\";\nimport {switchToChannel} from \"../js/router\";\nimport socket from \"../js/socket\";\nimport {useStore} from \"../js/store\";\nimport {ClientNetwork, ClientChan} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"JoinChannel\",\n\tdirectives: {\n\t\tfocus: {\n\t\t\tmounted: (el: HTMLFormElement) => el.focus(),\n\t\t},\n\t},\n\tprops: {\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: true},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: true},\n\t},\n\temits: [\"toggle-join-channel\"],\n\tsetup(props, {emit}) {\n\t\tconst store = useStore();\n\t\tconst inputChannel = ref(\"\");\n\t\tconst inputPassword = ref(\"\");\n\n\t\tconst onSubmit = () => {\n\t\t\tconst existingChannel = store.getters.findChannelOnCurrentNetwork(inputChannel.value);\n\n\t\t\tif (existingChannel) {\n\t\t\t\tswitchToChannel(existingChannel);\n\t\t\t} else {\n\t\t\t\tconst chanTypes = props.network.serverOptions.CHANTYPES;\n\t\t\t\tlet channel = inputChannel.value;\n\n\t\t\t\tif (chanTypes && chanTypes.length > 0 && !chanTypes.includes(channel[0])) {\n\t\t\t\t\tchannel = chanTypes[0] + channel;\n\t\t\t\t}\n\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttext: `/join ${channel} ${inputPassword.value}`,\n\t\t\t\t\ttarget: props.channel.id,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinputChannel.value = \"\";\n\t\t\tinputPassword.value = \"\";\n\t\t\temit(\"toggle-join-channel\");\n\t\t};\n\n\t\treturn {\n\t\t\tinputChannel,\n\t\t\tinputPassword,\n\t\t\tonSubmit,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./JoinChannel.vue?vue&type=template&id=310e4234&ts=true\"\nimport script from \"./JoinChannel.vue?vue&type=script&lang=ts\"\nexport * from \"./JoinChannel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./NetworkList.vue?vue&type=template&id=bbdaacae&ts=true\"\nimport script from \"./NetworkList.vue?vue&type=script&lang=ts\"\nexport * from \"./NetworkList.vue?vue&type=script&lang=ts\"\n\nimport \"./NetworkList.vue?vue&type=style&index=0&id=bbdaacae&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Sidebar.vue?vue&type=template&id=f5fb6afa&ts=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div\n\t\tid=\"image-viewer\"\n\t\tref=\"viewer\"\n\t\t:class=\"{opened: link !== null}\"\n\t\t@wheel=\"onMouseWheel\"\n\t\t@touchstart.passive=\"onTouchStart\"\n\t\t@click=\"onClick\"\n\t>\n\t\t<template v-if=\"link !== null\">\n\t\t\t<button class=\"close-btn\" aria-label=\"Close\"></button>\n\n\t\t\t<button\n\t\t\t\tv-if=\"previousImage\"\n\t\t\t\tclass=\"previous-image-btn\"\n\t\t\t\taria-label=\"Previous image\"\n\t\t\t\t@click.stop=\"previous\"\n\t\t\t></button>\n\t\t\t<button\n\t\t\t\tv-if=\"nextImage\"\n\t\t\t\tclass=\"next-image-btn\"\n\t\t\t\taria-label=\"Next image\"\n\t\t\t\t@click.stop=\"next\"\n\t\t\t></button>\n\n\t\t\t<a class=\"open-btn\" :href=\"link.link\" target=\"_blank\" rel=\"noopener\"></a>\n\n\t\t\t<img\n\t\t\t\tref=\"image\"\n\t\t\t\t:src=\"link.thumb\"\n\t\t\t\talt=\"\"\n\t\t\t\t:style=\"computeImageStyles\"\n\t\t\t\t@load=\"onImageLoad\"\n\t\t\t\t@mousedown=\"onImageMouseDown\"\n\t\t\t\t@touchstart.passive=\"onImageTouchStart\"\n\t\t\t/>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport Mousetrap from \"mousetrap\";\nimport {computed, defineComponent, ref, watch} from \"vue\";\nimport {onBeforeRouteLeave, onBeforeRouteUpdate} from \"vue-router\";\nimport eventbus from \"../js/eventbus\";\nimport {ClientChan, ClientMessage, ClientLinkPreview} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"ImageViewer\",\n\tsetup() {\n\t\tconst viewer = ref<HTMLDivElement>();\n\t\tconst image = ref<HTMLImageElement>();\n\n\t\tconst link = ref<ClientLinkPreview | null>(null);\n\t\tconst previousImage = ref<ClientLinkPreview | null>();\n\t\tconst nextImage = ref<ClientLinkPreview | null>();\n\t\tconst channel = ref<ClientChan | null>();\n\n\t\tconst position = ref<{\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t}>({\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst transform = ref<{\n\t\t\tscale: number;\n\t\t\tx: number;\n\t\t\ty: number;\n\t\t}>({\n\t\t\tscale: 1,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst computeImageStyles = computed(() => {\n\t\t\t// Sub pixels may cause the image to blur in certain browsers\n\t\t\t// round it down to prevent that\n\t\t\tconst transformX = Math.floor(transform.value.x);\n\t\t\tconst transformY = Math.floor(transform.value.y);\n\n\t\t\treturn {\n\t\t\t\tleft: `${position.value.x}px`,\n\t\t\t\ttop: `${position.value.y}px`,\n\t\t\t\ttransform: `translate3d(${transformX}px, ${transformY}px, 0) scale3d(${transform.value.scale}, ${transform.value.scale}, 1)`,\n\t\t\t};\n\t\t});\n\n\t\tconst closeViewer = () => {\n\t\t\tif (link.value === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tchannel.value = null;\n\t\t\tpreviousImage.value = null;\n\t\t\tnextImage.value = null;\n\t\t\tlink.value = null;\n\t\t};\n\n\t\tconst setPrevNextImages = () => {\n\t\t\tif (!channel.value || !link.value) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst links = channel.value.messages\n\t\t\t\t.map((msg) => msg.previews)\n\t\t\t\t.flat()\n\t\t\t\t.filter((preview) => preview.thumb);\n\n\t\t\tconst currentIndex = links.indexOf(link.value);\n\n\t\t\tpreviousImage.value = links[currentIndex - 1] || null;\n\t\t\tnextImage.value = links[currentIndex + 1] || null;\n\t\t};\n\n\t\tconst previous = () => {\n\t\t\tif (previousImage.value) {\n\t\t\t\tlink.value = previousImage.value;\n\t\t\t}\n\t\t};\n\n\t\tconst next = () => {\n\t\t\tif (nextImage.value) {\n\t\t\t\tlink.value = nextImage.value;\n\t\t\t}\n\t\t};\n\n\t\tconst prepareImage = () => {\n\t\t\tconst viewerEl = viewer.value;\n\t\t\tconst imageEl = image.value;\n\n\t\t\tif (!viewerEl || !imageEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst width = viewerEl.offsetWidth;\n\t\t\tconst height = viewerEl.offsetHeight;\n\t\t\tconst scale = Math.min(1, width / imageEl.width, height / imageEl.height);\n\n\t\t\tposition.value.x = Math.floor(-image.value!.naturalWidth / 2);\n\t\t\tposition.value.y = Math.floor(-image.value!.naturalHeight / 2);\n\t\t\ttransform.value.scale = Math.max(scale, 0.1);\n\t\t\ttransform.value.x = width / 2;\n\t\t\ttransform.value.y = height / 2;\n\t\t};\n\n\t\tconst onImageLoad = () => {\n\t\t\tprepareImage();\n\t\t};\n\n\t\tconst calculateZoomShift = (newScale: number, x: number, y: number, oldScale: number) => {\n\t\t\tif (!image.value || !viewer.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst imageWidth = image.value.width;\n\t\t\tconst centerX = viewer.value.offsetWidth / 2;\n\t\t\tconst centerY = viewer.value.offsetHeight / 2;\n\n\t\t\treturn {\n\t\t\t\tx:\n\t\t\t\t\tcenterX -\n\t\t\t\t\t((centerX - (y - (imageWidth * x) / 2)) / x) * newScale +\n\t\t\t\t\t(imageWidth * newScale) / 2,\n\t\t\t\ty:\n\t\t\t\t\tcenterY -\n\t\t\t\t\t((centerY - (oldScale - (imageWidth * x) / 2)) / x) * newScale +\n\t\t\t\t\t(imageWidth * newScale) / 2,\n\t\t\t};\n\t\t};\n\n\t\tconst correctPosition = () => {\n\t\t\tconst imageEl = image.value;\n\t\t\tconst viewerEl = viewer.value;\n\n\t\t\tif (!imageEl || !viewerEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst widthScaled = imageEl.width * transform.value.scale;\n\t\t\tconst heightScaled = imageEl.height * transform.value.scale;\n\t\t\tconst containerWidth = viewerEl.offsetWidth;\n\t\t\tconst containerHeight = viewerEl.offsetHeight;\n\n\t\t\tif (widthScaled < containerWidth) {\n\t\t\t\ttransform.value.x = containerWidth / 2;\n\t\t\t} else if (transform.value.x - widthScaled / 2 > 0) {\n\t\t\t\ttransform.value.x = widthScaled / 2;\n\t\t\t} else if (transform.value.x + widthScaled / 2 < containerWidth) {\n\t\t\t\ttransform.value.x = containerWidth - widthScaled / 2;\n\t\t\t}\n\n\t\t\tif (heightScaled < containerHeight) {\n\t\t\t\ttransform.value.y = containerHeight / 2;\n\t\t\t} else if (transform.value.y - heightScaled / 2 > 0) {\n\t\t\t\ttransform.value.y = heightScaled / 2;\n\t\t\t} else if (transform.value.y + heightScaled / 2 < containerHeight) {\n\t\t\t\ttransform.value.y = containerHeight - heightScaled / 2;\n\t\t\t}\n\t\t};\n\n\t\t// Reduce multiple touch points into a single x/y/scale\n\t\tconst reduceTouches = (touches: TouchList) => {\n\t\t\tlet totalX = 0;\n\t\t\tlet totalY = 0;\n\t\t\tlet totalScale = 0;\n\n\t\t\tfor (let i = 0; i < touches.length; i++) {\n\t\t\t\tconst x = touches[i].clientX;\n\t\t\t\tconst y = touches[i].clientY;\n\n\t\t\t\ttotalX += x;\n\t\t\t\ttotalY += y;\n\n\t\t\t\tfor (let i2 = 0; i2 < touches.length; i2++) {\n\t\t\t\t\tif (i !== i2) {\n\t\t\t\t\t\tconst x2 = touches[i2].clientX;\n\t\t\t\t\t\tconst y2 = touches[i2].clientY;\n\t\t\t\t\t\ttotalScale += Math.sqrt((x - x2) * (x - x2) + (y - y2) * (y - y2));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (totalScale === 0) {\n\t\t\t\ttotalScale = 1;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tx: totalX / touches.length,\n\t\t\t\ty: totalY / touches.length,\n\t\t\t\tscale: totalScale / touches.length,\n\t\t\t};\n\t\t};\n\n\t\tconst onTouchStart = (e: TouchEvent) => {\n\t\t\t// prevent sidebar touchstart event, we don't want to interact with sidebar while in image viewer\n\t\t\te.stopImmediatePropagation();\n\t\t};\n\n\t\t// Touch image manipulation:\n\t\t// 1. Move around by dragging it with one finger\n\t\t// 2. Change image scale by using two fingers\n\t\tconst onImageTouchStart = (e: TouchEvent) => {\n\t\t\tconst img = image.value;\n\t\t\tlet touch = reduceTouches(e.touches);\n\t\t\tlet currentTouches = e.touches;\n\t\t\tlet touchEndFingers = 0;\n\n\t\t\tconst currentTransform = {\n\t\t\t\tx: touch.x,\n\t\t\t\ty: touch.y,\n\t\t\t\tscale: touch.scale,\n\t\t\t};\n\n\t\t\tconst startTransform = {\n\t\t\t\tx: transform.value.x,\n\t\t\t\ty: transform.value.y,\n\t\t\t\tscale: transform.value.scale,\n\t\t\t};\n\n\t\t\tconst touchMove = (moveEvent) => {\n\t\t\t\ttouch = reduceTouches(moveEvent.touches);\n\n\t\t\t\tif (currentTouches.length !== moveEvent.touches.length) {\n\t\t\t\t\tcurrentTransform.x = touch.x;\n\t\t\t\t\tcurrentTransform.y = touch.y;\n\t\t\t\t\tcurrentTransform.scale = touch.scale;\n\t\t\t\t\tstartTransform.x = transform.value.x;\n\t\t\t\t\tstartTransform.y = transform.value.y;\n\t\t\t\t\tstartTransform.scale = transform.value.scale;\n\t\t\t\t}\n\n\t\t\t\tconst deltaX = touch.x - currentTransform.x;\n\t\t\t\tconst deltaY = touch.y - currentTransform.y;\n\t\t\t\tconst deltaScale = touch.scale / currentTransform.scale;\n\t\t\t\tcurrentTouches = moveEvent.touches;\n\t\t\t\ttouchEndFingers = 0;\n\n\t\t\t\tconst newScale = Math.min(3, Math.max(0.1, startTransform.scale * deltaScale));\n\n\t\t\t\tconst fixedPosition = calculateZoomShift(\n\t\t\t\t\tnewScale,\n\t\t\t\t\tstartTransform.scale,\n\t\t\t\t\tstartTransform.x,\n\t\t\t\t\tstartTransform.y\n\t\t\t\t);\n\n\t\t\t\tif (!fixedPosition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttransform.value.x = fixedPosition.x + deltaX;\n\t\t\t\ttransform.value.y = fixedPosition.y + deltaY;\n\t\t\t\ttransform.value.scale = newScale;\n\t\t\t\tcorrectPosition();\n\t\t\t};\n\n\t\t\tconst touchEnd = (endEvent: TouchEvent) => {\n\t\t\t\tconst changedTouches = endEvent.changedTouches.length;\n\n\t\t\t\tif (currentTouches.length > changedTouches + touchEndFingers) {\n\t\t\t\t\ttouchEndFingers += changedTouches;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// todo: this is swipe to close, but it's not working very well due to unfinished delta calculation\n\t\t\t\t/* if (\n\t\t\t\t\ttransform.value.scale <= 1 &&\n\t\t\t\t\tendEvent.changedTouches[0].clientY - startTransform.y <= -70\n\t\t\t\t) {\n\t\t\t\t\treturn this.closeViewer();\n\t\t\t\t}*/\n\n\t\t\t\tcorrectPosition();\n\n\t\t\t\timg?.removeEventListener(\"touchmove\", touchMove);\n\t\t\t\timg?.removeEventListener(\"touchend\", touchEnd);\n\t\t\t};\n\n\t\t\timg?.addEventListener(\"touchmove\", touchMove, {passive: true});\n\t\t\timg?.addEventListener(\"touchend\", touchEnd, {passive: true});\n\t\t};\n\n\t\t// Image mouse manipulation:\n\t\t// 1. Mouse wheel scrolling will zoom in and out\n\t\t// 2. If image is zoomed in, simply dragging it will move it around\n\t\tconst onImageMouseDown = (e: MouseEvent) => {\n\t\t\t// todo: ignore if in touch event currently?\n\n\t\t\t// only left mouse\n\t\t\t// TODO: e.buttons?\n\t\t\tif (e.which !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst viewerEl = viewer.value;\n\t\t\tconst imageEl = image.value;\n\n\t\t\tif (!viewerEl || !imageEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst startX = e.clientX;\n\t\t\tconst startY = e.clientY;\n\t\t\tconst startTransformX = transform.value.x;\n\t\t\tconst startTransformY = transform.value.y;\n\t\t\tconst widthScaled = imageEl.width * transform.value.scale;\n\t\t\tconst heightScaled = imageEl.height * transform.value.scale;\n\t\t\tconst containerWidth = viewerEl.offsetWidth;\n\t\t\tconst containerHeight = viewerEl.offsetHeight;\n\t\t\tconst centerX = transform.value.x - widthScaled / 2;\n\t\t\tconst centerY = transform.value.y - heightScaled / 2;\n\t\t\tlet movedDistance = 0;\n\n\t\t\tconst mouseMove = (moveEvent: MouseEvent) => {\n\t\t\t\tmoveEvent.stopPropagation();\n\t\t\t\tmoveEvent.preventDefault();\n\n\t\t\t\tconst newX = moveEvent.clientX - startX;\n\t\t\t\tconst newY = moveEvent.clientY - startY;\n\n\t\t\t\tmovedDistance = Math.max(movedDistance, Math.abs(newX), Math.abs(newY));\n\n\t\t\t\tif (centerX < 0 || widthScaled + centerX > containerWidth) {\n\t\t\t\t\ttransform.value.x = startTransformX + newX;\n\t\t\t\t}\n\n\t\t\t\tif (centerY < 0 || heightScaled + centerY > containerHeight) {\n\t\t\t\t\ttransform.value.y = startTransformY + newY;\n\t\t\t\t}\n\n\t\t\t\tcorrectPosition();\n\t\t\t};\n\n\t\t\tconst mouseUp = (upEvent: MouseEvent) => {\n\t\t\t\tcorrectPosition();\n\n\t\t\t\tif (movedDistance < 2 && upEvent.button === 0) {\n\t\t\t\t\tcloseViewer();\n\t\t\t\t}\n\n\t\t\t\timage.value?.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\timage.value?.removeEventListener(\"mouseup\", mouseUp);\n\t\t\t};\n\n\t\t\timage.value?.addEventListener(\"mousemove\", mouseMove);\n\t\t\timage.value?.addEventListener(\"mouseup\", mouseUp);\n\t\t};\n\n\t\t// If image is zoomed in, holding ctrl while scrolling will move the image up and down\n\t\tconst onMouseWheel = (e: WheelEvent) => {\n\t\t\t// if image viewer is closing (css animation), you can still trigger mousewheel\n\t\t\t// TODO: Figure out a better fix for this\n\t\t\tif (link.value === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.preventDefault(); // TODO: Can this be passive?\n\n\t\t\tif (e.ctrlKey) {\n\t\t\t\ttransform.value.y += e.deltaY;\n\t\t\t} else {\n\t\t\t\tconst delta = e.deltaY > 0 ? 0.1 : -0.1;\n\t\t\t\tconst newScale = Math.min(3, Math.max(0.1, transform.value.scale + delta));\n\t\t\t\tconst fixedPosition = calculateZoomShift(\n\t\t\t\t\tnewScale,\n\t\t\t\t\ttransform.value.scale,\n\t\t\t\t\ttransform.value.x,\n\t\t\t\t\ttransform.value.y\n\t\t\t\t);\n\n\t\t\t\tif (!fixedPosition) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttransform.value.scale = newScale;\n\t\t\t\ttransform.value.x = fixedPosition.x;\n\t\t\t\ttransform.value.y = fixedPosition.y;\n\t\t\t}\n\n\t\t\tcorrectPosition();\n\t\t};\n\n\t\tconst onClick = (e: Event) => {\n\t\t\t// If click triggers on the image, ignore it\n\t\t\tif (e.target === image.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcloseViewer();\n\t\t};\n\n\t\twatch(link, (newLink, oldLink) => {\n\t\t\t// TODO: history.pushState\n\t\t\tif (newLink === null) {\n\t\t\t\teventbus.off(\"escapekey\", closeViewer);\n\t\t\t\teventbus.off(\"resize\", correctPosition);\n\t\t\t\tMousetrap.unbind(\"left\");\n\t\t\t\tMousetrap.unbind(\"right\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetPrevNextImages();\n\n\t\t\tif (!oldLink) {\n\t\t\t\teventbus.on(\"escapekey\", closeViewer);\n\t\t\t\teventbus.on(\"resize\", correctPosition);\n\t\t\t\tMousetrap.bind(\"left\", previous);\n\t\t\t\tMousetrap.bind(\"right\", next);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tlink,\n\t\t\tchannel,\n\t\t\timage,\n\t\t\ttransform,\n\t\t\tcloseViewer,\n\t\t\tnext,\n\t\t\tprevious,\n\t\t\tonImageLoad,\n\t\t\tonImageMouseDown,\n\t\t\tonMouseWheel,\n\t\t\tonClick,\n\t\t\tonTouchStart,\n\t\t\tpreviousImage,\n\t\t\tnextImage,\n\t\t\tonImageTouchStart,\n\t\t\tcomputeImageStyles,\n\t\t\tviewer,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ImageViewer.vue?vue&type=template&id=76497373&ts=true\"\nimport script from \"./ImageViewer.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageViewer.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import socket from \"../socket\";\nimport eventbus from \"../eventbus\";\nimport type {ClientChan, ClientNetwork, ClientUser} from \"../types\";\nimport {switchToChannel} from \"../router\";\nimport {TypedStore} from \"../store\";\nimport useCloseChannel from \"../hooks/use-close-channel\";\n\ntype BaseContextMenuItem = {\n\tlabel: string;\n\ttype: string;\n\tclass: string;\n};\n\ntype ContextMenuItemWithAction = BaseContextMenuItem & {\n\taction: () => void;\n};\n\ntype ContextMenuItemWithLink = BaseContextMenuItem & {\n\tlink?: string;\n};\n\ntype ContextMenuDividerItem = {\n\ttype: \"divider\";\n};\n\nexport type ContextMenuItem =\n\t| ContextMenuItemWithAction\n\t| ContextMenuItemWithLink\n\t| ContextMenuDividerItem;\n\nexport function generateChannelContextMenu(\n\tchannel: ClientChan,\n\tnetwork: ClientNetwork\n): ContextMenuItem[] {\n\tconst closeChannel = useCloseChannel(channel);\n\n\tconst typeMap = {\n\t\tlobby: \"network\",\n\t\tchannel: \"chan\",\n\t\tquery: \"query\",\n\t\tspecial: \"chan\",\n\t};\n\n\tconst closeMap = {\n\t\tlobby: \"Remove\",\n\t\tchannel: \"Leave\",\n\t\tquery: \"Close\",\n\t\tspecial: \"Close\",\n\t};\n\n\tlet items: ContextMenuItem[] = [\n\t\t{\n\t\t\tlabel: channel.name,\n\t\t\ttype: \"item\",\n\t\t\tclass: typeMap[channel.type],\n\t\t\tlink: `/chan-${channel.id}`,\n\t\t},\n\t\t{\n\t\t\ttype: \"divider\",\n\t\t},\n\t];\n\n\t// Add menu items for lobbies\n\tif (channel.type === \"lobby\") {\n\t\titems = [\n\t\t\t...items,\n\t\t\t{\n\t\t\t\tlabel: \"Edit this network\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"edit\",\n\t\t\t\tlink: `/edit-network/${network.uuid}`,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Join a channel\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"join\",\n\t\t\t\taction: () => (network.isJoinChannelShown = true),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"List all channels\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"list\",\n\t\t\t\taction: () =>\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/list\",\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"List ignored users\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"list\",\n\t\t\t\taction: () =>\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/ignorelist\",\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\tnetwork.status.connected\n\t\t\t\t? {\n\t\t\t\t\t\tlabel: \"Disconnect\",\n\t\t\t\t\t\ttype: \"item\",\n\t\t\t\t\t\tclass: \"disconnect\",\n\t\t\t\t\t\taction: () =>\n\t\t\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t\t\ttext: \"/disconnect\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t  }\n\t\t\t\t: {\n\t\t\t\t\t\tlabel: \"Connect\",\n\t\t\t\t\t\ttype: \"item\",\n\t\t\t\t\t\tclass: \"connect\",\n\t\t\t\t\t\taction: () =>\n\t\t\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t\t\ttext: \"/connect\",\n\t\t\t\t\t\t\t}),\n\t\t\t\t  },\n\t\t];\n\t}\n\n\t// Add menu items for channels\n\tif (channel.type === \"channel\") {\n\t\titems.push({\n\t\t\tlabel: \"Edit topic\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"edit\",\n\t\t\taction() {\n\t\t\t\tchannel.editTopic = true;\n\t\t\t\tswitchToChannel(channel);\n\t\t\t},\n\t\t});\n\t\titems.push({\n\t\t\tlabel: \"List banned users\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"list\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/banlist\",\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// Add menu items for queries\n\tif (channel.type === \"query\") {\n\t\titems.push(\n\t\t\t{\n\t\t\t\tlabel: \"User information\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-whois\",\n\t\t\t\taction() {\n\t\t\t\t\tswitchToChannel(channel);\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/whois \" + channel.name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: \"Ignore user\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-ignore\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/ignore \" + channel.name,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t}\n\n\tif (channel.type === \"channel\" || channel.type === \"query\") {\n\t\titems.push({\n\t\t\tlabel: \"Clear history\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"clear-history\",\n\t\t\taction() {\n\t\t\t\teventbus.emit(\n\t\t\t\t\t\"confirm-dialog\",\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: \"Clear history\",\n\t\t\t\t\t\ttext: `Are you sure you want to clear history for ${channel.name}? This cannot be undone.`,\n\t\t\t\t\t\tbutton: \"Clear history\",\n\t\t\t\t\t},\n\t\t\t\t\t(result) => {\n\t\t\t\t\t\tif (!result) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsocket.emit(\"history:clear\", {\n\t\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\tconst humanFriendlyChanTypeMap: Record<string, string> = {\n\t\tlobby: \"network\",\n\t\tchannel: \"channel\",\n\t\tquery: \"conversation\",\n\t};\n\n\t// We don't allow the muting of ChanType.SPECIAL channels\n\tconst mutableChanTypes = Object.keys(humanFriendlyChanTypeMap);\n\n\tif (mutableChanTypes.includes(channel.type)) {\n\t\tconst chanType = humanFriendlyChanTypeMap[channel.type];\n\n\t\titems.push({\n\t\t\tlabel: channel.muted ? `Unmute ${chanType}` : `Mute ${chanType}`,\n\t\t\ttype: \"item\",\n\t\t\tclass: \"mute\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"mute:change\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\tsetMutedTo: !channel.muted,\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// Add close menu item\n\titems.push({\n\t\tlabel: closeMap[channel.type],\n\t\ttype: \"item\",\n\t\tclass: \"close\",\n\t\taction() {\n\t\t\tcloseChannel();\n\t\t},\n\t});\n\n\treturn items;\n}\n\nexport function generateInlineChannelContextMenu(\n\tstore: TypedStore,\n\tchan: string,\n\tnetwork: ClientNetwork\n): ContextMenuItem[] {\n\tconst join = () => {\n\t\tconst channel = network.channels.find((c) => c.name === chan);\n\n\t\tif (channel) {\n\t\t\tswitchToChannel(channel);\n\t\t}\n\n\t\tif (store.state.activeChannel) {\n\t\t\tsocket.emit(\"input\", {\n\t\t\t\ttarget: store.state.activeChannel.channel.id,\n\t\t\t\ttext: \"/join \" + chan,\n\t\t\t});\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\"Unable to join channel: activeChannel is undefined\");\n\t\t}\n\t};\n\n\tconst channel = network.channels.find((c) => c.name === chan);\n\n\tif (channel) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: \"Go to channel\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"chan\",\n\t\t\t\tlink: `/chan-${channel.id}`,\n\t\t\t},\n\t\t];\n\t}\n\n\treturn [\n\t\t{\n\t\t\tlabel: \"Join channel\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"join\",\n\t\t\taction: join,\n\t\t},\n\t];\n}\n\nexport function generateUserContextMenu(\n\tstore: TypedStore,\n\tchannel: ClientChan,\n\tnetwork: ClientNetwork,\n\tuser: Pick<ClientUser, \"nick\" | \"modes\">\n): ContextMenuItem[] {\n\tconst currentChannelUser: ClientUser | Record<string, never> = channel\n\t\t? channel.users.find((u) => u.nick === network.nick) || {}\n\t\t: {};\n\n\tconst whois = () => {\n\t\tconst chan = network.channels.find((c) => c.name === user.nick);\n\n\t\tif (chan) {\n\t\t\tswitchToChannel(chan);\n\t\t}\n\n\t\tsocket.emit(\"input\", {\n\t\t\ttarget: channel.id,\n\t\t\ttext: \"/whois \" + user.nick,\n\t\t});\n\t};\n\n\tconst items: ContextMenuItem[] = [\n\t\t{\n\t\t\tlabel: user.nick,\n\t\t\ttype: \"item\",\n\t\t\tclass: \"user\",\n\t\t\taction: whois,\n\t\t},\n\t\t{\n\t\t\ttype: \"divider\",\n\t\t},\n\t\t{\n\t\t\tlabel: \"User information\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-whois\",\n\t\t\taction: whois,\n\t\t},\n\t\t{\n\t\t\tlabel: \"Ignore user\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-ignore\",\n\t\t\taction() {\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/ignore \" + user.nick,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tlabel: \"Direct messages\",\n\t\t\ttype: \"item\",\n\t\t\tclass: \"action-query\",\n\t\t\taction() {\n\t\t\t\tconst chan = store.getters.findChannelOnCurrentNetwork(user.nick);\n\n\t\t\t\tif (chan) {\n\t\t\t\t\tswitchToChannel(chan);\n\t\t\t\t}\n\n\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\ttext: \"/query \" + user.nick,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t];\n\n\t// Bail because we're in a query or we don't have a special mode.\n\tif (!currentChannelUser.modes || currentChannelUser.modes.length < 1) {\n\t\treturn items;\n\t}\n\n\t// Names of the standard modes we are able to change\n\tconst modeCharToName = {\n\t\t\"~\": \"owner\",\n\t\t\"&\": \"admin\",\n\t\t\"@\": \"operator\",\n\t\t\"%\": \"half-op\",\n\t\t\"+\": \"voice\",\n\t};\n\n\t// Labels for the mode changes.  For example .rev({mode: \"a\", symbol: \"&\"}) => 'Revoke admin (-a)'\n\tconst modeTextTemplate = {\n\t\trevoke(m: {symbol: string; mode: string}) {\n\t\t\tconst name = modeCharToName[m.symbol];\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst res = name ? `Revoke ${name} (-${m.mode})` : `Mode -${m.mode}`;\n\t\t\treturn res;\n\t\t},\n\t\tgive(m: {symbol: string; mode: string}) {\n\t\t\tconst name = modeCharToName[m.symbol];\n\n\t\t\tif (typeof name !== \"string\") {\n\t\t\t\treturn \"\";\n\t\t\t}\n\n\t\t\tconst res = name ? `Give ${name} (+${m.mode})` : `Mode +${m.mode}`;\n\t\t\treturn res;\n\t\t},\n\t};\n\n\tconst networkModeSymbols = network.serverOptions.PREFIX.symbols;\n\n\t/**\n\t * Determine whether the prefix of mode p1 has access to perform actions on p2.\n\t *\n\t * EXAMPLE:\n\t *    compare('@', '@') => true\n\t *    compare('&', '@') => true\n\t *    compare('+', '~') => false\n\t * @param {string} p1 The mode performing an action\n\t * @param {string} p2 The target mode\n\t *\n\t * @return {boolean} whether p1 can perform an action on p2\n\t */\n\tfunction compare(p1: string, p2: string): boolean {\n\t\t// The modes ~ and @ can perform actions on their own mode.  The others on modes below.\n\t\treturn \"~@\".indexOf(p1) > -1\n\t\t\t? networkModeSymbols.indexOf(p1) <= networkModeSymbols.indexOf(p2)\n\t\t\t: networkModeSymbols.indexOf(p1) < networkModeSymbols.indexOf(p2);\n\t}\n\n\tnetwork.serverOptions.PREFIX.prefix.forEach((mode) => {\n\t\tif (!compare(currentChannelUser.modes[0], mode.symbol)) {\n\t\t\t// Our highest mode is below the current mode.  Bail.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!user.modes.includes(mode.symbol)) {\n\t\t\t// The target doesn't already have this mode, therefore we can set it.\n\t\t\titems.push({\n\t\t\t\tlabel: modeTextTemplate.give(mode),\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-set-mode\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/mode +\" + mode.mode + \" \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\titems.push({\n\t\t\t\tlabel: modeTextTemplate.revoke(mode),\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-revoke-mode\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/mode -\" + mode.mode + \" \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n\n\t// Determine if we are half-op or op depending on the network modes so we can kick.\n\tif (!compare(networkModeSymbols.indexOf(\"%\") > -1 ? \"%\" : \"@\", currentChannelUser.modes[0])) {\n\t\t// Check if the target user has no mode or a mode lower than ours.\n\t\tif (user.modes.length === 0 || compare(currentChannelUser.modes[0], user.modes[0])) {\n\t\t\titems.push({\n\t\t\t\tlabel: \"Kick\",\n\t\t\t\ttype: \"item\",\n\t\t\t\tclass: \"action-kick\",\n\t\t\t\taction() {\n\t\t\t\t\tsocket.emit(\"input\", {\n\t\t\t\t\t\ttarget: channel.id,\n\t\t\t\t\t\ttext: \"/kick \" + user.nick,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\treturn items;\n}\n","<template>\n\t<div\n\t\tv-if=\"isOpen\"\n\t\tid=\"context-menu-container\"\n\t\t:class=\"{passthrough}\"\n\t\t@click=\"containerClick\"\n\t\t@contextmenu.prevent=\"containerClick\"\n\t\t@keydown.exact.up.prevent=\"navigateMenu(-1)\"\n\t\t@keydown.exact.down.prevent=\"navigateMenu(1)\"\n\t\t@keydown.exact.tab.prevent=\"navigateMenu(1)\"\n\t\t@keydown.shift.tab.prevent=\"navigateMenu(-1)\"\n\t>\n\t\t<ul\n\t\t\tid=\"context-menu\"\n\t\t\tref=\"contextMenu\"\n\t\t\trole=\"menu\"\n\t\t\t:style=\"{\n\t\t\t\ttop: style.top + 'px',\n\t\t\t\tleft: style.left + 'px',\n\t\t\t}\"\n\t\t\ttabindex=\"-1\"\n\t\t\t@mouseleave=\"activeItem = -1\"\n\t\t\t@keydown.enter.prevent=\"clickActiveItem\"\n\t\t>\n\t\t\t<!-- TODO: type -->\n\t\t\t<template v-for=\"(item, id) of (items as any)\" :key=\"item.name\">\n\t\t\t\t<li\n\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t'context-menu-' + item.type,\n\t\t\t\t\t\titem.class ? 'context-menu-' + item.class : null,\n\t\t\t\t\t\t{active: id === activeItem},\n\t\t\t\t\t]\"\n\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t@mouseenter=\"hoverItem(id)\"\n\t\t\t\t\t@click=\"clickItem(item)\"\n\t\t\t\t>\n\t\t\t\t\t{{ item.label }}\n\t\t\t\t</li>\n\t\t\t</template>\n\t\t</ul>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport {\n\tgenerateUserContextMenu,\n\tgenerateChannelContextMenu,\n\tgenerateInlineChannelContextMenu,\n\tContextMenuItem,\n} from \"../js/helpers/contextMenu\";\nimport eventbus from \"../js/eventbus\";\nimport {defineComponent, nextTick, onMounted, onUnmounted, PropType, ref} from \"vue\";\nimport {ClientChan, ClientMessage, ClientNetwork, ClientUser} from \"../js/types\";\nimport {useStore} from \"../js/store\";\nimport {useRouter} from \"vue-router\";\n\nexport default defineComponent({\n\tname: \"ContextMenu\",\n\tprops: {\n\t\tmessage: {\n\t\t\trequired: false,\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t},\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst router = useRouter();\n\n\t\tconst isOpen = ref(false);\n\t\tconst passthrough = ref(false);\n\n\t\tconst contextMenu = ref<HTMLUListElement | null>();\n\t\tconst previousActiveElement = ref<HTMLElement | null>();\n\t\tconst items = ref<ContextMenuItem[]>([]);\n\t\tconst activeItem = ref(-1);\n\t\tconst style = ref({\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t});\n\n\t\tconst close = () => {\n\t\t\tif (!isOpen.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisOpen.value = false;\n\t\t\titems.value = [];\n\n\t\t\tif (previousActiveElement.value) {\n\t\t\t\tpreviousActiveElement.value.focus();\n\t\t\t\tpreviousActiveElement.value = null;\n\t\t\t}\n\t\t};\n\n\t\tconst enablePointerEvents = () => {\n\t\t\tpassthrough.value = false;\n\t\t\tdocument.body.removeEventListener(\"pointerup\", enablePointerEvents);\n\t\t};\n\n\t\tconst containerClick = (event: MouseEvent) => {\n\t\t\tif (event.currentTarget === event.target) {\n\t\t\t\tclose();\n\t\t\t}\n\t\t};\n\n\t\tconst positionContextMenu = (event: MouseEvent) => {\n\t\t\tconst element = event.target as HTMLElement;\n\n\t\t\tif (!contextMenu.value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuWidth = contextMenu.value?.offsetWidth;\n\t\t\tconst menuHeight = contextMenu.value?.offsetHeight;\n\n\t\t\tif (element && element.classList.contains(\"menu\")) {\n\t\t\t\treturn {\n\t\t\t\t\tleft: element.getBoundingClientRect().left - (menuWidth - element.offsetWidth),\n\t\t\t\t\ttop: element.getBoundingClientRect().top + element.offsetHeight,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst offset = {left: event.pageX, top: event.pageY};\n\n\t\t\tif (window.innerWidth - offset.left < menuWidth) {\n\t\t\t\toffset.left = window.innerWidth - menuWidth;\n\t\t\t}\n\n\t\t\tif (window.innerHeight - offset.top < menuHeight) {\n\t\t\t\toffset.top = window.innerHeight - menuHeight;\n\t\t\t}\n\n\t\t\treturn offset;\n\t\t};\n\n\t\tconst hoverItem = (id: number) => {\n\t\t\tactiveItem.value = id;\n\t\t};\n\n\t\tconst clickItem = (item: ContextMenuItem) => {\n\t\t\tclose();\n\n\t\t\tif (\"action\" in item && item.action) {\n\t\t\t\titem.action();\n\t\t\t} else if (\"link\" in item && item.link) {\n\t\t\t\trouter.push(item.link).catch(() => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error(\"Failed to navigate to\", item.link);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst clickActiveItem = () => {\n\t\t\tif (items.value[activeItem.value]) {\n\t\t\t\tclickItem(items.value[activeItem.value]);\n\t\t\t}\n\t\t};\n\n\t\tconst open = (event: MouseEvent, newItems: ContextMenuItem[]) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tpreviousActiveElement.value = document.activeElement as HTMLElement;\n\t\t\titems.value = newItems;\n\t\t\tactiveItem.value = 0;\n\t\t\tisOpen.value = true;\n\n\t\t\t// Position the menu and set the focus on the first item after it's size has updated\n\t\t\tnextTick(() => {\n\t\t\t\tconst pos = positionContextMenu(event);\n\n\t\t\t\tif (!pos) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstyle.value.left = pos.left;\n\t\t\t\tstyle.value.top = pos.top;\n\t\t\t\tcontextMenu.value?.focus();\n\t\t\t}).catch((e) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(e);\n\t\t\t});\n\t\t};\n\n\t\tconst openChannelContextMenu = (data: {\n\t\t\tevent: MouseEvent;\n\t\t\tchannel: ClientChan;\n\t\t\tnetwork: ClientNetwork;\n\t\t}) => {\n\t\t\tif (data.event.type === \"contextmenu\") {\n\t\t\t\t// Pass through all pointer events to allow the network list's\n\t\t\t\t// dragging events to continue triggering.\n\t\t\t\tpassthrough.value = true;\n\t\t\t\tdocument.body.addEventListener(\"pointerup\", enablePointerEvents, {\n\t\t\t\t\tpassive: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst newItems = generateChannelContextMenu(data.channel, data.network);\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst openInlineChannelContextMenu = (data: {channel: string; event: MouseEvent}) => {\n\t\t\tconst {network} = store.state.activeChannel;\n\t\t\tconst newItems = generateInlineChannelContextMenu(store, data.channel, network);\n\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst openUserContextMenu = (data: {\n\t\t\tuser: Pick<ClientUser, \"nick\" | \"modes\">;\n\t\t\tevent: MouseEvent;\n\t\t}) => {\n\t\t\tconst {network, channel} = store.state.activeChannel;\n\n\t\t\tconst newItems = generateUserContextMenu(\n\t\t\t\tstore,\n\t\t\t\tchannel,\n\t\t\t\tnetwork,\n\t\t\t\tchannel.users.find((u) => u.nick === data.user.nick) || {\n\t\t\t\t\tnick: data.user.nick,\n\t\t\t\t\tmodes: [],\n\t\t\t\t}\n\t\t\t);\n\t\t\topen(data.event, newItems);\n\t\t};\n\n\t\tconst navigateMenu = (direction: number) => {\n\t\t\tlet currentIndex = activeItem.value;\n\n\t\t\tcurrentIndex += direction;\n\n\t\t\tconst nextItem = items.value[currentIndex];\n\n\t\t\t// If the next item we would select is a divider, skip over it\n\t\t\tif (nextItem && \"type\" in nextItem && nextItem.type === \"divider\") {\n\t\t\t\tcurrentIndex += direction;\n\t\t\t}\n\n\t\t\tif (currentIndex < 0) {\n\t\t\t\tcurrentIndex += items.value.length;\n\t\t\t}\n\n\t\t\tif (currentIndex > items.value.length - 1) {\n\t\t\t\tcurrentIndex -= items.value.length;\n\t\t\t}\n\n\t\t\tactiveItem.value = currentIndex;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", close);\n\t\t\teventbus.on(\"contextmenu:cancel\", close);\n\t\t\teventbus.on(\"contextmenu:user\", openUserContextMenu);\n\t\t\teventbus.on(\"contextmenu:channel\", openChannelContextMenu);\n\t\t\teventbus.on(\"contextmenu:inline-channel\", openInlineChannelContextMenu);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", close);\n\t\t\teventbus.off(\"contextmenu:cancel\", close);\n\t\t\teventbus.off(\"contextmenu:user\", openUserContextMenu);\n\t\t\teventbus.off(\"contextmenu:channel\", openChannelContextMenu);\n\t\t\teventbus.off(\"contextmenu:inline-channel\", openInlineChannelContextMenu);\n\n\t\t\tclose();\n\t\t});\n\n\t\treturn {\n\t\t\tisOpen,\n\t\t\titems,\n\t\t\tactiveItem,\n\t\t\tstyle,\n\t\t\tcontextMenu,\n\t\t\tpassthrough,\n\t\t\tclose,\n\t\t\tcontainerClick,\n\t\t\tnavigateMenu,\n\t\t\thoverItem,\n\t\t\tclickItem,\n\t\t\tclickActiveItem,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ContextMenu.vue?vue&type=template&id=7e7c47de&ts=true\"\nimport script from \"./ContextMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./ContextMenu.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div id=\"confirm-dialog-overlay\" :class=\"{opened: !!data}\">\n\t\t<div v-if=\"data !== null\" id=\"confirm-dialog\">\n\t\t\t<div class=\"confirm-text\">\n\t\t\t\t<div class=\"confirm-text-title\">{{ data?.title }}</div>\n\t\t\t\t<p>{{ data?.text }}</p>\n\t\t\t</div>\n\t\t\t<div class=\"confirm-buttons\">\n\t\t\t\t<button class=\"btn btn-cancel\" @click=\"close(false)\">Cancel</button>\n\t\t\t\t<button class=\"btn btn-danger\" @click=\"close(true)\">{{ data?.button }}</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n#confirm-dialog {\n\tbackground: var(--body-bg-color);\n\tcolor: #fff;\n\tmargin: 10px;\n\tborder-radius: 5px;\n\tmax-width: 500px;\n}\n\n#confirm-dialog .confirm-text {\n\tpadding: 15px;\n\tuser-select: text;\n}\n\n#confirm-dialog .confirm-text-title {\n\tfont-size: 20px;\n\tfont-weight: 700;\n\tmargin-bottom: 10px;\n}\n\n#confirm-dialog .confirm-buttons {\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\tpadding: 15px;\n\tbackground: rgba(0, 0, 0, 0.3);\n}\n\n#confirm-dialog .confirm-buttons .btn {\n\tmargin-bottom: 0;\n\tmargin-left: 10px;\n}\n\n#confirm-dialog .confirm-buttons .btn-cancel {\n\tborder-color: transparent;\n}\n</style>\n\n<script lang=\"ts\">\nimport eventbus from \"../js/eventbus\";\nimport {defineComponent, onMounted, onUnmounted, ref} from \"vue\";\n\ntype ConfirmDialogData = {\n\ttitle: string;\n\ttext: string;\n\tbutton: string;\n};\n\ntype ConfirmDialogCallback = {\n\t(confirmed: boolean): void;\n};\n\nexport default defineComponent({\n\tname: \"ConfirmDialog\",\n\tsetup() {\n\t\tconst data = ref<ConfirmDialogData>();\n\t\tconst callback = ref<ConfirmDialogCallback>();\n\n\t\tconst open = (incoming: ConfirmDialogData, cb: ConfirmDialogCallback) => {\n\t\t\tdata.value = incoming;\n\t\t\tcallback.value = cb;\n\t\t};\n\n\t\tconst close = (result: boolean) => {\n\t\t\tdata.value = undefined;\n\n\t\t\tif (callback.value) {\n\t\t\t\tcallback.value(!!result);\n\t\t\t}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"escapekey\", close);\n\t\t\teventbus.on(\"confirm-dialog\", open);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"escapekey\", close);\n\t\t\teventbus.off(\"confirm-dialog\", open);\n\t\t});\n\n\t\treturn {\n\t\t\tdata,\n\t\t\tclose,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./ConfirmDialog.vue?vue&type=template&id=8ac89b86&ts=true\"\nimport script from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ConfirmDialog.vue?vue&type=style&index=0&id=8ac89b86&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div\n\t\tv-if=\"isOpen\"\n\t\tid=\"mentions-popup-container\"\n\t\t@click=\"containerClick\"\n\t\t@contextmenu=\"containerClick\"\n\t>\n\t\t<div class=\"mentions-popup\">\n\t\t\t<div class=\"mentions-popup-title\">\n\t\t\t\tRecent mentions\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"resolvedMessages.length\"\n\t\t\t\t\tclass=\"btn dismiss-all-mentions\"\n\t\t\t\t\t@click=\"dismissAllMentions()\"\n\t\t\t\t>\n\t\t\t\t\tDismiss all\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<template v-if=\"resolvedMessages.length === 0\">\n\t\t\t\t<p v-if=\"isLoading\">Loading</p>\n\t\t\t\t<p v-else>You have no recent mentions.</p>\n\t\t\t</template>\n\t\t\t<template v-for=\"message in resolvedMessages\" v-else :key=\"message.msgId\">\n\t\t\t\t<div :class=\"['msg', message.type]\">\n\t\t\t\t\t<div class=\"mentions-info\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class=\"from\">\n\t\t\t\t\t\t\t\t<Username :user=\"(message.from as any)\" />\n\t\t\t\t\t\t\t\t<template v-if=\"message.channel\">\n\t\t\t\t\t\t\t\t\tin {{ message.channel.channel.name }} on\n\t\t\t\t\t\t\t\t\t{{ message.channel.network.name }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else> in unknown channel </template> </span\n\t\t\t\t\t\t\t>{{ ` ` }}\n\t\t\t\t\t\t\t<span :title=\"message.localetime\" class=\"time\">\n\t\t\t\t\t\t\t\t{{ messageTime(message.time.toString()) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"close-tooltip tooltipped tooltipped-w\"\n\t\t\t\t\t\t\t\taria-label=\"Dismiss this mention\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"msg-dismiss\"\n\t\t\t\t\t\t\t\t\taria-label=\"Dismiss this mention\"\n\t\t\t\t\t\t\t\t\t@click=\"dismissMention(message)\"\n\t\t\t\t\t\t\t\t></button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"content\" dir=\"auto\">\n\t\t\t\t\t\t<ParsedMessage :message=\"(message as any)\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n\n<style>\n#mentions-popup-container {\n\tz-index: 8;\n}\n\n.mentions-popup {\n\tbackground-color: var(--window-bg-color);\n\tposition: absolute;\n\twidth: 400px;\n\tright: 80px;\n\ttop: 55px;\n\tmax-height: 400px;\n\toverflow-y: auto;\n\tz-index: 2;\n\tpadding: 10px;\n}\n\n.mentions-popup > .mentions-popup-title {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tmargin-bottom: 10px;\n\tfont-size: 20px;\n}\n\n.mentions-popup .mentions-info {\n\tdisplay: flex;\n\tjustify-content: space-between;\n}\n\n.mentions-popup .msg {\n\tmargin-bottom: 15px;\n\tuser-select: text;\n}\n\n.mentions-popup .msg:last-child {\n\tmargin-bottom: 0;\n}\n\n.mentions-popup .msg .content {\n\tbackground-color: var(--highlight-bg-color);\n\tborder-radius: 5px;\n\tpadding: 6px;\n\tmargin-top: 2px;\n\tword-wrap: break-word;\n\tword-break: break-word; /* Webkit-specific */\n}\n\n.mentions-popup .msg-dismiss::before {\n\tfont-size: 20px;\n\tfont-weight: normal;\n\tdisplay: inline-block;\n\tline-height: 16px;\n\ttext-align: center;\n\tcontent: \"\";\n}\n\n.mentions-popup .msg-dismiss:hover {\n\tcolor: var(--link-color);\n}\n\n.mentions-popup .dismiss-all-mentions {\n\tmargin: 0;\n\tpadding: 4px 6px;\n}\n\n@media (min-height: 500px) {\n\t.mentions-popup {\n\t\tmax-height: 60vh;\n\t}\n}\n\n@media (max-width: 768px) {\n\t.mentions-popup {\n\t\tborder-radius: 0;\n\t\tborder: 0;\n\t\tbox-shadow: none;\n\t\twidth: 100%;\n\t\tmax-height: none;\n\t\tright: 0;\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\ttop: 45px; /* header height */\n\t}\n}\n</style>\n\n<script lang=\"ts\">\nimport Username from \"./Username.vue\";\nimport ParsedMessage from \"./ParsedMessage.vue\";\nimport socket from \"../js/socket\";\nimport eventbus from \"../js/eventbus\";\nimport localetime from \"../js/helpers/localetime\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\nimport {computed, watch, defineComponent, ref, onMounted, onUnmounted} from \"vue\";\nimport {useStore} from \"../js/store\";\nimport {ClientMention} from \"../js/types\";\n\ndayjs.extend(relativeTime);\n\nexport default defineComponent({\n\tname: \"Mentions\",\n\tcomponents: {\n\t\tUsername,\n\t\tParsedMessage,\n\t},\n\tsetup() {\n\t\tconst store = useStore();\n\t\tconst isOpen = ref(false);\n\t\tconst isLoading = ref(false);\n\t\tconst resolvedMessages = computed(() => {\n\t\t\tconst messages = store.state.mentions.slice().reverse();\n\n\t\t\tfor (const message of messages) {\n\t\t\t\tmessage.localetime = localetime(message.time);\n\t\t\t\tmessage.channel = store.getters.findChannel(message.chanId);\n\t\t\t}\n\n\t\t\treturn messages.filter((message) => !message.channel?.channel.muted);\n\t\t});\n\n\t\twatch(\n\t\t\t() => store.state.mentions,\n\t\t\t() => {\n\t\t\t\tisLoading.value = false;\n\t\t\t}\n\t\t);\n\n\t\tconst messageTime = (time: string) => {\n\t\t\treturn dayjs(time).fromNow();\n\t\t};\n\n\t\tconst dismissMention = (message: ClientMention) => {\n\t\t\tstore.state.mentions.splice(\n\t\t\t\tstore.state.mentions.findIndex((m) => m.msgId === message.msgId),\n\t\t\t\t1\n\t\t\t);\n\n\t\t\tsocket.emit(\"mentions:dismiss\", message.msgId);\n\t\t};\n\n\t\tconst dismissAllMentions = () => {\n\t\t\tstore.state.mentions = [];\n\t\t\tsocket.emit(\"mentions:dismiss_all\");\n\t\t};\n\n\t\tconst containerClick = (event: Event) => {\n\t\t\tif (event.currentTarget === event.target) {\n\t\t\t\tisOpen.value = false;\n\t\t\t}\n\t\t};\n\n\t\tconst togglePopup = () => {\n\t\t\tisOpen.value = !isOpen.value;\n\n\t\t\tif (isOpen.value) {\n\t\t\t\tisLoading.value = true;\n\t\t\t\tsocket.emit(\"mentions:get\");\n\t\t\t}\n\t\t};\n\n\t\tconst closePopup = () => {\n\t\t\tisOpen.value = false;\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\teventbus.on(\"mentions:toggle\", togglePopup);\n\t\t\teventbus.on(\"escapekey\", closePopup);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\teventbus.off(\"mentions:toggle\", togglePopup);\n\t\t\teventbus.off(\"escapekey\", closePopup);\n\t\t});\n\n\t\treturn {\n\t\t\tisOpen,\n\t\t\tisLoading,\n\t\t\tresolvedMessages,\n\t\t\tmessageTime,\n\t\t\tdismissMention,\n\t\t\tdismissAllMentions,\n\t\t\tcontainerClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./Mentions.vue?vue&type=template&id=66358ddb&ts=true\"\nimport script from \"./Mentions.vue?vue&type=script&lang=ts\"\nexport * from \"./Mentions.vue?vue&type=script&lang=ts\"\n\nimport \"./Mentions.vue?vue&type=style&index=0&id=66358ddb&lang=css\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=6141956a&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage v-if=\"message.self\" :network=\"network\" :message=\"message\" />\n\t\t<template v-else>\n\t\t\t<Username :user=\"message.from\" />\n\t\t\tis away\n\t\t\t<i class=\"away-message\">(<ParsedMessage :network=\"network\" :message=\"message\" />)</i>\n\t\t</template>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeAway\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./away.vue?vue&type=template&id=37f2356a&ts=true\"\nimport script from \"./away.vue?vue&type=script&lang=ts\"\nexport * from \"./away.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage v-if=\"message.self\" :network=\"network\" :message=\"message\" />\n\t\t<template v-else>\n\t\t\t<Username :user=\"message.from\" />\n\t\t\tis back\n\t\t</template>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeBack\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./back.vue?vue&type=template&id=0565b0a1&ts=true\"\nimport script from \"./back.vue?vue&type=script&lang=ts\"\nexport * from \"./back.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\thas changed\n\t\t<span v-if=\"message.new_ident\"\n\t\t\t>username to <b>{{ message.new_ident }}</b></span\n\t\t>\n\t\t<span v-if=\"message.new_host\"\n\t\t\t>hostname to\n\t\t\t<i class=\"hostmask\"><ParsedMessage :network=\"network\" :text=\"message.new_host\" /></i\n\t\t></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeChangeHost\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./chghost.vue?vue&type=template&id=043797b3&ts=true\"\nimport script from \"./chghost.vue?vue&type=script&lang=ts\"\nexport * from \"./chghost.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t{{ `&#32;` }}<span class=\"ctcp-message\"><ParsedMessage :text=\"message.ctcpMessage\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeCTCP\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./ctcp.vue?vue&type=template&id=ab415664&ts=true\"\nimport script from \"./ctcp.vue?vue&type=script&lang=ts\"\nexport * from \"./ctcp.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tsent a <abbr title=\"Client-to-client protocol\">CTCP</abbr> request:\n\t\t<span class=\"ctcp-message\"><ParsedMessage :text=\"message.ctcpMessage\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeRequestCTCP\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./ctcp_request.vue?vue&type=template&id=c34ff826&ts=true\"\nimport script from \"./ctcp_request.vue?vue&type=script&lang=ts\"\nexport * from \"./ctcp_request.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<ParsedMessage :network=\"network\" :message=\"message\" :text=\"errorMessage\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageTypeError\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst errorMessage = computed(() => {\n\t\t\tswitch (props.message.error) {\n\t\t\t\tcase \"bad_channel_key\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Bad channel key.`;\n\t\t\t\tcase \"banned_from_channel\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - You have been banned from the channel.`;\n\t\t\t\tcase \"cannot_send_to_channel\":\n\t\t\t\t\treturn `Cannot send to channel ${props.message.channel}`;\n\t\t\t\tcase \"channel_is_full\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Channel is full.`;\n\t\t\t\tcase \"chanop_privs_needed\":\n\t\t\t\t\treturn \"Cannot perform action: You're not a channel operator.\";\n\t\t\t\tcase \"invite_only_channel\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - Channel is invite only.`;\n\t\t\t\tcase \"no_such_nick\":\n\t\t\t\t\treturn `User ${props.message.nick} hasn't logged in or does not exist.`;\n\t\t\t\tcase \"not_on_channel\":\n\t\t\t\t\treturn \"Cannot perform action: You're not on the channel.\";\n\t\t\t\tcase \"password_mismatch\":\n\t\t\t\t\treturn \"Password mismatch.\";\n\t\t\t\tcase \"too_many_channels\":\n\t\t\t\t\treturn `Cannot join ${props.message.channel} - You've already reached the maximum number of channels allowed.`;\n\t\t\t\tcase \"unknown_command\":\n\t\t\t\t\treturn `Unknown command: ${props.message.command}`;\n\t\t\t\tcase \"user_not_in_channel\":\n\t\t\t\t\treturn `User ${props.message.nick} is not on the channel.`;\n\t\t\t\tcase \"user_on_channel\":\n\t\t\t\t\treturn `User ${props.message.nick} is already on the channel.`;\n\t\t\t\tdefault:\n\t\t\t\t\tif (props.message.reason) {\n\t\t\t\t\t\treturn `${props.message.reason} (${props.message.error})`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn props.message.error;\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\terrorMessage,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./error.vue?vue&type=template&id=169919be&ts=true\"\nimport script from \"./error.vue?vue&type=script&lang=ts\"\nexport * from \"./error.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tinvited\n\t\t<span v-if=\"message.invitedYou\">you</span>\n\t\t<Username v-else :user=\"message.target\" />\n\t\tto <ParsedMessage :network=\"network\" :text=\"message.channel\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeInvite\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./invite.vue?vue&type=template&id=fd8bd00a&ts=true\"\nimport script from \"./invite.vue?vue&type=script&lang=ts\"\nexport * from \"./invite.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\">&#32;(<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i>\n\t\t<template v-if=\"message.account\">\n\t\t\t<i class=\"account\">&#32;[{{ message.account }}]</i>\n\t\t</template>\n\t\t<template v-if=\"message.gecos\">\n\t\t\t<i class=\"realname\">&#32;({{ message.gecos }})</i>\n\t\t</template>\n\t\thas joined the channel\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeJoin\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./join.vue?vue&type=template&id=c3614ec6&ts=true\"\nimport script from \"./join.vue?vue&type=script&lang=ts\"\nexport * from \"./join.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\thas kicked\n\t\t<Username :user=\"message.target\" />\n\t\t<i v-if=\"message.text\" class=\"part-reason\"\n\t\t\t>&#32;(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeKick\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./kick.vue?vue&type=template&id=7faf3aa9&ts=true\"\nimport script from \"./kick.vue?vue&type=script&lang=ts\"\nexport * from \"./kick.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tsets mode\n\t\t<ParsedMessage :message=\"message\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeMode\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode.vue?vue&type=template&id=3559c152&ts=true\"\nimport script from \"./mode.vue?vue&type=script&lang=ts\"\nexport * from \"./mode.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tChannel mode is <b>{{ message.text }}</b>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageChannelMode\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode_channel.vue?vue&type=template&id=3108ddfa&ts=true\"\nimport script from \"./mode_channel.vue?vue&type=script&lang=ts\"\nexport * from \"./mode_channel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tYour user mode is <b>{{ message.raw_modes }}</b>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageChannelMode\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./mode_user.vue?vue&type=template&id=0ca28805&ts=true\"\nimport script from \"./mode_user.vue?vue&type=script&lang=ts\"\nexport * from \"./mode_user.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<span class=\"text\"><ParsedMessage :network=\"network\" :text=\"cleanText\" /></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeMonospaceBlock\",\n\tcomponents: {\n\t\tParsedMessage,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst cleanText = computed(() => {\n\t\t\tlet lines = props.message.text.split(\"\\n\");\n\n\t\t\t// If all non-empty lines of the MOTD start with a hyphen (which is common\n\t\t\t// across MOTDs), remove all the leading hyphens.\n\t\t\tif (lines.every((line) => line === \"\" || line[0] === \"-\")) {\n\t\t\t\tlines = lines.map((line) => line.substring(2));\n\t\t\t}\n\n\t\t\t// Remove empty lines around the MOTD (but not within it)\n\t\t\treturn lines\n\t\t\t\t.map((line) => line.replace(/\\s*$/, \"\"))\n\t\t\t\t.join(\"\\n\")\n\t\t\t\t.replace(/^[\\r\\n]+|[\\r\\n]+$/g, \"\");\n\t\t});\n\n\t\treturn {\n\t\t\tcleanText,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./monospace_block.vue?vue&type=template&id=b335516c&ts=true\"\nimport script from \"./monospace_block.vue?vue&type=script&lang=ts\"\nexport * from \"./monospace_block.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\tis now known as\n\t\t<Username :user=\"{nick: message.new_nick, mode: message.from.mode}\" />\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeNick\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./nick.vue?vue&type=template&id=1bd5b554&ts=true\"\nimport script from \"./nick.vue?vue&type=script&lang=ts\"\nexport * from \"./nick.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\"> (<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i> has\n\t\tleft the channel\n\t\t<i v-if=\"message.text\" class=\"part-reason\"\n\t\t\t>(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypePart\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./part.vue?vue&type=template&id=5211b675&ts=true\"\nimport script from \"./part.vue?vue&type=script&lang=ts\"\nexport * from \"./part.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<Username :user=\"message.from\" />\n\t\t<i class=\"hostmask\"> (<ParsedMessage :network=\"network\" :text=\"message.hostmask\" />)</i> has\n\t\tquit\n\t\t<i v-if=\"message.text\" class=\"quit-reason\"\n\t\t\t>(<ParsedMessage :network=\"network\" :message=\"message\" />)</i\n\t\t>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientMessage, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeQuit\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./quit.vue?vue&type=template&id=4ba7f0ef&ts=true\"\nimport script from \"./quit.vue?vue&type=script&lang=ts\"\nexport * from \"./quit.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">{{ message.text }}</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\n\nexport default defineComponent({\n\tname: \"MessageTypeRaw\",\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./raw.vue?vue&type=template&id=5174cd16&ts=true\"\nimport script from \"./raw.vue?vue&type=script&lang=ts\"\nexport * from \"./raw.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<template v-if=\"message.from && message.from.nick\"\n\t\t\t><Username :user=\"message.from\" /> has changed the topic to:\n\t\t</template>\n\t\t<template v-else>The topic is: </template>\n\t\t<span v-if=\"message.text\" class=\"new-topic\"\n\t\t\t><ParsedMessage :network=\"network\" :message=\"message\"\n\t\t/></span>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport type {ClientMessage, ClientNetwork} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeTopic\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n});\n</script>\n","import { render } from \"./topic.vue?vue&type=template&id=fd1370ea&ts=true\"\nimport script from \"./topic.vue?vue&type=script&lang=ts\"\nexport * from \"./topic.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\tTopic set by\n\t\t<Username :user=\"message.from\" />\n\t\ton {{ messageTimeLocale }}\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport localetime from \"../../js/helpers/localetime\";\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeTopicSetBy\",\n\tcomponents: {\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\tconst messageTimeLocale = computed(() => localetime(props.message.when));\n\n\t\treturn {\n\t\t\tmessageTimeLocale,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./topic_set_by.vue?vue&type=template&id=1224346e&ts=true\"\nimport script from \"./topic_set_by.vue?vue&type=script&lang=ts\"\nexport * from \"./topic_set_by.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"content\">\n\t\t<p>\n\t\t\t<Username :user=\"{nick: message.whois.nick}\" />\n\t\t\t<span v-if=\"message.whois.whowas\"> is offline, last information:</span>\n\t\t</p>\n\n\t\t<dl class=\"whois\">\n\t\t\t<template v-if=\"message.whois.account\">\n\t\t\t\t<dt>Logged in as:</dt>\n\t\t\t\t<dd>{{ message.whois.account }}</dd>\n\t\t\t</template>\n\n\t\t\t<dt>Host mask:</dt>\n\t\t\t<dd class=\"hostmask\">\n\t\t\t\t<ParsedMessage\n\t\t\t\t\t:network=\"network\"\n\t\t\t\t\t:text=\"message.whois.ident + '@' + message.whois.hostname\"\n\t\t\t\t/>\n\t\t\t</dd>\n\n\t\t\t<template v-if=\"message.whois.actual_hostname\">\n\t\t\t\t<dt>Actual host:</dt>\n\t\t\t\t<dd class=\"hostmask\">\n\t\t\t\t\t<a\n\t\t\t\t\t\t:href=\"'https://ipinfo.io/' + message.whois.actual_ip\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t>{{ message.whois.actual_ip }}</a\n\t\t\t\t\t>\n\t\t\t\t\t<i v-if=\"message.whois.actual_hostname != message.whois.actual_ip\">\n\t\t\t\t\t\t({{ message.whois.actual_hostname }})</i\n\t\t\t\t\t>\n\t\t\t\t</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.real_name\">\n\t\t\t\t<dt>Real name:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.real_name\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.registered_nick\">\n\t\t\t\t<dt>Registered nick:</dt>\n\t\t\t\t<dd>{{ message.whois.registered_nick }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.channels\">\n\t\t\t\t<dt>Channels:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.channels\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.modes\">\n\t\t\t\t<dt>Modes:</dt>\n\t\t\t\t<dd>{{ message.whois.modes }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.special\">\n\t\t\t\t<template v-for=\"special in message.whois.special\" :key=\"special\">\n\t\t\t\t\t<dt>Special:</dt>\n\t\t\t\t\t<dd>{{ special }}</dd>\n\t\t\t\t</template>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.operator\">\n\t\t\t\t<dt>Operator:</dt>\n\t\t\t\t<dd>{{ message.whois.operator }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.helpop\">\n\t\t\t\t<dt>Available for help:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.bot\">\n\t\t\t\t<dt>Is a bot:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.away\">\n\t\t\t\t<dt>Away:</dt>\n\t\t\t\t<dd><ParsedMessage :network=\"network\" :text=\"message.whois.away\" /></dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.secure\">\n\t\t\t\t<dt>Secure connection:</dt>\n\t\t\t\t<dd>Yes</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.certfp\">\n\t\t\t\t<dt>Certificate:</dt>\n\t\t\t\t<dd>{{ message.whois.certfp }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.server\">\n\t\t\t\t<dt>Connected to:</dt>\n\t\t\t\t<dd>\n\t\t\t\t\t{{ message.whois.server }} <i>({{ message.whois.server_info }})</i>\n\t\t\t\t</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.logonTime\">\n\t\t\t\t<dt>Connected at:</dt>\n\t\t\t\t<dd>{{ localetime(message.whois.logonTime) }}</dd>\n\t\t\t</template>\n\n\t\t\t<template v-if=\"message.whois.idle\">\n\t\t\t\t<dt>Idle since:</dt>\n\t\t\t\t<dd>{{ localetime(message.whois.idleTime) }}</dd>\n\t\t\t</template>\n\t\t</dl>\n\t</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent, PropType} from \"vue\";\nimport localetime from \"../../js/helpers/localetime\";\nimport {ClientNetwork, ClientMessage} from \"../../js/types\";\nimport ParsedMessage from \"../ParsedMessage.vue\";\nimport Username from \"../Username.vue\";\n\nexport default defineComponent({\n\tname: \"MessageTypeWhois\",\n\tcomponents: {\n\t\tParsedMessage,\n\t\tUsername,\n\t},\n\tprops: {\n\t\tnetwork: {\n\t\t\ttype: Object as PropType<ClientNetwork>,\n\t\t\trequired: true,\n\t\t},\n\t\tmessage: {\n\t\t\ttype: Object as PropType<ClientMessage>,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tlocaletime: (date: Date) => localetime(date),\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./whois.vue?vue&type=template&id=2a3c4c38&ts=true\"\nimport script from \"./whois.vue?vue&type=script&lang=ts\"\nexport * from \"./whois.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Styling control codes\nconst BOLD = \"\\x02\";\nconst COLOR = \"\\x03\";\nconst HEX_COLOR = \"\\x04\";\nconst RESET = \"\\x0f\";\nconst REVERSE = \"\\x16\";\nconst ITALIC = \"\\x1d\";\nconst UNDERLINE = \"\\x1f\";\nconst STRIKETHROUGH = \"\\x1e\";\nconst MONOSPACE = \"\\x11\";\n\nexport type ParsedStyle = {\n\tbold?: boolean;\n\ttextColor?: string;\n\tbgColor?: string;\n\thexColor?: string;\n\thexBgColor?: string;\n\titalic?: boolean;\n\tunderline?: boolean;\n\tstrikethrough?: boolean;\n\tmonospace?: boolean;\n\ttext: string;\n\tstart: number;\n\tend: number;\n};\n\n// Color code matcher, with format `XX,YY` where both `XX` and `YY` are\n// integers, `XX` is the text color and `YY` is an optional background color.\nconst colorRx = /^(\\d{1,2})(?:,(\\d{1,2}))?/;\n\n// 6-char Hex color code matcher\nconst hexColorRx = /^([0-9a-f]{6})(?:,([0-9a-f]{6}))?/i;\n\n// Represents all other control codes that to be ignored/filtered from the text\n// This regex allows line feed character\nconst controlCodesRx = /[\\u0000-\\u0009\\u000B-\\u001F]/g;\n\n// Converts a given text into an array of objects, each of them representing a\n// similarly styled section of the text. Each object carries the `text`, style\n// information (`bold`, `textColor`, `bgcolor`, `italic`,\n// `underline`, `strikethrough`, `monospace`), and `start`/`end` cursors.\nfunction parseStyle(text: string) {\n\tconst result: ParsedStyle[] = [];\n\tlet start = 0;\n\tlet position = 0;\n\n\t// At any given time, these carry style information since last time a styling\n\t// control code was met.\n\tlet colorCodes,\n\t\tbold,\n\t\ttextColor,\n\t\tbgColor,\n\t\thexColor,\n\t\thexBgColor,\n\t\titalic,\n\t\tunderline,\n\t\tstrikethrough,\n\t\tmonospace;\n\n\tconst resetStyle = () => {\n\t\tbold = false;\n\t\ttextColor = undefined;\n\t\tbgColor = undefined;\n\t\thexColor = undefined;\n\t\thexBgColor = undefined;\n\t\titalic = false;\n\t\tunderline = false;\n\t\tstrikethrough = false;\n\t\tmonospace = false;\n\t};\n\n\tresetStyle();\n\n\t// When called, this \"closes\" the current fragment by adding an entry to the\n\t// `result` array using the styling information set last time a control code\n\t// was met.\n\tconst emitFragment = () => {\n\t\t// Uses the text fragment starting from the last control code position up to\n\t\t// the current position\n\t\tconst textPart = text.slice(start, position);\n\n\t\t// Filters out all non-style related control codes present in this text\n\t\tconst processedText = textPart.replace(controlCodesRx, \" \");\n\n\t\tif (processedText.length) {\n\t\t\t// Current fragment starts where the previous one ends, or at 0 if none\n\t\t\tconst fragmentStart = result.length ? result[result.length - 1].end : 0;\n\n\t\t\tresult.push({\n\t\t\t\tbold,\n\t\t\t\ttextColor,\n\t\t\t\tbgColor,\n\t\t\t\thexColor,\n\t\t\t\thexBgColor,\n\t\t\t\titalic,\n\t\t\t\tunderline,\n\t\t\t\tstrikethrough,\n\t\t\t\tmonospace,\n\t\t\t\ttext: processedText,\n\t\t\t\tstart: fragmentStart,\n\t\t\t\tend: fragmentStart + processedText.length,\n\t\t\t});\n\t\t}\n\n\t\t// Now that a fragment has been \"closed\", the next one will start after that\n\t\tstart = position + 1;\n\t};\n\n\t// This loop goes through each character of the given text one by one by\n\t// bumping the `position` cursor. Every time a new special \"styling\" character\n\t// is met, an object gets created (with `emitFragment()`)information on text\n\t// encountered since the previous styling character.\n\twhile (position < text.length) {\n\t\tswitch (text[position]) {\n\t\t\tcase RESET:\n\t\t\t\temitFragment();\n\t\t\t\tresetStyle();\n\t\t\t\tbreak;\n\n\t\t\t// Meeting a BOLD character means that the ongoing text is either going to\n\t\t\t// be in bold or that the previous one was in bold and the following one\n\t\t\t// must be reset.\n\t\t\t// This same behavior applies to COLOR, REVERSE, ITALIC, and UNDERLINE.\n\t\t\tcase BOLD:\n\t\t\t\temitFragment();\n\t\t\t\tbold = !bold;\n\t\t\t\tbreak;\n\n\t\t\tcase COLOR:\n\t\t\t\temitFragment();\n\n\t\t\t\t// Go one step further to find the corresponding color\n\t\t\t\tcolorCodes = text.slice(position + 1).match(colorRx);\n\n\t\t\t\tif (colorCodes) {\n\t\t\t\t\ttextColor = Number(colorCodes[1]);\n\n\t\t\t\t\tif (colorCodes[2]) {\n\t\t\t\t\t\tbgColor = Number(colorCodes[2]);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Color code length is > 1, so bump the current position cursor by as\n\t\t\t\t\t// much (and reset the start cursor for the current text block as well)\n\t\t\t\t\tposition += colorCodes[0].length;\n\t\t\t\t\tstart = position + 1;\n\t\t\t\t} else {\n\t\t\t\t\t// If no color codes were found, toggles back to no colors (like BOLD).\n\t\t\t\t\ttextColor = undefined;\n\t\t\t\t\tbgColor = undefined;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase HEX_COLOR:\n\t\t\t\temitFragment();\n\n\t\t\t\tcolorCodes = text.slice(position + 1).match(hexColorRx);\n\n\t\t\t\tif (colorCodes) {\n\t\t\t\t\thexColor = colorCodes[1].toUpperCase();\n\n\t\t\t\t\tif (colorCodes[2]) {\n\t\t\t\t\t\thexBgColor = colorCodes[2].toUpperCase();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Color code length is > 1, so bump the current position cursor by as\n\t\t\t\t\t// much (and reset the start cursor for the current text block as well)\n\t\t\t\t\tposition += colorCodes[0].length;\n\t\t\t\t\tstart = position + 1;\n\t\t\t\t} else {\n\t\t\t\t\t// If no color codes were found, toggles back to no colors (like BOLD).\n\t\t\t\t\thexColor = undefined;\n\t\t\t\t\thexBgColor = undefined;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase REVERSE: {\n\t\t\t\temitFragment();\n\t\t\t\tconst tmp = bgColor;\n\t\t\t\tbgColor = textColor;\n\t\t\t\ttextColor = tmp;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase ITALIC:\n\t\t\t\temitFragment();\n\t\t\t\titalic = !italic;\n\t\t\t\tbreak;\n\n\t\t\tcase UNDERLINE:\n\t\t\t\temitFragment();\n\t\t\t\tunderline = !underline;\n\t\t\t\tbreak;\n\n\t\t\tcase STRIKETHROUGH:\n\t\t\t\temitFragment();\n\t\t\t\tstrikethrough = !strikethrough;\n\t\t\t\tbreak;\n\n\t\t\tcase MONOSPACE:\n\t\t\t\temitFragment();\n\t\t\t\tmonospace = !monospace;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Evaluate the next character at the next iteration\n\t\tposition += 1;\n\t}\n\n\t// The entire text has been parsed, so we finalize the current text fragment.\n\temitFragment();\n\n\treturn result;\n}\n\nconst properties = [\n\t\"bold\",\n\t\"textColor\",\n\t\"bgColor\",\n\t\"hexColor\",\n\t\"hexBgColor\",\n\t\"italic\",\n\t\"underline\",\n\t\"strikethrough\",\n\t\"monospace\",\n];\n\nfunction prepare(text: string) {\n\treturn (\n\t\tparseStyle(text)\n\t\t\t// This optimizes fragments by combining them together when all their values\n\t\t\t// for the properties defined above are equal.\n\t\t\t.reduce((prev: ParsedStyle[], curr) => {\n\t\t\t\tif (prev.length) {\n\t\t\t\t\tconst lastEntry = prev[prev.length - 1];\n\n\t\t\t\t\tif (properties.every((key) => curr[key] === lastEntry[key])) {\n\t\t\t\t\t\tlastEntry.text += curr.text;\n\t\t\t\t\t\tlastEntry.end += curr.text.length;\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn prev.concat([curr]);\n\t\t\t}, [])\n\t);\n}\n\nexport default prepare;\n","// Escapes the RegExp special characters \"^\", \"$\", \"\", \".\", \"*\", \"+\", \"?\", \"(\",\n// \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in string.\n// See https://lodash.com/docs/#escapeRegExp\nimport escapeRegExp from \"lodash/escapeRegExp\";\nimport {Part} from \"./merge\";\n\nexport type ChannelPart = Part & {\n\tchannel: string;\n};\n\n// escapes a regex in a way that's compatible to shove it in\n// a regex char set (meaning it also escapes -)\nfunction escapeRegExpCharSet(raw: string): string {\n\tconst escaped: string = escapeRegExp(raw);\n\treturn escaped.replace(\"-\", \"\\\\-\");\n}\n\n// Given an array of channel prefixes (such as \"#\" and \"&\") and an array of user\n// modes (such as \"@\" and \"+\"), this function extracts channels and nicks from a\n// text.\n// It returns an array of objects for each channel found with their start index,\n// end index and channel name.\nfunction findChannels(text: string, channelPrefixes: string[], userModes: string[]) {\n\t// `userModePattern` is necessary to ignore user modes in /whois responses.\n\t// For example, a voiced user in #thelounge will have a /whois response of:\n\t// > foo is on the following channels: +#thelounge\n\t// We need to explicitly ignore user modes to parse such channels correctly.\n\tconst userModePattern = userModes.map(escapeRegExpCharSet).join(\"\");\n\tconst channelPrefixPattern = channelPrefixes.map(escapeRegExpCharSet).join(\"\");\n\tconst channelPattern = `(?:^|\\\\s)[${userModePattern}]*([${channelPrefixPattern}][^ \\u0007]+)`;\n\tconst channelRegExp = new RegExp(channelPattern, \"g\");\n\n\tconst result: ChannelPart[] = [];\n\tlet match: RegExpExecArray | null;\n\n\tdo {\n\t\t// With global (\"g\") regexes, calling `exec` multiple times will find\n\t\t// successive matches in the same string.\n\t\tmatch = channelRegExp.exec(text);\n\n\t\tif (match) {\n\t\t\tresult.push({\n\t\t\t\tstart: match.index + match[0].length - match[1].length,\n\t\t\t\tend: match.index + match[0].length,\n\t\t\t\tchannel: match[1],\n\t\t\t});\n\t\t}\n\t} while (match);\n\n\treturn result;\n}\n\nexport default findChannels;\n","import LinkifyIt, {Match} from \"linkify-it\";\nimport tlds from \"tlds\";\n\nexport type NoSchemaMatch = Match & {\n\tnoschema: boolean;\n};\n\nexport type LinkPart = {\n\tstart: number;\n\tend: number;\n\tlink: string;\n};\n\nLinkifyIt.prototype.normalize = function normalize(match: NoSchemaMatch) {\n\tmatch.noschema = false;\n\n\tif (!match.schema) {\n\t\tmatch.schema = \"http:\";\n\t\tmatch.url = \"http://\" + match.url;\n\t\tmatch.noschema = true;\n\t}\n\n\tif (match.schema === \"//\") {\n\t\tmatch.schema = \"http:\";\n\t\tmatch.url = \"http:\" + match.url;\n\t\tmatch.noschema = true;\n\t}\n\n\tif (match.schema === \"mailto:\" && !/^mailto:/i.test(match.url)) {\n\t\tmatch.url = \"mailto:\" + match.url;\n\t}\n};\n\nconst linkify = LinkifyIt().tlds(tlds).tlds(\"onion\", true);\n\n// Known schemes to detect in text\nconst commonSchemes = [\n\t\"sftp\",\n\t\"smb\",\n\t\"file\",\n\t\"irc\",\n\t\"ircs\",\n\t\"svn\",\n\t\"git\",\n\t\"steam\",\n\t\"mumble\",\n\t\"ts3server\",\n\t\"svn+ssh\",\n\t\"ssh\",\n\t\"gopher\",\n\t\"gemini\",\n];\n\nfor (const schema of commonSchemes) {\n\tlinkify.add(schema + \":\", \"http:\");\n}\n\nexport function findLinks(text: string) {\n\tconst matches = linkify.match(text) as NoSchemaMatch[];\n\n\tif (!matches) {\n\t\treturn [];\n\t}\n\n\treturn matches.map(makeLinkPart);\n}\n\nexport function findLinksWithSchema(text: string) {\n\tconst matches = linkify.match(text) as NoSchemaMatch[];\n\n\tif (!matches) {\n\t\treturn [];\n\t}\n\n\treturn matches.filter((url) => !url.noschema).map(makeLinkPart);\n}\n\nfunction makeLinkPart(url: NoSchemaMatch): LinkPart {\n\treturn {\n\t\tstart: url.index,\n\t\tend: url.lastIndex,\n\t\tlink: url.url,\n\t};\n}\n","import emojiRegExp from \"emoji-regex\";\nimport {Part} from \"./merge\";\n\nconst regExp = emojiRegExp();\n\nexport type EmojiPart = Part & {\n\temoji: string;\n};\n\nfunction findEmoji(text: string) {\n\tconst result: EmojiPart[] = [];\n\tlet match: RegExpExecArray | null;\n\n\twhile ((match = regExp.exec(text))) {\n\t\tresult.push({\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length,\n\t\t\temoji: match[0],\n\t\t});\n\t}\n\n\treturn result;\n}\n\nexport default findEmoji;\n","import {Part} from \"./merge\";\n\nconst nickRegExp = /([\\w[\\]\\\\`^{|}-]+)/g;\n\nexport type NamePart = Part & {\n\tnick: string;\n};\n\nfunction findNames(text: string, nicks: string[]): NamePart[] {\n\tconst result: NamePart[] = [];\n\n\t// Return early if we don't have any nicknames to find\n\tif (nicks.length === 0) {\n\t\treturn result;\n\t}\n\n\tlet match: RegExpExecArray | null;\n\n\twhile ((match = nickRegExp.exec(text))) {\n\t\tif (nicks.indexOf(match[1]) > -1) {\n\t\t\tresult.push({\n\t\t\t\tstart: match.index,\n\t\t\t\tend: match.index + match[1].length,\n\t\t\t\tnick: match[1],\n\t\t\t});\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport default findNames;\n","// Return true if any section of \"a\" or \"b\" parts (defined by their start/end\n\nimport {Part} from \"./merge\";\n\n// markers) intersect each other, false otherwise.\nfunction anyIntersection(a: Part, b: Part) {\n\treturn (\n\t\t(a.start <= b.start && b.start < a.end) ||\n\t\t(a.start < b.end && b.end <= a.end) ||\n\t\t(b.start <= a.start && a.start < b.end) ||\n\t\t(b.start < a.end && a.end <= b.end)\n\t);\n}\n\nexport default anyIntersection;\n","import anyIntersection from \"./anyIntersection\";\nimport fill from \"./fill\";\nimport {ChannelPart} from \"./findChannels\";\nimport {EmojiPart} from \"./findEmoji\";\nimport {LinkPart} from \"../../../../shared/linkify\";\nimport {NamePart} from \"./findNames\";\n\nexport type Part = {\n\tstart: number;\n\tend: number;\n};\n\ntype TextPart = Part & {\n\ttext: string;\n};\n\ntype Fragment = {\n\tstart: number;\n\tend: number;\n\ttext: string;\n};\n\ntype PartWithFragments = Part & {\n\tfragments: Fragment[];\n};\n\n// Merge text part information within a styling fragment\nfunction assign(textPart: Part, fragment: Fragment) {\n\tconst fragStart = fragment.start;\n\tconst start = Math.max(fragment.start, textPart.start);\n\tconst end = Math.min(fragment.end, textPart.end);\n\tconst text = fragment.text.slice(start - fragStart, end - fragStart);\n\n\treturn Object.assign({}, fragment, {start, end, text});\n}\n\nfunction sortParts(a: Part, b: Part) {\n\treturn a.start - b.start || b.end - a.end;\n}\n\nexport type MergedParts = (TextPart | NamePart | EmojiPart | ChannelPart | LinkPart)[];\n\n// Merge the style fragments within the text parts, taking into account\n// boundaries and text sections that have not matched to links or channels.\n// For example, given a string \"foobar\" where \"foo\" and \"bar\" have been\n// identified as parts (channels, links, etc.) and \"fo\", \"ob\" and \"ar\" have 3\n// different styles, the first resulting part will contain fragments \"fo\" and\n// \"o\", and the second resulting part will contain \"b\" and \"ar\". \"o\" and \"b\"\n// fragments will contain duplicate styling attributes.\nfunction merge(\n\tparts: MergedParts,\n\tstyleFragments: Fragment[],\n\tcleanText: string\n): PartWithFragments[] {\n\t// Remove overlapping parts\n\tparts = parts.sort(sortParts).reduce<MergedParts>((prev, curr) => {\n\t\tconst intersection = prev.some((p) => anyIntersection(p, curr));\n\n\t\tif (intersection) {\n\t\t\treturn prev;\n\t\t}\n\n\t\treturn prev.concat([curr]);\n\t}, []);\n\n\t// Every section of the original text that has not been captured in a \"part\"\n\t// is filled with \"text\" parts, dummy objects with start/end but no extra\n\t// metadata.\n\n\tconst filled = fill(parts, cleanText) as TextPart[];\n\tconst allParts: MergedParts = [...parts, ...filled].sort(sortParts); // Sort all parts identified based on their position in the original text\n\n\t// Distribute the style fragments within the text parts\n\treturn allParts.map((part: any) => {\n\t\tpart.fragments = styleFragments\n\t\t\t.filter((fragment) => anyIntersection(part, fragment))\n\t\t\t.map((fragment) => assign(part, fragment));\n\n\t\treturn part as PartWithFragments;\n\t});\n}\n\nexport default merge;\n","<template>\n\t<button\n\t\tv-if=\"link.type !== 'loading'\"\n\t\t:class=\"['toggle-button', 'toggle-preview', {opened: link.shown}]\"\n\t\t:aria-label=\"ariaLabel\"\n\t\t@click=\"onClick\"\n\t/>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {ClientMessage, ClientLinkPreview} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"LinkPreviewToggle\",\n\tprops: {\n\t\tlink: {type: Object as PropType<ClientLinkPreview>, required: true},\n\t\tmessage: {type: Object as PropType<ClientMessage>, required: true},\n\t},\n\temits: [\"toggle-link-preview\"],\n\tsetup(props, {emit}) {\n\t\tconst ariaLabel = computed(() => {\n\t\t\treturn props.link.shown ? \"Collapse preview\" : \"Expand preview\";\n\t\t});\n\n\t\tconst onClick = () => {\n\t\t\tprops.link.shown = !props.link.shown;\n\t\t\temit(\"toggle-link-preview\", props.link, props.message);\n\t\t};\n\n\t\treturn {\n\t\t\tariaLabel,\n\t\t\tonClick,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreviewToggle.vue?vue&type=template&id=1ba6c5b8&ts=true\"\nimport script from \"./LinkPreviewToggle.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreviewToggle.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span class=\"preview-size\">({{ previewSize }})</span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport friendlysize from \"../js/helpers/friendlysize\";\n\nexport default defineComponent({\n\tname: \"LinkPreviewFileSize\",\n\tprops: {\n\t\tsize: {type: Number, required: true},\n\t},\n\tsetup(props) {\n\t\tconst previewSize = friendlysize(props.size);\n\n\t\treturn {\n\t\t\tpreviewSize,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./LinkPreviewFileSize.vue?vue&type=template&id=19e7dc56&ts=true\"\nimport script from \"./LinkPreviewFileSize.vue?vue&type=script&lang=ts\"\nexport * from \"./LinkPreviewFileSize.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<span\n\t\tclass=\"inline-channel\"\n\t\tdir=\"auto\"\n\t\trole=\"button\"\n\t\ttabindex=\"0\"\n\t\t@click.prevent=\"openContextMenu\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t\t><slot></slot\n\t></span>\n</template>\n\n<script lang=\"ts\">\nimport {defineComponent} from \"vue\";\nimport eventbus from \"../js/eventbus\";\n\nexport default defineComponent({\n\tname: \"InlineChannel\",\n\tprops: {\n\t\tchannel: String,\n\t},\n\tsetup(props) {\n\t\tconst openContextMenu = (event) => {\n\t\t\teventbus.emit(\"contextmenu:inline-channel\", {\n\t\t\t\tevent: event,\n\t\t\t\tchannel: props.channel,\n\t\t\t});\n\t\t};\n\n\t\treturn {\n\t\t\topenContextMenu,\n\t\t};\n\t},\n});\n</script>\n","import { render } from \"./InlineChannel.vue?vue&type=template&id=e318f974&ts=true\"\nimport script from \"./InlineChannel.vue?vue&type=script&lang=ts\"\nexport * from \"./InlineChannel.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// TODO: type\n// @ts-nocheck\n\nimport {h as createElement, VNode} from \"vue\";\nimport parseStyle from \"./ircmessageparser/parseStyle\";\nimport findChannels from \"./ircmessageparser/findChannels\";\nimport {findLinks} from \"../../../shared/linkify\";\nimport findEmoji from \"./ircmessageparser/findEmoji\";\nimport findNames from \"./ircmessageparser/findNames\";\nimport merge, {MergedParts} from \"./ircmessageparser/merge\";\nimport emojiMap from \"./fullnamemap.json\";\nimport LinkPreviewToggle from \"../../components/LinkPreviewToggle.vue\";\nimport LinkPreviewFileSize from \"../../components/LinkPreviewFileSize.vue\";\nimport InlineChannel from \"../../components/InlineChannel.vue\";\nimport Username from \"../../components/Username.vue\";\nimport {ClientMessage, ClientNetwork} from \"../types\";\n\nconst emojiModifiersRegex = /[\\u{1f3fb}-\\u{1f3ff}]|\\u{fe0f}/gu;\n\ntype Fragment = {\n\tclass?: string[];\n\ttext?: string;\n};\n\ntype StyledFragment = Fragment & {\n\ttextColor?: string;\n\tbgColor?: string;\n\thexColor?: string;\n\thexBgColor?: string;\n\n\tbold?: boolean;\n\titalic?: boolean;\n\tunderline?: boolean;\n\tmonospace?: boolean;\n\tstrikethrough?: boolean;\n};\n\n// Create an HTML `span` with styling information for a given fragment\nfunction createFragment(fragment: StyledFragment): VNode | string | undefined {\n\tconst classes: string[] = [];\n\n\tif (fragment.bold) {\n\t\tclasses.push(\"irc-bold\");\n\t}\n\n\tif (fragment.textColor !== undefined) {\n\t\tclasses.push(\"irc-fg\" + fragment.textColor);\n\t}\n\n\tif (fragment.bgColor !== undefined) {\n\t\tclasses.push(\"irc-bg\" + fragment.bgColor);\n\t}\n\n\tif (fragment.italic) {\n\t\tclasses.push(\"irc-italic\");\n\t}\n\n\tif (fragment.underline) {\n\t\tclasses.push(\"irc-underline\");\n\t}\n\n\tif (fragment.strikethrough) {\n\t\tclasses.push(\"irc-strikethrough\");\n\t}\n\n\tif (fragment.monospace) {\n\t\tclasses.push(\"irc-monospace\");\n\t}\n\n\tconst data: {\n\t\tclass?: string[];\n\t\tstyle?: Record<string, string>;\n\t} = {\n\t\tclass: undefined,\n\t\tstyle: undefined,\n\t};\n\n\tlet hasData = false;\n\n\tif (classes.length > 0) {\n\t\thasData = true;\n\t\tdata.class = classes;\n\t}\n\n\tif (fragment.hexColor) {\n\t\thasData = true;\n\t\tdata.style = {\n\t\t\tcolor: `#${fragment.hexColor}`,\n\t\t};\n\n\t\tif (fragment.hexBgColor) {\n\t\t\tdata.style[\"background-color\"] = `#${fragment.hexBgColor}`;\n\t\t}\n\t}\n\n\treturn hasData ? createElement(\"span\", data, fragment.text) : fragment.text;\n}\n\n// Transform an IRC message potentially filled with styling control codes, URLs,\n// nicknames, and channels into a string of HTML elements to display on the client.\nfunction parse(text: string, message?: ClientMessage, network?: ClientNetwork) {\n\t// Extract the styling information and get the plain text version from it\n\tconst styleFragments = parseStyle(text);\n\tconst cleanText = styleFragments.map((fragment) => fragment.text).join(\"\");\n\n\t// On the plain text, find channels and URLs, returned as \"parts\". Parts are\n\t// arrays of objects containing start and end markers, as well as metadata\n\t// depending on what was found (channel or link).\n\tconst channelPrefixes = network ? network.serverOptions.CHANTYPES : [\"#\", \"&\"];\n\tconst userModes = network\n\t\t? network.serverOptions.PREFIX?.prefix?.map((pref) => pref.symbol)\n\t\t: [\"!\", \"@\", \"%\", \"+\"];\n\tconst channelParts = findChannels(cleanText, channelPrefixes, userModes);\n\tconst linkParts = findLinks(cleanText);\n\tconst emojiParts = findEmoji(cleanText);\n\tconst nameParts = findNames(cleanText, message ? message.users || [] : []);\n\n\tconst parts = (channelParts as MergedParts)\n\t\t.concat(linkParts)\n\t\t.concat(emojiParts)\n\t\t.concat(nameParts);\n\n\t// Merge the styling information with the channels / URLs / nicks / text objects and\n\t// generate HTML strings with the resulting fragments\n\treturn merge(parts, styleFragments, cleanText).map((textPart) => {\n\t\tconst fragments = textPart.fragments.map((fragment) => createFragment(fragment));\n\n\t\t// Wrap these potentially styled fragments with links and channel buttons\n\t\tif (textPart.link) {\n\t\t\tconst preview =\n\t\t\t\tmessage &&\n\t\t\t\tmessage.previews &&\n\t\t\t\tmessage.previews.find((p) => p.link === textPart.link);\n\t\t\tconst link = createElement(\n\t\t\t\t\"a\",\n\t\t\t\t{\n\t\t\t\t\thref: textPart.link,\n\t\t\t\t\tdir: preview ? null : \"auto\",\n\t\t\t\t\ttarget: \"_blank\",\n\t\t\t\t\trel: \"noopener\",\n\t\t\t\t},\n\t\t\t\tfragments\n\t\t\t);\n\n\t\t\tif (!preview) {\n\t\t\t\treturn link;\n\t\t\t}\n\n\t\t\tconst linkEls = [link];\n\n\t\t\tif (preview.size > 0) {\n\t\t\t\tlinkEls.push(\n\t\t\t\t\tcreateElement(LinkPreviewFileSize, {\n\t\t\t\t\t\tsize: preview.size,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlinkEls.push(\n\t\t\t\tcreateElement(LinkPreviewToggle, {\n\t\t\t\t\tlink: preview,\n\t\t\t\t\tmessage: message,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\t// We wrap the link, size, and the toggle button into <span dir=\"auto\">\n\t\t\t// to correctly keep the left-to-right order of these elements\n\t\t\treturn createElement(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tdir: \"auto\",\n\t\t\t\t},\n\t\t\t\tlinkEls\n\t\t\t);\n\t\t} else if (textPart.channel) {\n\t\t\treturn createElement(\n\t\t\t\tInlineChannel,\n\t\t\t\t{\n\t\t\t\t\tchannel: textPart.channel,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: () => fragments,\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (textPart.emoji) {\n\t\t\tconst emojiWithoutModifiers = textPart.emoji.replace(emojiModifiersRegex, \"\");\n\t\t\tconst title = emojiMap[emojiWithoutModifiers]\n\t\t\t\t? // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t  `Emoji: ${emojiMap[emojiWithoutModifiers]}`\n\t\t\t\t: null;\n\n\t\t\treturn createElement(\n\t\t\t\t\"span\",\n\t\t\t\t{\n\t\t\t\t\tclass: [\"emoji\"],\n\t\t\t\t\trole: \"img\",\n\t\t\t\t\t\"aria-label\": title,\n\t\t\t\t\ttitle: title,\n\t\t\t\t},\n\t\t\t\tfragments\n\t\t\t);\n\t\t} else if (textPart.nick) {\n\t\t\treturn createElement(\n\t\t\t\tUsername,\n\t\t\t\t{\n\t\t\t\t\tuser: {\n\t\t\t\t\t\tnick: textPart.nick,\n\t\t\t\t\t},\n\t\t\t\t\tdir: \"auto\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdefault: () => fragments,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn fragments;\n\t});\n}\n\nexport default parse;\n","// Create plain text entries corresponding to areas of the text that match no\n// existing entries. Returns an empty array if all parts of the text have been\n\nimport {Part} from \"./merge\";\n\n// parsed into recognizable entries already.\nfunction fill(existingEntries: Part[], text: string) {\n\tlet position = 0;\n\n\t// Fill inner parts of the text. For example, if text is `foobarbaz` and both\n\t// `foo` and `baz` have matched into an entry, this will return a dummy entry\n\t// corresponding to `bar`.\n\tconst result = existingEntries.reduce<Part[]>((acc, textSegment) => {\n\t\tif (textSegment.start > position) {\n\t\t\tacc.push({\n\t\t\t\tstart: position,\n\t\t\t\tend: textSegment.start,\n\t\t\t});\n\t\t}\n\n\t\tposition = textSegment.end;\n\t\treturn acc;\n\t}, []);\n\n\t// Complete the unmatched end of the text with a dummy entry\n\tif (position < text.length) {\n\t\tresult.push({\n\t\t\tstart: position,\n\t\t\tend: text.length,\n\t\t});\n\t}\n\n\treturn result;\n}\n\nexport default fill;\n","import script from \"./ParsedMessage.vue?vue&type=script&lang=ts\"\nexport * from \"./ParsedMessage.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script lang=\"ts\">\nimport {defineComponent, PropType, h} from \"vue\";\nimport parse from \"../js/helpers/parse\";\nimport type {ClientMessage, ClientNetwork} from \"../js/types\";\n\nexport default defineComponent({\n\tname: \"ParsedMessage\",\n\tfunctional: true,\n\tprops: {\n\t\ttext: String,\n\t\tmessage: {type: Object as PropType<ClientMessage | string>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: false},\n\t},\n\trender(context) {\n\t\treturn parse(\n\t\t\ttypeof context.text !== \"undefined\" ? context.text : context.message.text,\n\t\t\tcontext.message,\n\t\t\tcontext.network\n\t\t);\n\t},\n});\n</script>\n","<template>\n\t<span\n\t\t:class=\"['user', {[nickColor]: store.state.settings.coloredNicks}, {active: active}]\"\n\t\t:data-name=\"user.nick\"\n\t\trole=\"button\"\n\t\tv-on=\"onHover ? {mouseenter: hover} : {}\"\n\t\t@click.prevent=\"openContextMenu\"\n\t\t@contextmenu.prevent=\"openContextMenu\"\n\t\t><slot>{{ mode }}{{ user.nick }}</slot></span\n\t>\n</template>\n\n<script lang=\"ts\">\nimport {computed, defineComponent, PropType} from \"vue\";\nimport {UserInMessage} from \"../../server/models/msg\";\nimport eventbus from \"../js/eventbus\";\nimport colorClass from \"../js/helpers/colorClass\";\nimport type {ClientChan, ClientNetwork, ClientUser} from \"../js/types\";\nimport {useStore} from \"../js/store\";\n\ntype UsernameUser = Partial<UserInMessage> & {\n\tmode?: string;\n\tnick: string;\n};\n\nexport default defineComponent({\n\tname: \"Username\",\n\tprops: {\n\t\tuser: {\n\t\t\t// TODO: UserInMessage shouldn't be necessary here.\n\t\t\ttype: Object as PropType<UsernameUser | UserInMessage>,\n\t\t\trequired: true,\n\t\t},\n\t\tactive: Boolean,\n\t\tonHover: {\n\t\t\ttype: Function as PropType<(user: UserInMessage) => void>,\n\t\t\trequired: false,\n\t\t},\n\t\tchannel: {type: Object as PropType<ClientChan>, required: false},\n\t\tnetwork: {type: Object as PropType<ClientNetwork>, required: false},\n\t},\n\tsetup(props) {\n\t\tconst mode = computed(() => {\n\t\t\t// Message objects have a singular mode, but user objects have modes array\n\t\t\tif (props.user.modes) {\n\t\t\t\treturn props.user.modes[0];\n\t\t\t}\n\n\t\t\treturn props.user.mode;\n\t\t});\n\n\t\t// TODO: Nick must be ! because our user prop union includes UserInMessage\n\t\tconst nickColor = computed(() => colorClass(props.user.nick!));\n\n\t\tconst hover = () => {\n\t\t\tif (props.onHover) {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-return\n\t\t\t\treturn props.onHover(props.user as UserInMessage);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tconst openContextMenu = (event: Event) => {\n\t\t\teventbus.emit(\"contextmenu:user\", {\n\t\t\t\tevent: event,\n\t\t\t\tuser: props.user,\n\t\t\t\tnetwork: props.network,\n\t\t\t\tchannel: props.channel,\n\t\t\t});\n\t\t};\n\n\t\tconst store = useStore();\n\n\t\treturn {\n\t\t\tmode,\n\t\t\tnickColor,\n\t\t\thover,\n\t\t\topenContextMenu,\n\t\t\tstore,\n\t\t};\n\t},\n});\n</script>\n","// Generates a string from \"color-1\" to \"color-32\" based on an input string\nexport default (str: string) => {\n\tlet hash = 0;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\thash += str.charCodeAt(i);\n\t}\n\n\t/*\n\t\tModulo 32 lets us be case insensitive for ascii\n\t\tdue to A being ascii 65 (100 0001)\n\t\t while a being ascii 97 (110 0001)\n\t*/\n\treturn \"color-\" + (1 + (hash % 32)).toString();\n};\n","import { render } from \"./Username.vue?vue&type=template&id=6d9d5328&ts=true\"\nimport script from \"./Username.vue?vue&type=script&lang=ts\"\nexport * from \"./Username.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/Volumes/Intel80G/Dev/wiki/thelounge/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t744: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkthelounge\"] = self[\"webpackChunkthelounge\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [772], () => (__webpack_require__(43)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","Auth","storage","location","input","store","messageIds","message","toggled","preview","previews","shown","push","document","body","classList","contains","length","socket","target","channel","commands","require","reduce","acc","path","command","substring","default","args","channels","chanTypes","network","serverOptions","CHANTYPES","channelList","split","c","includes","join","chan","text","switchToChannel","type","router","name","params","query","q","catch","console","error","colorCodeMap","timeFormats","msgDefault","msgWithSeconds","msg12h","msg12hWithSeconds","mobileViewportPixels","events","Map","on","handler","has","get","set","off","filter","item","emit","evt","slice","x1","y1","x2","y2","Math","hypot","sizes","size","i","floor","log","parseFloat","pow","toFixed","isCollapsed","highlight","event","tagName","value","time","dayjs","format","key","window","localStorage","setItem","getItem","remove","removeItem","clear","reload","class","role","_createElementVNode","src","alt","width","height","for","defineComponent","setup","isVisible","ref","onClick","_createElementBlock","_renderSlot","_ctx","components","RevealPassword","inFlight","errorShown","username","password","onAuthFailed","onMounted","onBeforeUnmount","onSubmit","preventDefault","values","user","getStoredUser","method","action","_hoisted_2","_hoisted_3","_hoisted_4","autocapitalize","autocorrect","autocomplete","required","autofocus","_hoisted_7","_createVNode","_component_RevealPassword","slotProps","disabled","_hoisted_10","useStore","commit","SidebarToggle","props","handleSubmit","Function","defaults","Boolean","config","state","serverConfiguration","previousUsername","displayPasswordField","publicPassword","watch","newValue","nextTick","focus","commandsInput","resizeCommandsInput","style","ceil","scrollHeight","tls","isSecureChecked","ports","newPort","port","usernameInput","setSaslAuth","sasl","onNickChanged","usernameRef","formData","FormData","data","forEach","_component_SidebarToggle","uuid","_Fragment","$event","_toDisplayString","lockNetwork","public","_hoisted_39","_hoisted_41","maxlength","_hoisted_43","placeholder","_hoisted_5","_hoisted_9","host","_hoisted_11","min","max","_hoisted_13","_hoisted_16","hasSTSPolicy","rejectUnauthorized","_hoisted_24","_hoisted_26","proxyEnabled","_hoisted_31","proxyHost","_hoisted_33","proxyPort","_hoisted_35","proxyUsername","_hoisted_37","proxyPassword","_hoisted_45","_hoisted_47","nick","pattern","onInput","useHexIp","_hoisted_49","_hoisted_51","realname","_hoisted_53","leaveMessage","_hoisted_55","_hoisted_58","_hoisted_60","_hoisted_65","_hoisted_67","checked","onChange","_hoisted_79","saslAccount","_hoisted_81","saslPassword","_hoisted_87","NetworkForm","queryParams","assign","parsedParams","Array","isArray","prototype","hasOwnProperty","call","match","Number","String","parseOverrideParams","_createBlock","_component_NetworkForm","className","to","route","useRoute","_component_router_link","custom","navigate","isExactActive","active","onKeypress","SettingTabItem","_component_SettingTabItem","Navigation","dispatch","sync","_component_Navigation","_component_router_view","href","rel","_hoisted_30","_hoisted_34","checkNow","versionData","versionStatus","_hoisted_1","latest","version","prerelease","_hoisted_6","url","_hoisted_8","_hoisted_12","versionDataExpired","_hoisted_14","VersionChecker","isApple","navigator","platform","isTouch","maxTouchPoints","_component_VersionChecker","gitCommit","_hoisted_18","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_32","_hoisted_36","_hoisted_40","_hoisted_44","_hoisted_61","_hoisted_48","_hoisted_54","_hoisted_62","_hoisted_72","_hoisted_78","_hoisted_71","_hoisted_89","_hoisted_95","_hoisted_82","_hoisted_88","_hoisted_96","_hoisted_106","_hoisted_112","_hoisted_99","_hoisted_105","_hoisted_113","_hoisted_121","_hoisted_125","_hoisted_116","_hoisted_120","_hoisted_126","_hoisted_134","_hoisted_138","_hoisted_129","_hoisted_133","_hoisted_139","_hoisted_147","_hoisted_151","_hoisted_142","_hoisted_146","_hoisted_152","_hoisted_160","_hoisted_164","_hoisted_155","_hoisted_159","_hoisted_165","_hoisted_173","_hoisted_177","_hoisted_168","_hoisted_172","_hoisted_178","_hoisted_186","_hoisted_190","_hoisted_181","_hoisted_185","_hoisted_191","_hoisted_199","_hoisted_203","_hoisted_194","_hoisted_198","_hoisted_204","_hoisted_212","_hoisted_216","_hoisted_207","_hoisted_211","_hoisted_217","_hoisted_218","_hoisted_219","_hoisted_227","_hoisted_231","_hoisted_222","_hoisted_226","_hoisted_232","_hoisted_240","_hoisted_244","_hoisted_235","_hoisted_239","_hoisted_245","_hoisted_253","_hoisted_257","_hoisted_248","_hoisted_252","_hoisted_258","_hoisted_266","_hoisted_270","_hoisted_261","_hoisted_265","_hoisted_271","_hoisted_279","_hoisted_283","_hoisted_274","_hoisted_278","_hoisted_284","_hoisted_292","_hoisted_296","_hoisted_287","_hoisted_291","_hoisted_297","_hoisted_305","_hoisted_309","_hoisted_300","_hoisted_304","_hoisted_310","_hoisted_311","settings","searchEnabled","_hoisted_353","_hoisted_354","changelog","patchChangelog","querySelectorAll","link","setAttribute","querySelector","add","onUpdated","current","innerHTML","networkData","setNetworkData","getters","findNetwork","tabindex","dir","keepScrollPosition","showMoreButton","isContentShown","imageViewer","inject","imageViewerKey","onBeforeRouteUpdate","from","next","closeViewer","content","container","moreButtonLabel","computed","imageMaxSize","maxSize","friendlysize","handleResize","offsetWidth","onPreviewReady","sourceLoaded","onPreviewUpdate","updateShownState","defaultState","media","links","eventbus","onUnmounted","onThumbnailClick","onThumbnailError","thumb","onMoreClick","opened","decoding","onError","onAbort","onLoad","title","head","preload","controls","onCanplay","mediaType","_hoisted_17","_hoisted_21","_hoisted_23","requireViews","MessageTypes","ParsedMessage","LinkPreview","Username","isPreviousSource","focused","timeFormat","use12hClock","showSeconds","constants","messageTime","messageTimeLocale","localetime","messageComponent","isAction","self","_renderList","param","_resolveDynamicComponent","_component_Username","_component_ParsedMessage","_component_LinkPreview","showInActive","statusmsgGroup","isHtml","searchOpened","searchInput","useRouter","searchInputField","onSearchPage","closeSearch","toggleSearch","blur","searchMessages","err","onBlur","onKeyup","onMousedown","calendar","localeDate","hoursPassed","Date","now","parse","toString","dayChange","friendlyDate","sameDay","lastDay","lastWeek","sameElse","Message","DateMarker","MessageSearchForm","chat","loadMoreButton","offset","moreResultsAvailable","oldScrollTop","oldChatHeight","messages","results","messageSearchResults","chanId","parseInt","findChannel","setActiveChannel","clearSearchState","doSearch","networkUuid","channelName","searchTerm","jumpToBottom","async","el","scrollTop","currentChatHeight","shouldDisplayDateMarker","previousMessage","getDay","onShowMoreClick","jump","_component_MessageSearchForm","messageSearchPendingQuery","isConnected","_component_DateMarker","_component_Message","condensedText","obj","condensedTypes","modeChangesCount","char","part","quit","strings","pop","onCollapseClick","closed","unreadMarkerShown","MessageCondensed","historyObserver","skipNextScrollEvent","isWaitingForNextTick","scrolledToBottom","lastMessage","historyLoading","lastId","condensed","statusMessages","onLoadButtonObserved","entries","entry","isIntersecting","IntersectionObserver","root","condensedMessages","lastCondensedContainer","firstUnread","heightOld","handleScroll","offsetHeight","addEventListener","passive","observe","unobserve","deep","pendingMessage","onBeforeUpdate","removeEventListener","disconnect","onCopy","InstallTrigger","selection","getSelection","anchorNode","focusNode","range","getRangeAt","documentFragment","cloneContents","div","createElement","appendChild","selectAllChildren","setTimeout","removeChild","removeAllRanges","addRange","clipboard","oldDate","newDate","getDate","getMonth","getFullYear","shouldDisplayUnreadMarker","currentMessage","onLinkPreviewToggle","msgId","moreHistoryAvailable","_component_MessageCondensed","onToggleLinkPreview","emojiSearchTerms","emojiMap","emojiStrategy","search","term","callback","fuzzyGrep","replace","template","string","original","index","nicksStrategy","completeNicks","val","replaceNick","chanStrategy","word","words","completeChans","commandStrategy","cmds","getCommands","foregroundColorStrategy","toLowerCase","fuzzy","pre","post","rendered","backgroundColorStrategy","pair","concat","position","test","array","isFuzzy","users","sort","a","b","u","me","otherUser","rawNicks","w","indexOf","formattingHotkeys","bracketWraps","_","uploadInput","autocompletionRef","setInputSize","getComputedStyle","lineHeight","blurInput","hide","tabCount","lastMatch","currentMatches","detail","Mousetrap","bind","selectionStart","newMatch","remainder","substr","selectionEnd","dispatchEvent","CustomEvent","strategies","editor","TextareaEditor","textcomplete","Textcomplete","dropdown","placement","destroy","autocompletion","inputTrap","modifier","wrapCursor","isAutoCompleting","onRow","undefined","totalRows","inputHistoryPosition","inputHistory","fileUpload","upload","onUploadInputChange","files","openFileUpload","click","getInputPlaceholder","splice","cmd","shift","setPendingMessage","enterkeyhint","multiple","modes","userSearchInput","activeUser","userlist","filteredUsers","fuzzyFilter","extract","groupedUsers","groups","result","mode","scrollToActiveUser","scrollIntoView","block","inline","setUserSearchInput","getModeClass","selectUser","rect","getBoundingClientRect","ev","MouseEvent","view","bubbles","cancelable","clientX","left","clientY","top","hoverUser","removeHoverUser","navigateUserList","direction","stopImmediatePropagation","abort","currentIndex","onMouseleave","onKeydown","date","localeTime","ban","hostmask","banned_by","banned_at","invite","invited_by","invited_at","num_users","topic","when","MessageList","ChatInput","ChatUserList","emits","messageList","topicInput","specialComponent","special","ListBans","ListInvites","ListChannels","ListIgnored","channelChanged","usersOutdated","editTopic","newTopic","hideUserVisibleError","saveTopic","openContextMenu","openMentions","lang","motd","empty","onDblclick","_component_ChatUserList","_component_MessageList","currentUserVisibleError","_component_ChatInput","Chat","activeChannel","chanInStore","unread","_component_Chat","onChannelChanged","prefetch","_hoisted_19","coloredNicks","_hoisted_38","nickPostfix","theme","themes","displayName","userStyles","installPromptEvent","canRegisterProtocol","hasInstallPromptEvent","registerProtocolHandler","nativeInstallPrompt","prompt","onForceSyncClick","registerProtocol","uri","origin","pathname","uploadCanvas","syncSettings","serverHasSettings","_hoisted_15","_hoisted_20","awayMessage","session","lastUse","signOut","token","agent","ip","Session","passwordChangeStatus","old_password","new_password","verify_password","currentSession","sessions","find","activeSessions","otherSessions","passwordErrors","missing_fields","password_mismatch","password_incorrect","update_failed","changePassword","response","success","ldapEnabled","_component_Session","_hoisted_22","isIOS","userAgent","playNotification","Audio","play","onPushButtonClick","webpush","pushNotificationState","desktopNotifications","desktopNotificationState","notification","notifyAllMessages","highlights","highlightExceptions","createRouter","history","createWebHashHistory","routes","component","SignIn","beforeEnter","Connect","Settings","children","GeneralSettings","AppearanceSettings","AccountSettings","NotificationSettings","Help","Changelog","NetworkEdit","RoutedChat","SearchResults","routeName","currentRoute","beforeEach","appLoaded","matched","afterEach","innerWidth","serviceWorker","channelTarget","io","transports","JSON","dataset","autoConnect","reconnection","defaultSettingConfig","apply","defaultConfig","auto","advanced","Notification","permission","requestPermission","getElementById","serverTheme","themeEl","themeUrl","HTMLLinkElement","hrefAttr","attributes","getNamedItem","newTheme","metaSelector","HTMLMetaElement","themeColor","element","newConfig","settingName","normalizeConfig","createState","loadFromLocalStorage","storedSettings","assignStoredSettings","defaultSettings","newSettings","appName","DesktopNotificationState","detectDesktopNotificationState","Granted","isSecureContext","Blocked","NoHttps","Unsupported","storePattern","networks","mentions","hasServiceWorker","sidebarOpen","sidebarDragging","userlistOpen","mutations","netChan","refreshDesktopNotificationState","payload","removeNetwork","networkId","findIndex","n","sortNetworks","sortFn","toggleSidebar","toggleUserlist","addMessageSearchResults","actions","partChannel","msg","findChannelOnCurrentNetwork","findChannelOnNetwork","highlightCount","muted","initChannel","m","reverse","totalMessages","Symbol","createStore","settingsStore","namespaced","syncAll","force","applyAll","update","settingConfig","stringify","createSettingsStore","baseUseStore","registerModule","instance","xhr","fileQueue","tokenKeepAlive","overlay","uploadProgressbar","onDragEnter","this","dragEnter","onDragOver","dragOver","onDragLeave","dragLeave","onDrop","drop","onPaste","paste","init","uploadNextFileInQueue","mounted","unmounted","dataTransfer","types","relatedTarget","items","kind","getAsFile","triggerUpload","clipboardData","handleResponse","wasQueueEmpty","maxFileSize","fileUploadMaxFileSize","file","requestToken","setProgress","toggle","setInterval","startsWith","renderImage","newFile","performUpload","fileReader","FileReader","onabort","onerror","onload","img","Image","canvas","ctx","getContext","drawImage","toBlob","blob","File","readAsDataURL","XMLHttpRequest","percent","loaded","total","onreadystatechange","readyState","DONE","responseText","statusText","status","append","open","send","clearInterval","insertUploadUrl","fullURL","URL","textbox","HTMLTextAreaElement","initStart","headToCursor","cursorToTail","textBeforeTail","updateCursor","initialize","handleDisconnect","updateLoadingMessage","requestIdleCallback","timeout","loading","textContent","attempt","lastServerHash","showSignIn","g_TheLoungeRemoveLoading","reloadPage","mergeChannelData","oldChannels","newChannels","currentChannel","serverHash","doFastAuth","openChannel","hasConfig","newNetworks","stored","collapsedNetworks","Set","currentNetwork","isJoinChannelShown","mergeNetworkData","handledQuery","URLSearchParams","cleanParams","cleanUri","hash","replaceState","stringUri","protocol","hostname","parseIrcUri","fromEntries","handleQueryParams","shouldOpen","unshift","receivingChannel","isActiveChannel","targetId","hasFocus","exception","cleanIrcMessage","timestamp","ready","then","registration","postMessage","tag","badge","icon","close","notifyMessage","messageLimit","getTime","idx","updateUserList","previewIndex","connected","secure","isCurrentNetworkBeingRemoved","order","currentTheme","t","defaultTheme","returnValue","packages","expiresAt","expires","pendingQuery","navigateWindow","flatChannels","isChannelCollapsed","jumpToChannel","targetChannel","isIgnoredKeybind","onTwoFingerSwipe","touches","performance","center","screenX","screenY","last","centersAreEqual","hist","previous","distance","abs","tangent","getCardinalDirection","getSwipe","listenForTwoFingerSwipes","cardinalDirection","outer_loop","ignoredKeys","altKey","which","ctrlKey","metaKey","favicon","faviconNormal","getAttribute","faviconAlerted","other","VueApp","createApp","App","use","mount","nav","setAppBadge","clearAppBadge","errorHandler","togglePushSubscription","pushManager","getSubscription","existingSubscription","unsubscribe","successful","subscribe","applicationServerKey","userVisibleOnly","subscription","toJSON","hasSubscriptionOnServer","register","matchFormatting","trim","Props","delay","delayOnTouchOnly","touchStartThreshold","handle","draggable","ghostClass","dragClass","group","itemKey","list","containerRef","sortable","newDraggable","Sortable","onChoose","onUnchoose","onEnd","delete","count","isFiltering","isChannelVisible","getAriaLabel","extra","transition","opacity","onContextmenu","ChannelWrapper","joinChannelLabel","unreadCount","roundBadgeNumber","collapseNetwork","getExpandLabel","_component_ChannelWrapper","useCloseChannel","button","directives","inputChannel","inputPassword","existingChannel","JoinChannel","NetworkLobby","Channel","Draggable","searchText","activeSearchItem","startDrag","networklist","sidebarWasClosed","moveItemInArray","newItems","collapseNetworkHelper","expandNetwork","activateSearch","activeElement","deactivateSearch","setActiveSearchItem","scrollToActive","LONG_TOUCH_DURATION","setSearchText","selectResult","navigateResults","r","onChannelSort","oldIndex","newIndex","unparsedId","onNetworkSort","onDraggableTouchStart","onDraggableTouchMove","touch","currentPosition","onDraggableTouchEnd","onDraggableChoose","originalEvent","pointerType","isTouchEvent","TouchEvent","PointerEvent","onDraggableUnchoose","onFocus","onMouseenter","_component_Channel","_component_NetworkLobby","_component_Draggable","onTouchstart","onTouchmove","onTouchend","onTouchcancel","onToggleJoinChannel","_component_JoinChannel","NetworkList","touchStartPos","touchCurPos","touchStartTime","menuWidth","menuIsMoving","menuIsAbsolute","sidebar","onTouchMove","distX","distY","onTouchEnd","devicePixelRatio","transform","diff","absDiff","onTouchStart","styles","isDevelopment","process","isPublic","_component_NetworkList","isActive","isUpdateAvailable","viewer","image","previousImage","nextImage","x","y","scale","computeImageStyles","transformX","transformY","calculateZoomShift","newScale","oldScale","imageWidth","centerX","centerY","correctPosition","imageEl","viewerEl","widthScaled","heightScaled","containerWidth","containerHeight","reduceTouches","totalX","totalY","totalScale","i2","sqrt","newLink","oldLink","flat","setPrevNextImages","onImageLoad","naturalWidth","naturalHeight","prepareImage","onImageMouseDown","stopPropagation","startX","startY","startTransformX","startTransformY","movedDistance","mouseMove","moveEvent","newX","newY","mouseUp","upEvent","onMouseWheel","deltaY","delta","fixedPosition","onImageTouchStart","currentTouches","touchEndFingers","currentTransform","startTransform","touchMove","deltaX","deltaScale","touchEnd","endEvent","changedTouches","onWheel","generateChannelContextMenu","closeChannel","label","lobby","humanFriendlyChanTypeMap","chanType","setMutedTo","generateInlineChannelContextMenu","generateUserContextMenu","currentChannelUser","whois","modeCharToName","modeTextTemplate","revoke","symbol","give","networkModeSymbols","PREFIX","symbols","compare","p1","p2","prefix","isOpen","passthrough","contextMenu","previousActiveElement","activeItem","enablePointerEvents","clickItem","pos","menuHeight","pageX","pageY","innerHeight","positionContextMenu","openChannelContextMenu","openInlineChannelContextMenu","openUserContextMenu","containerClick","currentTarget","navigateMenu","nextItem","hoverItem","clickActiveItem","incoming","cb","relativeTime","isLoading","resolvedMessages","togglePopup","closePopup","fromNow","dismissMention","dismissAllMentions","contextMenuKey","confirmDialogKey","Sidebar","ImageViewer","ContextMenu","ConfirmDialog","Mentions","loungeWindow","confirmDialog","provide","viewportClasses","notified","debouncedResize","dayChangeTimeout","escapeKey","toggleUserList","toggleMentions","msUntilNextDay","today","viewportWidth","isUserlistOpen","prepareOpenStates","throttle","emitDayChange","clearTimeout","_component_Sidebar","_component_Mentions","_component_ImageViewer","_component_ContextMenu","_component_ConfirmDialog","new_ident","new_host","ctcpMessage","errorMessage","reason","invitedYou","account","gecos","raw_modes","cleanText","lines","every","line","new_nick","whowas","ident","actual_hostname","actual_ip","real_name","registered_nick","operator","helpop","bot","away","certfp","server","server_info","logonTime","idle","idleTime","colorRx","hexColorRx","controlCodesRx","properties","escapeRegExpCharSet","raw","escapeRegExp","LinkifyIt","noschema","schema","linkify","tlds","commonSchemes","makeLinkPart","start","end","lastIndex","regExp","emojiRegExp","nickRegExp","sortParts","ariaLabel","previewSize","emojiModifiersRegex","styleFragments","colorCodes","bold","textColor","bgColor","hexColor","hexBgColor","italic","underline","strikethrough","monospace","resetStyle","emitFragment","processedText","fragmentStart","toUpperCase","tmp","parseStyle","prev","curr","lastEntry","fragment","channelParts","channelPrefixes","userModes","userModePattern","channelPrefixPattern","channelRegExp","RegExp","exec","findChannels","pref","linkParts","matches","findLinks","emojiParts","emoji","findEmoji","nameParts","nicks","findNames","parts","filled","existingEntries","textSegment","fill","some","p","anyIntersection","fragments","textPart","fragStart","merge","classes","hasData","color","createFragment","linkEls","LinkPreviewFileSize","LinkPreviewToggle","InlineChannel","emojiWithoutModifiers","functional","render","context","onHover","nickColor","str","charCodeAt","colorClass","hover","_toHandlers","mouseenter","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","prop","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}